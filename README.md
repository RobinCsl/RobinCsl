### Hi there üëã

### ‚úçÔ∏è Blog Posts
<!--START_SECTION:blog-feed-->
#### [Build Standalone Expo .apk and .ipa with Turtle CLI [deprecated]](https:&#x2F;&#x2F;www.robincussol.com&#x2F;build-standalone-expo-apk-ipa-with-turtle-cli&#x2F;) 
*This article was updated on February 7, 2023.
NOTE: As of Expo SDK 47, the following method does not work any more.
With the release of EAS builds, it is necessary to have Internet access to create standalone Expo apps locally; see Running builds on your own infrastructure on Expo docs.
You can still use the React Native way to build applications locally after generating necessary files with expo prebuild (see this GitHub comment on expo&#x2F;eas-cli).
This post will not receive further updates.
A great way to start writing React Native applications is to use Expo. You don‚Äôt even need to setup a development environment to get started thanks to Snack, an online React Native application editor. Your application is public by default. Sharing has never been that easy.

Brown turtle swimming underwater, Photo by Wexor Tmg on Unsplash
However, you would like to share an application exclusively with some people, not through an app store or any public channel. One possibility is to share the built application file, e.g. an .apk file for Android and an .ipa file for iOS.
Expo is so great a service (oh, and did I mention free?) that they offer you to publish your app on their servers and if you wanted to build these .apk and .ipa files, you could do so on their servers.
The flow looks like:
$ expo publish
$ expo build:&lt;PLATFORM&gt;
and you obtain a nice URL to the artifact created for you when the build finishes.
But, again, this is public. On a server you don‚Äôt control. (Although, if you made the same mistake as I did, a ticket to their support can delete any files you had wished to keep private. ü•á)
Luckily for you, Expo provide the tools they are using on their servers for free (did I mention they‚Äôre great!?). The build process relies on a CLI tool called turtle-cli. It is open-source and available on GitHub.
Let us go through an example of how to create your application file without resorting to Expo servers. That means you can keep an application private and also build your application while being offline.
The following instructions assume you have bash and Node.js available. In my experience, using the current LTS version of Node.js (version 16.13.2) works best.
Caveat: I could not complete the iOS instructions to the end since I do not have an Apple Developer paid account.
We will go through the following steps:
1. Turtle CLI
2. Create a dummy application
3. Publish Expo app on local server
4. Create APK file ‚Äì Android

4.1. Prerequisites
4.2. Create Keystore
4.3. Build APK
5. Create IPA file ‚Äì iOS

5.1. Prerequisites
5.2. Create Signing keys
5.3. Build IPA
6. Distribute and install

6.1. on Android
6.2. on iOS
Resources
A condensed version of these steps without much explanation or context is available on the accompanying GitHub repository.
1. Turtle CLI
To install Turtle CLI, run
$ npm install -g turtle-cli
This will make command turtle globally available on your system. To verify it was correctly installed, let‚Äôs print the version:
$ turtle -V
0.24.3
2. Create a dummy application
Let‚Äôs create a dummy application using Expo CLI. In your terminal, run
$ npx expo init ExampleApplication
It will ask you a few questions:
# Expo version 5.0.3
npx expo init ExampleApplication
? Choose a template: ‚Ä∫ - Use arrow-keys. Return to submit.
    ----- Managed workflow -----
‚ùØ   blank               a minimal app as clean as an empty canvas
    blank (TypeScript)  same as blank but with TypeScript configuration
    tabs (TypeScript)   several example screens and tabs using react-navigation and TypeScript
    ----- Bare workflow -----
    minimal             bare and minimal, just the essentials to get you started
The blank template is enough for us.
If you have yarn installed, Expo will use it by default to install dependencies. You can use the --npm flag in the init command if you‚Äôd prefer to use npm instead.
Once it‚Äôs done setting up your project, you should see the following output in the terminal:
‚úÖ Your project is ready!

To run your project, navigate to the directory and run one of the following yarn commands.

- cd ExampleApplication
- yarn start
Run the commands and let‚Äôs verify the generated boilerplate works in our emulators:


To finish setting up the dummy application, you need to configure the app.json file because some configuration keys must be specified to build a standalone app.
If you would like to know more about these standalone app specific configurations, check Expo‚Äôs documentation for iOS and for Android.
For this tutorial, it is only necessary to specify the keys &quot;bundleIdentifier&quot; under &quot;ios&quot;, and &quot;package&quot; under &quot;android&quot; in your app.json file:
...
    &quot;ios&quot;: {
      ...
      &quot;bundleIdentifier&quot;: &quot;com.example.exampleApplication&quot;,
      ...
    },
    &quot;android&quot;: {
      ...
      &quot;package&quot;: &quot;com.example.example_application&quot;,
      ...
    }
...
3. Publish Expo app on local server
Expo has this notion of app publishing: it allows you to share a link or QR code to Expo‚Äôs website and anyone can run your app through the Expo app on their devices.
Having your app published is also necessary for over-the-air (OTA) updates, allowing seamless updates to your application, and to publish your application (i.e. building your application files on Expo servers).
You would typically run
$ expo login -u $EXPO_USERNAME -p $EXPO_PASSWORD
$ expo publish
and your app would then be available at https:&#x2F;&#x2F;expo.dev&#x2F;&lt;EXPO_USERNAME&gt;&#x2F;&lt;APP_NAME&gt;.
To have your Expo app ‚Äúpublished‚Äù on your local server (and avoid public publishing on Expo servers), you will use a different command:
$ expo export --dev --public-url &lt;your-url-here&gt;
The --dev flag is necessary because you will use a non-https server to publish your Expo app. Note that this prevents you from using OTA updates.
Your server does not need to be running for this step, but you do need to know which local URL you are going to use in advance. This tuorial assumes you will run a local server at http:&#x2F;&#x2F;127.0.0.1:8000.
You can now export the app:
$ expo export --dev --public-url http:&#x2F;&#x2F;127.0.0.1:8000
...
Export was successful. Your exported files can be found in dist
This command will create a dist directory containing the iOS and Android JavaScript bundles and the different assets you are using.
dist
‚îú‚îÄ‚îÄ android-index.json
‚îú‚îÄ‚îÄ assets
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ 13685372945d816a2b474fc082fd9aaa
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ 140c53a7643ea949007aa9a282153849
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ ...
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ fdbedb7e67aa7c0ecad83d9c2fa4dfba
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ fdc01171a7a7ea76b187afcd162dee7d
‚îú‚îÄ‚îÄ bundles
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ android-a9defc54fb2ffdb7e6fdaf5b8d0be751.js
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ ios-a29c3e4ac97a2abdc5208fd4f06e7708.js
‚îî‚îÄ‚îÄ ios-index.json
You can now serve the dist directory on your web server, e.g.
$ npx http-server -p 8000 dist
Note: if for some reason you need to re-export your application (because you modified your app.json file since the last export, for instance), you must first remove the dist directory:
# assuming you are at the root of the project
$ rm -rf dist
$ expo export --dev --public-url http:&#x2F;&#x2F;127.0.0.1:8000
4. Create APK file ‚Äì Android
First, verify that your local server is running. For example, you should see a similar output:
$ curl http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;android-index.json
{&quot;name&quot;:&quot;ExampleApplication&quot;,&quot;slug&quot;:&quot;ExampleApplication&quot;,&quot;version&quot;:&quot;1.0.0&quot;,&quot;orientation&quot;:&quot;portrait&quot;,&quot;icon&quot;:&quot;.&#x2F;assets&#x2F;icon.png&quot;,&quot;splash&quot;:{&quot;image&quot;:&quot;.&#x2F;assets&#x2F;splash.png&quot;,&quot;resizeMode&quot;:&quot;contain&quot;,&quot;backgroundColor&quot;:&quot;#ffffff&quot;,&quot;imageUrl&quot;:&quot;http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;assets&#x2F;201a91bd1740bb1d6a1dbad049310724&quot;}...
4.1. Prerequisites
For Turtle CLI to work correctly to create an .apk file for Android, you need to make sure the following dependency is installed: Java Development Kit (version 8).
If you know which Expo SDK version you are going to use, you can run
$ turtle setup:android --sdk-version &lt;SDK-VERSION&gt;
This will take some time:
$ turtle setup:android --sdk-version 44.0.5
Jan 20 20:22:45 turtle[61127] INFO:  Downloading Android SDK
  platform: &quot;android&quot;
  buildPhase: &quot;setting up environment&quot;
downloading [&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;] 98% 0.2s
...
Jan 20 20:26:56 turtle[61127] INFO:  shell app for SDK 44.0.5 doesn&#39;t exist, downloading...
  platform: &quot;android&quot;
  buildPhase: &quot;setting up environment&quot;
downloading [&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; ] 95% 0.5sJan 20 20:27:08 turtle[61127] INFO:  shell app has been downloaded
  platform: &quot;android&quot;
  buildPhase: &quot;setting up environment&quot;
...
Jan 20 20:29:51 turtle[61127] INFO:  dependencies installed!
  platform: &quot;android&quot;
  buildPhase: &quot;setting up environment&quot;
Jan 20 20:29:51 turtle[61127] INFO:  it&#39;s all set!
  platform: &quot;android&quot;
  buildPhase: &quot;setting up environment&quot;
In the meantime, you can move on to the next section.
4.2. Create Keystore
Just like any other Android app, this app must be signed with some security certificates. In Android-land, as far as I understand, it‚Äôs called a keystore. The instructions to create such a keystore file are available on the Android Developers documentation.
Basically, just create a dummy Android project with Android Studio, and then go to Build &gt; Generate Signed Bundle &#x2F; APK.... Choose APK and press Next. The UI will ask you which app you want to sign, and your dummy app should be pre-selected. On the same screen, press on the button Create new...; just fill the form and you‚Äôre good to go.
Alternatively, if you have keytool CLI utility available on your system (you can check that by trying keytool --help in your terminal), you can generate a keystore file with the following command
$ keytool -genkeypair -v -keystore keystore.jks -alias keyalias -keyalg RSA -keysize 2048 -validity 9125
Enter keystore password:
Re-enter new password:
What is your first and last name?
  [Unknown]:
What is the name of your organizational unit?
  [Unknown]:
What is the name of your organization?
  [Unknown]:
What is the name of your City or Locality?
  [Unknown]:
What is the name of your State or Province?
  [Unknown]:
What is the two-letter country code for this unit?
  [Unknown]:
Is CN&#x3D;Unknown, OU&#x3D;Unknown, O&#x3D;Unknown, L&#x3D;Unknown, ST&#x3D;Unknown, C&#x3D;Unknown correct?
  [no]:  yes

Generating 2,048 bit RSA key pair and self-signed certificate (SHA256withRSA) with a validity of 9,125 days
	for: CN&#x3D;Unknown, OU&#x3D;Unknown, O&#x3D;Unknown, L&#x3D;Unknown, ST&#x3D;Unknown, C&#x3D;Unknown
Enter key password for &lt;keyalias&gt;
	(RETURN if same as keystore password):
Re-enter new password:
[Storing keystore.jks]

Warning:
The JKS keystore uses a proprietary format. It is recommended to migrate to PKCS12 which is an industry standard format using &quot;keytool -importkeystore -srckeystore keystore.jks -destkeystore keystore.jks -deststoretype pkcs12&quot;.
As a TL;DR, you can just download a dummy certificate on the accompanying repository under should-be-private&#x2F;keystore.jks, for testing purposes only. The keystore file is hugely important if you ever plan to submit your app to Google Play store: it‚Äôs the only way to assert you‚Äôre the rightful owner to provide new updates to your app.
File: keystore.jks
keystorepassword
keyalias
keypassword
4.3. Build APK
Make sure that you are serving the dist directory on http:&#x2F;&#x2F;127.0.0.1:8000 as explained above in Run a local server. Assuming you are using bash as your shell, from the root of your project, run:
EXPO_ANDROID_KEYSTORE_PASSWORD&#x3D;&quot;keystorepassword&quot; \
EXPO_ANDROID_KEY_PASSWORD&#x3D;&quot;keypassword&quot; \
turtle build:android \
  --type apk \
  --keystore-path .&#x2F;should-be-private&#x2F;keystore.jks \
  --keystore-alias &quot;keyalias&quot; \
  --allow-non-https-public-url \
  --public-url http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;android-index.json
Note that you need the flag --public-url to point to http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;android-index.json. In addition, it is also necessary to use the --type apk flag to produce an APK file since version 0.8.0 of turtle-cli.
The build may take some time:
Jan 20 20:38:17 turtle[61719] INFO:  Using manifest: {
  &quot;name&quot;: &quot;ExampleApplication&quot;,
  &quot;slug&quot;: &quot;ExampleApplication&quot;,
  &quot;version&quot;: &quot;1.0.0&quot;,
  &quot;orientation&quot;: &quot;portrait&quot;,
  &quot;icon&quot;: &quot;.&#x2F;assets&#x2F;icon.png&quot;,
...
Jan 20 20:38:51 turtle[61719] INFO:  Starting a Gradle Daemon (subsequent builds will be faster)
  platform: &quot;android&quot;
  buildPhase: &quot;running gradle&quot;
  source: &quot;stdout&quot;
...
Once it finishes, you should see this output in your terminal:
Jan 20 20:43:19 turtle[61719] INFO:  copied build to ~&#x2F;expo-apps&#x2F;@anonymous__ExampleApplication-7f15208a56304617a200538cacd2e50e-signed.apk
  platform: &quot;android&quot;
  buildPhase: &quot;copying build artifact&quot;
This message gives you the location of your built .apk file. You can now move on to the Distribute and install section below if you are not interested in creating an .ipa file for iOS.
Note: if the build fails because of some Gradle error, like Could not resolve com.theartofdev.edmodo:android-image-cropper:2.8.0, make sure to open Android Studio and update the Android SDK and SDK Build-Tools. This should fix it.
5. Create IPA file ‚Äì iOS
First, verify that your local server is running, e.g.
$ curl http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;ios-index.json
{&quot;name&quot;:&quot;ExampleApplication&quot;,&quot;slug&quot;:&quot;ExampleApplication&quot;,&quot;version&quot;:&quot;1.0.0&quot;,&quot;orientation&quot;:&quot;portrait&quot;,&quot;icon&quot;:&quot;.&#x2F;assets&#x2F;icon.png&quot;,&quot;splash&quot;:{&quot;image&quot;:&quot;.&#x2F;assets&#x2F;splash.png&quot;,&quot;resizeMode&quot;:&quot;contain&quot;,&quot;backgroundColor&quot;:&quot;#ffffff&quot;,&quot;imageUrl&quot;:&quot;http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;assets&#x2F;201a91bd1740bb1d6a1dbad049310724&quot;...
5.1. Prerequisites
For Turtle CLI to work correctly to create an .ipa file for iOS, you need to make sure your system is macOS and that the following dependencies are installed:
Xcode (version 13.2.1 or newer)
fastlane
Note: make sure that you have run Xcode at least once and that you have agreed to the license agreements.
For more details, see Expo‚Äôs documentation.
If you know which Expo SDK version you are going to use, you can run
$ turtle setup:ios --sdk-version &lt;SDK-VERSION&gt;
If it errors out, saying that you don‚Äôt have the right version of fastlane, try re-installing fastlane (guide). The version used in this article is fastlane 2.200.0.
This will take some time:
$ turtle setup:ios --sdk-version 44.0.5
Jan 20 21:18:03 turtle[48488] INFO:  shell app for SDK 44.0.5 doesn&#39;t exist, downloading...
  platform: &quot;ios&quot;
  buildPhase: &quot;setting up environment&quot;
downloading [                    ] 1% 8514.8s
...
...
Jan 20 21:24:58 turtle[48488] INFO:  it&#39;s all set!
  platform: &quot;ios&quot;
  buildPhase: &quot;setting up environment&quot;
In the meantime, you can move on to the next section.
5.2. Create Signing keys
This assumes you have an Apple Developer Account, which is a paid account.
To create your distribution certificate file, or .p12 file, you can follow this guide.
You will also need your Apple Team ID and a Provisioning Profile that you can generate through Xcode as well. This other guide covers in greater lengths what all these cerficates are for and how to obtain them.

Note that the provisioning profile expires in 6 days in my case, since I do not have an Apple Developer paid account.
Sadly, it is not possible to share example files.
5.3. Build IPA
Make sure that you are serving the dist directory on http:&#x2F;&#x2F;127.0.0.1:8000 as explained Run a local server. Assuming you are using bash as your shell, from the root of your project, run:
EXPO_IOS_DIST_P12_PASSWORD&#x3D;&quot;&lt;PASSWORD HERE&gt;&quot; \
turtle build:ios \
  --team-id YOUR_TEAM_ID \
  --dist-p12-path &#x2F;path&#x2F;to&#x2F;your&#x2F;dist&#x2F;cert.p12 \
  --provisioning-profile-path &#x2F;path&#x2F;to&#x2F;your&#x2F;provisioning&#x2F;profile.mobileprovision \
  --allow-non-https-public-url \
  --public-url http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;ios-index.json
Note that you need the flag --public-url to point to http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;ios-index.json.
Once the build finishes successfully, you should get the path to your .ipa file.
6. Distribute and install
6.1. on Android
Take your .apk and share it through some Google Drive link or other medium of your choice.
If you download this .apk file through an Android device, it should offer you to install the application on the device.
Trick: if the URL is really not friendly to type, and for whatever reason you have to type it manually, use a QR Code generator (e.g. http:&#x2F;&#x2F;www.barcode-generator.org&#x2F;) and your device‚Äôs camera to simplify your life!
Alternatively, if you connect an Android device to your computer, you should be able to run:
$ adb devices
emulator-5554	device
to list all your connected Android devices and emulators. (In my case, only the emulator is ‚Äúconnected‚Äù.)
It is then possible to install the .apk file by running:
$ adb -s emulator-5554 install ~&#x2F;expo-apps&#x2F;@anonymous__ExampleApplication-7f15208a56304617a200538cacd2e50e-signed.apk
Performing Streamed Install
Success

6.2. on iOS
Caveat: I could not fully test this section, so my apologies if this does not work as intended.
Since you should have Xcode, the most promising solution is in this guide. It also mentions other ways to install the .ipa file.
That‚Äôs it for now, thank you for reading this far. You will find below the resources mentioned in this article.
If you have any questions or comments, please drop me a line on Twitter. I shall reply as soon as possible.
Stay tuned for more.
Resources
Expo: https:&#x2F;&#x2F;expo.dev
Turtle CLI: https:&#x2F;&#x2F;github.com&#x2F;expo&#x2F;turtle#readme
Expo‚Äôs guide to Building Standalone apps: https:&#x2F;&#x2F;docs.expo.dev&#x2F;classic&#x2F;building-standalone-apps&#x2F;
Configuring app.json: https:&#x2F;&#x2F;docs.expo.dev&#x2F;workflow&#x2F;configuration&#x2F;
Expo docs to configure CI with Turtle CLI: https:&#x2F;&#x2F;docs.expo.dev&#x2F;classic&#x2F;turtle-cli&#x2F;
Expo docs to host application on your own servers: https:&#x2F;&#x2F;docs.expo.dev&#x2F;distribution&#x2F;hosting-your-app&#x2F;
How to create a keystore for Android: https:&#x2F;&#x2F;developer.android.com&#x2F;studio&#x2F;publish&#x2F;app-signing#generate-key
Supporting GitHub repository: https:&#x2F;&#x2F;github.com&#x2F;RobinCsl&#x2F;build-standalone-expo-app&#x2F;*
#### [Optimize your img tags with Eleventy Image and WebC](https:&#x2F;&#x2F;www.robincussol.com&#x2F;optimize-your-img-tags-with-eleventy-image-and-webc&#x2F;) 
*I am very excited about WebC and couldn‚Äôt wait to try out the corresponding Eleventy plugin.
The first use-case I had in mind was to use Eleventy Image for the native HTML img tag, that can be generated from Markdown and without shortcode. I had done this before, for my unpublished blog rewrite that‚Äôs been waiting to be released for ever now, through hooking up Eleventy Image into a markdown-it plugin. It wasn‚Äôt pretty as markdown-it plugins are pretty alien to me.
But now, this can be done ‚Äúnatively‚Äù, √†-la-Cloudflare Workers for your native HTML elements!
UPDATE (04&#x2F;11&#x2F;2022): After sharing this article on Twitter, Zach Leatherman pointed out there should be an easier solution. It didn‚Äôt work as expected at first, which put me on a journey to fix the underlying issue in @11ty&#x2F;webc. I‚Äôm very pleased to share that my first contribution to the project was accepted and landed in v0.6.0. As a result, the content of the last section was updated to remove the dirty data file hack with _data&#x2F;Image.js: your image optimization logic can now truly live in a single file.
The documentation for WebC mentioned this use-case exactly, in the shape of this innocent puzzle:

‚ÄúFree idea: use the Eleventy Image plugin to return optimized markup‚Äù
So it should be easy, right?
Remember this lad?
I have discovered a truly remarkable proof of this theorem which this margin is too small to contain.
Pierre de Fermat, cca. 1637
No need to wait 3 centuries for the answer this time, because it was ultimately not so hard‚Ä¶ But I did struggle and wrestle with it for a few hours :D
Anyway, hope that can be useful to someone.
If you want to see the finished implementation, you can get it on GitHub: RobinCsl&#x2F;11ty-webc-img-demo.
Set up a WebC-powered Eleventy project
or take a shortcut by cloning this repo and going to the 01-initial folder.
Initialise the project
Let‚Äôs start with an empty folder and add a basic package.json file:
mkdir 11ty-webc-img
cd 11ty-webc-img
npm init -y
We need to install the latest canary release (2.0.0-canary.16 at the time of writing) of Eleventy as well as the WebC plugin:
 npm install @11ty&#x2F;eleventy@2.0.0-canary.16 @11ty&#x2F;eleventy-plugin-webc
Configure Eleventy
We will now configure Eleventy to use the WebC plugin by creating a .eleventy.js file with the following content:
const webc &#x3D; require(&quot;@11ty&#x2F;eleventy-plugin-webc&quot;);

module.exports &#x3D; function(eleventyConfig) {
	eleventyConfig.addPlugin(webc, {
		components: &quot;_includes&#x2F;webc&#x2F;*.webc&quot;
	});
}

In particular, components in the _includes&#x2F;webc folder will be available in the global scope, no need to import them explicitly!
Scaffold a minimal project
To finish our setup, we create a layout file and a simple WebC component which we will use in a basic page, to make sure our setup is working correctly.
We create the layout file under _includes&#x2F;layouts&#x2F;base.webc. It is a simple HTML template with the @html&#x3D;&quot;content&quot;  WebC directive set on the body tag. (See my-layout.webc in the docs)
&lt;!doctype html&gt;
&lt;html lang&#x3D;&quot;en&quot;&gt;
	&lt;head&gt;
		&lt;meta charset&#x3D;&quot;utf-8&quot;&gt;
		&lt;title&gt;Eleventy Images + WebC rocks!&lt;&#x2F;title&gt;
	&lt;&#x2F;head&gt;
	&lt;body @html&#x3D;&quot;content&quot;&gt;&lt;&#x2F;body&gt;
&lt;&#x2F;html&gt;
We now create a simple WebC component and write the following content, taken from the promising website 11ty.webc.fun, in _includes&#x2F;webc&#x2F;site-footer.webc :
&lt;footer&gt;
  &lt;p&gt;&amp;copy; 2022 Yours Truly.&lt;&#x2F;p&gt;
&lt;&#x2F;footer&gt;
Finally, we create our basic page at the root of the project in index.webc:
---
layout: layouts&#x2F;base.webc
---

Fun with WebC

&lt;site-footer&gt;&lt;&#x2F;site-footer&gt;
If all went according to plan, we should now be able to run
npx @11ty&#x2F;eleventy --serve
in the terminal and see the following output in our browser at http:&#x2F;&#x2F;localhost:8080:

Create an img.webc component
or check the code on GitHub in the 02-img folder if you want to see the code right away.
In this section, we will create our img.webc override for the native img HTML tag and use Eleventy Image within it.
As a starting point, we will use the example from the documentation from which the screenshot at the start of this post is taken. In a new file _includes&#x2F;webc&#x2F;img.webc, add the following:
&lt;script webc:type&#x3D;&quot;render&quot; webc:is&#x3D;&quot;template&quot;&gt;
function() {
	if(!this.alt) {
		throw new Error(&quot;[img.webc] the alt text is missing, no fun&quot;);
	}
	return &#x60;&lt;img src&#x3D;&quot;${this.src}&quot; alt&#x3D;&quot;${this.alt}&quot;&gt;&#x60;;
}
&lt;&#x2F;script&gt;
This essentially verifies at build-time that all your images have a non-empty alt text, neat!
Let‚Äôs add a ‚Äúbroken‚Äù image to our index page, in index.webc, to verify that this works correctly:
---
layout: layouts&#x2F;base.webc
---

Fun with WebC

&lt;img src&#x3D;&quot;https:&#x2F;&#x2F;images.unsplash.com&#x2F;photo-1627224286457-923944e5b159?auto&#x3D;format&amp;fit&#x3D;crop&amp;w&#x3D;387&amp;q&#x3D;80&quot;&gt;

&lt;site-footer&gt;&lt;&#x2F;site-footer&gt;
And indeed, running npx @11ty&#x2F;eleventy --serve yields an expected error:
$ npx @11ty&#x2F;eleventy --serve
[11ty] Problem writing Eleventy templates: (more in DEBUG output)
[11ty] 1. Having trouble rendering webc template .&#x2F;index.webc (via TemplateContentRenderError)
[11ty] 2. [img.webc] the alt text is missing, no fun (via Error)
Add an alt text (‚Äúpossum hanging from a palm leaf‚Äù should work) and try again. Oh no! Another error:
$ npx @11ty&#x2F;eleventy --serve  
[11ty] Problem writing Eleventy templates: (more in DEBUG output)
[11ty] 1. Having trouble rendering webc template .&#x2F;index.webc (via TemplateContentRenderError)
[11ty] 2. Circular dependency error: You cannot use &lt;img&gt; inside the definition for .&#x2F;_includes&#x2F;webc&#x2F;img.webc (via Error)
That makes sense, when you think about it! All our .webc files are processed by WebC, so if we return an img tag in a img.webc component, the compiler would work indefinitely to get to the bottom of it, because it‚Äôs turtles img all the way down!
Luckily for us, we can let WebC know when its job is done through the webc:raw attribute:
Use webc:raw to opt-out of WebC template processing for all child content of the current node. Notably, attributes on the current node will be processed.
Let‚Äôs fix it in _includes&#x2F;webc&#x2F;img.webc:
  &lt;script webc:type&#x3D;&quot;render&quot; webc:is&#x3D;&quot;template&quot;&gt;
  function() {
	  if(!this.alt) {
	  	throw new Error(&quot;[img.webc] the alt text is missing, no fun&quot;);
	  }
-	  return &#x60;&lt;img src&#x3D;&quot;${this.src}&quot; alt&#x3D;&quot;${this.alt}&quot;&gt;&#x60;;
+	  return &#x60;&lt;img webc:raw src&#x3D;&quot;${this.src}&quot; alt&#x3D;&quot;${this.alt}&quot;&gt;&#x60;;
  }
  &lt;&#x2F;script&gt;
It compiles now! üéâ
Here‚Äôs the expected output:

We have effectively augmented our img tag to verify at build time that alt text is present.
Let‚Äôs now add Eleventy Image to the party!
Optimize your HTML img with Eleventy Image
or check the code on GitHub in the 03-final folder if you want to see my solution.
Let‚Äôs first install Eleventy Image in our project:
npm install @11ty&#x2F;eleventy-img
We will more or less copy the example from the Eleventy Image docs in the Asynchronous Shortcode section, because our JavaScript render function can be async!
In the file _includes&#x2F;webc&#x2F;img.webc, let‚Äôs add the following:
  &lt;script webc:type&#x3D;&quot;render&quot; webc:is&#x3D;&quot;template&quot;&gt;
-   function() {
-      if(!this.alt) {
-          throw new Error(&quot;[img.webc] the alt text is missing, no fun&quot;);
-      }
-      return &#x60;&lt;img webc:raw src&#x3D;&quot;${this.src}&quot; alt&#x3D;&quot;${this.alt}&quot;&gt;&#x60;;
+    const Image &#x3D; require(&quot;@11ty&#x2F;eleventy-img&quot;);
+    module.exports &#x3D; async function() {
+      let metadata &#x3D; await Image(this.src, {
+        widths: [300],
+        formats: [&quot;avif&quot;, &quot;jpeg&quot;],
+        outputDir: &quot;_site&#x2F;img&#x2F;&quot;,
+      });

+      let imageAttributes &#x3D; {
+        alt: this.alt,
+        sizes: &quot;100vw&quot;,
+        loading: &quot;lazy&quot;,
+        decoding: &quot;async&quot;,
+      };

+      &#x2F;&#x2F; You bet we throw an error on missing alt in &#x60;imageAttributes&#x60; (alt&#x3D;&quot;&quot; works okay)
+      return Image.generateHTML(metadata, imageAttributes);
  }
  &lt;&#x2F;script&gt;

Note that we harcoded the value for  sizes in the imageAttributes object, and prepended both src and alt by this to wire things up correctly. We also instruct the Image plugin to output optimized images in our _site&#x2F;img&#x2F; folder directly for them to be available when using the following markup:
&lt;img alt&#x3D;&quot;a lovely image&quot; src&#x3D;&quot;&#x2F;img&#x2F;hash-width.jpeg&quot;&gt;
Let‚Äôs run npx @11ty&#x2F;eleventy --serve once more:
$  npx @11ty&#x2F;eleventy --serve
[11ty] Problem writing Eleventy templates: (more in DEBUG output)
[11ty] 1. Having trouble rendering webc template .&#x2F;index.webc (via TemplateContentRenderError)
[11ty] 2. Circular dependency error: You cannot use &lt;img&gt; inside the definition for .&#x2F;_includes&#x2F;webc&#x2F;img.webc (via Error)
That error sounds familiar, right?
We need to tell WebC to ignore img tags generated by Eleventy Image, and it‚Äôs as simple as adding &quot;webc:raw&quot;: true to the imageAttributes object:
  &lt;script webc:type&#x3D;&quot;render&quot; webc:is&#x3D;&quot;template&quot;&gt;
  const Image &#x3D; require(&quot;@11ty&#x2F;eleventy-img&quot;);
  module.exports &#x3D; async function() {
    let metadata &#x3D; await Image(this.src, {
      widths: [300],
      formats: [&quot;avif&quot;, &quot;jpeg&quot;],
      outputDir: &quot;_site&#x2F;img&#x2F;&quot;,
    });
  
    let imageAttributes &#x3D; {
      alt: this.alt,
      sizes: &quot;100vw&quot;,
      loading: &quot;lazy&quot;,
      decoding: &quot;async&quot;,
+     &quot;webc:raw&quot;: true,
    };
  
    &#x2F;&#x2F; You bet we throw an error on missing alt in &#x60;imageAttributes&#x60; (alt&#x3D;&quot;&quot; works okay)
    return Image.generateHTML(metadata, imageAttributes);
  }
  &lt;&#x2F;script&gt;
And we‚Äôre done!! (Note how the image now aligns perfectly with localhost:8080 #IncontestableTruth)

with corresponding markup:
&lt;!doctype html&gt;
&lt;html lang&#x3D;&quot;en&quot;&gt;
&lt;head&gt;
        &lt;meta charset&#x3D;&quot;utf-8&quot;&gt;
        &lt;title&gt;Eleventy Images + WebC rocks!&lt;&#x2F;title&gt;
    &lt;&#x2F;head&gt;
    &lt;body&gt;Fun with WebC

&lt;picture&gt;&lt;source type&#x3D;&quot;image&#x2F;avif&quot; srcset&#x3D;&quot;&#x2F;img&#x2F;SwdsuTpRbT-300.avif 300w&quot;&gt;&lt;img alt&#x3D;&quot;possum hanging from a palm leaf&quot; loading&#x3D;&quot;lazy&quot; decoding&#x3D;&quot;async&quot; src&#x3D;&quot;&#x2F;img&#x2F;SwdsuTpRbT-300.jpeg&quot; width&#x3D;&quot;300&quot; height&#x3D;&quot;450&quot;&gt;&lt;&#x2F;picture&gt;


&lt;footer&gt;
  &lt;p&gt;¬© 2022 Yours Truly.&lt;&#x2F;p&gt;
&lt;&#x2F;footer&gt;

&lt;&#x2F;body&gt;
&lt;&#x2F;html&gt;
Parting words
I am so excited to explore further the possibilities of using WebC to augment other native HTML elements.
This article only scratches the surface when it comes to the img tag. You could pass props down from the markup to Eleventy Image and control the behaviour of the image optimization. But we can now augment our native img tag without much hassle as it‚Äôs all in one file.
It even works with Markdown images (and yields the cutest webpage ever):
  ---
  layout: layouts&#x2F;base.webc
  ---
  
  Fun with WebC
  
  &lt;img alt&#x3D;&quot;possum hanging from a palm leaf&quot; src&#x3D;&quot;https:&#x2F;&#x2F;images.unsplash.com&#x2F;photo-1627224286457-923944e5b159?auto&#x3D;format&amp;fit&#x3D;crop&amp;w&#x3D;387&amp;q&#x3D;80&quot;&gt;
  
+  &lt;template webc:type&#x3D;&quot;11ty&quot; 11ty:type&#x3D;&quot;md&quot;&gt;
+  
+   ![&#39;close-up of a baby possum among ferns&#39;](https:&#x2F;&#x2F;images.pexels.com&#x2F;photos&#x2F;13960994&#x2F;pexels-photo-13960994.jpeg)
+  
+  &lt;&#x2F;template&gt;
  
  &lt;site-footer&gt;&lt;&#x2F;site-footer&gt;
  

All the more reasons to optimize your images now!
Find the code supporting this article on the RobinCsl&#x2F;11ty-webc-img-demo repository.*
#### [Year in Review: 2021](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2021&#x2F;) 
*We‚Äôre already at the start of February 2022, but who says retrospectives need to be done on January 1st?! A lot of things happened in 2021, both personally and professionally. Time to reflect and remember.
Personal üë∂üíçüìÑüìÉüìëüìú
This first part is the personal stuff, so if you don‚Äôt care about it, you can skip to the professional stuff instead. And if you don‚Äôt care about that too, why are you here? üòÇ
Welcome, L√©onard!
In January of 2021 came the great news that we were expecting a baby and a few months later, my son L√©onard came to this world! It‚Äôs been a few months now and it‚Äôs insane how much this event changed our lives.
It‚Äôs quite amazing to witness a human being‚Äôs awakening to the world, I do feel privileged.
Of course, it‚Äôs not just rainbows and unicorns.
Sleeping as much as I want is now a distant memory&#x2F;dream, though I‚Äôve been surprised that it‚Äôs actually quite possible to operate without the amount of sleep I used to get.
Having free time for side projects and writing almost vanished (and usually eats up time when I should sleep instead, while it‚Äôs allowed by baby-boss). I don‚Äôt know how other parents manage but time just flies by.
One thing‚Äôs for sure, L√©onard makes sure I keep fit and exercise regularly (a promise I made myself at the beginning of last year, right):
it‚Äôs quite a normal day when I need to go up and down the 4 floors of the block of flats we live in (and when it‚Äôs at night, I have this game where I switch the lights on and go up and down within the 3 minutes they‚Äôre programmed to stay on; naturally, after my 4th round trip, I usually do the last flight of stairs in the dark üòÖüòÆ‚Äçüí®).
it‚Äôs also quite a normal day when I need to carry him in my arms for 10- to 20-minute stretches, while doing squats, at least 2 or 3 times.
Coach L√©onard can ask for these drills at any time of the day (and night‚Ä¶), he says it‚Äôs for my own good. My knees and hips and back and arms tend to disagree.
Paperwork, paperwork, paperwork
In 2021, I‚Äôve had time to think so many times if the amount of paperwork we‚Äôre doomed to go through is some sort of devilish scheme to keep people busy on the boring stuff. It definitely does not help when you‚Äôre an expat.
If you had told me having a baby would generate so much paperwork chores, I probably would not have believed you. The story goes that we wanted to do an early recognition of fatherhood for me to be officially recognised as the father of my child to be.
In France, as a French person, this is a 5-minute visit to my local townhall, easy-peasy.
In Czechia, as a foreigner, this would have required tons of documents that also needed translating by a certified translator (aka costs some money).
Since we were engaged, and you‚Äôre officially recognised as the father when having a baby as a married couple, we thought we might as well go through paperwork hell to get married.
It did not disappoint.
Our child was due some time in the middle of September, so we had almost the entire year to get married, should be easy, right.
Being so diligent, we got in touch with the French embassy to understand what we need to do to get married in April:
weddings at the embassy are quite a rare thing, you should get married through the local authorities
getting married in Prague is like getting married in Las Vegas (say what?)
Only to realise at the end of June that:
babies aren‚Äôt always born around the due date
it‚Äôs already the end of June
Let‚Äôs just say that we managed to be on time paperwork-wise for our wedding at the beginning of August (ever heard of the necessary 2-week public display of your intent on getting married, during which somebody has the right to oppose it, to get the paper allowing a French person to marry‚Ä¶?), but the ‚Äúgetting married like in Las Vegas‚Äù was lost on us.
Professionally
Promo
In January last year, I got promoted to Staff Engineer at Kiwi.com. Pretty crazy to me to think that I started working in the industry in September 2017. Even though titles only mean so much, it‚Äôs still a nice recognition that I bring value to the company.
Pair Documenting
I definitely learnt a lot about infrastructure and Kubernetes, which might seem overkill for a frontend platformer, but there was a void to fill when my ex-colleague Adam Jani≈° left, so I put on my newbie hat and pair-documented Adam‚Äôs knowledge throughout his notice period. I still refer or point people to that document quite regularly, it‚Äôs an investment that keeps on giving after all these months!
This was also the first time I tried to add original schematics&#x2F;pictures and Excalidraw made it super fun and easy!
Robin‚Äôs Gazette
My newsletter, Robin‚Äôs Gazette, kept going quite well! It turned one year old on December, 9th! üéÇ
In 2021, I published 25 issues (784 emails in total!), and went from 9 subscribers to 49 at the end of the year!
Given the quite low volume of subscribers, my average open rate and click rate are pretty okay (though they are ‚Äúall-time‚Äù performance metrics):
70.35% open rate,
24.38% click rate.
Even though it‚Äôs always some amount of work, I deem it worthy of my time as I get to practice writing and I always learn something slightly more deeply than if I just scrolled Twitter or Hacker News. This continues my efforts from ‚Äúarchivist to creator‚Äù that I mentioned in my last retro.
Special mention to Shawn @swyx Wang for being so encouraging along the way!
My goal for this year is to continue on that path, though I do need to put some effort into advertising it better:
the subscribe form is hard to find on my website,
the content is short-lived and behind closed doors ‚Äì so I should repurpose it to an extent,
start marketing it more (instead of the infrequent tweets I‚Äôve tried at some point).
One small change for this year: I now send the Gazette every other Friday instead of every other Wednesday.
Some of the feedback I received üòä
‚ÄúSuch a great newsletter this week Robin, amazing job!‚Äù
‚ÄúStill enjoying the newsletter!‚Äù
Blog
The blog was a bit quiet last year, I only published 3 posts and refreshed my most read article about building APK files locally for Expo projects (it recently crossed 20K views in its lifetime! üéâ).
They were:
Python Dependencies for JavaScript Developers
How to Download a Brain with Pair Documenting (already mentioned above)
Year in Review: 2020
I really hope to start writing more again on the blog because the SEO game takes a long time for Google to start recommending your stuff: I saw more traffic to my How to Test Your ESLint Config and Get your Own Sentry Playground articles, and they were written in September 2020!
Started working on a course
In the last retro, I announced that I planned to write a book. That did not happen‚Ä¶ üòÖ
Instead, I started working on a video course which essentially replicates the now defunct Margarita project from scratch (which was the subject of this article on my blog), showcasing how to build cross-platform web and native mobile apps through React Native and React Native Web.
This was the occasion to spend some time weeks watching all the microphone reviews on YouTube, all the Audacity and Obs Studio tutorials for sound production, to ultimately produce a half-finished tutorial on YouTube (the best 33 seconds of your life, trust me).
Source



Ever since my son was born, I‚Äôve had little time to focus for longer than 5-minute stretches outside of work, so this project has lost steam right now. I hope I‚Äôll manage to finish it in the first semester!
A look back and forward
Revisiting some of my plans for 2021 and making some for 2022.
Family
As much as I would love to work on side-projects and such, my family comes first, and I want to keep it that way. I‚Äôm excited to continue discovering what my next workouts will be, courtesy of Coach L√©onard! (Seriously, I‚Äôve got some arms now! üí™)
I cannot wait for my son to meet all his grand-parents, aunts and uncles in France later this year!
Nehovor√≠m pliynule po slovensky
aka I don‚Äôt speak Slovak fluently.
One of my goals was to make sure I would be able to speak to all my wedding guests in their preferred language (amongst French, English and Slovak). Because of the above (and COVID not helping‚Ä¶), the guest list was actually pretty small and my mastery of Slovak would not be entirely necessary to do well on my goal. So I guess I will learn better alongside my son this year whilst we wait for the big party?
Almost no SAD this past year
Come December, I usually feel pretty burnt out and in dire need of vacation to recharge. Somehow, in December 2021, I did not feel like that at all.
My new family life provided some amount of distractions from work. Even though that increased my context switching throughout the days and the nights were not as restful, it somehow created some distance between work and me. Or maybe because living with a newborn forces you to live in the moment, one day at a time‚Ä¶ üòÖ
Writing
Less paperwork, more blog posts. ü§û
Keep the newsletter going, and make it better, faster, stronger!
Improve my note taking system, which is a bit chaotic and not really systematic at the moment.
Learning Rust
In 2021, I started dabbling with Rust, mostly through the really great WIP book from Luca Palmieri, Zero To Production In Rust. It assumed some knowledge so I sometimes struggled had fun filling in the gaps.
Given where the JS ecosystem is going in terms of tooling (oh yeah, in 2021 I started this Awesome List of JavaScript Tooling Not Written In JavaScript on GitHub ‚Äì 667 stars so far!), I think it‚Äôs important to explore beyond the confines of JavaScript&#x2F;TypeScript. So I‚Äôd like to spend more time with Rust this coming year!
Lots of things to be grateful for last year and lots to look forward to this year. C‚Äôest parti !*
#### [Python Dependencies for JavaScript Developers](https:&#x2F;&#x2F;www.robincussol.com&#x2F;python-dependencies-for-javascript-developers&#x2F;) 
*Recently, I needed to update an old Python codebase which had not been touched in 3 years! Of course, the dependencies were so outdated that the Dockerfile of the project wouldn‚Äôt build. My JavaScript knowledge did not help me much:
how could I do a yarn upgrade-interactive --latest to update dependencies?
where‚Äôs the dependency lockfile?
why do we need to compile C-libraries for Python dependencies?
Luckily for me, my colleague Ondrej patiently explained how to approach these questions.
Using a virtual environment
TL;DR: pip installs packages globally unless we activate a virtual environment.
In Python, the default package manager is call pip and it installs packages from the Python Package Index, shortened to Pypi. The equivalent in JavaScript land would be npm and npmjs.com.
By default, pip installs packages system-wide. This contrasts with the need to pass a --global flag to npm.
To remedy that, we can use a local Python environment (a bit like having our node_modules folder in a JavaScript project). The following command will create a virtual environment in a venv folder in our current directory:
# Create the venv folder container the virtual environment
$ python3 -m venv venv
To make sure pip knows it should install packages in this virtual environment, we must activate it. Depending on your shell, you should source the appropriate activate file in venv&#x2F;bin:
activate, for Bash and ZSH,
activate.fish, for Fish Shell,
activate.csh, for csh
Activate.ps1, for PowerShell.
In my case, I will source the one for ZSH:
$ source venv&#x2F;bin&#x2F;activate
Now, pip install will install packages in the local folder instead of targeting the global scope. My ‚ÄúPython node_modules folder‚Äù is venv&#x2F;lib&#x2F;python3.8&#x2F;site-packages&#x2F;.
Dependencies in Python
TL;DR: use pip-compile to generate a lockfile and pip-sync to install dependencies from that lockfile
To deal with dependencies, we must install the pip-tools package in our virtual environment:
pip install pip-tools
This will allow us to use pip-compile and pip-sync later on.
Once that‚Äôs done, we could for example decide to start a Django project, ‚Äúthe web framework for perfectionists with deadlines‚Äù. The latest version of the package at the time of writing is 3.2.5. Let‚Äôs create our Python equivalent of a package.json file to express our project needs the Django package pinned to version 3.2.5:
# requirements.in
django&#x3D;&#x3D;3.2.5
Note: the better equivalent to a package.json would be a setup.py file, since it contains additional fields like the name of the local package, its version, etc. but we just want to write down the dependencies.
EDIT #1: it‚Äôs apparently not common practice to pin dependency versions in requirements.in, just in case you really need to (if there are breaking changes for example). Thanks for pointing it out, Ondrej.
To generate a corresponding lockfile of the transitive dependencies of Django, we can run the following command:
pip-compile --output-file requirements.txt requirements.in
This will create the following requirements.txt file:
#
# This file is autogenerated by pip-compile with python 3.8
# To update, run:
#
#    pip-compile --output-file&#x3D;requirements.txt requirements.in
#
asgiref&#x3D;&#x3D;3.4.1
    # via django
django&#x3D;&#x3D;3.2.5
    # via -r requirements.in
pytz&#x3D;&#x3D;2021.1
    # via django
sqlparse&#x3D;&#x3D;0.4.1
    # via django

Now that we have this file, we can finally retrieve and install the packages with the following command:
pip-sync
Note: if you try to run pip-sync without a requirements.txt, you will get the following error:
No requirement files given and no requirements.txt found in the current directory
It is indeed necessary to run pip-compile before.
Updating dependencies
Similar to npm oudated, we can list the outdated Python dependencies with
$ pip list --outdated
For example, after downgrading Django to 3.2.3 in my requirements.in, regenerating the lockfile with pip-compile, re-installing the dependencies with pip-sync, the command above will show:
Package    Version Latest Type
---------- ------- ------ -----
Django     3.2.3   3.2.5  wheel
setuptools 44.0.0  57.4.0 wheel
To update the dependency, I can change the version back to 3.2.5 in the requirements.in and go through the same dance:
$ pip-compile --output-file requirements.txt requirements.in
$ pip-sync
$ pip list --outdated
Package    Version Latest Type
---------- ------- ------ -----
setuptools 44.0.0  57.4.0 wheel
EDIT #2: a batteries-included equivalent to Yarn is called Poetry. Thanks for sharing, D√°niel!
Wheels and Eggs
You might wonder what this ‚Äúwheel‚Äù type is for the Django and setuptools packages.
They are still mysterious to me, but here‚Äôs my current understanding: in Python, some dependencies need to be built for specific architectures, as they might be written in Cython, ‚Äúa superset of the Python language that additionally supports calling C functions and declaring C types on variables and class attributes‚Äù. Wheels and Eggs are packaging formats for these.
In particular, it is not a good idea to use Alpine Docker images for Python projects as a lot of packages don‚Äôt have pre-built wheels for that architecture: your Docker build step will need to compile the packages from source, slowing down your entire process (and requiring you to install the necessary build tools for this compilation to happen!).
I don‚Äôt think there is a similar ‚Äúpackaging format‚Äù concept in JavaScript land. But we do have packages shipping prebuilt binaries for specific architectures, for example Sharp, the Node.js image processing package. (And we probably have enough issues with CommonJS vs ES Modules as it is‚Ä¶ :smile:)
Conclusions
All in all, a project needs to:
specify external dependencies and their desired version with semantic ranges
have a way to retrieve said dependencies
keep track of which versions were effectively installed to improve reproducibility.
Despite all these measures, the Docker file of an unmaintained 3-year old project could not build. Software rots!*
#### [How to Download a Brain with Pair Documenting](https:&#x2F;&#x2F;www.robincussol.com&#x2F;download-a-brain-with-pair-documenting&#x2F;) 
*When people leave the company, a lot of specific and ad hoc knowledge goes away with them. Unless there is already a strong documentation culture, there‚Äôs only so much that can be said and done during exit interviews to make up for it.
But this doesn‚Äôt have to be left to fate.
Throughout the month of January, my now ex-colleague Adam Jani≈° and I pair documented all his knowledge about the frontend infrastructure at Kiwi.com. We produced a 24 page document, fixed a few bugs and addressed some tech debt. More importantly, we had fun doing it!
Here‚Äôs how we approached it.
How to pair document
This is an attempt at formalising what we‚Äôve done, feel free to s&#x2F;Newbie&#x2F;Robin&#x2F;g and s&#x2F;Expert&#x2F;Adam&#x2F;g.
The Protagonists
You will need two proactive people: an Expert on the subject to document and a Newbie who is not too cursed with knowledge yet. Bonus points if they have not really worked together but always had good chemistry in their interactions.

The Newbie makes it easy on the Expert for this documentation effort to be a no-brainer:
they organize the pair documenting sessions;
they manage the agenda of the sessions;
they do most of the note-taking;
they digest the notes into documentation drafts in between sessions;
they stay curious and eager to learn more about the subjects, with questions always at the ready (this is hard to fake, so find an adequate Newbie for the task).

The Expert shows up at the sessions and generously shares their knowledge with the Newbie, answering patiently every question they may have. They review the documentation drafts to ensure the prose does not betray the original intent of the notes. Bonus points if they include the Newbie in solving similar problems described in the nascent documentation as they arise in the support channels of the company‚Äôs Slack: learning by doing is a great way to drive home the material and expose remaining ambiguities.

The First Session
The Newbie is in charge and explains how it‚Äôs going to work in the first pair-documenting session. That means going through what‚Äôs expected of each participant in this documentation effort as well as giving an overview of the actual process.
The objective of the first session is crucial: go as broad as possible and capture as many ideas of what needs documenting to form a backlog of topics to go over in the next sessions.
This can be achieved through asking questions like (more examples in this template):
what are things that you know about that very few people know?
what are the things that people always ping you about on Slack?
what tasks pile up when you‚Äôre on vacation?
Once the amount of things to document gets a bit clearer, see how many days are left before they leave and agree on a schedule to leave enough time for this task.
In Between Sessions
The Newbie transforms the raw notes into documentation drafts and gets the Expert to review them.
As more people in the company are aware of this documentation effort, they might have questions of their own; the Newbie adds these points to the agenda for the next session.
The Expert includes the Newbie in all discussions on Slack touching on the subject to maximize the learning opportunities and give the docs a trial by fire.
A Normal Session
In the first 5-10 minutes, the Newbie and the Expert go over unresolved comments in the doc draft, they review the agenda from the previous session and see if anything pops up to be further discussed or explained, and finally, they review the agenda for the current session and decide what to prioritize.
They then go over each point in the agenda: the Expert does most of the talking while the Newbie does most of the note-taking. The Newbie shares their screen for the document to be visible by both pair documentors. The Newbie may interrupt the Expert at any point with questions or with attempts at paraphrasing what the Expert just described. The Expert glances at the notes being taken once in a while to ensure they don‚Äôt contain mistakes from the get-go.
When the time is up, the Newbie and the Expert look at how much they covered from the agenda, move what hasn‚Äôt been covered to the next session, and agree on a date and time for that next session (if it‚Äôs not already regular).
Tools we used
A Calendar: to plan the sessions, to have automatic reminders for them, and to share the visio-conference link.


Custom recurrence with expiry date, Hangouts link, Notification not to miss it, Allow guests to modify event for better collaboration

A Google Document: to store the agenda, the notes and the first documentation drafts. Do make use of the outline on the left-hand side to navigate more easily once the document gets to a certain size. Do make use of comments to discuss and improve the notes and the draft. This is also a good place to involve other people from the company asynchronously. Make sure to put this document in a shared team drive for it to have the right permissions set by default.


Use the ‚ÄúStyles‚Äù dropdown to get this hierarchy

Here‚Äôs a free template Google document to get you started. Feel free to make a copy.
LucidChart: to draw a few diagrams because pictures are great (though you may want to check out Draw.io for a great free alternative).
Why Pair Documenting Works
What usually happens
Unless there is a strong documenting culture, (1) people never prioritize documentation over almost any other task, because it‚Äôs just not as fun as coding or as urgent as the next fire you need to put out. That means that when someone is about to leave, (2) there is an impossible amount of things to document that they don‚Äôt even know where to start. Because they are short on time, they end up drafting a lil‚Äô something and call it a day. (3) Anyway, we never needed that, why are they asking me to document that stuff, who‚Äôs gonna read it anyway?! (Note the use of two ‚Äúanyway‚Äù).
Clear intention through planning
Through planning the pair documenting sessions, we make sure documentation does get prioritized and give it the importance it deserves. If the Expert‚Äôs knowledge is that important and they by happenstance siloed it, it becomes urgent to share this knowledge more widely to deal with that critical bus factor. (Whether they leave or not is almost irrelevant in this case.)
Because we know when the Expert‚Äôs last working day is, it is easier to retro-plan the right number of sessions to cover the entire backlog established in the first session. This of course might need adjusting throughout the pair documentation effort.
More fun and better quality through collaboration
Planning is not enough if the Expert is still lost about what needs documenting and in which level of details. The nagging ‚Äúare they even gonna read it?‚Äù-type questions could well be the end of the documentation effort already: a well-crafted plan not well-executed.
With an accountability buddy, things turn around entirely.
It becomes really difficult to bail out of the plan because you know the other person is expecting you to show up at the session.
Because the Newbie is enthusiastic about the topic, the Expert is more generous in their contribution.
Because the Newbie asks questions and cares about details, the pair documentors tailor the documentation to the level of knowledge on the receiving end. The Expert knows this documentation will be useful. üòå
Aligned incentives
The Expert also knows that what they know should be documented somewhere, and because they like their colleagues, they don‚Äôt want their departure to create a mess. (Right?!)
The Newbie knows this knowledge is valuable, and about to disappear if they don‚Äôt take action. Besides, it‚Äôs something they‚Äôre curious and wanted to learn more about anyway.
The Expert gets to share their knowledge and teach what they know to someone who‚Äôs enthusiastic and interested in the topic; the Newbie gets time with the Expert to learn as much as possible from them.
Parting thoughts
I really enjoyed the pair documenting sessions with Adam and I think they should be made a regular practice, just like pair programming. It‚Äôs a great way to level up people while producing value beyond the scope of that collaboration.
At the same time, documentation is only valuable if it gets read and updated continuously. I‚Äôve been thinking about how to bring it closer to where people are already consuming content. For example, this could take the form of digests of parts of the documentation in the company‚Äôs Slack.
I‚Äôm not super familiar with mob programming, but I do wonder if mob documenting could be a thing to try too.

Acknowledgements:
Adam Jani≈° (@adam_janis) for trying out this pair-documenting idea before his departure :)
Emilia Vidal for her review and suggestions,
Shawn Wang (@swyx) for his review and ideas for the title and Open-Graph image,
Ron Au (@ronvoluted) for providing the font to go ahead with Shawn‚Äôs ideas,
Excalidraw to produce the visuals.*
#### [Year in Review: 2020](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2020&#x2F;) 
*2020, what a ride!
I cannot believe 2020 has already finally come to an end: with the lockdowns and quarantines, time simultaneously flew by and dragged on. A lot of my life was lived through a computer and the Internet. Time to reflect and remember.
Let‚Äôs start with some remarkable facts and events:
personally: - turned 30 in April, without even a beer to celebrate! (hint: the last bit is what‚Äôs remarkable) ‚ùåüç∫ - traveled only once to see my family in France üò¢ - got engaged in August üíç - spent the Christmas holidays alone, for the first time (I feel you, Kevin McCallister) üö∞
at work: - got a raise and earned a promotion üìà - wrote 3 posts on the Frontend Platform‚Äôs internal blog ‚úç
on my blog: - published 8 new posts üöÄ - updated 1 article ‚ôªÔ∏è - started a newsletter (already wrote 2 issues) üóû - broke the 10k unique visitor mark for Build Standalone Expo .apk and .ipa with Turtle CLI üéâ
miscellaneous: - joined 2 great online communities (Coding Career and Blogging For Devs) üôå - revamped a handful of desktop PCs and laptops (cannot believe I was about to get rid of my older laptop when it‚Äôs so smooth now!): most low-end&#x2F;mid computers are slow because of their stock hard drives (and limited RAM), a nice SSD and some RAM extension will do wonders! üíæ - jumped on the sourdough bread baking train (and learnt recently how sourdough baguettes are a lazy baker‚Äôs dream!) üá´üá∑ ü•ñ
Despite everyone calling 2020 their worst year ever, it did not seem so bad personally. Of course, I missed social life and being able to do ‚Äúnormal‚Äù things, but all things considered, I still learnt a lot this year.
Consumer to archivist
Spending so much time online means I absorbed vast amounts of data and after a while, it did not sit so well with me. I believed that I learn best by immersing myself in a continuous flow of information surrounding one topic. Of course, it‚Äôs worked for me so far, but the cost is that I get overwhelmed and it‚Äôs difficult to know when it‚Äôs enough.
Trying to change that brute-force approach to learning, I read here and there that taking notes would force me to slow down and choose what I consume more wisely. I obviously bought ‚ÄúHow to Take Smart Notes‚Äù by S√∂nke Ahrens (and only half-read it), came across the German word Zettlekasten and went on a wild goose chase for the best Personal Knowledge Management system, and read all the articles and watched all the YouTube videos about the subject. Old habits die hard. üòÖ
After using a few of them, I ended up settling with Joplin (which I had of course already set up prior to any of this) and have not looked back. It does not have backlinks so I‚Äôm deeply missing out on interconnected notes, as the hype goes, but it‚Äôs okay. My FOMO is in check for now. Joplin is an active open source project which is available on desktop as well as mobile devices. I retain full ownership (and responsibility) over my notes as Joplin integrates with different storage backends: I chose to use my self-hosted NextCloud instance.
In short:
just-in-case knowledge is expensive; prefer just-in-time knowledge
it‚Äôs easy to go on a wild goose chase only to realise you had everything already
note-taking does force me to slow down and helps to remember better
Archivist to creator
This story does not end here, dear reader. Accumulating notes about topics I‚Äôm interested in helps to slow down and be more intentional with what I consume. But it turns out knowledge without action is mostly useless.
Luckily, Daniel Vassalo wrote this influential tweet:
If you‚Äôre tempted by this, my advice to first-time creators is to start with a very small product: Something you can finish in 2 weeks and charge #### [Build Standalone Expo .apk and .ipa with Turtle CLI [deprecated]](https:&#x2F;&#x2F;www.robincussol.com&#x2F;build-standalone-expo-apk-ipa-with-turtle-cli&#x2F;) 
*This article was updated on February 7, 2023.
NOTE: As of Expo SDK 47, the following method does not work any more.
With the release of EAS builds, it is necessary to have Internet access to create standalone Expo apps locally; see Running builds on your own infrastructure on Expo docs.
You can still use the React Native way to build applications locally after generating necessary files with expo prebuild (see this GitHub comment on expo&#x2F;eas-cli).
This post will not receive further updates.
A great way to start writing React Native applications is to use Expo. You don‚Äôt even need to setup a development environment to get started thanks to Snack, an online React Native application editor. Your application is public by default. Sharing has never been that easy.

Brown turtle swimming underwater, Photo by Wexor Tmg on Unsplash
However, you would like to share an application exclusively with some people, not through an app store or any public channel. One possibility is to share the built application file, e.g. an .apk file for Android and an .ipa file for iOS.
Expo is so great a service (oh, and did I mention free?) that they offer you to publish your app on their servers and if you wanted to build these .apk and .ipa files, you could do so on their servers.
The flow looks like:
$ expo publish
$ expo build:&lt;PLATFORM&gt;
and you obtain a nice URL to the artifact created for you when the build finishes.
But, again, this is public. On a server you don‚Äôt control. (Although, if you made the same mistake as I did, a ticket to their support can delete any files you had wished to keep private. ü•á)
Luckily for you, Expo provide the tools they are using on their servers for free (did I mention they‚Äôre great!?). The build process relies on a CLI tool called turtle-cli. It is open-source and available on GitHub.
Let us go through an example of how to create your application file without resorting to Expo servers. That means you can keep an application private and also build your application while being offline.
The following instructions assume you have bash and Node.js available. In my experience, using the current LTS version of Node.js (version 16.13.2) works best.
Caveat: I could not complete the iOS instructions to the end since I do not have an Apple Developer paid account.
We will go through the following steps:
1. Turtle CLI
2. Create a dummy application
3. Publish Expo app on local server
4. Create APK file ‚Äì Android

4.1. Prerequisites
4.2. Create Keystore
4.3. Build APK
5. Create IPA file ‚Äì iOS

5.1. Prerequisites
5.2. Create Signing keys
5.3. Build IPA
6. Distribute and install

6.1. on Android
6.2. on iOS
Resources
A condensed version of these steps without much explanation or context is available on the accompanying GitHub repository.
1. Turtle CLI
To install Turtle CLI, run
$ npm install -g turtle-cli
This will make command turtle globally available on your system. To verify it was correctly installed, let‚Äôs print the version:
$ turtle -V
0.24.3
2. Create a dummy application
Let‚Äôs create a dummy application using Expo CLI. In your terminal, run
$ npx expo init ExampleApplication
It will ask you a few questions:
# Expo version 5.0.3
npx expo init ExampleApplication
? Choose a template: ‚Ä∫ - Use arrow-keys. Return to submit.
    ----- Managed workflow -----
‚ùØ   blank               a minimal app as clean as an empty canvas
    blank (TypeScript)  same as blank but with TypeScript configuration
    tabs (TypeScript)   several example screens and tabs using react-navigation and TypeScript
    ----- Bare workflow -----
    minimal             bare and minimal, just the essentials to get you started
The blank template is enough for us.
If you have yarn installed, Expo will use it by default to install dependencies. You can use the --npm flag in the init command if you‚Äôd prefer to use npm instead.
Once it‚Äôs done setting up your project, you should see the following output in the terminal:
‚úÖ Your project is ready!

To run your project, navigate to the directory and run one of the following yarn commands.

- cd ExampleApplication
- yarn start
Run the commands and let‚Äôs verify the generated boilerplate works in our emulators:


To finish setting up the dummy application, you need to configure the app.json file because some configuration keys must be specified to build a standalone app.
If you would like to know more about these standalone app specific configurations, check Expo‚Äôs documentation for iOS and for Android.
For this tutorial, it is only necessary to specify the keys &quot;bundleIdentifier&quot; under &quot;ios&quot;, and &quot;package&quot; under &quot;android&quot; in your app.json file:
...
    &quot;ios&quot;: {
      ...
      &quot;bundleIdentifier&quot;: &quot;com.example.exampleApplication&quot;,
      ...
    },
    &quot;android&quot;: {
      ...
      &quot;package&quot;: &quot;com.example.example_application&quot;,
      ...
    }
...
3. Publish Expo app on local server
Expo has this notion of app publishing: it allows you to share a link or QR code to Expo‚Äôs website and anyone can run your app through the Expo app on their devices.
Having your app published is also necessary for over-the-air (OTA) updates, allowing seamless updates to your application, and to publish your application (i.e. building your application files on Expo servers).
You would typically run
$ expo login -u $EXPO_USERNAME -p $EXPO_PASSWORD
$ expo publish
and your app would then be available at https:&#x2F;&#x2F;expo.dev&#x2F;&lt;EXPO_USERNAME&gt;&#x2F;&lt;APP_NAME&gt;.
To have your Expo app ‚Äúpublished‚Äù on your local server (and avoid public publishing on Expo servers), you will use a different command:
$ expo export --dev --public-url &lt;your-url-here&gt;
The --dev flag is necessary because you will use a non-https server to publish your Expo app. Note that this prevents you from using OTA updates.
Your server does not need to be running for this step, but you do need to know which local URL you are going to use in advance. This tuorial assumes you will run a local server at http:&#x2F;&#x2F;127.0.0.1:8000.
You can now export the app:
$ expo export --dev --public-url http:&#x2F;&#x2F;127.0.0.1:8000
...
Export was successful. Your exported files can be found in dist
This command will create a dist directory containing the iOS and Android JavaScript bundles and the different assets you are using.
dist
‚îú‚îÄ‚îÄ android-index.json
‚îú‚îÄ‚îÄ assets
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ 13685372945d816a2b474fc082fd9aaa
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ 140c53a7643ea949007aa9a282153849
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ ...
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ fdbedb7e67aa7c0ecad83d9c2fa4dfba
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ fdc01171a7a7ea76b187afcd162dee7d
‚îú‚îÄ‚îÄ bundles
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ android-a9defc54fb2ffdb7e6fdaf5b8d0be751.js
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ ios-a29c3e4ac97a2abdc5208fd4f06e7708.js
‚îî‚îÄ‚îÄ ios-index.json
You can now serve the dist directory on your web server, e.g.
$ npx http-server -p 8000 dist
Note: if for some reason you need to re-export your application (because you modified your app.json file since the last export, for instance), you must first remove the dist directory:
# assuming you are at the root of the project
$ rm -rf dist
$ expo export --dev --public-url http:&#x2F;&#x2F;127.0.0.1:8000
4. Create APK file ‚Äì Android
First, verify that your local server is running. For example, you should see a similar output:
$ curl http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;android-index.json
{&quot;name&quot;:&quot;ExampleApplication&quot;,&quot;slug&quot;:&quot;ExampleApplication&quot;,&quot;version&quot;:&quot;1.0.0&quot;,&quot;orientation&quot;:&quot;portrait&quot;,&quot;icon&quot;:&quot;.&#x2F;assets&#x2F;icon.png&quot;,&quot;splash&quot;:{&quot;image&quot;:&quot;.&#x2F;assets&#x2F;splash.png&quot;,&quot;resizeMode&quot;:&quot;contain&quot;,&quot;backgroundColor&quot;:&quot;#ffffff&quot;,&quot;imageUrl&quot;:&quot;http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;assets&#x2F;201a91bd1740bb1d6a1dbad049310724&quot;}...
4.1. Prerequisites
For Turtle CLI to work correctly to create an .apk file for Android, you need to make sure the following dependency is installed: Java Development Kit (version 8).
If you know which Expo SDK version you are going to use, you can run
$ turtle setup:android --sdk-version &lt;SDK-VERSION&gt;
This will take some time:
$ turtle setup:android --sdk-version 44.0.5
Jan 20 20:22:45 turtle[61127] INFO:  Downloading Android SDK
  platform: &quot;android&quot;
  buildPhase: &quot;setting up environment&quot;
downloading [&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;] 98% 0.2s
...
Jan 20 20:26:56 turtle[61127] INFO:  shell app for SDK 44.0.5 doesn&#39;t exist, downloading...
  platform: &quot;android&quot;
  buildPhase: &quot;setting up environment&quot;
downloading [&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; ] 95% 0.5sJan 20 20:27:08 turtle[61127] INFO:  shell app has been downloaded
  platform: &quot;android&quot;
  buildPhase: &quot;setting up environment&quot;
...
Jan 20 20:29:51 turtle[61127] INFO:  dependencies installed!
  platform: &quot;android&quot;
  buildPhase: &quot;setting up environment&quot;
Jan 20 20:29:51 turtle[61127] INFO:  it&#39;s all set!
  platform: &quot;android&quot;
  buildPhase: &quot;setting up environment&quot;
In the meantime, you can move on to the next section.
4.2. Create Keystore
Just like any other Android app, this app must be signed with some security certificates. In Android-land, as far as I understand, it‚Äôs called a keystore. The instructions to create such a keystore file are available on the Android Developers documentation.
Basically, just create a dummy Android project with Android Studio, and then go to Build &gt; Generate Signed Bundle &#x2F; APK.... Choose APK and press Next. The UI will ask you which app you want to sign, and your dummy app should be pre-selected. On the same screen, press on the button Create new...; just fill the form and you‚Äôre good to go.
Alternatively, if you have keytool CLI utility available on your system (you can check that by trying keytool --help in your terminal), you can generate a keystore file with the following command
$ keytool -genkeypair -v -keystore keystore.jks -alias keyalias -keyalg RSA -keysize 2048 -validity 9125
Enter keystore password:
Re-enter new password:
What is your first and last name?
  [Unknown]:
What is the name of your organizational unit?
  [Unknown]:
What is the name of your organization?
  [Unknown]:
What is the name of your City or Locality?
  [Unknown]:
What is the name of your State or Province?
  [Unknown]:
What is the two-letter country code for this unit?
  [Unknown]:
Is CN&#x3D;Unknown, OU&#x3D;Unknown, O&#x3D;Unknown, L&#x3D;Unknown, ST&#x3D;Unknown, C&#x3D;Unknown correct?
  [no]:  yes

Generating 2,048 bit RSA key pair and self-signed certificate (SHA256withRSA) with a validity of 9,125 days
	for: CN&#x3D;Unknown, OU&#x3D;Unknown, O&#x3D;Unknown, L&#x3D;Unknown, ST&#x3D;Unknown, C&#x3D;Unknown
Enter key password for &lt;keyalias&gt;
	(RETURN if same as keystore password):
Re-enter new password:
[Storing keystore.jks]

Warning:
The JKS keystore uses a proprietary format. It is recommended to migrate to PKCS12 which is an industry standard format using &quot;keytool -importkeystore -srckeystore keystore.jks -destkeystore keystore.jks -deststoretype pkcs12&quot;.
As a TL;DR, you can just download a dummy certificate on the accompanying repository under should-be-private&#x2F;keystore.jks, for testing purposes only. The keystore file is hugely important if you ever plan to submit your app to Google Play store: it‚Äôs the only way to assert you‚Äôre the rightful owner to provide new updates to your app.
File: keystore.jks
keystorepassword
keyalias
keypassword
4.3. Build APK
Make sure that you are serving the dist directory on http:&#x2F;&#x2F;127.0.0.1:8000 as explained above in Run a local server. Assuming you are using bash as your shell, from the root of your project, run:
EXPO_ANDROID_KEYSTORE_PASSWORD&#x3D;&quot;keystorepassword&quot; \
EXPO_ANDROID_KEY_PASSWORD&#x3D;&quot;keypassword&quot; \
turtle build:android \
  --type apk \
  --keystore-path .&#x2F;should-be-private&#x2F;keystore.jks \
  --keystore-alias &quot;keyalias&quot; \
  --allow-non-https-public-url \
  --public-url http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;android-index.json
Note that you need the flag --public-url to point to http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;android-index.json. In addition, it is also necessary to use the --type apk flag to produce an APK file since version 0.8.0 of turtle-cli.
The build may take some time:
Jan 20 20:38:17 turtle[61719] INFO:  Using manifest: {
  &quot;name&quot;: &quot;ExampleApplication&quot;,
  &quot;slug&quot;: &quot;ExampleApplication&quot;,
  &quot;version&quot;: &quot;1.0.0&quot;,
  &quot;orientation&quot;: &quot;portrait&quot;,
  &quot;icon&quot;: &quot;.&#x2F;assets&#x2F;icon.png&quot;,
...
Jan 20 20:38:51 turtle[61719] INFO:  Starting a Gradle Daemon (subsequent builds will be faster)
  platform: &quot;android&quot;
  buildPhase: &quot;running gradle&quot;
  source: &quot;stdout&quot;
...
Once it finishes, you should see this output in your terminal:
Jan 20 20:43:19 turtle[61719] INFO:  copied build to ~&#x2F;expo-apps&#x2F;@anonymous__ExampleApplication-7f15208a56304617a200538cacd2e50e-signed.apk
  platform: &quot;android&quot;
  buildPhase: &quot;copying build artifact&quot;
This message gives you the location of your built .apk file. You can now move on to the Distribute and install section below if you are not interested in creating an .ipa file for iOS.
Note: if the build fails because of some Gradle error, like Could not resolve com.theartofdev.edmodo:android-image-cropper:2.8.0, make sure to open Android Studio and update the Android SDK and SDK Build-Tools. This should fix it.
5. Create IPA file ‚Äì iOS
First, verify that your local server is running, e.g.
$ curl http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;ios-index.json
{&quot;name&quot;:&quot;ExampleApplication&quot;,&quot;slug&quot;:&quot;ExampleApplication&quot;,&quot;version&quot;:&quot;1.0.0&quot;,&quot;orientation&quot;:&quot;portrait&quot;,&quot;icon&quot;:&quot;.&#x2F;assets&#x2F;icon.png&quot;,&quot;splash&quot;:{&quot;image&quot;:&quot;.&#x2F;assets&#x2F;splash.png&quot;,&quot;resizeMode&quot;:&quot;contain&quot;,&quot;backgroundColor&quot;:&quot;#ffffff&quot;,&quot;imageUrl&quot;:&quot;http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;assets&#x2F;201a91bd1740bb1d6a1dbad049310724&quot;...
5.1. Prerequisites
For Turtle CLI to work correctly to create an .ipa file for iOS, you need to make sure your system is macOS and that the following dependencies are installed:
Xcode (version 13.2.1 or newer)
fastlane
Note: make sure that you have run Xcode at least once and that you have agreed to the license agreements.
For more details, see Expo‚Äôs documentation.
If you know which Expo SDK version you are going to use, you can run
$ turtle setup:ios --sdk-version &lt;SDK-VERSION&gt;
If it errors out, saying that you don‚Äôt have the right version of fastlane, try re-installing fastlane (guide). The version used in this article is fastlane 2.200.0.
This will take some time:
$ turtle setup:ios --sdk-version 44.0.5
Jan 20 21:18:03 turtle[48488] INFO:  shell app for SDK 44.0.5 doesn&#39;t exist, downloading...
  platform: &quot;ios&quot;
  buildPhase: &quot;setting up environment&quot;
downloading [                    ] 1% 8514.8s
...
...
Jan 20 21:24:58 turtle[48488] INFO:  it&#39;s all set!
  platform: &quot;ios&quot;
  buildPhase: &quot;setting up environment&quot;
In the meantime, you can move on to the next section.
5.2. Create Signing keys
This assumes you have an Apple Developer Account, which is a paid account.
To create your distribution certificate file, or .p12 file, you can follow this guide.
You will also need your Apple Team ID and a Provisioning Profile that you can generate through Xcode as well. This other guide covers in greater lengths what all these cerficates are for and how to obtain them.

Note that the provisioning profile expires in 6 days in my case, since I do not have an Apple Developer paid account.
Sadly, it is not possible to share example files.
5.3. Build IPA
Make sure that you are serving the dist directory on http:&#x2F;&#x2F;127.0.0.1:8000 as explained Run a local server. Assuming you are using bash as your shell, from the root of your project, run:
EXPO_IOS_DIST_P12_PASSWORD&#x3D;&quot;&lt;PASSWORD HERE&gt;&quot; \
turtle build:ios \
  --team-id YOUR_TEAM_ID \
  --dist-p12-path &#x2F;path&#x2F;to&#x2F;your&#x2F;dist&#x2F;cert.p12 \
  --provisioning-profile-path &#x2F;path&#x2F;to&#x2F;your&#x2F;provisioning&#x2F;profile.mobileprovision \
  --allow-non-https-public-url \
  --public-url http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;ios-index.json
Note that you need the flag --public-url to point to http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;ios-index.json.
Once the build finishes successfully, you should get the path to your .ipa file.
6. Distribute and install
6.1. on Android
Take your .apk and share it through some Google Drive link or other medium of your choice.
If you download this .apk file through an Android device, it should offer you to install the application on the device.
Trick: if the URL is really not friendly to type, and for whatever reason you have to type it manually, use a QR Code generator (e.g. http:&#x2F;&#x2F;www.barcode-generator.org&#x2F;) and your device‚Äôs camera to simplify your life!
Alternatively, if you connect an Android device to your computer, you should be able to run:
$ adb devices
emulator-5554	device
to list all your connected Android devices and emulators. (In my case, only the emulator is ‚Äúconnected‚Äù.)
It is then possible to install the .apk file by running:
$ adb -s emulator-5554 install ~&#x2F;expo-apps&#x2F;@anonymous__ExampleApplication-7f15208a56304617a200538cacd2e50e-signed.apk
Performing Streamed Install
Success

6.2. on iOS
Caveat: I could not fully test this section, so my apologies if this does not work as intended.
Since you should have Xcode, the most promising solution is in this guide. It also mentions other ways to install the .ipa file.
That‚Äôs it for now, thank you for reading this far. You will find below the resources mentioned in this article.
If you have any questions or comments, please drop me a line on Twitter. I shall reply as soon as possible.
Stay tuned for more.
Resources
Expo: https:&#x2F;&#x2F;expo.dev
Turtle CLI: https:&#x2F;&#x2F;github.com&#x2F;expo&#x2F;turtle#readme
Expo‚Äôs guide to Building Standalone apps: https:&#x2F;&#x2F;docs.expo.dev&#x2F;classic&#x2F;building-standalone-apps&#x2F;
Configuring app.json: https:&#x2F;&#x2F;docs.expo.dev&#x2F;workflow&#x2F;configuration&#x2F;
Expo docs to configure CI with Turtle CLI: https:&#x2F;&#x2F;docs.expo.dev&#x2F;classic&#x2F;turtle-cli&#x2F;
Expo docs to host application on your own servers: https:&#x2F;&#x2F;docs.expo.dev&#x2F;distribution&#x2F;hosting-your-app&#x2F;
How to create a keystore for Android: https:&#x2F;&#x2F;developer.android.com&#x2F;studio&#x2F;publish&#x2F;app-signing#generate-key
Supporting GitHub repository: https:&#x2F;&#x2F;github.com&#x2F;RobinCsl&#x2F;build-standalone-expo-app&#x2F;*
#### [Optimize your img tags with Eleventy Image and WebC](https:&#x2F;&#x2F;www.robincussol.com&#x2F;optimize-your-img-tags-with-eleventy-image-and-webc&#x2F;) 
*I am very excited about WebC and couldn‚Äôt wait to try out the corresponding Eleventy plugin.
The first use-case I had in mind was to use Eleventy Image for the native HTML img tag, that can be generated from Markdown and without shortcode. I had done this before, for my unpublished blog rewrite that‚Äôs been waiting to be released for ever now, through hooking up Eleventy Image into a markdown-it plugin. It wasn‚Äôt pretty as markdown-it plugins are pretty alien to me.
But now, this can be done ‚Äúnatively‚Äù, √†-la-Cloudflare Workers for your native HTML elements!
UPDATE (04&#x2F;11&#x2F;2022): After sharing this article on Twitter, Zach Leatherman pointed out there should be an easier solution. It didn‚Äôt work as expected at first, which put me on a journey to fix the underlying issue in @11ty&#x2F;webc. I‚Äôm very pleased to share that my first contribution to the project was accepted and landed in v0.6.0. As a result, the content of the last section was updated to remove the dirty data file hack with _data&#x2F;Image.js: your image optimization logic can now truly live in a single file.
The documentation for WebC mentioned this use-case exactly, in the shape of this innocent puzzle:

‚ÄúFree idea: use the Eleventy Image plugin to return optimized markup‚Äù
So it should be easy, right?
Remember this lad?
I have discovered a truly remarkable proof of this theorem which this margin is too small to contain.
Pierre de Fermat, cca. 1637
No need to wait 3 centuries for the answer this time, because it was ultimately not so hard‚Ä¶ But I did struggle and wrestle with it for a few hours :D
Anyway, hope that can be useful to someone.
If you want to see the finished implementation, you can get it on GitHub: RobinCsl&#x2F;11ty-webc-img-demo.
Set up a WebC-powered Eleventy project
or take a shortcut by cloning this repo and going to the 01-initial folder.
Initialise the project
Let‚Äôs start with an empty folder and add a basic package.json file:
mkdir 11ty-webc-img
cd 11ty-webc-img
npm init -y
We need to install the latest canary release (2.0.0-canary.16 at the time of writing) of Eleventy as well as the WebC plugin:
 npm install @11ty&#x2F;eleventy@2.0.0-canary.16 @11ty&#x2F;eleventy-plugin-webc
Configure Eleventy
We will now configure Eleventy to use the WebC plugin by creating a .eleventy.js file with the following content:
const webc &#x3D; require(&quot;@11ty&#x2F;eleventy-plugin-webc&quot;);

module.exports &#x3D; function(eleventyConfig) {
	eleventyConfig.addPlugin(webc, {
		components: &quot;_includes&#x2F;webc&#x2F;*.webc&quot;
	});
}

In particular, components in the _includes&#x2F;webc folder will be available in the global scope, no need to import them explicitly!
Scaffold a minimal project
To finish our setup, we create a layout file and a simple WebC component which we will use in a basic page, to make sure our setup is working correctly.
We create the layout file under _includes&#x2F;layouts&#x2F;base.webc. It is a simple HTML template with the @html&#x3D;&quot;content&quot;  WebC directive set on the body tag. (See my-layout.webc in the docs)
&lt;!doctype html&gt;
&lt;html lang&#x3D;&quot;en&quot;&gt;
	&lt;head&gt;
		&lt;meta charset&#x3D;&quot;utf-8&quot;&gt;
		&lt;title&gt;Eleventy Images + WebC rocks!&lt;&#x2F;title&gt;
	&lt;&#x2F;head&gt;
	&lt;body @html&#x3D;&quot;content&quot;&gt;&lt;&#x2F;body&gt;
&lt;&#x2F;html&gt;
We now create a simple WebC component and write the following content, taken from the promising website 11ty.webc.fun, in _includes&#x2F;webc&#x2F;site-footer.webc :
&lt;footer&gt;
  &lt;p&gt;&amp;copy; 2022 Yours Truly.&lt;&#x2F;p&gt;
&lt;&#x2F;footer&gt;
Finally, we create our basic page at the root of the project in index.webc:
---
layout: layouts&#x2F;base.webc
---

Fun with WebC

&lt;site-footer&gt;&lt;&#x2F;site-footer&gt;
If all went according to plan, we should now be able to run
npx @11ty&#x2F;eleventy --serve
in the terminal and see the following output in our browser at http:&#x2F;&#x2F;localhost:8080:

Create an img.webc component
or check the code on GitHub in the 02-img folder if you want to see the code right away.
In this section, we will create our img.webc override for the native img HTML tag and use Eleventy Image within it.
As a starting point, we will use the example from the documentation from which the screenshot at the start of this post is taken. In a new file _includes&#x2F;webc&#x2F;img.webc, add the following:
&lt;script webc:type&#x3D;&quot;render&quot; webc:is&#x3D;&quot;template&quot;&gt;
function() {
	if(!this.alt) {
		throw new Error(&quot;[img.webc] the alt text is missing, no fun&quot;);
	}
	return &#x60;&lt;img src&#x3D;&quot;${this.src}&quot; alt&#x3D;&quot;${this.alt}&quot;&gt;&#x60;;
}
&lt;&#x2F;script&gt;
This essentially verifies at build-time that all your images have a non-empty alt text, neat!
Let‚Äôs add a ‚Äúbroken‚Äù image to our index page, in index.webc, to verify that this works correctly:
---
layout: layouts&#x2F;base.webc
---

Fun with WebC

&lt;img src&#x3D;&quot;https:&#x2F;&#x2F;images.unsplash.com&#x2F;photo-1627224286457-923944e5b159?auto&#x3D;format&amp;fit&#x3D;crop&amp;w&#x3D;387&amp;q&#x3D;80&quot;&gt;

&lt;site-footer&gt;&lt;&#x2F;site-footer&gt;
And indeed, running npx @11ty&#x2F;eleventy --serve yields an expected error:
$ npx @11ty&#x2F;eleventy --serve
[11ty] Problem writing Eleventy templates: (more in DEBUG output)
[11ty] 1. Having trouble rendering webc template .&#x2F;index.webc (via TemplateContentRenderError)
[11ty] 2. [img.webc] the alt text is missing, no fun (via Error)
Add an alt text (‚Äúpossum hanging from a palm leaf‚Äù should work) and try again. Oh no! Another error:
$ npx @11ty&#x2F;eleventy --serve  
[11ty] Problem writing Eleventy templates: (more in DEBUG output)
[11ty] 1. Having trouble rendering webc template .&#x2F;index.webc (via TemplateContentRenderError)
[11ty] 2. Circular dependency error: You cannot use &lt;img&gt; inside the definition for .&#x2F;_includes&#x2F;webc&#x2F;img.webc (via Error)
That makes sense, when you think about it! All our .webc files are processed by WebC, so if we return an img tag in a img.webc component, the compiler would work indefinitely to get to the bottom of it, because it‚Äôs turtles img all the way down!
Luckily for us, we can let WebC know when its job is done through the webc:raw attribute:
Use webc:raw to opt-out of WebC template processing for all child content of the current node. Notably, attributes on the current node will be processed.
Let‚Äôs fix it in _includes&#x2F;webc&#x2F;img.webc:
  &lt;script webc:type&#x3D;&quot;render&quot; webc:is&#x3D;&quot;template&quot;&gt;
  function() {
	  if(!this.alt) {
	  	throw new Error(&quot;[img.webc] the alt text is missing, no fun&quot;);
	  }
-	  return &#x60;&lt;img src&#x3D;&quot;${this.src}&quot; alt&#x3D;&quot;${this.alt}&quot;&gt;&#x60;;
+	  return &#x60;&lt;img webc:raw src&#x3D;&quot;${this.src}&quot; alt&#x3D;&quot;${this.alt}&quot;&gt;&#x60;;
  }
  &lt;&#x2F;script&gt;
It compiles now! üéâ
Here‚Äôs the expected output:

We have effectively augmented our img tag to verify at build time that alt text is present.
Let‚Äôs now add Eleventy Image to the party!
Optimize your HTML img with Eleventy Image
or check the code on GitHub in the 03-final folder if you want to see my solution.
Let‚Äôs first install Eleventy Image in our project:
npm install @11ty&#x2F;eleventy-img
We will more or less copy the example from the Eleventy Image docs in the Asynchronous Shortcode section, because our JavaScript render function can be async!
In the file _includes&#x2F;webc&#x2F;img.webc, let‚Äôs add the following:
  &lt;script webc:type&#x3D;&quot;render&quot; webc:is&#x3D;&quot;template&quot;&gt;
-   function() {
-      if(!this.alt) {
-          throw new Error(&quot;[img.webc] the alt text is missing, no fun&quot;);
-      }
-      return &#x60;&lt;img webc:raw src&#x3D;&quot;${this.src}&quot; alt&#x3D;&quot;${this.alt}&quot;&gt;&#x60;;
+    const Image &#x3D; require(&quot;@11ty&#x2F;eleventy-img&quot;);
+    module.exports &#x3D; async function() {
+      let metadata &#x3D; await Image(this.src, {
+        widths: [300],
+        formats: [&quot;avif&quot;, &quot;jpeg&quot;],
+        outputDir: &quot;_site&#x2F;img&#x2F;&quot;,
+      });

+      let imageAttributes &#x3D; {
+        alt: this.alt,
+        sizes: &quot;100vw&quot;,
+        loading: &quot;lazy&quot;,
+        decoding: &quot;async&quot;,
+      };

+      &#x2F;&#x2F; You bet we throw an error on missing alt in &#x60;imageAttributes&#x60; (alt&#x3D;&quot;&quot; works okay)
+      return Image.generateHTML(metadata, imageAttributes);
  }
  &lt;&#x2F;script&gt;

Note that we harcoded the value for  sizes in the imageAttributes object, and prepended both src and alt by this to wire things up correctly. We also instruct the Image plugin to output optimized images in our _site&#x2F;img&#x2F; folder directly for them to be available when using the following markup:
&lt;img alt&#x3D;&quot;a lovely image&quot; src&#x3D;&quot;&#x2F;img&#x2F;hash-width.jpeg&quot;&gt;
Let‚Äôs run npx @11ty&#x2F;eleventy --serve once more:
$  npx @11ty&#x2F;eleventy --serve
[11ty] Problem writing Eleventy templates: (more in DEBUG output)
[11ty] 1. Having trouble rendering webc template .&#x2F;index.webc (via TemplateContentRenderError)
[11ty] 2. Circular dependency error: You cannot use &lt;img&gt; inside the definition for .&#x2F;_includes&#x2F;webc&#x2F;img.webc (via Error)
That error sounds familiar, right?
We need to tell WebC to ignore img tags generated by Eleventy Image, and it‚Äôs as simple as adding &quot;webc:raw&quot;: true to the imageAttributes object:
  &lt;script webc:type&#x3D;&quot;render&quot; webc:is&#x3D;&quot;template&quot;&gt;
  const Image &#x3D; require(&quot;@11ty&#x2F;eleventy-img&quot;);
  module.exports &#x3D; async function() {
    let metadata &#x3D; await Image(this.src, {
      widths: [300],
      formats: [&quot;avif&quot;, &quot;jpeg&quot;],
      outputDir: &quot;_site&#x2F;img&#x2F;&quot;,
    });
  
    let imageAttributes &#x3D; {
      alt: this.alt,
      sizes: &quot;100vw&quot;,
      loading: &quot;lazy&quot;,
      decoding: &quot;async&quot;,
+     &quot;webc:raw&quot;: true,
    };
  
    &#x2F;&#x2F; You bet we throw an error on missing alt in &#x60;imageAttributes&#x60; (alt&#x3D;&quot;&quot; works okay)
    return Image.generateHTML(metadata, imageAttributes);
  }
  &lt;&#x2F;script&gt;
And we‚Äôre done!! (Note how the image now aligns perfectly with localhost:8080 #IncontestableTruth)

with corresponding markup:
&lt;!doctype html&gt;
&lt;html lang&#x3D;&quot;en&quot;&gt;
&lt;head&gt;
        &lt;meta charset&#x3D;&quot;utf-8&quot;&gt;
        &lt;title&gt;Eleventy Images + WebC rocks!&lt;&#x2F;title&gt;
    &lt;&#x2F;head&gt;
    &lt;body&gt;Fun with WebC

&lt;picture&gt;&lt;source type&#x3D;&quot;image&#x2F;avif&quot; srcset&#x3D;&quot;&#x2F;img&#x2F;SwdsuTpRbT-300.avif 300w&quot;&gt;&lt;img alt&#x3D;&quot;possum hanging from a palm leaf&quot; loading&#x3D;&quot;lazy&quot; decoding&#x3D;&quot;async&quot; src&#x3D;&quot;&#x2F;img&#x2F;SwdsuTpRbT-300.jpeg&quot; width&#x3D;&quot;300&quot; height&#x3D;&quot;450&quot;&gt;&lt;&#x2F;picture&gt;


&lt;footer&gt;
  &lt;p&gt;¬© 2022 Yours Truly.&lt;&#x2F;p&gt;
&lt;&#x2F;footer&gt;

&lt;&#x2F;body&gt;
&lt;&#x2F;html&gt;
Parting words
I am so excited to explore further the possibilities of using WebC to augment other native HTML elements.
This article only scratches the surface when it comes to the img tag. You could pass props down from the markup to Eleventy Image and control the behaviour of the image optimization. But we can now augment our native img tag without much hassle as it‚Äôs all in one file.
It even works with Markdown images (and yields the cutest webpage ever):
  ---
  layout: layouts&#x2F;base.webc
  ---
  
  Fun with WebC
  
  &lt;img alt&#x3D;&quot;possum hanging from a palm leaf&quot; src&#x3D;&quot;https:&#x2F;&#x2F;images.unsplash.com&#x2F;photo-1627224286457-923944e5b159?auto&#x3D;format&amp;fit&#x3D;crop&amp;w&#x3D;387&amp;q&#x3D;80&quot;&gt;
  
+  &lt;template webc:type&#x3D;&quot;11ty&quot; 11ty:type&#x3D;&quot;md&quot;&gt;
+  
+   ![&#39;close-up of a baby possum among ferns&#39;](https:&#x2F;&#x2F;images.pexels.com&#x2F;photos&#x2F;13960994&#x2F;pexels-photo-13960994.jpeg)
+  
+  &lt;&#x2F;template&gt;
  
  &lt;site-footer&gt;&lt;&#x2F;site-footer&gt;
  

All the more reasons to optimize your images now!
Find the code supporting this article on the RobinCsl&#x2F;11ty-webc-img-demo repository.*
#### [Year in Review: 2021](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2021&#x2F;) 
*We‚Äôre already at the start of February 2022, but who says retrospectives need to be done on January 1st?! A lot of things happened in 2021, both personally and professionally. Time to reflect and remember.
Personal üë∂üíçüìÑüìÉüìëüìú
This first part is the personal stuff, so if you don‚Äôt care about it, you can skip to the professional stuff instead. And if you don‚Äôt care about that too, why are you here? üòÇ
Welcome, L√©onard!
In January of 2021 came the great news that we were expecting a baby and a few months later, my son L√©onard came to this world! It‚Äôs been a few months now and it‚Äôs insane how much this event changed our lives.
It‚Äôs quite amazing to witness a human being‚Äôs awakening to the world, I do feel privileged.
Of course, it‚Äôs not just rainbows and unicorns.
Sleeping as much as I want is now a distant memory&#x2F;dream, though I‚Äôve been surprised that it‚Äôs actually quite possible to operate without the amount of sleep I used to get.
Having free time for side projects and writing almost vanished (and usually eats up time when I should sleep instead, while it‚Äôs allowed by baby-boss). I don‚Äôt know how other parents manage but time just flies by.
One thing‚Äôs for sure, L√©onard makes sure I keep fit and exercise regularly (a promise I made myself at the beginning of last year, right):
it‚Äôs quite a normal day when I need to go up and down the 4 floors of the block of flats we live in (and when it‚Äôs at night, I have this game where I switch the lights on and go up and down within the 3 minutes they‚Äôre programmed to stay on; naturally, after my 4th round trip, I usually do the last flight of stairs in the dark üòÖüòÆ‚Äçüí®).
it‚Äôs also quite a normal day when I need to carry him in my arms for 10- to 20-minute stretches, while doing squats, at least 2 or 3 times.
Coach L√©onard can ask for these drills at any time of the day (and night‚Ä¶), he says it‚Äôs for my own good. My knees and hips and back and arms tend to disagree.
Paperwork, paperwork, paperwork
In 2021, I‚Äôve had time to think so many times if the amount of paperwork we‚Äôre doomed to go through is some sort of devilish scheme to keep people busy on the boring stuff. It definitely does not help when you‚Äôre an expat.
If you had told me having a baby would generate so much paperwork chores, I probably would not have believed you. The story goes that we wanted to do an early recognition of fatherhood for me to be officially recognised as the father of my child to be.
In France, as a French person, this is a 5-minute visit to my local townhall, easy-peasy.
In Czechia, as a foreigner, this would have required tons of documents that also needed translating by a certified translator (aka costs some money).
Since we were engaged, and you‚Äôre officially recognised as the father when having a baby as a married couple, we thought we might as well go through paperwork hell to get married.
It did not disappoint.
Our child was due some time in the middle of September, so we had almost the entire year to get married, should be easy, right.
Being so diligent, we got in touch with the French embassy to understand what we need to do to get married in April:
weddings at the embassy are quite a rare thing, you should get married through the local authorities
getting married in Prague is like getting married in Las Vegas (say what?)
Only to realise at the end of June that:
babies aren‚Äôt always born around the due date
it‚Äôs already the end of June
Let‚Äôs just say that we managed to be on time paperwork-wise for our wedding at the beginning of August (ever heard of the necessary 2-week public display of your intent on getting married, during which somebody has the right to oppose it, to get the paper allowing a French person to marry‚Ä¶?), but the ‚Äúgetting married like in Las Vegas‚Äù was lost on us.
Professionally
Promo
In January last year, I got promoted to Staff Engineer at Kiwi.com. Pretty crazy to me to think that I started working in the industry in September 2017. Even though titles only mean so much, it‚Äôs still a nice recognition that I bring value to the company.
Pair Documenting
I definitely learnt a lot about infrastructure and Kubernetes, which might seem overkill for a frontend platformer, but there was a void to fill when my ex-colleague Adam Jani≈° left, so I put on my newbie hat and pair-documented Adam‚Äôs knowledge throughout his notice period. I still refer or point people to that document quite regularly, it‚Äôs an investment that keeps on giving after all these months!
This was also the first time I tried to add original schematics&#x2F;pictures and Excalidraw made it super fun and easy!
Robin‚Äôs Gazette
My newsletter, Robin‚Äôs Gazette, kept going quite well! It turned one year old on December, 9th! üéÇ
In 2021, I published 25 issues (784 emails in total!), and went from 9 subscribers to 49 at the end of the year!
Given the quite low volume of subscribers, my average open rate and click rate are pretty okay (though they are ‚Äúall-time‚Äù performance metrics):
70.35% open rate,
24.38% click rate.
Even though it‚Äôs always some amount of work, I deem it worthy of my time as I get to practice writing and I always learn something slightly more deeply than if I just scrolled Twitter or Hacker News. This continues my efforts from ‚Äúarchivist to creator‚Äù that I mentioned in my last retro.
Special mention to Shawn @swyx Wang for being so encouraging along the way!
My goal for this year is to continue on that path, though I do need to put some effort into advertising it better:
the subscribe form is hard to find on my website,
the content is short-lived and behind closed doors ‚Äì so I should repurpose it to an extent,
start marketing it more (instead of the infrequent tweets I‚Äôve tried at some point).
One small change for this year: I now send the Gazette every other Friday instead of every other Wednesday.
Some of the feedback I received üòä
‚ÄúSuch a great newsletter this week Robin, amazing job!‚Äù
‚ÄúStill enjoying the newsletter!‚Äù
Blog
The blog was a bit quiet last year, I only published 3 posts and refreshed my most read article about building APK files locally for Expo projects (it recently crossed 20K views in its lifetime! üéâ).
They were:
Python Dependencies for JavaScript Developers
How to Download a Brain with Pair Documenting (already mentioned above)
Year in Review: 2020
I really hope to start writing more again on the blog because the SEO game takes a long time for Google to start recommending your stuff: I saw more traffic to my How to Test Your ESLint Config and Get your Own Sentry Playground articles, and they were written in September 2020!
Started working on a course
In the last retro, I announced that I planned to write a book. That did not happen‚Ä¶ üòÖ
Instead, I started working on a video course which essentially replicates the now defunct Margarita project from scratch (which was the subject of this article on my blog), showcasing how to build cross-platform web and native mobile apps through React Native and React Native Web.
This was the occasion to spend some time weeks watching all the microphone reviews on YouTube, all the Audacity and Obs Studio tutorials for sound production, to ultimately produce a half-finished tutorial on YouTube (the best 33 seconds of your life, trust me).
Source



Ever since my son was born, I‚Äôve had little time to focus for longer than 5-minute stretches outside of work, so this project has lost steam right now. I hope I‚Äôll manage to finish it in the first semester!
A look back and forward
Revisiting some of my plans for 2021 and making some for 2022.
Family
As much as I would love to work on side-projects and such, my family comes first, and I want to keep it that way. I‚Äôm excited to continue discovering what my next workouts will be, courtesy of Coach L√©onard! (Seriously, I‚Äôve got some arms now! üí™)
I cannot wait for my son to meet all his grand-parents, aunts and uncles in France later this year!
Nehovor√≠m pliynule po slovensky
aka I don‚Äôt speak Slovak fluently.
One of my goals was to make sure I would be able to speak to all my wedding guests in their preferred language (amongst French, English and Slovak). Because of the above (and COVID not helping‚Ä¶), the guest list was actually pretty small and my mastery of Slovak would not be entirely necessary to do well on my goal. So I guess I will learn better alongside my son this year whilst we wait for the big party?
Almost no SAD this past year
Come December, I usually feel pretty burnt out and in dire need of vacation to recharge. Somehow, in December 2021, I did not feel like that at all.
My new family life provided some amount of distractions from work. Even though that increased my context switching throughout the days and the nights were not as restful, it somehow created some distance between work and me. Or maybe because living with a newborn forces you to live in the moment, one day at a time‚Ä¶ üòÖ
Writing
Less paperwork, more blog posts. ü§û
Keep the newsletter going, and make it better, faster, stronger!
Improve my note taking system, which is a bit chaotic and not really systematic at the moment.
Learning Rust
In 2021, I started dabbling with Rust, mostly through the really great WIP book from Luca Palmieri, Zero To Production In Rust. It assumed some knowledge so I sometimes struggled had fun filling in the gaps.
Given where the JS ecosystem is going in terms of tooling (oh yeah, in 2021 I started this Awesome List of JavaScript Tooling Not Written In JavaScript on GitHub ‚Äì 667 stars so far!), I think it‚Äôs important to explore beyond the confines of JavaScript&#x2F;TypeScript. So I‚Äôd like to spend more time with Rust this coming year!
Lots of things to be grateful for last year and lots to look forward to this year. C‚Äôest parti !*
#### [Python Dependencies for JavaScript Developers](https:&#x2F;&#x2F;www.robincussol.com&#x2F;python-dependencies-for-javascript-developers&#x2F;) 
*Recently, I needed to update an old Python codebase which had not been touched in 3 years! Of course, the dependencies were so outdated that the Dockerfile of the project wouldn‚Äôt build. My JavaScript knowledge did not help me much:
how could I do a yarn upgrade-interactive --latest to update dependencies?
where‚Äôs the dependency lockfile?
why do we need to compile C-libraries for Python dependencies?
Luckily for me, my colleague Ondrej patiently explained how to approach these questions.
Using a virtual environment
TL;DR: pip installs packages globally unless we activate a virtual environment.
In Python, the default package manager is call pip and it installs packages from the Python Package Index, shortened to Pypi. The equivalent in JavaScript land would be npm and npmjs.com.
By default, pip installs packages system-wide. This contrasts with the need to pass a --global flag to npm.
To remedy that, we can use a local Python environment (a bit like having our node_modules folder in a JavaScript project). The following command will create a virtual environment in a venv folder in our current directory:
# Create the venv folder container the virtual environment
$ python3 -m venv venv
To make sure pip knows it should install packages in this virtual environment, we must activate it. Depending on your shell, you should source the appropriate activate file in venv&#x2F;bin:
activate, for Bash and ZSH,
activate.fish, for Fish Shell,
activate.csh, for csh
Activate.ps1, for PowerShell.
In my case, I will source the one for ZSH:
$ source venv&#x2F;bin&#x2F;activate
Now, pip install will install packages in the local folder instead of targeting the global scope. My ‚ÄúPython node_modules folder‚Äù is venv&#x2F;lib&#x2F;python3.8&#x2F;site-packages&#x2F;.
Dependencies in Python
TL;DR: use pip-compile to generate a lockfile and pip-sync to install dependencies from that lockfile
To deal with dependencies, we must install the pip-tools package in our virtual environment:
pip install pip-tools
This will allow us to use pip-compile and pip-sync later on.
Once that‚Äôs done, we could for example decide to start a Django project, ‚Äúthe web framework for perfectionists with deadlines‚Äù. The latest version of the package at the time of writing is 3.2.5. Let‚Äôs create our Python equivalent of a package.json file to express our project needs the Django package pinned to version 3.2.5:
# requirements.in
django&#x3D;&#x3D;3.2.5
Note: the better equivalent to a package.json would be a setup.py file, since it contains additional fields like the name of the local package, its version, etc. but we just want to write down the dependencies.
EDIT #1: it‚Äôs apparently not common practice to pin dependency versions in requirements.in, just in case you really need to (if there are breaking changes for example). Thanks for pointing it out, Ondrej.
To generate a corresponding lockfile of the transitive dependencies of Django, we can run the following command:
pip-compile --output-file requirements.txt requirements.in
This will create the following requirements.txt file:
#
# This file is autogenerated by pip-compile with python 3.8
# To update, run:
#
#    pip-compile --output-file&#x3D;requirements.txt requirements.in
#
asgiref&#x3D;&#x3D;3.4.1
    # via django
django&#x3D;&#x3D;3.2.5
    # via -r requirements.in
pytz&#x3D;&#x3D;2021.1
    # via django
sqlparse&#x3D;&#x3D;0.4.1
    # via django

Now that we have this file, we can finally retrieve and install the packages with the following command:
pip-sync
Note: if you try to run pip-sync without a requirements.txt, you will get the following error:
No requirement files given and no requirements.txt found in the current directory
It is indeed necessary to run pip-compile before.
Updating dependencies
Similar to npm oudated, we can list the outdated Python dependencies with
$ pip list --outdated
For example, after downgrading Django to 3.2.3 in my requirements.in, regenerating the lockfile with pip-compile, re-installing the dependencies with pip-sync, the command above will show:
Package    Version Latest Type
---------- ------- ------ -----
Django     3.2.3   3.2.5  wheel
setuptools 44.0.0  57.4.0 wheel
To update the dependency, I can change the version back to 3.2.5 in the requirements.in and go through the same dance:
$ pip-compile --output-file requirements.txt requirements.in
$ pip-sync
$ pip list --outdated
Package    Version Latest Type
---------- ------- ------ -----
setuptools 44.0.0  57.4.0 wheel
EDIT #2: a batteries-included equivalent to Yarn is called Poetry. Thanks for sharing, D√°niel!
Wheels and Eggs
You might wonder what this ‚Äúwheel‚Äù type is for the Django and setuptools packages.
They are still mysterious to me, but here‚Äôs my current understanding: in Python, some dependencies need to be built for specific architectures, as they might be written in Cython, ‚Äúa superset of the Python language that additionally supports calling C functions and declaring C types on variables and class attributes‚Äù. Wheels and Eggs are packaging formats for these.
In particular, it is not a good idea to use Alpine Docker images for Python projects as a lot of packages don‚Äôt have pre-built wheels for that architecture: your Docker build step will need to compile the packages from source, slowing down your entire process (and requiring you to install the necessary build tools for this compilation to happen!).
I don‚Äôt think there is a similar ‚Äúpackaging format‚Äù concept in JavaScript land. But we do have packages shipping prebuilt binaries for specific architectures, for example Sharp, the Node.js image processing package. (And we probably have enough issues with CommonJS vs ES Modules as it is‚Ä¶ :smile:)
Conclusions
All in all, a project needs to:
specify external dependencies and their desired version with semantic ranges
have a way to retrieve said dependencies
keep track of which versions were effectively installed to improve reproducibility.
Despite all these measures, the Docker file of an unmaintained 3-year old project could not build. Software rots!*
#### [How to Download a Brain with Pair Documenting](https:&#x2F;&#x2F;www.robincussol.com&#x2F;download-a-brain-with-pair-documenting&#x2F;) 
*When people leave the company, a lot of specific and ad hoc knowledge goes away with them. Unless there is already a strong documentation culture, there‚Äôs only so much that can be said and done during exit interviews to make up for it.
But this doesn‚Äôt have to be left to fate.
Throughout the month of January, my now ex-colleague Adam Jani≈° and I pair documented all his knowledge about the frontend infrastructure at Kiwi.com. We produced a 24 page document, fixed a few bugs and addressed some tech debt. More importantly, we had fun doing it!
Here‚Äôs how we approached it.
How to pair document
This is an attempt at formalising what we‚Äôve done, feel free to s&#x2F;Newbie&#x2F;Robin&#x2F;g and s&#x2F;Expert&#x2F;Adam&#x2F;g.
The Protagonists
You will need two proactive people: an Expert on the subject to document and a Newbie who is not too cursed with knowledge yet. Bonus points if they have not really worked together but always had good chemistry in their interactions.

The Newbie makes it easy on the Expert for this documentation effort to be a no-brainer:
they organize the pair documenting sessions;
they manage the agenda of the sessions;
they do most of the note-taking;
they digest the notes into documentation drafts in between sessions;
they stay curious and eager to learn more about the subjects, with questions always at the ready (this is hard to fake, so find an adequate Newbie for the task).

The Expert shows up at the sessions and generously shares their knowledge with the Newbie, answering patiently every question they may have. They review the documentation drafts to ensure the prose does not betray the original intent of the notes. Bonus points if they include the Newbie in solving similar problems described in the nascent documentation as they arise in the support channels of the company‚Äôs Slack: learning by doing is a great way to drive home the material and expose remaining ambiguities.

The First Session
The Newbie is in charge and explains how it‚Äôs going to work in the first pair-documenting session. That means going through what‚Äôs expected of each participant in this documentation effort as well as giving an overview of the actual process.
The objective of the first session is crucial: go as broad as possible and capture as many ideas of what needs documenting to form a backlog of topics to go over in the next sessions.
This can be achieved through asking questions like (more examples in this template):
what are things that you know about that very few people know?
what are the things that people always ping you about on Slack?
what tasks pile up when you‚Äôre on vacation?
Once the amount of things to document gets a bit clearer, see how many days are left before they leave and agree on a schedule to leave enough time for this task.
In Between Sessions
The Newbie transforms the raw notes into documentation drafts and gets the Expert to review them.
As more people in the company are aware of this documentation effort, they might have questions of their own; the Newbie adds these points to the agenda for the next session.
The Expert includes the Newbie in all discussions on Slack touching on the subject to maximize the learning opportunities and give the docs a trial by fire.
A Normal Session
In the first 5-10 minutes, the Newbie and the Expert go over unresolved comments in the doc draft, they review the agenda from the previous session and see if anything pops up to be further discussed or explained, and finally, they review the agenda for the current session and decide what to prioritize.
They then go over each point in the agenda: the Expert does most of the talking while the Newbie does most of the note-taking. The Newbie shares their screen for the document to be visible by both pair documentors. The Newbie may interrupt the Expert at any point with questions or with attempts at paraphrasing what the Expert just described. The Expert glances at the notes being taken once in a while to ensure they don‚Äôt contain mistakes from the get-go.
When the time is up, the Newbie and the Expert look at how much they covered from the agenda, move what hasn‚Äôt been covered to the next session, and agree on a date and time for that next session (if it‚Äôs not already regular).
Tools we used
A Calendar: to plan the sessions, to have automatic reminders for them, and to share the visio-conference link.


Custom recurrence with expiry date, Hangouts link, Notification not to miss it, Allow guests to modify event for better collaboration

A Google Document: to store the agenda, the notes and the first documentation drafts. Do make use of the outline on the left-hand side to navigate more easily once the document gets to a certain size. Do make use of comments to discuss and improve the notes and the draft. This is also a good place to involve other people from the company asynchronously. Make sure to put this document in a shared team drive for it to have the right permissions set by default.


Use the ‚ÄúStyles‚Äù dropdown to get this hierarchy

Here‚Äôs a free template Google document to get you started. Feel free to make a copy.
LucidChart: to draw a few diagrams because pictures are great (though you may want to check out Draw.io for a great free alternative).
Why Pair Documenting Works
What usually happens
Unless there is a strong documenting culture, (1) people never prioritize documentation over almost any other task, because it‚Äôs just not as fun as coding or as urgent as the next fire you need to put out. That means that when someone is about to leave, (2) there is an impossible amount of things to document that they don‚Äôt even know where to start. Because they are short on time, they end up drafting a lil‚Äô something and call it a day. (3) Anyway, we never needed that, why are they asking me to document that stuff, who‚Äôs gonna read it anyway?! (Note the use of two ‚Äúanyway‚Äù).
Clear intention through planning
Through planning the pair documenting sessions, we make sure documentation does get prioritized and give it the importance it deserves. If the Expert‚Äôs knowledge is that important and they by happenstance siloed it, it becomes urgent to share this knowledge more widely to deal with that critical bus factor. (Whether they leave or not is almost irrelevant in this case.)
Because we know when the Expert‚Äôs last working day is, it is easier to retro-plan the right number of sessions to cover the entire backlog established in the first session. This of course might need adjusting throughout the pair documentation effort.
More fun and better quality through collaboration
Planning is not enough if the Expert is still lost about what needs documenting and in which level of details. The nagging ‚Äúare they even gonna read it?‚Äù-type questions could well be the end of the documentation effort already: a well-crafted plan not well-executed.
With an accountability buddy, things turn around entirely.
It becomes really difficult to bail out of the plan because you know the other person is expecting you to show up at the session.
Because the Newbie is enthusiastic about the topic, the Expert is more generous in their contribution.
Because the Newbie asks questions and cares about details, the pair documentors tailor the documentation to the level of knowledge on the receiving end. The Expert knows this documentation will be useful. üòå
Aligned incentives
The Expert also knows that what they know should be documented somewhere, and because they like their colleagues, they don‚Äôt want their departure to create a mess. (Right?!)
The Newbie knows this knowledge is valuable, and about to disappear if they don‚Äôt take action. Besides, it‚Äôs something they‚Äôre curious and wanted to learn more about anyway.
The Expert gets to share their knowledge and teach what they know to someone who‚Äôs enthusiastic and interested in the topic; the Newbie gets time with the Expert to learn as much as possible from them.
Parting thoughts
I really enjoyed the pair documenting sessions with Adam and I think they should be made a regular practice, just like pair programming. It‚Äôs a great way to level up people while producing value beyond the scope of that collaboration.
At the same time, documentation is only valuable if it gets read and updated continuously. I‚Äôve been thinking about how to bring it closer to where people are already consuming content. For example, this could take the form of digests of parts of the documentation in the company‚Äôs Slack.
I‚Äôm not super familiar with mob programming, but I do wonder if mob documenting could be a thing to try too.

Acknowledgements:
Adam Jani≈° (@adam_janis) for trying out this pair-documenting idea before his departure :)
Emilia Vidal for her review and suggestions,
Shawn Wang (@swyx) for his review and ideas for the title and Open-Graph image,
Ron Au (@ronvoluted) for providing the font to go ahead with Shawn‚Äôs ideas,
Excalidraw to produce the visuals.*
#### [Year in Review: 2020](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2020&#x2F;) 
*2020, what a ride!
I cannot believe 2020 has already finally come to an end: with the lockdowns and quarantines, time simultaneously flew by and dragged on. A lot of my life was lived through a computer and the Internet. Time to reflect and remember.
Let‚Äôs start with some remarkable facts and events:
personally: - turned 30 in April, without even a beer to celebrate! (hint: the last bit is what‚Äôs remarkable) ‚ùåüç∫ - traveled only once to see my family in France üò¢ - got engaged in August üíç - spent the Christmas holidays alone, for the first time (I feel you, Kevin McCallister) üö∞
at work: - got a raise and earned a promotion üìà - wrote 3 posts on the Frontend Platform‚Äôs internal blog ‚úç
on my blog: - published 8 new posts üöÄ - updated 1 article ‚ôªÔ∏è - started a newsletter (already wrote 2 issues) üóû - broke the 10k unique visitor mark for Build Standalone Expo .apk and .ipa with Turtle CLI üéâ
miscellaneous: - joined 2 great online communities (Coding Career and Blogging For Devs) üôå - revamped a handful of desktop PCs and laptops (cannot believe I was about to get rid of my older laptop when it‚Äôs so smooth now!): most low-end&#x2F;mid computers are slow because of their stock hard drives (and limited RAM), a nice SSD and some RAM extension will do wonders! üíæ - jumped on the sourdough bread baking train (and learnt recently how sourdough baguettes are a lazy baker‚Äôs dream!) üá´üá∑ ü•ñ
Despite everyone calling 2020 their worst year ever, it did not seem so bad personally. Of course, I missed social life and being able to do ‚Äúnormal‚Äù things, but all things considered, I still learnt a lot this year.
Consumer to archivist
Spending so much time online means I absorbed vast amounts of data and after a while, it did not sit so well with me. I believed that I learn best by immersing myself in a continuous flow of information surrounding one topic. Of course, it‚Äôs worked for me so far, but the cost is that I get overwhelmed and it‚Äôs difficult to know when it‚Äôs enough.
Trying to change that brute-force approach to learning, I read here and there that taking notes would force me to slow down and choose what I consume more wisely. I obviously bought ‚ÄúHow to Take Smart Notes‚Äù by S√∂nke Ahrens (and only half-read it), came across the German word Zettlekasten and went on a wild goose chase for the best Personal Knowledge Management system, and read all the articles and watched all the YouTube videos about the subject. Old habits die hard. üòÖ
After using a few of them, I ended up settling with Joplin (which I had of course already set up prior to any of this) and have not looked back. It does not have backlinks so I‚Äôm deeply missing out on interconnected notes, as the hype goes, but it‚Äôs okay. My FOMO is in check for now. Joplin is an active open source project which is available on desktop as well as mobile devices. I retain full ownership (and responsibility) over my notes as Joplin integrates with different storage backends: I chose to use my self-hosted NextCloud instance.
In short:
just-in-case knowledge is expensive; prefer just-in-time knowledge
it‚Äôs easy to go on a wild goose chase only to realise you had everything already
note-taking does force me to slow down and helps to remember better
Archivist to creator
This story does not end here, dear reader. Accumulating notes about topics I‚Äôm interested in helps to slow down and be more intentional with what I consume. But it turns out knowledge without action is mostly useless.
Luckily, Daniel Vassalo wrote this influential tweet:
If you‚Äôre tempted by this, my advice to first-time creators is to start with a very small product: Something you can finish in 2 weeks and charge #### [Build Standalone Expo .apk and .ipa with Turtle CLI [deprecated]](https:&#x2F;&#x2F;www.robincussol.com&#x2F;build-standalone-expo-apk-ipa-with-turtle-cli&#x2F;) 
*This article was updated on February 7, 2023.
NOTE: As of Expo SDK 47, the following method does not work any more.
With the release of EAS builds, it is necessary to have Internet access to create standalone Expo apps locally; see Running builds on your own infrastructure on Expo docs.
You can still use the React Native way to build applications locally after generating necessary files with expo prebuild (see this GitHub comment on expo&#x2F;eas-cli).
This post will not receive further updates.
A great way to start writing React Native applications is to use Expo. You don‚Äôt even need to setup a development environment to get started thanks to Snack, an online React Native application editor. Your application is public by default. Sharing has never been that easy.

Brown turtle swimming underwater, Photo by Wexor Tmg on Unsplash
However, you would like to share an application exclusively with some people, not through an app store or any public channel. One possibility is to share the built application file, e.g. an .apk file for Android and an .ipa file for iOS.
Expo is so great a service (oh, and did I mention free?) that they offer you to publish your app on their servers and if you wanted to build these .apk and .ipa files, you could do so on their servers.
The flow looks like:
$ expo publish
$ expo build:&lt;PLATFORM&gt;
and you obtain a nice URL to the artifact created for you when the build finishes.
But, again, this is public. On a server you don‚Äôt control. (Although, if you made the same mistake as I did, a ticket to their support can delete any files you had wished to keep private. ü•á)
Luckily for you, Expo provide the tools they are using on their servers for free (did I mention they‚Äôre great!?). The build process relies on a CLI tool called turtle-cli. It is open-source and available on GitHub.
Let us go through an example of how to create your application file without resorting to Expo servers. That means you can keep an application private and also build your application while being offline.
The following instructions assume you have bash and Node.js available. In my experience, using the current LTS version of Node.js (version 16.13.2) works best.
Caveat: I could not complete the iOS instructions to the end since I do not have an Apple Developer paid account.
We will go through the following steps:
1. Turtle CLI
2. Create a dummy application
3. Publish Expo app on local server
4. Create APK file ‚Äì Android

4.1. Prerequisites
4.2. Create Keystore
4.3. Build APK
5. Create IPA file ‚Äì iOS

5.1. Prerequisites
5.2. Create Signing keys
5.3. Build IPA
6. Distribute and install

6.1. on Android
6.2. on iOS
Resources
A condensed version of these steps without much explanation or context is available on the accompanying GitHub repository.
1. Turtle CLI
To install Turtle CLI, run
$ npm install -g turtle-cli
This will make command turtle globally available on your system. To verify it was correctly installed, let‚Äôs print the version:
$ turtle -V
0.24.3
2. Create a dummy application
Let‚Äôs create a dummy application using Expo CLI. In your terminal, run
$ npx expo init ExampleApplication
It will ask you a few questions:
# Expo version 5.0.3
npx expo init ExampleApplication
? Choose a template: ‚Ä∫ - Use arrow-keys. Return to submit.
    ----- Managed workflow -----
‚ùØ   blank               a minimal app as clean as an empty canvas
    blank (TypeScript)  same as blank but with TypeScript configuration
    tabs (TypeScript)   several example screens and tabs using react-navigation and TypeScript
    ----- Bare workflow -----
    minimal             bare and minimal, just the essentials to get you started
The blank template is enough for us.
If you have yarn installed, Expo will use it by default to install dependencies. You can use the --npm flag in the init command if you‚Äôd prefer to use npm instead.
Once it‚Äôs done setting up your project, you should see the following output in the terminal:
‚úÖ Your project is ready!

To run your project, navigate to the directory and run one of the following yarn commands.

- cd ExampleApplication
- yarn start
Run the commands and let‚Äôs verify the generated boilerplate works in our emulators:


To finish setting up the dummy application, you need to configure the app.json file because some configuration keys must be specified to build a standalone app.
If you would like to know more about these standalone app specific configurations, check Expo‚Äôs documentation for iOS and for Android.
For this tutorial, it is only necessary to specify the keys &quot;bundleIdentifier&quot; under &quot;ios&quot;, and &quot;package&quot; under &quot;android&quot; in your app.json file:
...
    &quot;ios&quot;: {
      ...
      &quot;bundleIdentifier&quot;: &quot;com.example.exampleApplication&quot;,
      ...
    },
    &quot;android&quot;: {
      ...
      &quot;package&quot;: &quot;com.example.example_application&quot;,
      ...
    }
...
3. Publish Expo app on local server
Expo has this notion of app publishing: it allows you to share a link or QR code to Expo‚Äôs website and anyone can run your app through the Expo app on their devices.
Having your app published is also necessary for over-the-air (OTA) updates, allowing seamless updates to your application, and to publish your application (i.e. building your application files on Expo servers).
You would typically run
$ expo login -u $EXPO_USERNAME -p $EXPO_PASSWORD
$ expo publish
and your app would then be available at https:&#x2F;&#x2F;expo.dev&#x2F;&lt;EXPO_USERNAME&gt;&#x2F;&lt;APP_NAME&gt;.
To have your Expo app ‚Äúpublished‚Äù on your local server (and avoid public publishing on Expo servers), you will use a different command:
$ expo export --dev --public-url &lt;your-url-here&gt;
The --dev flag is necessary because you will use a non-https server to publish your Expo app. Note that this prevents you from using OTA updates.
Your server does not need to be running for this step, but you do need to know which local URL you are going to use in advance. This tuorial assumes you will run a local server at http:&#x2F;&#x2F;127.0.0.1:8000.
You can now export the app:
$ expo export --dev --public-url http:&#x2F;&#x2F;127.0.0.1:8000
...
Export was successful. Your exported files can be found in dist
This command will create a dist directory containing the iOS and Android JavaScript bundles and the different assets you are using.
dist
‚îú‚îÄ‚îÄ android-index.json
‚îú‚îÄ‚îÄ assets
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ 13685372945d816a2b474fc082fd9aaa
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ 140c53a7643ea949007aa9a282153849
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ ...
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ fdbedb7e67aa7c0ecad83d9c2fa4dfba
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ fdc01171a7a7ea76b187afcd162dee7d
‚îú‚îÄ‚îÄ bundles
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ android-a9defc54fb2ffdb7e6fdaf5b8d0be751.js
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ ios-a29c3e4ac97a2abdc5208fd4f06e7708.js
‚îî‚îÄ‚îÄ ios-index.json
You can now serve the dist directory on your web server, e.g.
$ npx http-server -p 8000 dist
Note: if for some reason you need to re-export your application (because you modified your app.json file since the last export, for instance), you must first remove the dist directory:
# assuming you are at the root of the project
$ rm -rf dist
$ expo export --dev --public-url http:&#x2F;&#x2F;127.0.0.1:8000
4. Create APK file ‚Äì Android
First, verify that your local server is running. For example, you should see a similar output:
$ curl http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;android-index.json
{&quot;name&quot;:&quot;ExampleApplication&quot;,&quot;slug&quot;:&quot;ExampleApplication&quot;,&quot;version&quot;:&quot;1.0.0&quot;,&quot;orientation&quot;:&quot;portrait&quot;,&quot;icon&quot;:&quot;.&#x2F;assets&#x2F;icon.png&quot;,&quot;splash&quot;:{&quot;image&quot;:&quot;.&#x2F;assets&#x2F;splash.png&quot;,&quot;resizeMode&quot;:&quot;contain&quot;,&quot;backgroundColor&quot;:&quot;#ffffff&quot;,&quot;imageUrl&quot;:&quot;http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;assets&#x2F;201a91bd1740bb1d6a1dbad049310724&quot;}...
4.1. Prerequisites
For Turtle CLI to work correctly to create an .apk file for Android, you need to make sure the following dependency is installed: Java Development Kit (version 8).
If you know which Expo SDK version you are going to use, you can run
$ turtle setup:android --sdk-version &lt;SDK-VERSION&gt;
This will take some time:
$ turtle setup:android --sdk-version 44.0.5
Jan 20 20:22:45 turtle[61127] INFO:  Downloading Android SDK
  platform: &quot;android&quot;
  buildPhase: &quot;setting up environment&quot;
downloading [&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;] 98% 0.2s
...
Jan 20 20:26:56 turtle[61127] INFO:  shell app for SDK 44.0.5 doesn&#39;t exist, downloading...
  platform: &quot;android&quot;
  buildPhase: &quot;setting up environment&quot;
downloading [&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; ] 95% 0.5sJan 20 20:27:08 turtle[61127] INFO:  shell app has been downloaded
  platform: &quot;android&quot;
  buildPhase: &quot;setting up environment&quot;
...
Jan 20 20:29:51 turtle[61127] INFO:  dependencies installed!
  platform: &quot;android&quot;
  buildPhase: &quot;setting up environment&quot;
Jan 20 20:29:51 turtle[61127] INFO:  it&#39;s all set!
  platform: &quot;android&quot;
  buildPhase: &quot;setting up environment&quot;
In the meantime, you can move on to the next section.
4.2. Create Keystore
Just like any other Android app, this app must be signed with some security certificates. In Android-land, as far as I understand, it‚Äôs called a keystore. The instructions to create such a keystore file are available on the Android Developers documentation.
Basically, just create a dummy Android project with Android Studio, and then go to Build &gt; Generate Signed Bundle &#x2F; APK.... Choose APK and press Next. The UI will ask you which app you want to sign, and your dummy app should be pre-selected. On the same screen, press on the button Create new...; just fill the form and you‚Äôre good to go.
Alternatively, if you have keytool CLI utility available on your system (you can check that by trying keytool --help in your terminal), you can generate a keystore file with the following command
$ keytool -genkeypair -v -keystore keystore.jks -alias keyalias -keyalg RSA -keysize 2048 -validity 9125
Enter keystore password:
Re-enter new password:
What is your first and last name?
  [Unknown]:
What is the name of your organizational unit?
  [Unknown]:
What is the name of your organization?
  [Unknown]:
What is the name of your City or Locality?
  [Unknown]:
What is the name of your State or Province?
  [Unknown]:
What is the two-letter country code for this unit?
  [Unknown]:
Is CN&#x3D;Unknown, OU&#x3D;Unknown, O&#x3D;Unknown, L&#x3D;Unknown, ST&#x3D;Unknown, C&#x3D;Unknown correct?
  [no]:  yes

Generating 2,048 bit RSA key pair and self-signed certificate (SHA256withRSA) with a validity of 9,125 days
	for: CN&#x3D;Unknown, OU&#x3D;Unknown, O&#x3D;Unknown, L&#x3D;Unknown, ST&#x3D;Unknown, C&#x3D;Unknown
Enter key password for &lt;keyalias&gt;
	(RETURN if same as keystore password):
Re-enter new password:
[Storing keystore.jks]

Warning:
The JKS keystore uses a proprietary format. It is recommended to migrate to PKCS12 which is an industry standard format using &quot;keytool -importkeystore -srckeystore keystore.jks -destkeystore keystore.jks -deststoretype pkcs12&quot;.
As a TL;DR, you can just download a dummy certificate on the accompanying repository under should-be-private&#x2F;keystore.jks, for testing purposes only. The keystore file is hugely important if you ever plan to submit your app to Google Play store: it‚Äôs the only way to assert you‚Äôre the rightful owner to provide new updates to your app.
File: keystore.jks
keystorepassword
keyalias
keypassword
4.3. Build APK
Make sure that you are serving the dist directory on http:&#x2F;&#x2F;127.0.0.1:8000 as explained above in Run a local server. Assuming you are using bash as your shell, from the root of your project, run:
EXPO_ANDROID_KEYSTORE_PASSWORD&#x3D;&quot;keystorepassword&quot; \
EXPO_ANDROID_KEY_PASSWORD&#x3D;&quot;keypassword&quot; \
turtle build:android \
  --type apk \
  --keystore-path .&#x2F;should-be-private&#x2F;keystore.jks \
  --keystore-alias &quot;keyalias&quot; \
  --allow-non-https-public-url \
  --public-url http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;android-index.json
Note that you need the flag --public-url to point to http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;android-index.json. In addition, it is also necessary to use the --type apk flag to produce an APK file since version 0.8.0 of turtle-cli.
The build may take some time:
Jan 20 20:38:17 turtle[61719] INFO:  Using manifest: {
  &quot;name&quot;: &quot;ExampleApplication&quot;,
  &quot;slug&quot;: &quot;ExampleApplication&quot;,
  &quot;version&quot;: &quot;1.0.0&quot;,
  &quot;orientation&quot;: &quot;portrait&quot;,
  &quot;icon&quot;: &quot;.&#x2F;assets&#x2F;icon.png&quot;,
...
Jan 20 20:38:51 turtle[61719] INFO:  Starting a Gradle Daemon (subsequent builds will be faster)
  platform: &quot;android&quot;
  buildPhase: &quot;running gradle&quot;
  source: &quot;stdout&quot;
...
Once it finishes, you should see this output in your terminal:
Jan 20 20:43:19 turtle[61719] INFO:  copied build to ~&#x2F;expo-apps&#x2F;@anonymous__ExampleApplication-7f15208a56304617a200538cacd2e50e-signed.apk
  platform: &quot;android&quot;
  buildPhase: &quot;copying build artifact&quot;
This message gives you the location of your built .apk file. You can now move on to the Distribute and install section below if you are not interested in creating an .ipa file for iOS.
Note: if the build fails because of some Gradle error, like Could not resolve com.theartofdev.edmodo:android-image-cropper:2.8.0, make sure to open Android Studio and update the Android SDK and SDK Build-Tools. This should fix it.
5. Create IPA file ‚Äì iOS
First, verify that your local server is running, e.g.
$ curl http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;ios-index.json
{&quot;name&quot;:&quot;ExampleApplication&quot;,&quot;slug&quot;:&quot;ExampleApplication&quot;,&quot;version&quot;:&quot;1.0.0&quot;,&quot;orientation&quot;:&quot;portrait&quot;,&quot;icon&quot;:&quot;.&#x2F;assets&#x2F;icon.png&quot;,&quot;splash&quot;:{&quot;image&quot;:&quot;.&#x2F;assets&#x2F;splash.png&quot;,&quot;resizeMode&quot;:&quot;contain&quot;,&quot;backgroundColor&quot;:&quot;#ffffff&quot;,&quot;imageUrl&quot;:&quot;http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;assets&#x2F;201a91bd1740bb1d6a1dbad049310724&quot;...
5.1. Prerequisites
For Turtle CLI to work correctly to create an .ipa file for iOS, you need to make sure your system is macOS and that the following dependencies are installed:
Xcode (version 13.2.1 or newer)
fastlane
Note: make sure that you have run Xcode at least once and that you have agreed to the license agreements.
For more details, see Expo‚Äôs documentation.
If you know which Expo SDK version you are going to use, you can run
$ turtle setup:ios --sdk-version &lt;SDK-VERSION&gt;
If it errors out, saying that you don‚Äôt have the right version of fastlane, try re-installing fastlane (guide). The version used in this article is fastlane 2.200.0.
This will take some time:
$ turtle setup:ios --sdk-version 44.0.5
Jan 20 21:18:03 turtle[48488] INFO:  shell app for SDK 44.0.5 doesn&#39;t exist, downloading...
  platform: &quot;ios&quot;
  buildPhase: &quot;setting up environment&quot;
downloading [                    ] 1% 8514.8s
...
...
Jan 20 21:24:58 turtle[48488] INFO:  it&#39;s all set!
  platform: &quot;ios&quot;
  buildPhase: &quot;setting up environment&quot;
In the meantime, you can move on to the next section.
5.2. Create Signing keys
This assumes you have an Apple Developer Account, which is a paid account.
To create your distribution certificate file, or .p12 file, you can follow this guide.
You will also need your Apple Team ID and a Provisioning Profile that you can generate through Xcode as well. This other guide covers in greater lengths what all these cerficates are for and how to obtain them.

Note that the provisioning profile expires in 6 days in my case, since I do not have an Apple Developer paid account.
Sadly, it is not possible to share example files.
5.3. Build IPA
Make sure that you are serving the dist directory on http:&#x2F;&#x2F;127.0.0.1:8000 as explained Run a local server. Assuming you are using bash as your shell, from the root of your project, run:
EXPO_IOS_DIST_P12_PASSWORD&#x3D;&quot;&lt;PASSWORD HERE&gt;&quot; \
turtle build:ios \
  --team-id YOUR_TEAM_ID \
  --dist-p12-path &#x2F;path&#x2F;to&#x2F;your&#x2F;dist&#x2F;cert.p12 \
  --provisioning-profile-path &#x2F;path&#x2F;to&#x2F;your&#x2F;provisioning&#x2F;profile.mobileprovision \
  --allow-non-https-public-url \
  --public-url http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;ios-index.json
Note that you need the flag --public-url to point to http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;ios-index.json.
Once the build finishes successfully, you should get the path to your .ipa file.
6. Distribute and install
6.1. on Android
Take your .apk and share it through some Google Drive link or other medium of your choice.
If you download this .apk file through an Android device, it should offer you to install the application on the device.
Trick: if the URL is really not friendly to type, and for whatever reason you have to type it manually, use a QR Code generator (e.g. http:&#x2F;&#x2F;www.barcode-generator.org&#x2F;) and your device‚Äôs camera to simplify your life!
Alternatively, if you connect an Android device to your computer, you should be able to run:
$ adb devices
emulator-5554	device
to list all your connected Android devices and emulators. (In my case, only the emulator is ‚Äúconnected‚Äù.)
It is then possible to install the .apk file by running:
$ adb -s emulator-5554 install ~&#x2F;expo-apps&#x2F;@anonymous__ExampleApplication-7f15208a56304617a200538cacd2e50e-signed.apk
Performing Streamed Install
Success

6.2. on iOS
Caveat: I could not fully test this section, so my apologies if this does not work as intended.
Since you should have Xcode, the most promising solution is in this guide. It also mentions other ways to install the .ipa file.
That‚Äôs it for now, thank you for reading this far. You will find below the resources mentioned in this article.
If you have any questions or comments, please drop me a line on Twitter. I shall reply as soon as possible.
Stay tuned for more.
Resources
Expo: https:&#x2F;&#x2F;expo.dev
Turtle CLI: https:&#x2F;&#x2F;github.com&#x2F;expo&#x2F;turtle#readme
Expo‚Äôs guide to Building Standalone apps: https:&#x2F;&#x2F;docs.expo.dev&#x2F;classic&#x2F;building-standalone-apps&#x2F;
Configuring app.json: https:&#x2F;&#x2F;docs.expo.dev&#x2F;workflow&#x2F;configuration&#x2F;
Expo docs to configure CI with Turtle CLI: https:&#x2F;&#x2F;docs.expo.dev&#x2F;classic&#x2F;turtle-cli&#x2F;
Expo docs to host application on your own servers: https:&#x2F;&#x2F;docs.expo.dev&#x2F;distribution&#x2F;hosting-your-app&#x2F;
How to create a keystore for Android: https:&#x2F;&#x2F;developer.android.com&#x2F;studio&#x2F;publish&#x2F;app-signing#generate-key
Supporting GitHub repository: https:&#x2F;&#x2F;github.com&#x2F;RobinCsl&#x2F;build-standalone-expo-app&#x2F;*
#### [Optimize your img tags with Eleventy Image and WebC](https:&#x2F;&#x2F;www.robincussol.com&#x2F;optimize-your-img-tags-with-eleventy-image-and-webc&#x2F;) 
*I am very excited about WebC and couldn‚Äôt wait to try out the corresponding Eleventy plugin.
The first use-case I had in mind was to use Eleventy Image for the native HTML img tag, that can be generated from Markdown and without shortcode. I had done this before, for my unpublished blog rewrite that‚Äôs been waiting to be released for ever now, through hooking up Eleventy Image into a markdown-it plugin. It wasn‚Äôt pretty as markdown-it plugins are pretty alien to me.
But now, this can be done ‚Äúnatively‚Äù, √†-la-Cloudflare Workers for your native HTML elements!
UPDATE (04&#x2F;11&#x2F;2022): After sharing this article on Twitter, Zach Leatherman pointed out there should be an easier solution. It didn‚Äôt work as expected at first, which put me on a journey to fix the underlying issue in @11ty&#x2F;webc. I‚Äôm very pleased to share that my first contribution to the project was accepted and landed in v0.6.0. As a result, the content of the last section was updated to remove the dirty data file hack with _data&#x2F;Image.js: your image optimization logic can now truly live in a single file.
The documentation for WebC mentioned this use-case exactly, in the shape of this innocent puzzle:

‚ÄúFree idea: use the Eleventy Image plugin to return optimized markup‚Äù
So it should be easy, right?
Remember this lad?
I have discovered a truly remarkable proof of this theorem which this margin is too small to contain.
Pierre de Fermat, cca. 1637
No need to wait 3 centuries for the answer this time, because it was ultimately not so hard‚Ä¶ But I did struggle and wrestle with it for a few hours :D
Anyway, hope that can be useful to someone.
If you want to see the finished implementation, you can get it on GitHub: RobinCsl&#x2F;11ty-webc-img-demo.
Set up a WebC-powered Eleventy project
or take a shortcut by cloning this repo and going to the 01-initial folder.
Initialise the project
Let‚Äôs start with an empty folder and add a basic package.json file:
mkdir 11ty-webc-img
cd 11ty-webc-img
npm init -y
We need to install the latest canary release (2.0.0-canary.16 at the time of writing) of Eleventy as well as the WebC plugin:
 npm install @11ty&#x2F;eleventy@2.0.0-canary.16 @11ty&#x2F;eleventy-plugin-webc
Configure Eleventy
We will now configure Eleventy to use the WebC plugin by creating a .eleventy.js file with the following content:
const webc &#x3D; require(&quot;@11ty&#x2F;eleventy-plugin-webc&quot;);

module.exports &#x3D; function(eleventyConfig) {
	eleventyConfig.addPlugin(webc, {
		components: &quot;_includes&#x2F;webc&#x2F;*.webc&quot;
	});
}

In particular, components in the _includes&#x2F;webc folder will be available in the global scope, no need to import them explicitly!
Scaffold a minimal project
To finish our setup, we create a layout file and a simple WebC component which we will use in a basic page, to make sure our setup is working correctly.
We create the layout file under _includes&#x2F;layouts&#x2F;base.webc. It is a simple HTML template with the @html&#x3D;&quot;content&quot;  WebC directive set on the body tag. (See my-layout.webc in the docs)
&lt;!doctype html&gt;
&lt;html lang&#x3D;&quot;en&quot;&gt;
	&lt;head&gt;
		&lt;meta charset&#x3D;&quot;utf-8&quot;&gt;
		&lt;title&gt;Eleventy Images + WebC rocks!&lt;&#x2F;title&gt;
	&lt;&#x2F;head&gt;
	&lt;body @html&#x3D;&quot;content&quot;&gt;&lt;&#x2F;body&gt;
&lt;&#x2F;html&gt;
We now create a simple WebC component and write the following content, taken from the promising website 11ty.webc.fun, in _includes&#x2F;webc&#x2F;site-footer.webc :
&lt;footer&gt;
  &lt;p&gt;&amp;copy; 2022 Yours Truly.&lt;&#x2F;p&gt;
&lt;&#x2F;footer&gt;
Finally, we create our basic page at the root of the project in index.webc:
---
layout: layouts&#x2F;base.webc
---

Fun with WebC

&lt;site-footer&gt;&lt;&#x2F;site-footer&gt;
If all went according to plan, we should now be able to run
npx @11ty&#x2F;eleventy --serve
in the terminal and see the following output in our browser at http:&#x2F;&#x2F;localhost:8080:

Create an img.webc component
or check the code on GitHub in the 02-img folder if you want to see the code right away.
In this section, we will create our img.webc override for the native img HTML tag and use Eleventy Image within it.
As a starting point, we will use the example from the documentation from which the screenshot at the start of this post is taken. In a new file _includes&#x2F;webc&#x2F;img.webc, add the following:
&lt;script webc:type&#x3D;&quot;render&quot; webc:is&#x3D;&quot;template&quot;&gt;
function() {
	if(!this.alt) {
		throw new Error(&quot;[img.webc] the alt text is missing, no fun&quot;);
	}
	return &#x60;&lt;img src&#x3D;&quot;${this.src}&quot; alt&#x3D;&quot;${this.alt}&quot;&gt;&#x60;;
}
&lt;&#x2F;script&gt;
This essentially verifies at build-time that all your images have a non-empty alt text, neat!
Let‚Äôs add a ‚Äúbroken‚Äù image to our index page, in index.webc, to verify that this works correctly:
---
layout: layouts&#x2F;base.webc
---

Fun with WebC

&lt;img src&#x3D;&quot;https:&#x2F;&#x2F;images.unsplash.com&#x2F;photo-1627224286457-923944e5b159?auto&#x3D;format&amp;fit&#x3D;crop&amp;w&#x3D;387&amp;q&#x3D;80&quot;&gt;

&lt;site-footer&gt;&lt;&#x2F;site-footer&gt;
And indeed, running npx @11ty&#x2F;eleventy --serve yields an expected error:
$ npx @11ty&#x2F;eleventy --serve
[11ty] Problem writing Eleventy templates: (more in DEBUG output)
[11ty] 1. Having trouble rendering webc template .&#x2F;index.webc (via TemplateContentRenderError)
[11ty] 2. [img.webc] the alt text is missing, no fun (via Error)
Add an alt text (‚Äúpossum hanging from a palm leaf‚Äù should work) and try again. Oh no! Another error:
$ npx @11ty&#x2F;eleventy --serve  
[11ty] Problem writing Eleventy templates: (more in DEBUG output)
[11ty] 1. Having trouble rendering webc template .&#x2F;index.webc (via TemplateContentRenderError)
[11ty] 2. Circular dependency error: You cannot use &lt;img&gt; inside the definition for .&#x2F;_includes&#x2F;webc&#x2F;img.webc (via Error)
That makes sense, when you think about it! All our .webc files are processed by WebC, so if we return an img tag in a img.webc component, the compiler would work indefinitely to get to the bottom of it, because it‚Äôs turtles img all the way down!
Luckily for us, we can let WebC know when its job is done through the webc:raw attribute:
Use webc:raw to opt-out of WebC template processing for all child content of the current node. Notably, attributes on the current node will be processed.
Let‚Äôs fix it in _includes&#x2F;webc&#x2F;img.webc:
  &lt;script webc:type&#x3D;&quot;render&quot; webc:is&#x3D;&quot;template&quot;&gt;
  function() {
	  if(!this.alt) {
	  	throw new Error(&quot;[img.webc] the alt text is missing, no fun&quot;);
	  }
-	  return &#x60;&lt;img src&#x3D;&quot;${this.src}&quot; alt&#x3D;&quot;${this.alt}&quot;&gt;&#x60;;
+	  return &#x60;&lt;img webc:raw src&#x3D;&quot;${this.src}&quot; alt&#x3D;&quot;${this.alt}&quot;&gt;&#x60;;
  }
  &lt;&#x2F;script&gt;
It compiles now! üéâ
Here‚Äôs the expected output:

We have effectively augmented our img tag to verify at build time that alt text is present.
Let‚Äôs now add Eleventy Image to the party!
Optimize your HTML img with Eleventy Image
or check the code on GitHub in the 03-final folder if you want to see my solution.
Let‚Äôs first install Eleventy Image in our project:
npm install @11ty&#x2F;eleventy-img
We will more or less copy the example from the Eleventy Image docs in the Asynchronous Shortcode section, because our JavaScript render function can be async!
In the file _includes&#x2F;webc&#x2F;img.webc, let‚Äôs add the following:
  &lt;script webc:type&#x3D;&quot;render&quot; webc:is&#x3D;&quot;template&quot;&gt;
-   function() {
-      if(!this.alt) {
-          throw new Error(&quot;[img.webc] the alt text is missing, no fun&quot;);
-      }
-      return &#x60;&lt;img webc:raw src&#x3D;&quot;${this.src}&quot; alt&#x3D;&quot;${this.alt}&quot;&gt;&#x60;;
+    const Image &#x3D; require(&quot;@11ty&#x2F;eleventy-img&quot;);
+    module.exports &#x3D; async function() {
+      let metadata &#x3D; await Image(this.src, {
+        widths: [300],
+        formats: [&quot;avif&quot;, &quot;jpeg&quot;],
+        outputDir: &quot;_site&#x2F;img&#x2F;&quot;,
+      });

+      let imageAttributes &#x3D; {
+        alt: this.alt,
+        sizes: &quot;100vw&quot;,
+        loading: &quot;lazy&quot;,
+        decoding: &quot;async&quot;,
+      };

+      &#x2F;&#x2F; You bet we throw an error on missing alt in &#x60;imageAttributes&#x60; (alt&#x3D;&quot;&quot; works okay)
+      return Image.generateHTML(metadata, imageAttributes);
  }
  &lt;&#x2F;script&gt;

Note that we harcoded the value for  sizes in the imageAttributes object, and prepended both src and alt by this to wire things up correctly. We also instruct the Image plugin to output optimized images in our _site&#x2F;img&#x2F; folder directly for them to be available when using the following markup:
&lt;img alt&#x3D;&quot;a lovely image&quot; src&#x3D;&quot;&#x2F;img&#x2F;hash-width.jpeg&quot;&gt;
Let‚Äôs run npx @11ty&#x2F;eleventy --serve once more:
$  npx @11ty&#x2F;eleventy --serve
[11ty] Problem writing Eleventy templates: (more in DEBUG output)
[11ty] 1. Having trouble rendering webc template .&#x2F;index.webc (via TemplateContentRenderError)
[11ty] 2. Circular dependency error: You cannot use &lt;img&gt; inside the definition for .&#x2F;_includes&#x2F;webc&#x2F;img.webc (via Error)
That error sounds familiar, right?
We need to tell WebC to ignore img tags generated by Eleventy Image, and it‚Äôs as simple as adding &quot;webc:raw&quot;: true to the imageAttributes object:
  &lt;script webc:type&#x3D;&quot;render&quot; webc:is&#x3D;&quot;template&quot;&gt;
  const Image &#x3D; require(&quot;@11ty&#x2F;eleventy-img&quot;);
  module.exports &#x3D; async function() {
    let metadata &#x3D; await Image(this.src, {
      widths: [300],
      formats: [&quot;avif&quot;, &quot;jpeg&quot;],
      outputDir: &quot;_site&#x2F;img&#x2F;&quot;,
    });
  
    let imageAttributes &#x3D; {
      alt: this.alt,
      sizes: &quot;100vw&quot;,
      loading: &quot;lazy&quot;,
      decoding: &quot;async&quot;,
+     &quot;webc:raw&quot;: true,
    };
  
    &#x2F;&#x2F; You bet we throw an error on missing alt in &#x60;imageAttributes&#x60; (alt&#x3D;&quot;&quot; works okay)
    return Image.generateHTML(metadata, imageAttributes);
  }
  &lt;&#x2F;script&gt;
And we‚Äôre done!! (Note how the image now aligns perfectly with localhost:8080 #IncontestableTruth)

with corresponding markup:
&lt;!doctype html&gt;
&lt;html lang&#x3D;&quot;en&quot;&gt;
&lt;head&gt;
        &lt;meta charset&#x3D;&quot;utf-8&quot;&gt;
        &lt;title&gt;Eleventy Images + WebC rocks!&lt;&#x2F;title&gt;
    &lt;&#x2F;head&gt;
    &lt;body&gt;Fun with WebC

&lt;picture&gt;&lt;source type&#x3D;&quot;image&#x2F;avif&quot; srcset&#x3D;&quot;&#x2F;img&#x2F;SwdsuTpRbT-300.avif 300w&quot;&gt;&lt;img alt&#x3D;&quot;possum hanging from a palm leaf&quot; loading&#x3D;&quot;lazy&quot; decoding&#x3D;&quot;async&quot; src&#x3D;&quot;&#x2F;img&#x2F;SwdsuTpRbT-300.jpeg&quot; width&#x3D;&quot;300&quot; height&#x3D;&quot;450&quot;&gt;&lt;&#x2F;picture&gt;


&lt;footer&gt;
  &lt;p&gt;¬© 2022 Yours Truly.&lt;&#x2F;p&gt;
&lt;&#x2F;footer&gt;

&lt;&#x2F;body&gt;
&lt;&#x2F;html&gt;
Parting words
I am so excited to explore further the possibilities of using WebC to augment other native HTML elements.
This article only scratches the surface when it comes to the img tag. You could pass props down from the markup to Eleventy Image and control the behaviour of the image optimization. But we can now augment our native img tag without much hassle as it‚Äôs all in one file.
It even works with Markdown images (and yields the cutest webpage ever):
  ---
  layout: layouts&#x2F;base.webc
  ---
  
  Fun with WebC
  
  &lt;img alt&#x3D;&quot;possum hanging from a palm leaf&quot; src&#x3D;&quot;https:&#x2F;&#x2F;images.unsplash.com&#x2F;photo-1627224286457-923944e5b159?auto&#x3D;format&amp;fit&#x3D;crop&amp;w&#x3D;387&amp;q&#x3D;80&quot;&gt;
  
+  &lt;template webc:type&#x3D;&quot;11ty&quot; 11ty:type&#x3D;&quot;md&quot;&gt;
+  
+   ![&#39;close-up of a baby possum among ferns&#39;](https:&#x2F;&#x2F;images.pexels.com&#x2F;photos&#x2F;13960994&#x2F;pexels-photo-13960994.jpeg)
+  
+  &lt;&#x2F;template&gt;
  
  &lt;site-footer&gt;&lt;&#x2F;site-footer&gt;
  

All the more reasons to optimize your images now!
Find the code supporting this article on the RobinCsl&#x2F;11ty-webc-img-demo repository.*
#### [Year in Review: 2021](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2021&#x2F;) 
*We‚Äôre already at the start of February 2022, but who says retrospectives need to be done on January 1st?! A lot of things happened in 2021, both personally and professionally. Time to reflect and remember.
Personal üë∂üíçüìÑüìÉüìëüìú
This first part is the personal stuff, so if you don‚Äôt care about it, you can skip to the professional stuff instead. And if you don‚Äôt care about that too, why are you here? üòÇ
Welcome, L√©onard!
In January of 2021 came the great news that we were expecting a baby and a few months later, my son L√©onard came to this world! It‚Äôs been a few months now and it‚Äôs insane how much this event changed our lives.
It‚Äôs quite amazing to witness a human being‚Äôs awakening to the world, I do feel privileged.
Of course, it‚Äôs not just rainbows and unicorns.
Sleeping as much as I want is now a distant memory&#x2F;dream, though I‚Äôve been surprised that it‚Äôs actually quite possible to operate without the amount of sleep I used to get.
Having free time for side projects and writing almost vanished (and usually eats up time when I should sleep instead, while it‚Äôs allowed by baby-boss). I don‚Äôt know how other parents manage but time just flies by.
One thing‚Äôs for sure, L√©onard makes sure I keep fit and exercise regularly (a promise I made myself at the beginning of last year, right):
it‚Äôs quite a normal day when I need to go up and down the 4 floors of the block of flats we live in (and when it‚Äôs at night, I have this game where I switch the lights on and go up and down within the 3 minutes they‚Äôre programmed to stay on; naturally, after my 4th round trip, I usually do the last flight of stairs in the dark üòÖüòÆ‚Äçüí®).
it‚Äôs also quite a normal day when I need to carry him in my arms for 10- to 20-minute stretches, while doing squats, at least 2 or 3 times.
Coach L√©onard can ask for these drills at any time of the day (and night‚Ä¶), he says it‚Äôs for my own good. My knees and hips and back and arms tend to disagree.
Paperwork, paperwork, paperwork
In 2021, I‚Äôve had time to think so many times if the amount of paperwork we‚Äôre doomed to go through is some sort of devilish scheme to keep people busy on the boring stuff. It definitely does not help when you‚Äôre an expat.
If you had told me having a baby would generate so much paperwork chores, I probably would not have believed you. The story goes that we wanted to do an early recognition of fatherhood for me to be officially recognised as the father of my child to be.
In France, as a French person, this is a 5-minute visit to my local townhall, easy-peasy.
In Czechia, as a foreigner, this would have required tons of documents that also needed translating by a certified translator (aka costs some money).
Since we were engaged, and you‚Äôre officially recognised as the father when having a baby as a married couple, we thought we might as well go through paperwork hell to get married.
It did not disappoint.
Our child was due some time in the middle of September, so we had almost the entire year to get married, should be easy, right.
Being so diligent, we got in touch with the French embassy to understand what we need to do to get married in April:
weddings at the embassy are quite a rare thing, you should get married through the local authorities
getting married in Prague is like getting married in Las Vegas (say what?)
Only to realise at the end of June that:
babies aren‚Äôt always born around the due date
it‚Äôs already the end of June
Let‚Äôs just say that we managed to be on time paperwork-wise for our wedding at the beginning of August (ever heard of the necessary 2-week public display of your intent on getting married, during which somebody has the right to oppose it, to get the paper allowing a French person to marry‚Ä¶?), but the ‚Äúgetting married like in Las Vegas‚Äù was lost on us.
Professionally
Promo
In January last year, I got promoted to Staff Engineer at Kiwi.com. Pretty crazy to me to think that I started working in the industry in September 2017. Even though titles only mean so much, it‚Äôs still a nice recognition that I bring value to the company.
Pair Documenting
I definitely learnt a lot about infrastructure and Kubernetes, which might seem overkill for a frontend platformer, but there was a void to fill when my ex-colleague Adam Jani≈° left, so I put on my newbie hat and pair-documented Adam‚Äôs knowledge throughout his notice period. I still refer or point people to that document quite regularly, it‚Äôs an investment that keeps on giving after all these months!
This was also the first time I tried to add original schematics&#x2F;pictures and Excalidraw made it super fun and easy!
Robin‚Äôs Gazette
My newsletter, Robin‚Äôs Gazette, kept going quite well! It turned one year old on December, 9th! üéÇ
In 2021, I published 25 issues (784 emails in total!), and went from 9 subscribers to 49 at the end of the year!
Given the quite low volume of subscribers, my average open rate and click rate are pretty okay (though they are ‚Äúall-time‚Äù performance metrics):
70.35% open rate,
24.38% click rate.
Even though it‚Äôs always some amount of work, I deem it worthy of my time as I get to practice writing and I always learn something slightly more deeply than if I just scrolled Twitter or Hacker News. This continues my efforts from ‚Äúarchivist to creator‚Äù that I mentioned in my last retro.
Special mention to Shawn @swyx Wang for being so encouraging along the way!
My goal for this year is to continue on that path, though I do need to put some effort into advertising it better:
the subscribe form is hard to find on my website,
the content is short-lived and behind closed doors ‚Äì so I should repurpose it to an extent,
start marketing it more (instead of the infrequent tweets I‚Äôve tried at some point).
One small change for this year: I now send the Gazette every other Friday instead of every other Wednesday.
Some of the feedback I received üòä
‚ÄúSuch a great newsletter this week Robin, amazing job!‚Äù
‚ÄúStill enjoying the newsletter!‚Äù
Blog
The blog was a bit quiet last year, I only published 3 posts and refreshed my most read article about building APK files locally for Expo projects (it recently crossed 20K views in its lifetime! üéâ).
They were:
Python Dependencies for JavaScript Developers
How to Download a Brain with Pair Documenting (already mentioned above)
Year in Review: 2020
I really hope to start writing more again on the blog because the SEO game takes a long time for Google to start recommending your stuff: I saw more traffic to my How to Test Your ESLint Config and Get your Own Sentry Playground articles, and they were written in September 2020!
Started working on a course
In the last retro, I announced that I planned to write a book. That did not happen‚Ä¶ üòÖ
Instead, I started working on a video course which essentially replicates the now defunct Margarita project from scratch (which was the subject of this article on my blog), showcasing how to build cross-platform web and native mobile apps through React Native and React Native Web.
This was the occasion to spend some time weeks watching all the microphone reviews on YouTube, all the Audacity and Obs Studio tutorials for sound production, to ultimately produce a half-finished tutorial on YouTube (the best 33 seconds of your life, trust me).
Source



Ever since my son was born, I‚Äôve had little time to focus for longer than 5-minute stretches outside of work, so this project has lost steam right now. I hope I‚Äôll manage to finish it in the first semester!
A look back and forward
Revisiting some of my plans for 2021 and making some for 2022.
Family
As much as I would love to work on side-projects and such, my family comes first, and I want to keep it that way. I‚Äôm excited to continue discovering what my next workouts will be, courtesy of Coach L√©onard! (Seriously, I‚Äôve got some arms now! üí™)
I cannot wait for my son to meet all his grand-parents, aunts and uncles in France later this year!
Nehovor√≠m pliynule po slovensky
aka I don‚Äôt speak Slovak fluently.
One of my goals was to make sure I would be able to speak to all my wedding guests in their preferred language (amongst French, English and Slovak). Because of the above (and COVID not helping‚Ä¶), the guest list was actually pretty small and my mastery of Slovak would not be entirely necessary to do well on my goal. So I guess I will learn better alongside my son this year whilst we wait for the big party?
Almost no SAD this past year
Come December, I usually feel pretty burnt out and in dire need of vacation to recharge. Somehow, in December 2021, I did not feel like that at all.
My new family life provided some amount of distractions from work. Even though that increased my context switching throughout the days and the nights were not as restful, it somehow created some distance between work and me. Or maybe because living with a newborn forces you to live in the moment, one day at a time‚Ä¶ üòÖ
Writing
Less paperwork, more blog posts. ü§û
Keep the newsletter going, and make it better, faster, stronger!
Improve my note taking system, which is a bit chaotic and not really systematic at the moment.
Learning Rust
In 2021, I started dabbling with Rust, mostly through the really great WIP book from Luca Palmieri, Zero To Production In Rust. It assumed some knowledge so I sometimes struggled had fun filling in the gaps.
Given where the JS ecosystem is going in terms of tooling (oh yeah, in 2021 I started this Awesome List of JavaScript Tooling Not Written In JavaScript on GitHub ‚Äì 667 stars so far!), I think it‚Äôs important to explore beyond the confines of JavaScript&#x2F;TypeScript. So I‚Äôd like to spend more time with Rust this coming year!
Lots of things to be grateful for last year and lots to look forward to this year. C‚Äôest parti !*
#### [Python Dependencies for JavaScript Developers](https:&#x2F;&#x2F;www.robincussol.com&#x2F;python-dependencies-for-javascript-developers&#x2F;) 
*Recently, I needed to update an old Python codebase which had not been touched in 3 years! Of course, the dependencies were so outdated that the Dockerfile of the project wouldn‚Äôt build. My JavaScript knowledge did not help me much:
how could I do a yarn upgrade-interactive --latest to update dependencies?
where‚Äôs the dependency lockfile?
why do we need to compile C-libraries for Python dependencies?
Luckily for me, my colleague Ondrej patiently explained how to approach these questions.
Using a virtual environment
TL;DR: pip installs packages globally unless we activate a virtual environment.
In Python, the default package manager is call pip and it installs packages from the Python Package Index, shortened to Pypi. The equivalent in JavaScript land would be npm and npmjs.com.
By default, pip installs packages system-wide. This contrasts with the need to pass a --global flag to npm.
To remedy that, we can use a local Python environment (a bit like having our node_modules folder in a JavaScript project). The following command will create a virtual environment in a venv folder in our current directory:
# Create the venv folder container the virtual environment
$ python3 -m venv venv
To make sure pip knows it should install packages in this virtual environment, we must activate it. Depending on your shell, you should source the appropriate activate file in venv&#x2F;bin:
activate, for Bash and ZSH,
activate.fish, for Fish Shell,
activate.csh, for csh
Activate.ps1, for PowerShell.
In my case, I will source the one for ZSH:
$ source venv&#x2F;bin&#x2F;activate
Now, pip install will install packages in the local folder instead of targeting the global scope. My ‚ÄúPython node_modules folder‚Äù is venv&#x2F;lib&#x2F;python3.8&#x2F;site-packages&#x2F;.
Dependencies in Python
TL;DR: use pip-compile to generate a lockfile and pip-sync to install dependencies from that lockfile
To deal with dependencies, we must install the pip-tools package in our virtual environment:
pip install pip-tools
This will allow us to use pip-compile and pip-sync later on.
Once that‚Äôs done, we could for example decide to start a Django project, ‚Äúthe web framework for perfectionists with deadlines‚Äù. The latest version of the package at the time of writing is 3.2.5. Let‚Äôs create our Python equivalent of a package.json file to express our project needs the Django package pinned to version 3.2.5:
# requirements.in
django&#x3D;&#x3D;3.2.5
Note: the better equivalent to a package.json would be a setup.py file, since it contains additional fields like the name of the local package, its version, etc. but we just want to write down the dependencies.
EDIT #1: it‚Äôs apparently not common practice to pin dependency versions in requirements.in, just in case you really need to (if there are breaking changes for example). Thanks for pointing it out, Ondrej.
To generate a corresponding lockfile of the transitive dependencies of Django, we can run the following command:
pip-compile --output-file requirements.txt requirements.in
This will create the following requirements.txt file:
#
# This file is autogenerated by pip-compile with python 3.8
# To update, run:
#
#    pip-compile --output-file&#x3D;requirements.txt requirements.in
#
asgiref&#x3D;&#x3D;3.4.1
    # via django
django&#x3D;&#x3D;3.2.5
    # via -r requirements.in
pytz&#x3D;&#x3D;2021.1
    # via django
sqlparse&#x3D;&#x3D;0.4.1
    # via django

Now that we have this file, we can finally retrieve and install the packages with the following command:
pip-sync
Note: if you try to run pip-sync without a requirements.txt, you will get the following error:
No requirement files given and no requirements.txt found in the current directory
It is indeed necessary to run pip-compile before.
Updating dependencies
Similar to npm oudated, we can list the outdated Python dependencies with
$ pip list --outdated
For example, after downgrading Django to 3.2.3 in my requirements.in, regenerating the lockfile with pip-compile, re-installing the dependencies with pip-sync, the command above will show:
Package    Version Latest Type
---------- ------- ------ -----
Django     3.2.3   3.2.5  wheel
setuptools 44.0.0  57.4.0 wheel
To update the dependency, I can change the version back to 3.2.5 in the requirements.in and go through the same dance:
$ pip-compile --output-file requirements.txt requirements.in
$ pip-sync
$ pip list --outdated
Package    Version Latest Type
---------- ------- ------ -----
setuptools 44.0.0  57.4.0 wheel
EDIT #2: a batteries-included equivalent to Yarn is called Poetry. Thanks for sharing, D√°niel!
Wheels and Eggs
You might wonder what this ‚Äúwheel‚Äù type is for the Django and setuptools packages.
They are still mysterious to me, but here‚Äôs my current understanding: in Python, some dependencies need to be built for specific architectures, as they might be written in Cython, ‚Äúa superset of the Python language that additionally supports calling C functions and declaring C types on variables and class attributes‚Äù. Wheels and Eggs are packaging formats for these.
In particular, it is not a good idea to use Alpine Docker images for Python projects as a lot of packages don‚Äôt have pre-built wheels for that architecture: your Docker build step will need to compile the packages from source, slowing down your entire process (and requiring you to install the necessary build tools for this compilation to happen!).
I don‚Äôt think there is a similar ‚Äúpackaging format‚Äù concept in JavaScript land. But we do have packages shipping prebuilt binaries for specific architectures, for example Sharp, the Node.js image processing package. (And we probably have enough issues with CommonJS vs ES Modules as it is‚Ä¶ :smile:)
Conclusions
All in all, a project needs to:
specify external dependencies and their desired version with semantic ranges
have a way to retrieve said dependencies
keep track of which versions were effectively installed to improve reproducibility.
Despite all these measures, the Docker file of an unmaintained 3-year old project could not build. Software rots!*
#### [How to Download a Brain with Pair Documenting](https:&#x2F;&#x2F;www.robincussol.com&#x2F;download-a-brain-with-pair-documenting&#x2F;) 
*When people leave the company, a lot of specific and ad hoc knowledge goes away with them. Unless there is already a strong documentation culture, there‚Äôs only so much that can be said and done during exit interviews to make up for it.
But this doesn‚Äôt have to be left to fate.
Throughout the month of January, my now ex-colleague Adam Jani≈° and I pair documented all his knowledge about the frontend infrastructure at Kiwi.com. We produced a 24 page document, fixed a few bugs and addressed some tech debt. More importantly, we had fun doing it!
Here‚Äôs how we approached it.
How to pair document
This is an attempt at formalising what we‚Äôve done, feel free to s&#x2F;Newbie&#x2F;Robin&#x2F;g and s&#x2F;Expert&#x2F;Adam&#x2F;g.
The Protagonists
You will need two proactive people: an Expert on the subject to document and a Newbie who is not too cursed with knowledge yet. Bonus points if they have not really worked together but always had good chemistry in their interactions.

The Newbie makes it easy on the Expert for this documentation effort to be a no-brainer:
they organize the pair documenting sessions;
they manage the agenda of the sessions;
they do most of the note-taking;
they digest the notes into documentation drafts in between sessions;
they stay curious and eager to learn more about the subjects, with questions always at the ready (this is hard to fake, so find an adequate Newbie for the task).

The Expert shows up at the sessions and generously shares their knowledge with the Newbie, answering patiently every question they may have. They review the documentation drafts to ensure the prose does not betray the original intent of the notes. Bonus points if they include the Newbie in solving similar problems described in the nascent documentation as they arise in the support channels of the company‚Äôs Slack: learning by doing is a great way to drive home the material and expose remaining ambiguities.

The First Session
The Newbie is in charge and explains how it‚Äôs going to work in the first pair-documenting session. That means going through what‚Äôs expected of each participant in this documentation effort as well as giving an overview of the actual process.
The objective of the first session is crucial: go as broad as possible and capture as many ideas of what needs documenting to form a backlog of topics to go over in the next sessions.
This can be achieved through asking questions like (more examples in this template):
what are things that you know about that very few people know?
what are the things that people always ping you about on Slack?
what tasks pile up when you‚Äôre on vacation?
Once the amount of things to document gets a bit clearer, see how many days are left before they leave and agree on a schedule to leave enough time for this task.
In Between Sessions
The Newbie transforms the raw notes into documentation drafts and gets the Expert to review them.
As more people in the company are aware of this documentation effort, they might have questions of their own; the Newbie adds these points to the agenda for the next session.
The Expert includes the Newbie in all discussions on Slack touching on the subject to maximize the learning opportunities and give the docs a trial by fire.
A Normal Session
In the first 5-10 minutes, the Newbie and the Expert go over unresolved comments in the doc draft, they review the agenda from the previous session and see if anything pops up to be further discussed or explained, and finally, they review the agenda for the current session and decide what to prioritize.
They then go over each point in the agenda: the Expert does most of the talking while the Newbie does most of the note-taking. The Newbie shares their screen for the document to be visible by both pair documentors. The Newbie may interrupt the Expert at any point with questions or with attempts at paraphrasing what the Expert just described. The Expert glances at the notes being taken once in a while to ensure they don‚Äôt contain mistakes from the get-go.
When the time is up, the Newbie and the Expert look at how much they covered from the agenda, move what hasn‚Äôt been covered to the next session, and agree on a date and time for that next session (if it‚Äôs not already regular).
Tools we used
A Calendar: to plan the sessions, to have automatic reminders for them, and to share the visio-conference link.


Custom recurrence with expiry date, Hangouts link, Notification not to miss it, Allow guests to modify event for better collaboration

A Google Document: to store the agenda, the notes and the first documentation drafts. Do make use of the outline on the left-hand side to navigate more easily once the document gets to a certain size. Do make use of comments to discuss and improve the notes and the draft. This is also a good place to involve other people from the company asynchronously. Make sure to put this document in a shared team drive for it to have the right permissions set by default.


Use the ‚ÄúStyles‚Äù dropdown to get this hierarchy

Here‚Äôs a free template Google document to get you started. Feel free to make a copy.
LucidChart: to draw a few diagrams because pictures are great (though you may want to check out Draw.io for a great free alternative).
Why Pair Documenting Works
What usually happens
Unless there is a strong documenting culture, (1) people never prioritize documentation over almost any other task, because it‚Äôs just not as fun as coding or as urgent as the next fire you need to put out. That means that when someone is about to leave, (2) there is an impossible amount of things to document that they don‚Äôt even know where to start. Because they are short on time, they end up drafting a lil‚Äô something and call it a day. (3) Anyway, we never needed that, why are they asking me to document that stuff, who‚Äôs gonna read it anyway?! (Note the use of two ‚Äúanyway‚Äù).
Clear intention through planning
Through planning the pair documenting sessions, we make sure documentation does get prioritized and give it the importance it deserves. If the Expert‚Äôs knowledge is that important and they by happenstance siloed it, it becomes urgent to share this knowledge more widely to deal with that critical bus factor. (Whether they leave or not is almost irrelevant in this case.)
Because we know when the Expert‚Äôs last working day is, it is easier to retro-plan the right number of sessions to cover the entire backlog established in the first session. This of course might need adjusting throughout the pair documentation effort.
More fun and better quality through collaboration
Planning is not enough if the Expert is still lost about what needs documenting and in which level of details. The nagging ‚Äúare they even gonna read it?‚Äù-type questions could well be the end of the documentation effort already: a well-crafted plan not well-executed.
With an accountability buddy, things turn around entirely.
It becomes really difficult to bail out of the plan because you know the other person is expecting you to show up at the session.
Because the Newbie is enthusiastic about the topic, the Expert is more generous in their contribution.
Because the Newbie asks questions and cares about details, the pair documentors tailor the documentation to the level of knowledge on the receiving end. The Expert knows this documentation will be useful. üòå
Aligned incentives
The Expert also knows that what they know should be documented somewhere, and because they like their colleagues, they don‚Äôt want their departure to create a mess. (Right?!)
The Newbie knows this knowledge is valuable, and about to disappear if they don‚Äôt take action. Besides, it‚Äôs something they‚Äôre curious and wanted to learn more about anyway.
The Expert gets to share their knowledge and teach what they know to someone who‚Äôs enthusiastic and interested in the topic; the Newbie gets time with the Expert to learn as much as possible from them.
Parting thoughts
I really enjoyed the pair documenting sessions with Adam and I think they should be made a regular practice, just like pair programming. It‚Äôs a great way to level up people while producing value beyond the scope of that collaboration.
At the same time, documentation is only valuable if it gets read and updated continuously. I‚Äôve been thinking about how to bring it closer to where people are already consuming content. For example, this could take the form of digests of parts of the documentation in the company‚Äôs Slack.
I‚Äôm not super familiar with mob programming, but I do wonder if mob documenting could be a thing to try too.

Acknowledgements:
Adam Jani≈° (@adam_janis) for trying out this pair-documenting idea before his departure :)
Emilia Vidal for her review and suggestions,
Shawn Wang (@swyx) for his review and ideas for the title and Open-Graph image,
Ron Au (@ronvoluted) for providing the font to go ahead with Shawn‚Äôs ideas,
Excalidraw to produce the visuals.*
#### [Year in Review: 2020](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2020&#x2F;) 
*2020, what a ride!
I cannot believe 2020 has already finally come to an end: with the lockdowns and quarantines, time simultaneously flew by and dragged on. A lot of my life was lived through a computer and the Internet. Time to reflect and remember.
Let‚Äôs start with some remarkable facts and events:
personally: - turned 30 in April, without even a beer to celebrate! (hint: the last bit is what‚Äôs remarkable) ‚ùåüç∫ - traveled only once to see my family in France üò¢ - got engaged in August üíç - spent the Christmas holidays alone, for the first time (I feel you, Kevin McCallister) üö∞
at work: - got a raise and earned a promotion üìà - wrote 3 posts on the Frontend Platform‚Äôs internal blog ‚úç
on my blog: - published 8 new posts üöÄ - updated 1 article ‚ôªÔ∏è - started a newsletter (already wrote 2 issues) üóû - broke the 10k unique visitor mark for Build Standalone Expo .apk and .ipa with Turtle CLI üéâ
miscellaneous: - joined 2 great online communities (Coding Career and Blogging For Devs) üôå - revamped a handful of desktop PCs and laptops (cannot believe I was about to get rid of my older laptop when it‚Äôs so smooth now!): most low-end&#x2F;mid computers are slow because of their stock hard drives (and limited RAM), a nice SSD and some RAM extension will do wonders! üíæ - jumped on the sourdough bread baking train (and learnt recently how sourdough baguettes are a lazy baker‚Äôs dream!) üá´üá∑ ü•ñ
Despite everyone calling 2020 their worst year ever, it did not seem so bad personally. Of course, I missed social life and being able to do ‚Äúnormal‚Äù things, but all things considered, I still learnt a lot this year.
Consumer to archivist
Spending so much time online means I absorbed vast amounts of data and after a while, it did not sit so well with me. I believed that I learn best by immersing myself in a continuous flow of information surrounding one topic. Of course, it‚Äôs worked for me so far, but the cost is that I get overwhelmed and it‚Äôs difficult to know when it‚Äôs enough.
Trying to change that brute-force approach to learning, I read here and there that taking notes would force me to slow down and choose what I consume more wisely. I obviously bought ‚ÄúHow to Take Smart Notes‚Äù by S√∂nke Ahrens (and only half-read it), came across the German word Zettlekasten and went on a wild goose chase for the best Personal Knowledge Management system, and read all the articles and watched all the YouTube videos about the subject. Old habits die hard. üòÖ
After using a few of them, I ended up settling with Joplin (which I had of course already set up prior to any of this) and have not looked back. It does not have backlinks so I‚Äôm deeply missing out on interconnected notes, as the hype goes, but it‚Äôs okay. My FOMO is in check for now. Joplin is an active open source project which is available on desktop as well as mobile devices. I retain full ownership (and responsibility) over my notes as Joplin integrates with different storage backends: I chose to use my self-hosted NextCloud instance.
In short:
just-in-case knowledge is expensive; prefer just-in-time knowledge
it‚Äôs easy to go on a wild goose chase only to realise you had everything already
note-taking does force me to slow down and helps to remember better
Archivist to creator
This story does not end here, dear reader. Accumulating notes about topics I‚Äôm interested in helps to slow down and be more intentional with what I consume. But it turns out knowledge without action is mostly useless.
Luckily, Daniel Vassalo wrote this influential tweet:
If you‚Äôre tempted by this, my advice to first-time creators is to start with a very small product: Something you can finish in 2 weeks and charge #### [Build Standalone Expo .apk and .ipa with Turtle CLI [deprecated]](https:&#x2F;&#x2F;www.robincussol.com&#x2F;build-standalone-expo-apk-ipa-with-turtle-cli&#x2F;) 
*This article was updated on February 7, 2023. NOTE: As of Expo SDK 47, the following method does not work any more. With the release of EAS‚Ä¶*
#### [Optimize your img tags with Eleventy Image and WebC](https:&#x2F;&#x2F;www.robincussol.com&#x2F;optimize-your-img-tags-with-eleventy-image-and-webc&#x2F;) 
*I am very excited about WebC and couldn‚Äôt wait to try out the corresponding Eleventy plugin. The first use-case I had in mind was to use‚Ä¶*
#### [Year in Review: 2021](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2021&#x2F;) 
*We‚Äôre already at the start of February 2022, but who says retrospectives need to be done on January 1st?! A lot of things happened in 202‚Ä¶*
#### [Python Dependencies for JavaScript Developers](https:&#x2F;&#x2F;www.robincussol.com&#x2F;python-dependencies-for-javascript-developers&#x2F;) 
*Recently, I needed to update an old Python codebase which had not been touched in 3 years! Of course, the dependencies were so outdated that‚Ä¶*
#### [How to Download a Brain with Pair Documenting](https:&#x2F;&#x2F;www.robincussol.com&#x2F;download-a-brain-with-pair-documenting&#x2F;) 
*When people leave the company, a lot of specific and ad hoc knowledge goes away with them. Unless there is already a strong documentation‚Ä¶*
#### [Year in Review: 2020](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2020&#x2F;) 
*2020, what a ride! I cannot believe 2020 has already finally come to an end: with the lockdowns and quarantines, time simultaneously flew by‚Ä¶*
#### [Docker for JavaScript Devs: How to Containerise Node.js Apps Efficiently](https:&#x2F;&#x2F;www.robincussol.com&#x2F;docker-for-js-devs-how-to-containerise-nodejs-apps-efficiently&#x2F;) 
*Docker is a really cool technology to have applications run the in the same, predictable context, ensuring the ‚Äúbut it works on my machine‚Ä¶*
#### [TypeScript Tidbit: How to Overload an Imported Function](https:&#x2F;&#x2F;www.robincussol.com&#x2F;typescript-tidbit-how-to-overload-an-imported-function&#x2F;) 
*There are times when the type definitions shipped on DefinitelyTyped are not enough and this results in making the TypeScript compiler‚Ä¶*
#### [Wax on, Wax off](https:&#x2F;&#x2F;www.robincussol.com&#x2F;wax-on-wax-off&#x2F;) 
*The reason I got into web development in the first place was the magical ‚ú® feeling you get when you see your code manifest in the browser‚Ä¶*
#### [A Successful Side-Project: Lessons from Swyx](https:&#x2F;&#x2F;www.robincussol.com&#x2F;a-successful-side-project-lessons-from-swyx&#x2F;) 
*If you are on Twitter, chances are you came across this tweet by Daniel Vassallo and it now seems everyone is writing a book! üòÑ Shawn Wang‚Ä¶*0 for it. The experience of getting paid for something you created, directly by consumers, will change you forever. https:&#x2F;&#x2F;t.co&#x2F;UbUD9ch4xQ
‚Äî Daniel Vassallo (@dvassallo) April 10, 2020
 
and Shawn Wang (@swyx) acted on it almost immediately to produce the Coding Career Handbook a few months later. I had followed him for some time on Twitter. His posts, conference talks and online presence in general always brought me value so I wanted to support his work. I was also really glad that half the proceeds would go to FreeCodeCamp. I got the Creators package, not entirely sure what to expect.
This was one of the best decisions of 2020.
As part of the Creators package, there have been regular workshops and they definitely spurred me further to action. After he invited Monica Lent to give a workshop about blogging for developers, I formed a resolve to try and publish a post every 2 weeks, as a way to transform my note-taking game into something more valuable. That‚Äôs when I resurrected my blog with 5 Tips to Start Blogging (for Devs).
A lot of my posts were shared at work and in the company‚Äôs external newsletter (thank you üôÇ) and for the most part, this resurection was successful, even though December was a bit of a hiatus in my blog publishing, as I started my newsletter, Robin‚Äôs Gazette.
I still have a lot to learn when it comes to creating online content and I am looking forward to continuing with this momentum. Whenever I need a reality check of what it takes to embark on this creator journey, I would have a read through Alex West‚Äôs story, as it‚Äôs so real, inspiring and humbling!
Joining online communities
The Coding Career Handbook is an amazing resource and I would like to write a proper review of the book some day; it contains so much valuable information that it would be hard to do it justice here.
What‚Äôs even more awesome about it is that it came with access to a community through Discord and Circle that Shawn manages really well as it keeps delivering value and furthers the book‚Äôs teachings and principles. And if that wasn‚Äôt enough, I met a few interesting people there who I‚Äôm looking forward to getting to know more in 2021.
Judging by how much the Coding Career community helped me to get real with my volitions, I also decided to join Monica Lent‚Äôs Blogging For Devs community because I‚Äôd like to take my blogging further. For example, my article about [Building] Standalone Expo .apk and .ipa with Turtle CLI broke the 10k unique visitor mark in December, through accidental SEO mostly. üéâ I‚Äôm hoping to get a little bit more intentional with SEO as it‚Äôs a great way to magnify the reach of your content. There are so many interesting and inspiring people in Monica‚Äôs community, as well as discussions and workshops about SEO, newsletters, monetization, and of course blogging‚Äîtopics I definitely want to dive deeper in in the new year!
Writing, writing, writing
If you have read this far, it has become pretty apparent that writing is now more than ever my main focus. I think it has been a tremendous source of clarity and success in the last year for me.
The resource that influenced my writing the most this year was this lecture by Larry McEnerney about the Craft of Writing Effectively (here‚Äôs a summary). Having done a PhD, I practiced the ‚Äúwrong‚Äù way of writing for a very long time. Focusing on what‚Äôs valuable for your intended readership makes so much sense.
As I mentioned in my first newsletter issue (let me know if you want a copy of it üòâ), design documents have been crazy useful at work. I must thank my colleage Tobi√°≈° Potoƒçek for bringing about this revolution. In this remote-only work environment, they were a great tool to discuss, make decisions and document them in a searchable manner. Every shortcut needed to be reckoned with and set against the bigger picture. Every quirk or contextual piece of information (which are critically important to understand past decisions or make new ones) are now recorded in writing.
Being a member of the Frontend Platform team, communicating as effectively as possible with the teams we serve was critically important too‚Äîespecially in such challenging times for a travel company in 2020. Most of that communication was done in writing through Slack and Google Documents. (Not to say it was always a smooth ride‚Ä¶)
A look ahead
In 2021, I will focus on staying in shape, physically and mentally. We will go for walks in nature more regularly with Emilia (we agreed at least once a month and have a list of places in Czechia!) I will cycle to work as much as possible, get back into the nice workout rhythm we had during the first lockdown and take care of my sleeping patterns (it‚Äôs all great to wake up earlier to write, but that means going to bed earlier too, Robin ;-)) I will take breaks when I‚Äôm getting overwhelmed, instead of resorting to my usual ‚Äústrategy‚Äù of pushing through until I‚Äôm burnt out.
In 2021, I will focus on maintaining the shift from content consumption to content creation. I want to continue publishing on my blog every 2 weeks as well as send my Gazette every 2 weeks. I will write a book to help PhD graduates transition to web development: I‚Äôm now further along the path (and my work seems to be appreciated :)), so it‚Äôs time to try and lift others as I climb.
In 2021, I will finally speak Slovak fluently to be able to speak to all our wedding guests (still to be planned‚Ä¶ so I got time, I guess :P) in their preferred language. (Robin of January 2022, you‚Äôre welcome!)
C‚Äôest parti!*
#### [Docker for JavaScript Devs: How to Containerise Node.js Apps Efficiently](https:&#x2F;&#x2F;www.robincussol.com&#x2F;docker-for-js-devs-how-to-containerise-nodejs-apps-efficiently&#x2F;) 
*Docker is a really cool technology to have applications run the in the same, predictable context, ensuring the ‚Äúbut it works on my machine‚Äù comments are a thing of the past. Not to mention how Docker integrates with Docker Compose and Kubernetes for larger-scale applications! But that‚Äôs for another day.
In this article, you will learn about some good principles to containerise Node.js apps efficiently. These principles are probably quite general and well-known, but they‚Äôre easy to overlook for beginners to Docker and Dockerfiles.
You will need to have Docker and Node.js installed locally to follow along comfortably.
Docker wants to make you happy, 
Photo by cottonbro from Pexels



Table of contents
Containerising a Next.js app (naive approach)

Docker Glossary
Optimising a Node.js app‚Äôs Docker image

Create a comprehensive .dockerignore file
Use an appropriate base image
Decouple the dependency installation step from application code
Decouple the build from the resulting built application
(Optional) Purge node_modules from unnecessary files
Docker build checklist for JavaScript Devs
Containerising a Next.js app (naive approach)
Let‚Äôs start with a simple Next.js application:
$ npm create next-app --use-npm
and let‚Äôs write the following into a file called Dockerfile at the root of the project:
FROM node:14.15.0

WORKDIR &#x2F;app

COPY . .
RUN npm ci
RUN npm run build

EXPOSE 3000

USER node

CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
Okay, what just happened? üòÑ
Docker Glossary
FROM &lt;image&gt;
WORKDIR &lt;some-path-in-the-container&gt;
COPY &lt;from-context&gt; &lt;to-container&gt;
WORKDIR directory
RUN &lt;command&gt;
docker build process only
EXPOSE &lt;port&gt;
documenting which port the app uses
USER &lt;user&gt;
root with superuser privileges); it‚Äôs good practice to use a different user to run the app.
CMD &lt;command&gt;
docker run &lt;image-tag&gt;, it is not executed during the build process.
Assuming we have Docker installed, we could now run
$ docker build --tag my-containerised-nextjs-app .
This command kindly asks the Docker daemon running on our machine to build the Dockerfile we just wrote with the files present in the current directry (the .) and to call that image my-containerised-nextjs-app (with the --tag flag).
After the build completed, run
$ docker run --rm -p 3000:3000 my-containerised-nextjs-app
and we should have our app running at http:&#x2F;&#x2F;localhost:3000.
This second command orders the Docker daemon to run the image named my-containerised-nextjs-app with port 3000 on my machine to correspond to port 3000 inside the container so that we can interact with our Next.js app. This port mapping is done through the -p hostPort:containerPort flag. Go ahead and change the port mapping and see if you can still access the app.
The --rm flag indicates that we do not want the Docker daemon to keep the container when we stop its execution (with CTRL+C); this is useful not to clog our machines with useless logs while developing.
Voil√†, we have containerised our Next.js app. The End. üéâ
Wait! Don‚Äôt leave, there‚Äôs more! üëá
Optimising a Node.js app‚Äôs Docker image
The section above does the job, but it‚Äôs not optimal. If we only have so few pipeline minutes and we don‚Äôt like wasting resources ‚ôªÔ∏è, this setup will eat more than is necessary. There are a few strategies to optimise a Dockerfile:
Create a comprehensive .dockerignore file
Use an appropriate base image
Decouple the dependency installation step from application code
Decouple the build from the resulting built application
(Optional) Purge node_modules from unnecessary files
Create a comprehensive .dockerignore file
If we look at the logs from building the Docker image, we could read:
Step 4&#x2F;8 : RUN npm ci
 ---&gt; Running in 559b499f0e2c
npm WARN prepare removing existing node_modules&#x2F; before installation
That means we copied the node_modules folder from our local context over to the Docker image being built. What‚Äôs more, npm ci removes them to make sure it works consistently. That is an indication that we should not copy the node_modules in the first place.
To let Docker know some files and folders should be ignored, we can list them in a .dockerignore file. For example, add the following to a file named .dockerignore:
node_modules
Run the build again and the warning disappeared.
What‚Äôs more, we can see how much less was sent to the Docker build context:
# BEFORE
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  101.8MB

# AFTER
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  400.4kB
In practice, we would want to add as many files as possible to our .dockerignore to ensure we‚Äôre not wasting time and energy on files which won‚Äôt be necessary for the build. This can include documentation files (e.g. *.md), configuration files which are only necessary when developing (e.g. .eslint*, .prettier*) as well as our Git history (e.g. .git).
With the following .dockerignore file:
node_modules
*.md
.git
we end up sending the bare minimum to the Docker daemon:
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  248.3kB
Use an appropriate base image
Docker images come in all shapes and sizes. When it comes to building or deploying our app, the smaller the size, the better. For our Next.js app, we don‚Äôt need all that‚Äôs available in node:14.15.0. For example, we don‚Äôt need git or curl. We can instead use the alpine flavour of that image, namely node:14.15.0-alpine.
The difference in size between node:14.15.0 and node:14.15.0-alpine is enormous!
REPOSITORY                    TAG                 SIZE
node                          14.15.0             943MB
node                          14.15.0-alpine      117MB
Our final containerised Next.js app will hence be much smaller thanks to this teeny-tiny modification of our Dockerfile:
- FROM node:14.15.0
+ FROM node:14.15.0-alpine

WORKDIR &#x2F;app

COPY . .
RUN npm ci
RUN npm run build

EXPOSE 3000

USER node

CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
For reference, if we want to inspect the size of the Docker images we have available locally, we can run docker image ls --all.
Our Docker image has size 1.05GB if we use node:14.15.0,
REPOSITORY                    TAG                 IMAGE ID            CREATED             SIZE
my-containerised-nextjs-app   latest              c78d43a2c5bc        15 seconds ago      1.05GB
and it drops to 229MB if we use node:14.15.0-alpine instead!
REPOSITORY                    TAG                 IMAGE ID            CREATED             SIZE
my-containerised-nextjs-app   latest              d0746ef6e8a4        21 seconds ago      229MB
Decouple the dependency installation step from application code
Our setup is already much better with a suitable .dockerignore file and with a much leaner base image. However, we haven‚Äôt made any changes to our package.json and the npm ci step always needs to run if make any changes to our application code.
This is because Docker caches each step as an intermediate Docker container. For example, if we were to run the build again (docker build --tag my-containerised-nextjs-app .), we would see that the cache is used for all steps, resulting in a nearly instant build (because nothing happened, really üòÑ):
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  248.3kB
Step 1&#x2F;8 : FROM node:14.15.0-alpine
 ---&gt; 9db54a688554
Step 2&#x2F;8 : WORKDIR &#x2F;app
 ---&gt; Using cache
 ---&gt; d5d4291dc699
Step 3&#x2F;8 : COPY . .
 ---&gt; Using cache
 ---&gt; b56455e98a93
Step 4&#x2F;8 : RUN npm ci
 ---&gt; Using cache
 ---&gt; ba4ab784f27e
Step 5&#x2F;8 : RUN npm run build
 ---&gt; Using cache
 ---&gt; a51c18594a20
Step 6&#x2F;8 : EXPOSE 3000
 ---&gt; Using cache
 ---&gt; 806dc06cbb6c
Step 7&#x2F;8 : USER node
 ---&gt; Using cache
 ---&gt; b86db08de717
Step 8&#x2F;8 : CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
 ---&gt; Using cache
 ---&gt; d0746ef6e8a4
Successfully built d0746ef6e8a4
Successfully tagged my-containerised-nextjs-app:latest
If we now modify anything in the folder that is not ignored thanks to our .dockerignore file, Docker will have to bust the cache from Step 3 onwards (the ‚ÄúUsing cache‚Äù expression is not printed any more). Let‚Äôs create an empty file and run the build again:
# create an empty file
$ touch file
# build again
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  248.8kB
Step 1&#x2F;8 : FROM node:14.15.0-alpine
 ---&gt; 9db54a688554
Step 2&#x2F;8 : WORKDIR &#x2F;app
 ---&gt; Using cache
 ---&gt; d5d4291dc699
Step 3&#x2F;8 : COPY . .
 ---&gt; e2b761bb08a6         # The cache is not used anymore
Step 4&#x2F;8 : RUN npm ci
 ---&gt; Running in b36f2511e117
...
To remedy this and ensure that npm ci runs only when necessary, we can first copy package.json and package-lock.json files, run npm ci, and then bring in the rest of the files to build the project:
FROM node:14.15.0-alpine

WORKDIR &#x2F;app

- COPY . .
+ COPY package.json .
+ COPY package-lock.json .
RUN npm ci
+ COPY . .
RUN npm run build

EXPOSE 3000

USER node

CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
After we modified the Dockerfile by applying the diff above, we see that Docker does not leverage the cache at all because the steps are different. This always happens when we modify the layers and&#x2F;or their order.
However, after running this build for a first time, subsequent builds will be much faster as the npm ci step will use the cache unless we modify package.json or package-lock.json:
# create another file to see when Docker stops using the cache
$ touch another-file
# run the build again
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  249.3kB
Step 1&#x2F;10 : FROM node:14.15.0-alpine
 ---&gt; 9db54a688554
Step 2&#x2F;10 : WORKDIR &#x2F;app
 ---&gt; Using cache
 ---&gt; d5d4291dc699
Step 3&#x2F;10 : COPY package.json .
 ---&gt; Using cache
 ---&gt; 139b5a611c0b
Step 4&#x2F;10 : COPY package-lock.json .
 ---&gt; Using cache
 ---&gt; 5bc380de1397
Step 5&#x2F;10 : RUN npm ci
 ---&gt; Using cache
 ---&gt; dff6b2da4bdc
Step 6&#x2F;10 : COPY . .
 ---&gt; 08911c09b40f
Step 7&#x2F;10 : RUN npm run build
 ---&gt; Running in f5374a54d9ad

&gt; my-app@0.1.0 build &#x2F;app
&gt; next build
...
Decouple the build from the resulting built application
For this section to make more sense, we will create another Next.js app that uses some dev dependencies which are necessary only when building the app but not when running it in production.
$ npm create next-app --use-npm --example with-tailwindcss with-tailwindcss-app
Copy the Dockerfile and .dockerignore files created in the other example into with-tailwindcss-app. Build the Docker image and run it to make sure it‚Äôs working well before continuing:
$ docker build --tag with-tailwindcss-app .
$ docker run --rm -p 3000:3000 with-tailwindcss-app
As we can see in the package.json file, we have a few dependencies which are only ever going to be used when building our app. We won‚Äôt need them in the final Docker image. So let‚Äôs get rid of them!
We are going to leverage multi-stage Docker builds. They sound more complicated than they are :)
Here‚Äôs a multi-stage build Dockerfile: in the builder container, we install dependencies and build our app, and in the second stage, we copy relevant files from the builder to our final image and install only production dependencies.
FROM node:14.15.0-alpine as builder

WORKDIR &#x2F;app

COPY package.json .
COPY package-lock.json .
RUN npm ci
COPY . .
RUN npm run build

FROM node:14.15.0-alpine

WORKDIR &#x2F;app

COPY --from&#x3D;builder &#x2F;app&#x2F;package.json .
COPY --from&#x3D;builder &#x2F;app&#x2F;package-lock.json .
RUN npm ci --production
COPY --from&#x3D;builder &#x2F;app&#x2F;.next .next

EXPOSE 3000

USER node

CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
If our app also contained a Next.js config file and a public folder, we would also need to copy them from the builder stage:
...
COPY --from&#x3D;builder &#x2F;app&#x2F;.next .
+ COPY --from&#x3D;builder &#x2F;app&#x2F;next.config.js .
+ COPY --from&#x3D;builder &#x2F;app&#x2F;public public
...
Comparing the sizes, we see that we removed 39MB of dev dependencies, not bad.
without multi-stage build
REPOSITORY                    TAG                 IMAGE ID            CREATED              SIZE
with-tailwindcss-app          latest              88089e6f965d        18 minutes ago      269MB
with multi-stage build
REPOSITORY                    TAG                 IMAGE ID            CREATED              SIZE
with-tailwindcss-app          latest              ba7307736fb0        25 seconds ago       230MB
(Optional) Purge node_modules from unnecessary files
Finally, to make our Docker image the leanest, we will purge our node modules from all the files which were included by the library authors and aren‚Äôt directly useful to our Docker image. For example, documentation files and READMEs, config files for Prettier and such, etc.
Note that this is not without risk as we could be removing files that we actually need to run the application correctly (we had a file named test.js that contained important code and it was mercilessly removed by the tool, which broke the application üòÖ).
We will add another stage called production-deps to make our node modules go through a diet with node-prune (GitHub repo). The list of files and folders that node-prune will remove is largely inspired by Yarn‚Äôs default list (generated through yarn autoclean --init).
To install node-prune, we need curl to be a locally available executable, so we can either choose a base image that contains it out of the box, or we can add it to node:14.15.0-alpine. Because we won‚Äôt need anything else, we will choose the latter.
FROM node:14.15.0-alpine as builder

WORKDIR &#x2F;app

COPY package.json .
COPY package-lock.json .
RUN npm ci
COPY . .
RUN npm run build

+ FROM node:14.15.0-alpine as production-deps

+ WORKDIR &#x2F;app

COPY --from&#x3D;builder &#x2F;app&#x2F;package.json .
COPY --from&#x3D;builder &#x2F;app&#x2F;package-lock.json .
RUN npm ci --production
+ # Add curl
+ RUN apk --no-cache add curl
+ # Install node-prune https:&#x2F;&#x2F;github.com&#x2F;tj&#x2F;node-prune
+ RUN curl -sf https:&#x2F;&#x2F;gobinaries.com&#x2F;tj&#x2F;node-prune | sh
+ RUN node-prune &#x2F;app

FROM node:14.15.0-alpine

WORKDIR &#x2F;app

+ COPY --from&#x3D;production-deps &#x2F;app&#x2F;package.json .
+ COPY --from&#x3D;production-deps &#x2F;app&#x2F;package-lock.json .
+ COPY --from&#x3D;production-deps &#x2F;app&#x2F;node_modules node_modules

COPY --from&#x3D;builder &#x2F;app&#x2F;.next .next

EXPOSE 3000

USER node

CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
Try it by building the image once more.
When node-prune ran, it printed out in the console that it removed 12MB:
...
Step 15&#x2F;24 : RUN node-prune &#x2F;app
 ---&gt; Running in 69e030ab8b70


         files total 14,269
       files removed 3,722
        size removed 12 MB
            duration 216ms
...
However, suprinsingly, a whopping 32MB were removed in comparison to our previous Dockerfile. (It seems node-prune‚Äôs tallying is not totally accurate when I tested locally as it removed 20.7 MB instead ‚Äî though it still doesn‚Äôt explain the other 11.3 MB ü§∑‚Äç‚ôÇÔ∏è)
$ docker image ls with-tailwindcss-app
REPOSITORY                    TAG                 IMAGE ID            CREATED              SIZE
with-tailwindcss-app          latest              c5e2081dba30        9 seconds ago        198MB
Let‚Äôs ensure our app is running well without the files node-prune removed and we can be on our merry way! üê≥ üéâ
Docker build checklist for JavaScript Devs
To summarise what we‚Äôve learnt so far, here‚Äôs a small checklist to review our own Docker build setups:
I have a comprehensive .dockerignore file
I use an appropriate base image
I decoupled the dependency installation step to improve caching
I decoupled the resulting built application from the build step
I purged the node_modules from unnecessary files
Time to flex! üí™ Show me your before and after Docker image sizes in the comments below!*
#### [TypeScript Tidbit: How to Overload an Imported Function](https:&#x2F;&#x2F;www.robincussol.com&#x2F;typescript-tidbit-how-to-overload-an-imported-function&#x2F;) 
*There are times when the type definitions shipped on DefinitelyTyped are not enough and this results in making the TypeScript compiler unhappy. Oh noes! üò≠
Functions Overloading Be Like, Photo by Luis Villasmil) on Unsplash.



Overload an imported function in TypeScript
But fear not! It is possible to overload a function imported from a different module (which could even be a local module&#x2F;file, not necessarily a node module) without ‚Äúpatching‚Äù the corresponding @types&#x2F;&lt;package&gt; type definitions.
import { someFunction } from &#39;module&#39;

&#x2F;&#x2F; the function overloading
declare module &#39;module&#39; {
  function someFunction() &#x2F;&#x2F; the overload you need
}

someFunction() &#x2F;&#x2F; with the overloaded version ‚úîÔ∏è
Example: overload Ramda‚Äôs compose function
A practical example is Ramda‚Äôs compose function. If you pass more than 7 functions to the function, you need to overload Ramda‚Äôs type definitions coming from @types&#x2F;ramda as the TypeScript compiler will report an error otherwise (TypeScript Playground Error Example).

DefinitelyTyped obviously cannot provide the type definitions for any number of arguments as compose accepts as many arguments as you want. So it‚Äôs up to you to inform the TypeScript compiler that this usage is actually okay. üòå
This can be done like in the example below (TypeScript Playground Working Example):
import * as R from &#39;ramda&#39;

&#x2F;&#x2F; overloading compose because &#x60;@types&#x2F;ramda&#x60; exposes types for up to 6 functions
declare module &#39;ramda&#39; {
  function compose&lt;V0, T1, T2, T3, T4, T5, T6, T7&gt;(
    fn6: (x: T6) &#x3D;&gt; T7,
    fn5: (x: T5) &#x3D;&gt; T6,
    fn4: (x: T4) &#x3D;&gt; T5,
    fn3: (x: T3) &#x3D;&gt; T4,
    fn2: (x: T2) &#x3D;&gt; T3,
    fn1: (x: T1) &#x3D;&gt; T2,
    fn0: (x0: V0) &#x3D;&gt; T1
  ): (x0: V0) &#x3D;&gt; T7
}

&#x2F;&#x2F; and now, we can use:
const someComplicatedResult &#x3D; R.compose&lt;V0, T1, T2, T3, T4, T5, T6, T7&gt;(
  fn6,
  fn5,
  fn4,
  fn3,
  fn2,
  fn1,
  fn0
)(&#39;üòÖ&#39;)
We can see from the screenshot below that the overload was correctly taken into consideration. üéâ

Caveat
I can imagine that if this is overused, things can become quickly intractable. So use it sparingly and always with a good reason why. Your future self will be happy to find an explanation in a comment above the overloading as it is kind of unusual. üòâ
I discovered this while refactoring @kiwicom&#x2F;splitster to TS (link to commit) and thought it might be useful to share. Hope it helped you!*
#### [Wax on, Wax off](https:&#x2F;&#x2F;www.robincussol.com&#x2F;wax-on-wax-off&#x2F;) 
*The reason I got into web development in the first place was the magical ‚ú® feeling you get when you see your code manifest in the browser.
In my current role at work, I don‚Äôt do much of that anymore. And I guess I kind of miss it. Especially the part when I am given a clearly defined outcome, with clear guidelines. Perks of being labelled a senior, I guess. üòú But I digress.
Since I started with React, a lot of things have happened in web development. At the moment, I‚Äôm especially interested in Svelte and TailwindCSS and after watching Rich Harris‚Äôs latest talk ‚ÄúFuturistic Web Development‚Äù, I needed an excuse to try Svelte ASAP.
Staying sharp with deliberate practice
To ensure my frontend skills don‚Äôt wither, I would like to spend dedicated time each week to practice on a set of frontend challenges and reflect on what I learnt from them.
Fortunately, I recently discovered FrontendMentor.io and this website offers quite the list of frontend challenges, ranging in difficulty and consistently with nice designs.
Improve your front-end coding skills by building real projects
Solve real-world HTML, CSS and JavaScript challenges whilst working to professional designs.
‚Äî FrontendMentor.io
And to practice with new frontend technologies, it‚Äôs good to find nice designs. But it‚Äôs even better when they come with a style guide and assets like pictures and icons. üòç
Here‚Äôs how it works:
You choose a challenge and download the files.
You attempt the challenge with the stack of your choice. Because the challenge files come with a style guide, the necessary pictures and icons, etc. it‚Äôs really easy to get started! (Unless you spend hours deciding which stack to use, of course üòÇ)
You upload it to GitHub and deploy your attempt on Vercel or Netlify.
Finally, you submit your solution through your challenges dashboard on the platform.
You can then get feedback on your submissions and provide reviews for other people‚Äôs submissions too, which I find really cool. I remember how difficult it was to get feedback when I was first learning web development.
Learnings
The last challenge I attempted looked pleasing on my eyes and I honestly did not expect I would learn so much from it. That makes me want to practice even more!
Check out the live deployment!


I encountered the following problems to complete the ‚ÄúSocial media dashboard with theme switcher‚Äù challenge:
setting up Svelte with TailwindCSS (thank you Swyx and Chris Dhanaraj)
implementing a toggle component from scratch
without accessibility in mind (where I started: W3Schools üòÖ)
with accessibility in mind (where I ended up: Smashing Magazine, though I‚Äôm not sure how to test if my current solution is the most accessible)
implementing a theme switcher in Svelte (inspiration from this Svelte REPL)
adding a border with a gradient to a block element (this requires using a CSS trick from nowhere else but CSS Tricks of course)
pulling my hair for not realising that you need the group class for group-hover: modifiers to apply in the children with Tailwind (thank you Estevan Maito)
how to extract the imported Svelte components‚Äô props‚Äô TypeScript types (that‚Äôs a mouthful!), instead of exporting and importing the types directly (TL;DR: use $props_def from the component)
&lt;script lang&#x3D;&quot;ts&quot;&gt;
  import MyComponent from &#39;.&#x2F;MyComponent.svelte&#39;;

  const data: MyComponent[&#39;$props_def&#39;][&#39;data&#39;] &#x3D; ...
&lt;&#x2F;script&gt;

&lt;MyComponent {data} &#x2F;&gt;

...
deploying a ‚Äúmonorepo‚Äù on Vercel without redeploying all the folders all the time by specifying the ‚ÄúIgnored Build Step‚Äù with something like git diff --quiet HEAD^ HEAD -- subfolder-in-monorepo to only rebuild the site if changes were made in subfolder-in-monorepo.
Here‚Äôs the GitHub repository where I will learn in public and add future challenges I will attempt. (Though I might need to rename this repository in the future as I just found this really nice list of project ideas to build with other platforms than FrontendMentor.io üòâ)
Let me know in the comments what your current deliberate practice is!*
#### [A Successful Side-Project: Lessons from Swyx](https:&#x2F;&#x2F;www.robincussol.com&#x2F;a-successful-side-project-lessons-from-swyx&#x2F;) 
*If you are on Twitter, chances are you came across this tweet by Daniel Vassallo
If you‚Äôre tempted by this, my advice to first-time creators is to start with a very small product: Something you can finish in 2 weeks and charge #### [Build Standalone Expo .apk and .ipa with Turtle CLI [deprecated]](https:&#x2F;&#x2F;www.robincussol.com&#x2F;build-standalone-expo-apk-ipa-with-turtle-cli&#x2F;) 
*This article was updated on February 7, 2023. NOTE: As of Expo SDK 47, the following method does not work any more. With the release of EAS‚Ä¶*
#### [Optimize your img tags with Eleventy Image and WebC](https:&#x2F;&#x2F;www.robincussol.com&#x2F;optimize-your-img-tags-with-eleventy-image-and-webc&#x2F;) 
*I am very excited about WebC and couldn‚Äôt wait to try out the corresponding Eleventy plugin. The first use-case I had in mind was to use‚Ä¶*
#### [Year in Review: 2021](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2021&#x2F;) 
*We‚Äôre already at the start of February 2022, but who says retrospectives need to be done on January 1st?! A lot of things happened in 202‚Ä¶*
#### [Python Dependencies for JavaScript Developers](https:&#x2F;&#x2F;www.robincussol.com&#x2F;python-dependencies-for-javascript-developers&#x2F;) 
*Recently, I needed to update an old Python codebase which had not been touched in 3 years! Of course, the dependencies were so outdated that‚Ä¶*
#### [How to Download a Brain with Pair Documenting](https:&#x2F;&#x2F;www.robincussol.com&#x2F;download-a-brain-with-pair-documenting&#x2F;) 
*When people leave the company, a lot of specific and ad hoc knowledge goes away with them. Unless there is already a strong documentation‚Ä¶*
#### [Year in Review: 2020](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2020&#x2F;) 
*2020, what a ride! I cannot believe 2020 has already finally come to an end: with the lockdowns and quarantines, time simultaneously flew by‚Ä¶*
#### [Docker for JavaScript Devs: How to Containerise Node.js Apps Efficiently](https:&#x2F;&#x2F;www.robincussol.com&#x2F;docker-for-js-devs-how-to-containerise-nodejs-apps-efficiently&#x2F;) 
*Docker is a really cool technology to have applications run the in the same, predictable context, ensuring the ‚Äúbut it works on my machine‚Ä¶*
#### [TypeScript Tidbit: How to Overload an Imported Function](https:&#x2F;&#x2F;www.robincussol.com&#x2F;typescript-tidbit-how-to-overload-an-imported-function&#x2F;) 
*There are times when the type definitions shipped on DefinitelyTyped are not enough and this results in making the TypeScript compiler‚Ä¶*
#### [Wax on, Wax off](https:&#x2F;&#x2F;www.robincussol.com&#x2F;wax-on-wax-off&#x2F;) 
*The reason I got into web development in the first place was the magical ‚ú® feeling you get when you see your code manifest in the browser‚Ä¶*
#### [A Successful Side-Project: Lessons from Swyx](https:&#x2F;&#x2F;www.robincussol.com&#x2F;a-successful-side-project-lessons-from-swyx&#x2F;) 
*If you are on Twitter, chances are you came across this tweet by Daniel Vassallo and it now seems everyone is writing a book! üòÑ Shawn Wang‚Ä¶*0 for it. The experience of getting paid for something you created, directly by consumers, will change you forever. https:&#x2F;&#x2F;t.co&#x2F;UbUD9ch4xQ
‚Äî Daniel Vassallo (@dvassallo) April 10, 2020
 
and it now seems everyone is writing a book! üòÑ
Shawn Wang took this advice and decided to go forth with his Coding Career Handbook (for which I‚Äôm grateful! It‚Äôs such a great book!). He shares his lessons and regrets in this talk at js.la üìΩÔ∏è, and here are my notes for my future self when I want to ship a side project (for money or not).
The How
There are 4 aspects:
Pre-selling
Delivering
Launching
Keeping going
Pre-selling - or your own Kickstarter
On the first day of this endeavour, take the time to find a topic, a name and put up a landing page with good marketing copy.
Pre-sell to your friends and close network: they are more likely to ask you about the state of the project and you would hate to disappoint. What‚Äôs more, you‚Äôve got their money which you would awkwardly need to return otherwise.
This is probably a good moment to decide which platform(s) you want to use to support the sale of your book. Gumroad and Podia seem to be fairly big players in that space.
If it is your first side project that you would like to ship for money, don‚Äôt fret too much over the pricing strategy; it is more of a distraction from writing and completing the project. Sticking to Daniel Vassallo‚Äôs recommendation of #### [Build Standalone Expo .apk and .ipa with Turtle CLI [deprecated]](https:&#x2F;&#x2F;www.robincussol.com&#x2F;build-standalone-expo-apk-ipa-with-turtle-cli&#x2F;) 
*This article was updated on February 7, 2023. NOTE: As of Expo SDK 47, the following method does not work any more. With the release of EAS‚Ä¶*
#### [Optimize your img tags with Eleventy Image and WebC](https:&#x2F;&#x2F;www.robincussol.com&#x2F;optimize-your-img-tags-with-eleventy-image-and-webc&#x2F;) 
*I am very excited about WebC and couldn‚Äôt wait to try out the corresponding Eleventy plugin. The first use-case I had in mind was to use‚Ä¶*
#### [Year in Review: 2021](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2021&#x2F;) 
*We‚Äôre already at the start of February 2022, but who says retrospectives need to be done on January 1st?! A lot of things happened in 202‚Ä¶*
#### [Python Dependencies for JavaScript Developers](https:&#x2F;&#x2F;www.robincussol.com&#x2F;python-dependencies-for-javascript-developers&#x2F;) 
*Recently, I needed to update an old Python codebase which had not been touched in 3 years! Of course, the dependencies were so outdated that‚Ä¶*
#### [How to Download a Brain with Pair Documenting](https:&#x2F;&#x2F;www.robincussol.com&#x2F;download-a-brain-with-pair-documenting&#x2F;) 
*When people leave the company, a lot of specific and ad hoc knowledge goes away with them. Unless there is already a strong documentation‚Ä¶*
#### [Year in Review: 2020](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2020&#x2F;) 
*2020, what a ride! I cannot believe 2020 has already finally come to an end: with the lockdowns and quarantines, time simultaneously flew by‚Ä¶*
#### [Docker for JavaScript Devs: How to Containerise Node.js Apps Efficiently](https:&#x2F;&#x2F;www.robincussol.com&#x2F;docker-for-js-devs-how-to-containerise-nodejs-apps-efficiently&#x2F;) 
*Docker is a really cool technology to have applications run the in the same, predictable context, ensuring the ‚Äúbut it works on my machine‚Ä¶*
#### [TypeScript Tidbit: How to Overload an Imported Function](https:&#x2F;&#x2F;www.robincussol.com&#x2F;typescript-tidbit-how-to-overload-an-imported-function&#x2F;) 
*There are times when the type definitions shipped on DefinitelyTyped are not enough and this results in making the TypeScript compiler‚Ä¶*
#### [Wax on, Wax off](https:&#x2F;&#x2F;www.robincussol.com&#x2F;wax-on-wax-off&#x2F;) 
*The reason I got into web development in the first place was the magical ‚ú® feeling you get when you see your code manifest in the browser‚Ä¶*
#### [A Successful Side-Project: Lessons from Swyx](https:&#x2F;&#x2F;www.robincussol.com&#x2F;a-successful-side-project-lessons-from-swyx&#x2F;) 
*If you are on Twitter, chances are you came across this tweet by Daniel Vassallo and it now seems everyone is writing a book! üòÑ Shawn Wang‚Ä¶*0 is probably enough.
Delivering
Thanks to your pre-writing, e.g. gathering notes, writing blog posts, etc., you already have some amount of the material you would like to include in the finished product. If it‚Äôs 25%, that means you still need to actually write the other 75%.
If possible, you should continue your ‚Äúnormal‚Äù activities, like shipping blog posts about other topics, appearing on podcasts, etc.
As you are writing, document your journey and give away one or two chapters for free as teasers. They‚Äôre a showcase for what you‚Äôre producing and could lead to podcast interviews for further exposure.
I was sharing my personal journey, lessons and milestones.
The best marketing is no marketing. No one wants to be sold anything.
‚Äî Alex West, in Two and a half years of building products
Daniel Vassallo‚Äôs advice to time box the project to 2 weeks is a very important idea: it is so easy to fall prey to scope creep by adding more and more topics to cover, especially when you are knowledgeable and excited about it! But this may well mean that you will never actually ship it. So harness your enthusiasm to provide an advantage.
Of course, you have the goal to ship that product, but what parts of your day actively contribute to that goal? If you‚Äôd like to get anything done, adopting a system to support your goals will go a long way.

Systems &gt; Goals, Source: https:&#x2F;&#x2F;jamesclear.com&#x2F;goals-systems
Launching
All your efforts are coming to an end‚Ä¶ or so you thought. Now is the time to launch your product! This phase requires an entirely different skill set so it‚Äôs good to have practice.
Having a great landing page is a must. A good resource on the subject is Rob Hope‚Äôs book Landing Page Hot Tips, and you can read Shawn‚Äôs review of it too.
Make sure to know the rules of the platforms you‚Äôre using to launch: Shawn‚Äôs Show HN post was doing very well and directing a lot of traffic to his landing page, but it was sadly taken down as no free sample of the book was available there (despite the blog posts).
If people leave out a negative comment, take this as an opportunity to turn their opinions around.
Shawn recommends watching Adam Wathan‚Äôs talk Nailing Your First Launch.
Keeping going
This is still not the end. What comes tomorrow? Next week, next month, next year?
You can ‚Äúlaunch‚Äù your product multiple times.
You can start a community around your book or product.
One of the biggest mistakes I see founders make is abandoning what already works and trying to take on a bigger challenge before they‚Äôre making enough money to develop products full-time.
Instead, focus on replicating the same type of product with another angle or in another market, maybe more than once.
‚Äî Rob Walling, in The Stairstep Approach to Bootstrapping
The Why
If you want to go from employee to entrepreneur, it is good to learn without too much risk how to do ‚Äúbusiness‚Äù without all the supports from other departments. For example, as a Software Engineer, you would not be focusing much on attracting leads for your company; there would be a design team and product managers making decisions about the product, etc.
When you‚Äôre launching a product on your own, you need to perform in all the roles and learn as you go. Especially when it comes to side-projects, developing a system to support your goals, and improving your discipline and focus.
You will get acquainted with the valley of despair and go through the emotional journey it describes; this is inevitable, and maybe even necessary, to create anything great.

 Source: https:&#x2F;&#x2F;john.do&#x2F;emotional-journey-creating&#x2F; 
This can be daunting but it will most likely be a rewarding experience, at least in terms of skills acquisition if not financially.
Make sure to define in advance your idea of success for this project: is it for the learning experience and to have a published book to your name, is it solely about making X amount of money?
Resources
üìΩÔ∏è Shawn‚Äôs talk, Lessons and Regrets From Shipping My $50000 Coronavirus Side Project
üìΩÔ∏è Adam Wathan‚Äôs talk, Nailing Your First Launch
üìì Rob Walling, The Stairstep Approach to Bootstrapping
üìì James Clear, Forget About Setting Goals. Focus on This Instead
üìì Alex West, Two and a half years of building products*0 for it. The experience of getting paid for something you created, directly by consumers, will change you forever. https:&#x2F;&#x2F;t.co&#x2F;UbUD9ch4xQ
‚Äî Daniel Vassallo (@dvassallo) April 10, 2020
 
and Shawn Wang (@swyx) acted on it almost immediately to produce the Coding Career Handbook a few months later. I had followed him for some time on Twitter. His posts, conference talks and online presence in general always brought me value so I wanted to support his work. I was also really glad that half the proceeds would go to FreeCodeCamp. I got the Creators package, not entirely sure what to expect.
This was one of the best decisions of 2020.
As part of the Creators package, there have been regular workshops and they definitely spurred me further to action. After he invited Monica Lent to give a workshop about blogging for developers, I formed a resolve to try and publish a post every 2 weeks, as a way to transform my note-taking game into something more valuable. That‚Äôs when I resurrected my blog with 5 Tips to Start Blogging (for Devs).
A lot of my posts were shared at work and in the company‚Äôs external newsletter (thank you üôÇ) and for the most part, this resurection was successful, even though December was a bit of a hiatus in my blog publishing, as I started my newsletter, Robin‚Äôs Gazette.
I still have a lot to learn when it comes to creating online content and I am looking forward to continuing with this momentum. Whenever I need a reality check of what it takes to embark on this creator journey, I would have a read through Alex West‚Äôs story, as it‚Äôs so real, inspiring and humbling!
Joining online communities
The Coding Career Handbook is an amazing resource and I would like to write a proper review of the book some day; it contains so much valuable information that it would be hard to do it justice here.
What‚Äôs even more awesome about it is that it came with access to a community through Discord and Circle that Shawn manages really well as it keeps delivering value and furthers the book‚Äôs teachings and principles. And if that wasn‚Äôt enough, I met a few interesting people there who I‚Äôm looking forward to getting to know more in 2021.
Judging by how much the Coding Career community helped me to get real with my volitions, I also decided to join Monica Lent‚Äôs Blogging For Devs community because I‚Äôd like to take my blogging further. For example, my article about [Building] Standalone Expo .apk and .ipa with Turtle CLI broke the 10k unique visitor mark in December, through accidental SEO mostly. üéâ I‚Äôm hoping to get a little bit more intentional with SEO as it‚Äôs a great way to magnify the reach of your content. There are so many interesting and inspiring people in Monica‚Äôs community, as well as discussions and workshops about SEO, newsletters, monetization, and of course blogging‚Äîtopics I definitely want to dive deeper in in the new year!
Writing, writing, writing
If you have read this far, it has become pretty apparent that writing is now more than ever my main focus. I think it has been a tremendous source of clarity and success in the last year for me.
The resource that influenced my writing the most this year was this lecture by Larry McEnerney about the Craft of Writing Effectively (here‚Äôs a summary). Having done a PhD, I practiced the ‚Äúwrong‚Äù way of writing for a very long time. Focusing on what‚Äôs valuable for your intended readership makes so much sense.
As I mentioned in my first newsletter issue (let me know if you want a copy of it üòâ), design documents have been crazy useful at work. I must thank my colleage Tobi√°≈° Potoƒçek for bringing about this revolution. In this remote-only work environment, they were a great tool to discuss, make decisions and document them in a searchable manner. Every shortcut needed to be reckoned with and set against the bigger picture. Every quirk or contextual piece of information (which are critically important to understand past decisions or make new ones) are now recorded in writing.
Being a member of the Frontend Platform team, communicating as effectively as possible with the teams we serve was critically important too‚Äîespecially in such challenging times for a travel company in 2020. Most of that communication was done in writing through Slack and Google Documents. (Not to say it was always a smooth ride‚Ä¶)
A look ahead
In 2021, I will focus on staying in shape, physically and mentally. We will go for walks in nature more regularly with Emilia (we agreed at least once a month and have a list of places in Czechia!) I will cycle to work as much as possible, get back into the nice workout rhythm we had during the first lockdown and take care of my sleeping patterns (it‚Äôs all great to wake up earlier to write, but that means going to bed earlier too, Robin ;-)) I will take breaks when I‚Äôm getting overwhelmed, instead of resorting to my usual ‚Äústrategy‚Äù of pushing through until I‚Äôm burnt out.
In 2021, I will focus on maintaining the shift from content consumption to content creation. I want to continue publishing on my blog every 2 weeks as well as send my Gazette every 2 weeks. I will write a book to help PhD graduates transition to web development: I‚Äôm now further along the path (and my work seems to be appreciated :)), so it‚Äôs time to try and lift others as I climb.
In 2021, I will finally speak Slovak fluently to be able to speak to all our wedding guests (still to be planned‚Ä¶ so I got time, I guess :P) in their preferred language. (Robin of January 2022, you‚Äôre welcome!)
C‚Äôest parti!*
#### [Docker for JavaScript Devs: How to Containerise Node.js Apps Efficiently](https:&#x2F;&#x2F;www.robincussol.com&#x2F;docker-for-js-devs-how-to-containerise-nodejs-apps-efficiently&#x2F;) 
*Docker is a really cool technology to have applications run the in the same, predictable context, ensuring the ‚Äúbut it works on my machine‚Äù comments are a thing of the past. Not to mention how Docker integrates with Docker Compose and Kubernetes for larger-scale applications! But that‚Äôs for another day.
In this article, you will learn about some good principles to containerise Node.js apps efficiently. These principles are probably quite general and well-known, but they‚Äôre easy to overlook for beginners to Docker and Dockerfiles.
You will need to have Docker and Node.js installed locally to follow along comfortably.
Docker wants to make you happy, 
Photo by cottonbro from Pexels



Table of contents
Containerising a Next.js app (naive approach)

Docker Glossary
Optimising a Node.js app‚Äôs Docker image

Create a comprehensive .dockerignore file
Use an appropriate base image
Decouple the dependency installation step from application code
Decouple the build from the resulting built application
(Optional) Purge node_modules from unnecessary files
Docker build checklist for JavaScript Devs
Containerising a Next.js app (naive approach)
Let‚Äôs start with a simple Next.js application:
$ npm create next-app --use-npm
and let‚Äôs write the following into a file called Dockerfile at the root of the project:
FROM node:14.15.0

WORKDIR &#x2F;app

COPY . .
RUN npm ci
RUN npm run build

EXPOSE 3000

USER node

CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
Okay, what just happened? üòÑ
Docker Glossary
FROM &lt;image&gt;
WORKDIR &lt;some-path-in-the-container&gt;
COPY &lt;from-context&gt; &lt;to-container&gt;
WORKDIR directory
RUN &lt;command&gt;
docker build process only
EXPOSE &lt;port&gt;
documenting which port the app uses
USER &lt;user&gt;
root with superuser privileges); it‚Äôs good practice to use a different user to run the app.
CMD &lt;command&gt;
docker run &lt;image-tag&gt;, it is not executed during the build process.
Assuming we have Docker installed, we could now run
$ docker build --tag my-containerised-nextjs-app .
This command kindly asks the Docker daemon running on our machine to build the Dockerfile we just wrote with the files present in the current directry (the .) and to call that image my-containerised-nextjs-app (with the --tag flag).
After the build completed, run
$ docker run --rm -p 3000:3000 my-containerised-nextjs-app
and we should have our app running at http:&#x2F;&#x2F;localhost:3000.
This second command orders the Docker daemon to run the image named my-containerised-nextjs-app with port 3000 on my machine to correspond to port 3000 inside the container so that we can interact with our Next.js app. This port mapping is done through the -p hostPort:containerPort flag. Go ahead and change the port mapping and see if you can still access the app.
The --rm flag indicates that we do not want the Docker daemon to keep the container when we stop its execution (with CTRL+C); this is useful not to clog our machines with useless logs while developing.
Voil√†, we have containerised our Next.js app. The End. üéâ
Wait! Don‚Äôt leave, there‚Äôs more! üëá
Optimising a Node.js app‚Äôs Docker image
The section above does the job, but it‚Äôs not optimal. If we only have so few pipeline minutes and we don‚Äôt like wasting resources ‚ôªÔ∏è, this setup will eat more than is necessary. There are a few strategies to optimise a Dockerfile:
Create a comprehensive .dockerignore file
Use an appropriate base image
Decouple the dependency installation step from application code
Decouple the build from the resulting built application
(Optional) Purge node_modules from unnecessary files
Create a comprehensive .dockerignore file
If we look at the logs from building the Docker image, we could read:
Step 4&#x2F;8 : RUN npm ci
 ---&gt; Running in 559b499f0e2c
npm WARN prepare removing existing node_modules&#x2F; before installation
That means we copied the node_modules folder from our local context over to the Docker image being built. What‚Äôs more, npm ci removes them to make sure it works consistently. That is an indication that we should not copy the node_modules in the first place.
To let Docker know some files and folders should be ignored, we can list them in a .dockerignore file. For example, add the following to a file named .dockerignore:
node_modules
Run the build again and the warning disappeared.
What‚Äôs more, we can see how much less was sent to the Docker build context:
# BEFORE
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  101.8MB

# AFTER
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  400.4kB
In practice, we would want to add as many files as possible to our .dockerignore to ensure we‚Äôre not wasting time and energy on files which won‚Äôt be necessary for the build. This can include documentation files (e.g. *.md), configuration files which are only necessary when developing (e.g. .eslint*, .prettier*) as well as our Git history (e.g. .git).
With the following .dockerignore file:
node_modules
*.md
.git
we end up sending the bare minimum to the Docker daemon:
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  248.3kB
Use an appropriate base image
Docker images come in all shapes and sizes. When it comes to building or deploying our app, the smaller the size, the better. For our Next.js app, we don‚Äôt need all that‚Äôs available in node:14.15.0. For example, we don‚Äôt need git or curl. We can instead use the alpine flavour of that image, namely node:14.15.0-alpine.
The difference in size between node:14.15.0 and node:14.15.0-alpine is enormous!
REPOSITORY                    TAG                 SIZE
node                          14.15.0             943MB
node                          14.15.0-alpine      117MB
Our final containerised Next.js app will hence be much smaller thanks to this teeny-tiny modification of our Dockerfile:
- FROM node:14.15.0
+ FROM node:14.15.0-alpine

WORKDIR &#x2F;app

COPY . .
RUN npm ci
RUN npm run build

EXPOSE 3000

USER node

CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
For reference, if we want to inspect the size of the Docker images we have available locally, we can run docker image ls --all.
Our Docker image has size 1.05GB if we use node:14.15.0,
REPOSITORY                    TAG                 IMAGE ID            CREATED             SIZE
my-containerised-nextjs-app   latest              c78d43a2c5bc        15 seconds ago      1.05GB
and it drops to 229MB if we use node:14.15.0-alpine instead!
REPOSITORY                    TAG                 IMAGE ID            CREATED             SIZE
my-containerised-nextjs-app   latest              d0746ef6e8a4        21 seconds ago      229MB
Decouple the dependency installation step from application code
Our setup is already much better with a suitable .dockerignore file and with a much leaner base image. However, we haven‚Äôt made any changes to our package.json and the npm ci step always needs to run if make any changes to our application code.
This is because Docker caches each step as an intermediate Docker container. For example, if we were to run the build again (docker build --tag my-containerised-nextjs-app .), we would see that the cache is used for all steps, resulting in a nearly instant build (because nothing happened, really üòÑ):
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  248.3kB
Step 1&#x2F;8 : FROM node:14.15.0-alpine
 ---&gt; 9db54a688554
Step 2&#x2F;8 : WORKDIR &#x2F;app
 ---&gt; Using cache
 ---&gt; d5d4291dc699
Step 3&#x2F;8 : COPY . .
 ---&gt; Using cache
 ---&gt; b56455e98a93
Step 4&#x2F;8 : RUN npm ci
 ---&gt; Using cache
 ---&gt; ba4ab784f27e
Step 5&#x2F;8 : RUN npm run build
 ---&gt; Using cache
 ---&gt; a51c18594a20
Step 6&#x2F;8 : EXPOSE 3000
 ---&gt; Using cache
 ---&gt; 806dc06cbb6c
Step 7&#x2F;8 : USER node
 ---&gt; Using cache
 ---&gt; b86db08de717
Step 8&#x2F;8 : CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
 ---&gt; Using cache
 ---&gt; d0746ef6e8a4
Successfully built d0746ef6e8a4
Successfully tagged my-containerised-nextjs-app:latest
If we now modify anything in the folder that is not ignored thanks to our .dockerignore file, Docker will have to bust the cache from Step 3 onwards (the ‚ÄúUsing cache‚Äù expression is not printed any more). Let‚Äôs create an empty file and run the build again:
# create an empty file
$ touch file
# build again
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  248.8kB
Step 1&#x2F;8 : FROM node:14.15.0-alpine
 ---&gt; 9db54a688554
Step 2&#x2F;8 : WORKDIR &#x2F;app
 ---&gt; Using cache
 ---&gt; d5d4291dc699
Step 3&#x2F;8 : COPY . .
 ---&gt; e2b761bb08a6         # The cache is not used anymore
Step 4&#x2F;8 : RUN npm ci
 ---&gt; Running in b36f2511e117
...
To remedy this and ensure that npm ci runs only when necessary, we can first copy package.json and package-lock.json files, run npm ci, and then bring in the rest of the files to build the project:
FROM node:14.15.0-alpine

WORKDIR &#x2F;app

- COPY . .
+ COPY package.json .
+ COPY package-lock.json .
RUN npm ci
+ COPY . .
RUN npm run build

EXPOSE 3000

USER node

CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
After we modified the Dockerfile by applying the diff above, we see that Docker does not leverage the cache at all because the steps are different. This always happens when we modify the layers and&#x2F;or their order.
However, after running this build for a first time, subsequent builds will be much faster as the npm ci step will use the cache unless we modify package.json or package-lock.json:
# create another file to see when Docker stops using the cache
$ touch another-file
# run the build again
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  249.3kB
Step 1&#x2F;10 : FROM node:14.15.0-alpine
 ---&gt; 9db54a688554
Step 2&#x2F;10 : WORKDIR &#x2F;app
 ---&gt; Using cache
 ---&gt; d5d4291dc699
Step 3&#x2F;10 : COPY package.json .
 ---&gt; Using cache
 ---&gt; 139b5a611c0b
Step 4&#x2F;10 : COPY package-lock.json .
 ---&gt; Using cache
 ---&gt; 5bc380de1397
Step 5&#x2F;10 : RUN npm ci
 ---&gt; Using cache
 ---&gt; dff6b2da4bdc
Step 6&#x2F;10 : COPY . .
 ---&gt; 08911c09b40f
Step 7&#x2F;10 : RUN npm run build
 ---&gt; Running in f5374a54d9ad

&gt; my-app@0.1.0 build &#x2F;app
&gt; next build
...
Decouple the build from the resulting built application
For this section to make more sense, we will create another Next.js app that uses some dev dependencies which are necessary only when building the app but not when running it in production.
$ npm create next-app --use-npm --example with-tailwindcss with-tailwindcss-app
Copy the Dockerfile and .dockerignore files created in the other example into with-tailwindcss-app. Build the Docker image and run it to make sure it‚Äôs working well before continuing:
$ docker build --tag with-tailwindcss-app .
$ docker run --rm -p 3000:3000 with-tailwindcss-app
As we can see in the package.json file, we have a few dependencies which are only ever going to be used when building our app. We won‚Äôt need them in the final Docker image. So let‚Äôs get rid of them!
We are going to leverage multi-stage Docker builds. They sound more complicated than they are :)
Here‚Äôs a multi-stage build Dockerfile: in the builder container, we install dependencies and build our app, and in the second stage, we copy relevant files from the builder to our final image and install only production dependencies.
FROM node:14.15.0-alpine as builder

WORKDIR &#x2F;app

COPY package.json .
COPY package-lock.json .
RUN npm ci
COPY . .
RUN npm run build

FROM node:14.15.0-alpine

WORKDIR &#x2F;app

COPY --from&#x3D;builder &#x2F;app&#x2F;package.json .
COPY --from&#x3D;builder &#x2F;app&#x2F;package-lock.json .
RUN npm ci --production
COPY --from&#x3D;builder &#x2F;app&#x2F;.next .next

EXPOSE 3000

USER node

CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
If our app also contained a Next.js config file and a public folder, we would also need to copy them from the builder stage:
...
COPY --from&#x3D;builder &#x2F;app&#x2F;.next .
+ COPY --from&#x3D;builder &#x2F;app&#x2F;next.config.js .
+ COPY --from&#x3D;builder &#x2F;app&#x2F;public public
...
Comparing the sizes, we see that we removed 39MB of dev dependencies, not bad.
without multi-stage build
REPOSITORY                    TAG                 IMAGE ID            CREATED              SIZE
with-tailwindcss-app          latest              88089e6f965d        18 minutes ago      269MB
with multi-stage build
REPOSITORY                    TAG                 IMAGE ID            CREATED              SIZE
with-tailwindcss-app          latest              ba7307736fb0        25 seconds ago       230MB
(Optional) Purge node_modules from unnecessary files
Finally, to make our Docker image the leanest, we will purge our node modules from all the files which were included by the library authors and aren‚Äôt directly useful to our Docker image. For example, documentation files and READMEs, config files for Prettier and such, etc.
Note that this is not without risk as we could be removing files that we actually need to run the application correctly (we had a file named test.js that contained important code and it was mercilessly removed by the tool, which broke the application üòÖ).
We will add another stage called production-deps to make our node modules go through a diet with node-prune (GitHub repo). The list of files and folders that node-prune will remove is largely inspired by Yarn‚Äôs default list (generated through yarn autoclean --init).
To install node-prune, we need curl to be a locally available executable, so we can either choose a base image that contains it out of the box, or we can add it to node:14.15.0-alpine. Because we won‚Äôt need anything else, we will choose the latter.
FROM node:14.15.0-alpine as builder

WORKDIR &#x2F;app

COPY package.json .
COPY package-lock.json .
RUN npm ci
COPY . .
RUN npm run build

+ FROM node:14.15.0-alpine as production-deps

+ WORKDIR &#x2F;app

COPY --from&#x3D;builder &#x2F;app&#x2F;package.json .
COPY --from&#x3D;builder &#x2F;app&#x2F;package-lock.json .
RUN npm ci --production
+ # Add curl
+ RUN apk --no-cache add curl
+ # Install node-prune https:&#x2F;&#x2F;github.com&#x2F;tj&#x2F;node-prune
+ RUN curl -sf https:&#x2F;&#x2F;gobinaries.com&#x2F;tj&#x2F;node-prune | sh
+ RUN node-prune &#x2F;app

FROM node:14.15.0-alpine

WORKDIR &#x2F;app

+ COPY --from&#x3D;production-deps &#x2F;app&#x2F;package.json .
+ COPY --from&#x3D;production-deps &#x2F;app&#x2F;package-lock.json .
+ COPY --from&#x3D;production-deps &#x2F;app&#x2F;node_modules node_modules

COPY --from&#x3D;builder &#x2F;app&#x2F;.next .next

EXPOSE 3000

USER node

CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
Try it by building the image once more.
When node-prune ran, it printed out in the console that it removed 12MB:
...
Step 15&#x2F;24 : RUN node-prune &#x2F;app
 ---&gt; Running in 69e030ab8b70


         files total 14,269
       files removed 3,722
        size removed 12 MB
            duration 216ms
...
However, suprinsingly, a whopping 32MB were removed in comparison to our previous Dockerfile. (It seems node-prune‚Äôs tallying is not totally accurate when I tested locally as it removed 20.7 MB instead ‚Äî though it still doesn‚Äôt explain the other 11.3 MB ü§∑‚Äç‚ôÇÔ∏è)
$ docker image ls with-tailwindcss-app
REPOSITORY                    TAG                 IMAGE ID            CREATED              SIZE
with-tailwindcss-app          latest              c5e2081dba30        9 seconds ago        198MB
Let‚Äôs ensure our app is running well without the files node-prune removed and we can be on our merry way! üê≥ üéâ
Docker build checklist for JavaScript Devs
To summarise what we‚Äôve learnt so far, here‚Äôs a small checklist to review our own Docker build setups:
I have a comprehensive .dockerignore file
I use an appropriate base image
I decoupled the dependency installation step to improve caching
I decoupled the resulting built application from the build step
I purged the node_modules from unnecessary files
Time to flex! üí™ Show me your before and after Docker image sizes in the comments below!*
#### [TypeScript Tidbit: How to Overload an Imported Function](https:&#x2F;&#x2F;www.robincussol.com&#x2F;typescript-tidbit-how-to-overload-an-imported-function&#x2F;) 
*There are times when the type definitions shipped on DefinitelyTyped are not enough and this results in making the TypeScript compiler unhappy. Oh noes! üò≠
Functions Overloading Be Like, Photo by Luis Villasmil) on Unsplash.



Overload an imported function in TypeScript
But fear not! It is possible to overload a function imported from a different module (which could even be a local module&#x2F;file, not necessarily a node module) without ‚Äúpatching‚Äù the corresponding @types&#x2F;&lt;package&gt; type definitions.
import { someFunction } from &#39;module&#39;

&#x2F;&#x2F; the function overloading
declare module &#39;module&#39; {
  function someFunction() &#x2F;&#x2F; the overload you need
}

someFunction() &#x2F;&#x2F; with the overloaded version ‚úîÔ∏è
Example: overload Ramda‚Äôs compose function
A practical example is Ramda‚Äôs compose function. If you pass more than 7 functions to the function, you need to overload Ramda‚Äôs type definitions coming from @types&#x2F;ramda as the TypeScript compiler will report an error otherwise (TypeScript Playground Error Example).

DefinitelyTyped obviously cannot provide the type definitions for any number of arguments as compose accepts as many arguments as you want. So it‚Äôs up to you to inform the TypeScript compiler that this usage is actually okay. üòå
This can be done like in the example below (TypeScript Playground Working Example):
import * as R from &#39;ramda&#39;

&#x2F;&#x2F; overloading compose because &#x60;@types&#x2F;ramda&#x60; exposes types for up to 6 functions
declare module &#39;ramda&#39; {
  function compose&lt;V0, T1, T2, T3, T4, T5, T6, T7&gt;(
    fn6: (x: T6) &#x3D;&gt; T7,
    fn5: (x: T5) &#x3D;&gt; T6,
    fn4: (x: T4) &#x3D;&gt; T5,
    fn3: (x: T3) &#x3D;&gt; T4,
    fn2: (x: T2) &#x3D;&gt; T3,
    fn1: (x: T1) &#x3D;&gt; T2,
    fn0: (x0: V0) &#x3D;&gt; T1
  ): (x0: V0) &#x3D;&gt; T7
}

&#x2F;&#x2F; and now, we can use:
const someComplicatedResult &#x3D; R.compose&lt;V0, T1, T2, T3, T4, T5, T6, T7&gt;(
  fn6,
  fn5,
  fn4,
  fn3,
  fn2,
  fn1,
  fn0
)(&#39;üòÖ&#39;)
We can see from the screenshot below that the overload was correctly taken into consideration. üéâ

Caveat
I can imagine that if this is overused, things can become quickly intractable. So use it sparingly and always with a good reason why. Your future self will be happy to find an explanation in a comment above the overloading as it is kind of unusual. üòâ
I discovered this while refactoring @kiwicom&#x2F;splitster to TS (link to commit) and thought it might be useful to share. Hope it helped you!*
#### [Wax on, Wax off](https:&#x2F;&#x2F;www.robincussol.com&#x2F;wax-on-wax-off&#x2F;) 
*The reason I got into web development in the first place was the magical ‚ú® feeling you get when you see your code manifest in the browser.
In my current role at work, I don‚Äôt do much of that anymore. And I guess I kind of miss it. Especially the part when I am given a clearly defined outcome, with clear guidelines. Perks of being labelled a senior, I guess. üòú But I digress.
Since I started with React, a lot of things have happened in web development. At the moment, I‚Äôm especially interested in Svelte and TailwindCSS and after watching Rich Harris‚Äôs latest talk ‚ÄúFuturistic Web Development‚Äù, I needed an excuse to try Svelte ASAP.
Staying sharp with deliberate practice
To ensure my frontend skills don‚Äôt wither, I would like to spend dedicated time each week to practice on a set of frontend challenges and reflect on what I learnt from them.
Fortunately, I recently discovered FrontendMentor.io and this website offers quite the list of frontend challenges, ranging in difficulty and consistently with nice designs.
Improve your front-end coding skills by building real projects
Solve real-world HTML, CSS and JavaScript challenges whilst working to professional designs.
‚Äî FrontendMentor.io
And to practice with new frontend technologies, it‚Äôs good to find nice designs. But it‚Äôs even better when they come with a style guide and assets like pictures and icons. üòç
Here‚Äôs how it works:
You choose a challenge and download the files.
You attempt the challenge with the stack of your choice. Because the challenge files come with a style guide, the necessary pictures and icons, etc. it‚Äôs really easy to get started! (Unless you spend hours deciding which stack to use, of course üòÇ)
You upload it to GitHub and deploy your attempt on Vercel or Netlify.
Finally, you submit your solution through your challenges dashboard on the platform.
You can then get feedback on your submissions and provide reviews for other people‚Äôs submissions too, which I find really cool. I remember how difficult it was to get feedback when I was first learning web development.
Learnings
The last challenge I attempted looked pleasing on my eyes and I honestly did not expect I would learn so much from it. That makes me want to practice even more!
Check out the live deployment!


I encountered the following problems to complete the ‚ÄúSocial media dashboard with theme switcher‚Äù challenge:
setting up Svelte with TailwindCSS (thank you Swyx and Chris Dhanaraj)
implementing a toggle component from scratch
without accessibility in mind (where I started: W3Schools üòÖ)
with accessibility in mind (where I ended up: Smashing Magazine, though I‚Äôm not sure how to test if my current solution is the most accessible)
implementing a theme switcher in Svelte (inspiration from this Svelte REPL)
adding a border with a gradient to a block element (this requires using a CSS trick from nowhere else but CSS Tricks of course)
pulling my hair for not realising that you need the group class for group-hover: modifiers to apply in the children with Tailwind (thank you Estevan Maito)
how to extract the imported Svelte components‚Äô props‚Äô TypeScript types (that‚Äôs a mouthful!), instead of exporting and importing the types directly (TL;DR: use $props_def from the component)
&lt;script lang&#x3D;&quot;ts&quot;&gt;
  import MyComponent from &#39;.&#x2F;MyComponent.svelte&#39;;

  const data: MyComponent[&#39;$props_def&#39;][&#39;data&#39;] &#x3D; ...
&lt;&#x2F;script&gt;

&lt;MyComponent {data} &#x2F;&gt;

...
deploying a ‚Äúmonorepo‚Äù on Vercel without redeploying all the folders all the time by specifying the ‚ÄúIgnored Build Step‚Äù with something like git diff --quiet HEAD^ HEAD -- subfolder-in-monorepo to only rebuild the site if changes were made in subfolder-in-monorepo.
Here‚Äôs the GitHub repository where I will learn in public and add future challenges I will attempt. (Though I might need to rename this repository in the future as I just found this really nice list of project ideas to build with other platforms than FrontendMentor.io üòâ)
Let me know in the comments what your current deliberate practice is!*
#### [A Successful Side-Project: Lessons from Swyx](https:&#x2F;&#x2F;www.robincussol.com&#x2F;a-successful-side-project-lessons-from-swyx&#x2F;) 
*If you are on Twitter, chances are you came across this tweet by Daniel Vassallo
If you‚Äôre tempted by this, my advice to first-time creators is to start with a very small product: Something you can finish in 2 weeks and charge #### [Build Standalone Expo .apk and .ipa with Turtle CLI [deprecated]](https:&#x2F;&#x2F;www.robincussol.com&#x2F;build-standalone-expo-apk-ipa-with-turtle-cli&#x2F;) 
*This article was updated on February 7, 2023.
NOTE: As of Expo SDK 47, the following method does not work any more.
With the release of EAS builds, it is necessary to have Internet access to create standalone Expo apps locally; see Running builds on your own infrastructure on Expo docs.
You can still use the React Native way to build applications locally after generating necessary files with expo prebuild (see this GitHub comment on expo&#x2F;eas-cli).
This post will not receive further updates.
A great way to start writing React Native applications is to use Expo. You don‚Äôt even need to setup a development environment to get started thanks to Snack, an online React Native application editor. Your application is public by default. Sharing has never been that easy.

Brown turtle swimming underwater, Photo by Wexor Tmg on Unsplash
However, you would like to share an application exclusively with some people, not through an app store or any public channel. One possibility is to share the built application file, e.g. an .apk file for Android and an .ipa file for iOS.
Expo is so great a service (oh, and did I mention free?) that they offer you to publish your app on their servers and if you wanted to build these .apk and .ipa files, you could do so on their servers.
The flow looks like:
$ expo publish
$ expo build:&lt;PLATFORM&gt;
and you obtain a nice URL to the artifact created for you when the build finishes.
But, again, this is public. On a server you don‚Äôt control. (Although, if you made the same mistake as I did, a ticket to their support can delete any files you had wished to keep private. ü•á)
Luckily for you, Expo provide the tools they are using on their servers for free (did I mention they‚Äôre great!?). The build process relies on a CLI tool called turtle-cli. It is open-source and available on GitHub.
Let us go through an example of how to create your application file without resorting to Expo servers. That means you can keep an application private and also build your application while being offline.
The following instructions assume you have bash and Node.js available. In my experience, using the current LTS version of Node.js (version 16.13.2) works best.
Caveat: I could not complete the iOS instructions to the end since I do not have an Apple Developer paid account.
We will go through the following steps:
1. Turtle CLI
2. Create a dummy application
3. Publish Expo app on local server
4. Create APK file ‚Äì Android

4.1. Prerequisites
4.2. Create Keystore
4.3. Build APK
5. Create IPA file ‚Äì iOS

5.1. Prerequisites
5.2. Create Signing keys
5.3. Build IPA
6. Distribute and install

6.1. on Android
6.2. on iOS
Resources
A condensed version of these steps without much explanation or context is available on the accompanying GitHub repository.
1. Turtle CLI
To install Turtle CLI, run
$ npm install -g turtle-cli
This will make command turtle globally available on your system. To verify it was correctly installed, let‚Äôs print the version:
$ turtle -V
0.24.3
2. Create a dummy application
Let‚Äôs create a dummy application using Expo CLI. In your terminal, run
$ npx expo init ExampleApplication
It will ask you a few questions:
# Expo version 5.0.3
npx expo init ExampleApplication
? Choose a template: ‚Ä∫ - Use arrow-keys. Return to submit.
    ----- Managed workflow -----
‚ùØ   blank               a minimal app as clean as an empty canvas
    blank (TypeScript)  same as blank but with TypeScript configuration
    tabs (TypeScript)   several example screens and tabs using react-navigation and TypeScript
    ----- Bare workflow -----
    minimal             bare and minimal, just the essentials to get you started
The blank template is enough for us.
If you have yarn installed, Expo will use it by default to install dependencies. You can use the --npm flag in the init command if you‚Äôd prefer to use npm instead.
Once it‚Äôs done setting up your project, you should see the following output in the terminal:
‚úÖ Your project is ready!

To run your project, navigate to the directory and run one of the following yarn commands.

- cd ExampleApplication
- yarn start
Run the commands and let‚Äôs verify the generated boilerplate works in our emulators:


To finish setting up the dummy application, you need to configure the app.json file because some configuration keys must be specified to build a standalone app.
If you would like to know more about these standalone app specific configurations, check Expo‚Äôs documentation for iOS and for Android.
For this tutorial, it is only necessary to specify the keys &quot;bundleIdentifier&quot; under &quot;ios&quot;, and &quot;package&quot; under &quot;android&quot; in your app.json file:
...
    &quot;ios&quot;: {
      ...
      &quot;bundleIdentifier&quot;: &quot;com.example.exampleApplication&quot;,
      ...
    },
    &quot;android&quot;: {
      ...
      &quot;package&quot;: &quot;com.example.example_application&quot;,
      ...
    }
...
3. Publish Expo app on local server
Expo has this notion of app publishing: it allows you to share a link or QR code to Expo‚Äôs website and anyone can run your app through the Expo app on their devices.
Having your app published is also necessary for over-the-air (OTA) updates, allowing seamless updates to your application, and to publish your application (i.e. building your application files on Expo servers).
You would typically run
$ expo login -u $EXPO_USERNAME -p $EXPO_PASSWORD
$ expo publish
and your app would then be available at https:&#x2F;&#x2F;expo.dev&#x2F;&lt;EXPO_USERNAME&gt;&#x2F;&lt;APP_NAME&gt;.
To have your Expo app ‚Äúpublished‚Äù on your local server (and avoid public publishing on Expo servers), you will use a different command:
$ expo export --dev --public-url &lt;your-url-here&gt;
The --dev flag is necessary because you will use a non-https server to publish your Expo app. Note that this prevents you from using OTA updates.
Your server does not need to be running for this step, but you do need to know which local URL you are going to use in advance. This tuorial assumes you will run a local server at http:&#x2F;&#x2F;127.0.0.1:8000.
You can now export the app:
$ expo export --dev --public-url http:&#x2F;&#x2F;127.0.0.1:8000
...
Export was successful. Your exported files can be found in dist
This command will create a dist directory containing the iOS and Android JavaScript bundles and the different assets you are using.
dist
‚îú‚îÄ‚îÄ android-index.json
‚îú‚îÄ‚îÄ assets
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ 13685372945d816a2b474fc082fd9aaa
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ 140c53a7643ea949007aa9a282153849
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ ...
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ fdbedb7e67aa7c0ecad83d9c2fa4dfba
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ fdc01171a7a7ea76b187afcd162dee7d
‚îú‚îÄ‚îÄ bundles
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ android-a9defc54fb2ffdb7e6fdaf5b8d0be751.js
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ ios-a29c3e4ac97a2abdc5208fd4f06e7708.js
‚îî‚îÄ‚îÄ ios-index.json
You can now serve the dist directory on your web server, e.g.
$ npx http-server -p 8000 dist
Note: if for some reason you need to re-export your application (because you modified your app.json file since the last export, for instance), you must first remove the dist directory:
# assuming you are at the root of the project
$ rm -rf dist
$ expo export --dev --public-url http:&#x2F;&#x2F;127.0.0.1:8000
4. Create APK file ‚Äì Android
First, verify that your local server is running. For example, you should see a similar output:
$ curl http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;android-index.json
{&quot;name&quot;:&quot;ExampleApplication&quot;,&quot;slug&quot;:&quot;ExampleApplication&quot;,&quot;version&quot;:&quot;1.0.0&quot;,&quot;orientation&quot;:&quot;portrait&quot;,&quot;icon&quot;:&quot;.&#x2F;assets&#x2F;icon.png&quot;,&quot;splash&quot;:{&quot;image&quot;:&quot;.&#x2F;assets&#x2F;splash.png&quot;,&quot;resizeMode&quot;:&quot;contain&quot;,&quot;backgroundColor&quot;:&quot;#ffffff&quot;,&quot;imageUrl&quot;:&quot;http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;assets&#x2F;201a91bd1740bb1d6a1dbad049310724&quot;}...
4.1. Prerequisites
For Turtle CLI to work correctly to create an .apk file for Android, you need to make sure the following dependency is installed: Java Development Kit (version 8).
If you know which Expo SDK version you are going to use, you can run
$ turtle setup:android --sdk-version &lt;SDK-VERSION&gt;
This will take some time:
$ turtle setup:android --sdk-version 44.0.5
Jan 20 20:22:45 turtle[61127] INFO:  Downloading Android SDK
  platform: &quot;android&quot;
  buildPhase: &quot;setting up environment&quot;
downloading [&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;] 98% 0.2s
...
Jan 20 20:26:56 turtle[61127] INFO:  shell app for SDK 44.0.5 doesn&#39;t exist, downloading...
  platform: &quot;android&quot;
  buildPhase: &quot;setting up environment&quot;
downloading [&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; ] 95% 0.5sJan 20 20:27:08 turtle[61127] INFO:  shell app has been downloaded
  platform: &quot;android&quot;
  buildPhase: &quot;setting up environment&quot;
...
Jan 20 20:29:51 turtle[61127] INFO:  dependencies installed!
  platform: &quot;android&quot;
  buildPhase: &quot;setting up environment&quot;
Jan 20 20:29:51 turtle[61127] INFO:  it&#39;s all set!
  platform: &quot;android&quot;
  buildPhase: &quot;setting up environment&quot;
In the meantime, you can move on to the next section.
4.2. Create Keystore
Just like any other Android app, this app must be signed with some security certificates. In Android-land, as far as I understand, it‚Äôs called a keystore. The instructions to create such a keystore file are available on the Android Developers documentation.
Basically, just create a dummy Android project with Android Studio, and then go to Build &gt; Generate Signed Bundle &#x2F; APK.... Choose APK and press Next. The UI will ask you which app you want to sign, and your dummy app should be pre-selected. On the same screen, press on the button Create new...; just fill the form and you‚Äôre good to go.
Alternatively, if you have keytool CLI utility available on your system (you can check that by trying keytool --help in your terminal), you can generate a keystore file with the following command
$ keytool -genkeypair -v -keystore keystore.jks -alias keyalias -keyalg RSA -keysize 2048 -validity 9125
Enter keystore password:
Re-enter new password:
What is your first and last name?
  [Unknown]:
What is the name of your organizational unit?
  [Unknown]:
What is the name of your organization?
  [Unknown]:
What is the name of your City or Locality?
  [Unknown]:
What is the name of your State or Province?
  [Unknown]:
What is the two-letter country code for this unit?
  [Unknown]:
Is CN&#x3D;Unknown, OU&#x3D;Unknown, O&#x3D;Unknown, L&#x3D;Unknown, ST&#x3D;Unknown, C&#x3D;Unknown correct?
  [no]:  yes

Generating 2,048 bit RSA key pair and self-signed certificate (SHA256withRSA) with a validity of 9,125 days
	for: CN&#x3D;Unknown, OU&#x3D;Unknown, O&#x3D;Unknown, L&#x3D;Unknown, ST&#x3D;Unknown, C&#x3D;Unknown
Enter key password for &lt;keyalias&gt;
	(RETURN if same as keystore password):
Re-enter new password:
[Storing keystore.jks]

Warning:
The JKS keystore uses a proprietary format. It is recommended to migrate to PKCS12 which is an industry standard format using &quot;keytool -importkeystore -srckeystore keystore.jks -destkeystore keystore.jks -deststoretype pkcs12&quot;.
As a TL;DR, you can just download a dummy certificate on the accompanying repository under should-be-private&#x2F;keystore.jks, for testing purposes only. The keystore file is hugely important if you ever plan to submit your app to Google Play store: it‚Äôs the only way to assert you‚Äôre the rightful owner to provide new updates to your app.
File: keystore.jks
keystorepassword
keyalias
keypassword
4.3. Build APK
Make sure that you are serving the dist directory on http:&#x2F;&#x2F;127.0.0.1:8000 as explained above in Run a local server. Assuming you are using bash as your shell, from the root of your project, run:
EXPO_ANDROID_KEYSTORE_PASSWORD&#x3D;&quot;keystorepassword&quot; \
EXPO_ANDROID_KEY_PASSWORD&#x3D;&quot;keypassword&quot; \
turtle build:android \
  --type apk \
  --keystore-path .&#x2F;should-be-private&#x2F;keystore.jks \
  --keystore-alias &quot;keyalias&quot; \
  --allow-non-https-public-url \
  --public-url http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;android-index.json
Note that you need the flag --public-url to point to http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;android-index.json. In addition, it is also necessary to use the --type apk flag to produce an APK file since version 0.8.0 of turtle-cli.
The build may take some time:
Jan 20 20:38:17 turtle[61719] INFO:  Using manifest: {
  &quot;name&quot;: &quot;ExampleApplication&quot;,
  &quot;slug&quot;: &quot;ExampleApplication&quot;,
  &quot;version&quot;: &quot;1.0.0&quot;,
  &quot;orientation&quot;: &quot;portrait&quot;,
  &quot;icon&quot;: &quot;.&#x2F;assets&#x2F;icon.png&quot;,
...
Jan 20 20:38:51 turtle[61719] INFO:  Starting a Gradle Daemon (subsequent builds will be faster)
  platform: &quot;android&quot;
  buildPhase: &quot;running gradle&quot;
  source: &quot;stdout&quot;
...
Once it finishes, you should see this output in your terminal:
Jan 20 20:43:19 turtle[61719] INFO:  copied build to ~&#x2F;expo-apps&#x2F;@anonymous__ExampleApplication-7f15208a56304617a200538cacd2e50e-signed.apk
  platform: &quot;android&quot;
  buildPhase: &quot;copying build artifact&quot;
This message gives you the location of your built .apk file. You can now move on to the Distribute and install section below if you are not interested in creating an .ipa file for iOS.
Note: if the build fails because of some Gradle error, like Could not resolve com.theartofdev.edmodo:android-image-cropper:2.8.0, make sure to open Android Studio and update the Android SDK and SDK Build-Tools. This should fix it.
5. Create IPA file ‚Äì iOS
First, verify that your local server is running, e.g.
$ curl http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;ios-index.json
{&quot;name&quot;:&quot;ExampleApplication&quot;,&quot;slug&quot;:&quot;ExampleApplication&quot;,&quot;version&quot;:&quot;1.0.0&quot;,&quot;orientation&quot;:&quot;portrait&quot;,&quot;icon&quot;:&quot;.&#x2F;assets&#x2F;icon.png&quot;,&quot;splash&quot;:{&quot;image&quot;:&quot;.&#x2F;assets&#x2F;splash.png&quot;,&quot;resizeMode&quot;:&quot;contain&quot;,&quot;backgroundColor&quot;:&quot;#ffffff&quot;,&quot;imageUrl&quot;:&quot;http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;assets&#x2F;201a91bd1740bb1d6a1dbad049310724&quot;...
5.1. Prerequisites
For Turtle CLI to work correctly to create an .ipa file for iOS, you need to make sure your system is macOS and that the following dependencies are installed:
Xcode (version 13.2.1 or newer)
fastlane
Note: make sure that you have run Xcode at least once and that you have agreed to the license agreements.
For more details, see Expo‚Äôs documentation.
If you know which Expo SDK version you are going to use, you can run
$ turtle setup:ios --sdk-version &lt;SDK-VERSION&gt;
If it errors out, saying that you don‚Äôt have the right version of fastlane, try re-installing fastlane (guide). The version used in this article is fastlane 2.200.0.
This will take some time:
$ turtle setup:ios --sdk-version 44.0.5
Jan 20 21:18:03 turtle[48488] INFO:  shell app for SDK 44.0.5 doesn&#39;t exist, downloading...
  platform: &quot;ios&quot;
  buildPhase: &quot;setting up environment&quot;
downloading [                    ] 1% 8514.8s
...
...
Jan 20 21:24:58 turtle[48488] INFO:  it&#39;s all set!
  platform: &quot;ios&quot;
  buildPhase: &quot;setting up environment&quot;
In the meantime, you can move on to the next section.
5.2. Create Signing keys
This assumes you have an Apple Developer Account, which is a paid account.
To create your distribution certificate file, or .p12 file, you can follow this guide.
You will also need your Apple Team ID and a Provisioning Profile that you can generate through Xcode as well. This other guide covers in greater lengths what all these cerficates are for and how to obtain them.

Note that the provisioning profile expires in 6 days in my case, since I do not have an Apple Developer paid account.
Sadly, it is not possible to share example files.
5.3. Build IPA
Make sure that you are serving the dist directory on http:&#x2F;&#x2F;127.0.0.1:8000 as explained Run a local server. Assuming you are using bash as your shell, from the root of your project, run:
EXPO_IOS_DIST_P12_PASSWORD&#x3D;&quot;&lt;PASSWORD HERE&gt;&quot; \
turtle build:ios \
  --team-id YOUR_TEAM_ID \
  --dist-p12-path &#x2F;path&#x2F;to&#x2F;your&#x2F;dist&#x2F;cert.p12 \
  --provisioning-profile-path &#x2F;path&#x2F;to&#x2F;your&#x2F;provisioning&#x2F;profile.mobileprovision \
  --allow-non-https-public-url \
  --public-url http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;ios-index.json
Note that you need the flag --public-url to point to http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;ios-index.json.
Once the build finishes successfully, you should get the path to your .ipa file.
6. Distribute and install
6.1. on Android
Take your .apk and share it through some Google Drive link or other medium of your choice.
If you download this .apk file through an Android device, it should offer you to install the application on the device.
Trick: if the URL is really not friendly to type, and for whatever reason you have to type it manually, use a QR Code generator (e.g. http:&#x2F;&#x2F;www.barcode-generator.org&#x2F;) and your device‚Äôs camera to simplify your life!
Alternatively, if you connect an Android device to your computer, you should be able to run:
$ adb devices
emulator-5554	device
to list all your connected Android devices and emulators. (In my case, only the emulator is ‚Äúconnected‚Äù.)
It is then possible to install the .apk file by running:
$ adb -s emulator-5554 install ~&#x2F;expo-apps&#x2F;@anonymous__ExampleApplication-7f15208a56304617a200538cacd2e50e-signed.apk
Performing Streamed Install
Success

6.2. on iOS
Caveat: I could not fully test this section, so my apologies if this does not work as intended.
Since you should have Xcode, the most promising solution is in this guide. It also mentions other ways to install the .ipa file.
That‚Äôs it for now, thank you for reading this far. You will find below the resources mentioned in this article.
If you have any questions or comments, please drop me a line on Twitter. I shall reply as soon as possible.
Stay tuned for more.
Resources
Expo: https:&#x2F;&#x2F;expo.dev
Turtle CLI: https:&#x2F;&#x2F;github.com&#x2F;expo&#x2F;turtle#readme
Expo‚Äôs guide to Building Standalone apps: https:&#x2F;&#x2F;docs.expo.dev&#x2F;classic&#x2F;building-standalone-apps&#x2F;
Configuring app.json: https:&#x2F;&#x2F;docs.expo.dev&#x2F;workflow&#x2F;configuration&#x2F;
Expo docs to configure CI with Turtle CLI: https:&#x2F;&#x2F;docs.expo.dev&#x2F;classic&#x2F;turtle-cli&#x2F;
Expo docs to host application on your own servers: https:&#x2F;&#x2F;docs.expo.dev&#x2F;distribution&#x2F;hosting-your-app&#x2F;
How to create a keystore for Android: https:&#x2F;&#x2F;developer.android.com&#x2F;studio&#x2F;publish&#x2F;app-signing#generate-key
Supporting GitHub repository: https:&#x2F;&#x2F;github.com&#x2F;RobinCsl&#x2F;build-standalone-expo-app&#x2F;*
#### [Optimize your img tags with Eleventy Image and WebC](https:&#x2F;&#x2F;www.robincussol.com&#x2F;optimize-your-img-tags-with-eleventy-image-and-webc&#x2F;) 
*I am very excited about WebC and couldn‚Äôt wait to try out the corresponding Eleventy plugin.
The first use-case I had in mind was to use Eleventy Image for the native HTML img tag, that can be generated from Markdown and without shortcode. I had done this before, for my unpublished blog rewrite that‚Äôs been waiting to be released for ever now, through hooking up Eleventy Image into a markdown-it plugin. It wasn‚Äôt pretty as markdown-it plugins are pretty alien to me.
But now, this can be done ‚Äúnatively‚Äù, √†-la-Cloudflare Workers for your native HTML elements!
UPDATE (04&#x2F;11&#x2F;2022): After sharing this article on Twitter, Zach Leatherman pointed out there should be an easier solution. It didn‚Äôt work as expected at first, which put me on a journey to fix the underlying issue in @11ty&#x2F;webc. I‚Äôm very pleased to share that my first contribution to the project was accepted and landed in v0.6.0. As a result, the content of the last section was updated to remove the dirty data file hack with _data&#x2F;Image.js: your image optimization logic can now truly live in a single file.
The documentation for WebC mentioned this use-case exactly, in the shape of this innocent puzzle:

‚ÄúFree idea: use the Eleventy Image plugin to return optimized markup‚Äù
So it should be easy, right?
Remember this lad?
I have discovered a truly remarkable proof of this theorem which this margin is too small to contain.
Pierre de Fermat, cca. 1637
No need to wait 3 centuries for the answer this time, because it was ultimately not so hard‚Ä¶ But I did struggle and wrestle with it for a few hours :D
Anyway, hope that can be useful to someone.
If you want to see the finished implementation, you can get it on GitHub: RobinCsl&#x2F;11ty-webc-img-demo.
Set up a WebC-powered Eleventy project
or take a shortcut by cloning this repo and going to the 01-initial folder.
Initialise the project
Let‚Äôs start with an empty folder and add a basic package.json file:
mkdir 11ty-webc-img
cd 11ty-webc-img
npm init -y
We need to install the latest canary release (2.0.0-canary.16 at the time of writing) of Eleventy as well as the WebC plugin:
 npm install @11ty&#x2F;eleventy@2.0.0-canary.16 @11ty&#x2F;eleventy-plugin-webc
Configure Eleventy
We will now configure Eleventy to use the WebC plugin by creating a .eleventy.js file with the following content:
const webc &#x3D; require(&quot;@11ty&#x2F;eleventy-plugin-webc&quot;);

module.exports &#x3D; function(eleventyConfig) {
	eleventyConfig.addPlugin(webc, {
		components: &quot;_includes&#x2F;webc&#x2F;*.webc&quot;
	});
}

In particular, components in the _includes&#x2F;webc folder will be available in the global scope, no need to import them explicitly!
Scaffold a minimal project
To finish our setup, we create a layout file and a simple WebC component which we will use in a basic page, to make sure our setup is working correctly.
We create the layout file under _includes&#x2F;layouts&#x2F;base.webc. It is a simple HTML template with the @html&#x3D;&quot;content&quot;  WebC directive set on the body tag. (See my-layout.webc in the docs)
&lt;!doctype html&gt;
&lt;html lang&#x3D;&quot;en&quot;&gt;
	&lt;head&gt;
		&lt;meta charset&#x3D;&quot;utf-8&quot;&gt;
		&lt;title&gt;Eleventy Images + WebC rocks!&lt;&#x2F;title&gt;
	&lt;&#x2F;head&gt;
	&lt;body @html&#x3D;&quot;content&quot;&gt;&lt;&#x2F;body&gt;
&lt;&#x2F;html&gt;
We now create a simple WebC component and write the following content, taken from the promising website 11ty.webc.fun, in _includes&#x2F;webc&#x2F;site-footer.webc :
&lt;footer&gt;
  &lt;p&gt;&amp;copy; 2022 Yours Truly.&lt;&#x2F;p&gt;
&lt;&#x2F;footer&gt;
Finally, we create our basic page at the root of the project in index.webc:
---
layout: layouts&#x2F;base.webc
---

Fun with WebC

&lt;site-footer&gt;&lt;&#x2F;site-footer&gt;
If all went according to plan, we should now be able to run
npx @11ty&#x2F;eleventy --serve
in the terminal and see the following output in our browser at http:&#x2F;&#x2F;localhost:8080:

Create an img.webc component
or check the code on GitHub in the 02-img folder if you want to see the code right away.
In this section, we will create our img.webc override for the native img HTML tag and use Eleventy Image within it.
As a starting point, we will use the example from the documentation from which the screenshot at the start of this post is taken. In a new file _includes&#x2F;webc&#x2F;img.webc, add the following:
&lt;script webc:type&#x3D;&quot;render&quot; webc:is&#x3D;&quot;template&quot;&gt;
function() {
	if(!this.alt) {
		throw new Error(&quot;[img.webc] the alt text is missing, no fun&quot;);
	}
	return &#x60;&lt;img src&#x3D;&quot;${this.src}&quot; alt&#x3D;&quot;${this.alt}&quot;&gt;&#x60;;
}
&lt;&#x2F;script&gt;
This essentially verifies at build-time that all your images have a non-empty alt text, neat!
Let‚Äôs add a ‚Äúbroken‚Äù image to our index page, in index.webc, to verify that this works correctly:
---
layout: layouts&#x2F;base.webc
---

Fun with WebC

&lt;img src&#x3D;&quot;https:&#x2F;&#x2F;images.unsplash.com&#x2F;photo-1627224286457-923944e5b159?auto&#x3D;format&amp;fit&#x3D;crop&amp;w&#x3D;387&amp;q&#x3D;80&quot;&gt;

&lt;site-footer&gt;&lt;&#x2F;site-footer&gt;
And indeed, running npx @11ty&#x2F;eleventy --serve yields an expected error:
$ npx @11ty&#x2F;eleventy --serve
[11ty] Problem writing Eleventy templates: (more in DEBUG output)
[11ty] 1. Having trouble rendering webc template .&#x2F;index.webc (via TemplateContentRenderError)
[11ty] 2. [img.webc] the alt text is missing, no fun (via Error)
Add an alt text (‚Äúpossum hanging from a palm leaf‚Äù should work) and try again. Oh no! Another error:
$ npx @11ty&#x2F;eleventy --serve  
[11ty] Problem writing Eleventy templates: (more in DEBUG output)
[11ty] 1. Having trouble rendering webc template .&#x2F;index.webc (via TemplateContentRenderError)
[11ty] 2. Circular dependency error: You cannot use &lt;img&gt; inside the definition for .&#x2F;_includes&#x2F;webc&#x2F;img.webc (via Error)
That makes sense, when you think about it! All our .webc files are processed by WebC, so if we return an img tag in a img.webc component, the compiler would work indefinitely to get to the bottom of it, because it‚Äôs turtles img all the way down!
Luckily for us, we can let WebC know when its job is done through the webc:raw attribute:
Use webc:raw to opt-out of WebC template processing for all child content of the current node. Notably, attributes on the current node will be processed.
Let‚Äôs fix it in _includes&#x2F;webc&#x2F;img.webc:
  &lt;script webc:type&#x3D;&quot;render&quot; webc:is&#x3D;&quot;template&quot;&gt;
  function() {
	  if(!this.alt) {
	  	throw new Error(&quot;[img.webc] the alt text is missing, no fun&quot;);
	  }
-	  return &#x60;&lt;img src&#x3D;&quot;${this.src}&quot; alt&#x3D;&quot;${this.alt}&quot;&gt;&#x60;;
+	  return &#x60;&lt;img webc:raw src&#x3D;&quot;${this.src}&quot; alt&#x3D;&quot;${this.alt}&quot;&gt;&#x60;;
  }
  &lt;&#x2F;script&gt;
It compiles now! üéâ
Here‚Äôs the expected output:

We have effectively augmented our img tag to verify at build time that alt text is present.
Let‚Äôs now add Eleventy Image to the party!
Optimize your HTML img with Eleventy Image
or check the code on GitHub in the 03-final folder if you want to see my solution.
Let‚Äôs first install Eleventy Image in our project:
npm install @11ty&#x2F;eleventy-img
We will more or less copy the example from the Eleventy Image docs in the Asynchronous Shortcode section, because our JavaScript render function can be async!
In the file _includes&#x2F;webc&#x2F;img.webc, let‚Äôs add the following:
  &lt;script webc:type&#x3D;&quot;render&quot; webc:is&#x3D;&quot;template&quot;&gt;
-   function() {
-      if(!this.alt) {
-          throw new Error(&quot;[img.webc] the alt text is missing, no fun&quot;);
-      }
-      return &#x60;&lt;img webc:raw src&#x3D;&quot;${this.src}&quot; alt&#x3D;&quot;${this.alt}&quot;&gt;&#x60;;
+    const Image &#x3D; require(&quot;@11ty&#x2F;eleventy-img&quot;);
+    module.exports &#x3D; async function() {
+      let metadata &#x3D; await Image(this.src, {
+        widths: [300],
+        formats: [&quot;avif&quot;, &quot;jpeg&quot;],
+        outputDir: &quot;_site&#x2F;img&#x2F;&quot;,
+      });

+      let imageAttributes &#x3D; {
+        alt: this.alt,
+        sizes: &quot;100vw&quot;,
+        loading: &quot;lazy&quot;,
+        decoding: &quot;async&quot;,
+      };

+      &#x2F;&#x2F; You bet we throw an error on missing alt in &#x60;imageAttributes&#x60; (alt&#x3D;&quot;&quot; works okay)
+      return Image.generateHTML(metadata, imageAttributes);
  }
  &lt;&#x2F;script&gt;

Note that we harcoded the value for  sizes in the imageAttributes object, and prepended both src and alt by this to wire things up correctly. We also instruct the Image plugin to output optimized images in our _site&#x2F;img&#x2F; folder directly for them to be available when using the following markup:
&lt;img alt&#x3D;&quot;a lovely image&quot; src&#x3D;&quot;&#x2F;img&#x2F;hash-width.jpeg&quot;&gt;
Let‚Äôs run npx @11ty&#x2F;eleventy --serve once more:
$  npx @11ty&#x2F;eleventy --serve
[11ty] Problem writing Eleventy templates: (more in DEBUG output)
[11ty] 1. Having trouble rendering webc template .&#x2F;index.webc (via TemplateContentRenderError)
[11ty] 2. Circular dependency error: You cannot use &lt;img&gt; inside the definition for .&#x2F;_includes&#x2F;webc&#x2F;img.webc (via Error)
That error sounds familiar, right?
We need to tell WebC to ignore img tags generated by Eleventy Image, and it‚Äôs as simple as adding &quot;webc:raw&quot;: true to the imageAttributes object:
  &lt;script webc:type&#x3D;&quot;render&quot; webc:is&#x3D;&quot;template&quot;&gt;
  const Image &#x3D; require(&quot;@11ty&#x2F;eleventy-img&quot;);
  module.exports &#x3D; async function() {
    let metadata &#x3D; await Image(this.src, {
      widths: [300],
      formats: [&quot;avif&quot;, &quot;jpeg&quot;],
      outputDir: &quot;_site&#x2F;img&#x2F;&quot;,
    });
  
    let imageAttributes &#x3D; {
      alt: this.alt,
      sizes: &quot;100vw&quot;,
      loading: &quot;lazy&quot;,
      decoding: &quot;async&quot;,
+     &quot;webc:raw&quot;: true,
    };
  
    &#x2F;&#x2F; You bet we throw an error on missing alt in &#x60;imageAttributes&#x60; (alt&#x3D;&quot;&quot; works okay)
    return Image.generateHTML(metadata, imageAttributes);
  }
  &lt;&#x2F;script&gt;
And we‚Äôre done!! (Note how the image now aligns perfectly with localhost:8080 #IncontestableTruth)

with corresponding markup:
&lt;!doctype html&gt;
&lt;html lang&#x3D;&quot;en&quot;&gt;
&lt;head&gt;
        &lt;meta charset&#x3D;&quot;utf-8&quot;&gt;
        &lt;title&gt;Eleventy Images + WebC rocks!&lt;&#x2F;title&gt;
    &lt;&#x2F;head&gt;
    &lt;body&gt;Fun with WebC

&lt;picture&gt;&lt;source type&#x3D;&quot;image&#x2F;avif&quot; srcset&#x3D;&quot;&#x2F;img&#x2F;SwdsuTpRbT-300.avif 300w&quot;&gt;&lt;img alt&#x3D;&quot;possum hanging from a palm leaf&quot; loading&#x3D;&quot;lazy&quot; decoding&#x3D;&quot;async&quot; src&#x3D;&quot;&#x2F;img&#x2F;SwdsuTpRbT-300.jpeg&quot; width&#x3D;&quot;300&quot; height&#x3D;&quot;450&quot;&gt;&lt;&#x2F;picture&gt;


&lt;footer&gt;
  &lt;p&gt;¬© 2022 Yours Truly.&lt;&#x2F;p&gt;
&lt;&#x2F;footer&gt;

&lt;&#x2F;body&gt;
&lt;&#x2F;html&gt;
Parting words
I am so excited to explore further the possibilities of using WebC to augment other native HTML elements.
This article only scratches the surface when it comes to the img tag. You could pass props down from the markup to Eleventy Image and control the behaviour of the image optimization. But we can now augment our native img tag without much hassle as it‚Äôs all in one file.
It even works with Markdown images (and yields the cutest webpage ever):
  ---
  layout: layouts&#x2F;base.webc
  ---
  
  Fun with WebC
  
  &lt;img alt&#x3D;&quot;possum hanging from a palm leaf&quot; src&#x3D;&quot;https:&#x2F;&#x2F;images.unsplash.com&#x2F;photo-1627224286457-923944e5b159?auto&#x3D;format&amp;fit&#x3D;crop&amp;w&#x3D;387&amp;q&#x3D;80&quot;&gt;
  
+  &lt;template webc:type&#x3D;&quot;11ty&quot; 11ty:type&#x3D;&quot;md&quot;&gt;
+  
+   ![&#39;close-up of a baby possum among ferns&#39;](https:&#x2F;&#x2F;images.pexels.com&#x2F;photos&#x2F;13960994&#x2F;pexels-photo-13960994.jpeg)
+  
+  &lt;&#x2F;template&gt;
  
  &lt;site-footer&gt;&lt;&#x2F;site-footer&gt;
  

All the more reasons to optimize your images now!
Find the code supporting this article on the RobinCsl&#x2F;11ty-webc-img-demo repository.*
#### [Year in Review: 2021](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2021&#x2F;) 
*We‚Äôre already at the start of February 2022, but who says retrospectives need to be done on January 1st?! A lot of things happened in 2021, both personally and professionally. Time to reflect and remember.
Personal üë∂üíçüìÑüìÉüìëüìú
This first part is the personal stuff, so if you don‚Äôt care about it, you can skip to the professional stuff instead. And if you don‚Äôt care about that too, why are you here? üòÇ
Welcome, L√©onard!
In January of 2021 came the great news that we were expecting a baby and a few months later, my son L√©onard came to this world! It‚Äôs been a few months now and it‚Äôs insane how much this event changed our lives.
It‚Äôs quite amazing to witness a human being‚Äôs awakening to the world, I do feel privileged.
Of course, it‚Äôs not just rainbows and unicorns.
Sleeping as much as I want is now a distant memory&#x2F;dream, though I‚Äôve been surprised that it‚Äôs actually quite possible to operate without the amount of sleep I used to get.
Having free time for side projects and writing almost vanished (and usually eats up time when I should sleep instead, while it‚Äôs allowed by baby-boss). I don‚Äôt know how other parents manage but time just flies by.
One thing‚Äôs for sure, L√©onard makes sure I keep fit and exercise regularly (a promise I made myself at the beginning of last year, right):
it‚Äôs quite a normal day when I need to go up and down the 4 floors of the block of flats we live in (and when it‚Äôs at night, I have this game where I switch the lights on and go up and down within the 3 minutes they‚Äôre programmed to stay on; naturally, after my 4th round trip, I usually do the last flight of stairs in the dark üòÖüòÆ‚Äçüí®).
it‚Äôs also quite a normal day when I need to carry him in my arms for 10- to 20-minute stretches, while doing squats, at least 2 or 3 times.
Coach L√©onard can ask for these drills at any time of the day (and night‚Ä¶), he says it‚Äôs for my own good. My knees and hips and back and arms tend to disagree.
Paperwork, paperwork, paperwork
In 2021, I‚Äôve had time to think so many times if the amount of paperwork we‚Äôre doomed to go through is some sort of devilish scheme to keep people busy on the boring stuff. It definitely does not help when you‚Äôre an expat.
If you had told me having a baby would generate so much paperwork chores, I probably would not have believed you. The story goes that we wanted to do an early recognition of fatherhood for me to be officially recognised as the father of my child to be.
In France, as a French person, this is a 5-minute visit to my local townhall, easy-peasy.
In Czechia, as a foreigner, this would have required tons of documents that also needed translating by a certified translator (aka costs some money).
Since we were engaged, and you‚Äôre officially recognised as the father when having a baby as a married couple, we thought we might as well go through paperwork hell to get married.
It did not disappoint.
Our child was due some time in the middle of September, so we had almost the entire year to get married, should be easy, right.
Being so diligent, we got in touch with the French embassy to understand what we need to do to get married in April:
weddings at the embassy are quite a rare thing, you should get married through the local authorities
getting married in Prague is like getting married in Las Vegas (say what?)
Only to realise at the end of June that:
babies aren‚Äôt always born around the due date
it‚Äôs already the end of June
Let‚Äôs just say that we managed to be on time paperwork-wise for our wedding at the beginning of August (ever heard of the necessary 2-week public display of your intent on getting married, during which somebody has the right to oppose it, to get the paper allowing a French person to marry‚Ä¶?), but the ‚Äúgetting married like in Las Vegas‚Äù was lost on us.
Professionally
Promo
In January last year, I got promoted to Staff Engineer at Kiwi.com. Pretty crazy to me to think that I started working in the industry in September 2017. Even though titles only mean so much, it‚Äôs still a nice recognition that I bring value to the company.
Pair Documenting
I definitely learnt a lot about infrastructure and Kubernetes, which might seem overkill for a frontend platformer, but there was a void to fill when my ex-colleague Adam Jani≈° left, so I put on my newbie hat and pair-documented Adam‚Äôs knowledge throughout his notice period. I still refer or point people to that document quite regularly, it‚Äôs an investment that keeps on giving after all these months!
This was also the first time I tried to add original schematics&#x2F;pictures and Excalidraw made it super fun and easy!
Robin‚Äôs Gazette
My newsletter, Robin‚Äôs Gazette, kept going quite well! It turned one year old on December, 9th! üéÇ
In 2021, I published 25 issues (784 emails in total!), and went from 9 subscribers to 49 at the end of the year!
Given the quite low volume of subscribers, my average open rate and click rate are pretty okay (though they are ‚Äúall-time‚Äù performance metrics):
70.35% open rate,
24.38% click rate.
Even though it‚Äôs always some amount of work, I deem it worthy of my time as I get to practice writing and I always learn something slightly more deeply than if I just scrolled Twitter or Hacker News. This continues my efforts from ‚Äúarchivist to creator‚Äù that I mentioned in my last retro.
Special mention to Shawn @swyx Wang for being so encouraging along the way!
My goal for this year is to continue on that path, though I do need to put some effort into advertising it better:
the subscribe form is hard to find on my website,
the content is short-lived and behind closed doors ‚Äì so I should repurpose it to an extent,
start marketing it more (instead of the infrequent tweets I‚Äôve tried at some point).
One small change for this year: I now send the Gazette every other Friday instead of every other Wednesday.
Some of the feedback I received üòä
‚ÄúSuch a great newsletter this week Robin, amazing job!‚Äù
‚ÄúStill enjoying the newsletter!‚Äù
Blog
The blog was a bit quiet last year, I only published 3 posts and refreshed my most read article about building APK files locally for Expo projects (it recently crossed 20K views in its lifetime! üéâ).
They were:
Python Dependencies for JavaScript Developers
How to Download a Brain with Pair Documenting (already mentioned above)
Year in Review: 2020
I really hope to start writing more again on the blog because the SEO game takes a long time for Google to start recommending your stuff: I saw more traffic to my How to Test Your ESLint Config and Get your Own Sentry Playground articles, and they were written in September 2020!
Started working on a course
In the last retro, I announced that I planned to write a book. That did not happen‚Ä¶ üòÖ
Instead, I started working on a video course which essentially replicates the now defunct Margarita project from scratch (which was the subject of this article on my blog), showcasing how to build cross-platform web and native mobile apps through React Native and React Native Web.
This was the occasion to spend some time weeks watching all the microphone reviews on YouTube, all the Audacity and Obs Studio tutorials for sound production, to ultimately produce a half-finished tutorial on YouTube (the best 33 seconds of your life, trust me).
Source



Ever since my son was born, I‚Äôve had little time to focus for longer than 5-minute stretches outside of work, so this project has lost steam right now. I hope I‚Äôll manage to finish it in the first semester!
A look back and forward
Revisiting some of my plans for 2021 and making some for 2022.
Family
As much as I would love to work on side-projects and such, my family comes first, and I want to keep it that way. I‚Äôm excited to continue discovering what my next workouts will be, courtesy of Coach L√©onard! (Seriously, I‚Äôve got some arms now! üí™)
I cannot wait for my son to meet all his grand-parents, aunts and uncles in France later this year!
Nehovor√≠m pliynule po slovensky
aka I don‚Äôt speak Slovak fluently.
One of my goals was to make sure I would be able to speak to all my wedding guests in their preferred language (amongst French, English and Slovak). Because of the above (and COVID not helping‚Ä¶), the guest list was actually pretty small and my mastery of Slovak would not be entirely necessary to do well on my goal. So I guess I will learn better alongside my son this year whilst we wait for the big party?
Almost no SAD this past year
Come December, I usually feel pretty burnt out and in dire need of vacation to recharge. Somehow, in December 2021, I did not feel like that at all.
My new family life provided some amount of distractions from work. Even though that increased my context switching throughout the days and the nights were not as restful, it somehow created some distance between work and me. Or maybe because living with a newborn forces you to live in the moment, one day at a time‚Ä¶ üòÖ
Writing
Less paperwork, more blog posts. ü§û
Keep the newsletter going, and make it better, faster, stronger!
Improve my note taking system, which is a bit chaotic and not really systematic at the moment.
Learning Rust
In 2021, I started dabbling with Rust, mostly through the really great WIP book from Luca Palmieri, Zero To Production In Rust. It assumed some knowledge so I sometimes struggled had fun filling in the gaps.
Given where the JS ecosystem is going in terms of tooling (oh yeah, in 2021 I started this Awesome List of JavaScript Tooling Not Written In JavaScript on GitHub ‚Äì 667 stars so far!), I think it‚Äôs important to explore beyond the confines of JavaScript&#x2F;TypeScript. So I‚Äôd like to spend more time with Rust this coming year!
Lots of things to be grateful for last year and lots to look forward to this year. C‚Äôest parti !*
#### [Python Dependencies for JavaScript Developers](https:&#x2F;&#x2F;www.robincussol.com&#x2F;python-dependencies-for-javascript-developers&#x2F;) 
*Recently, I needed to update an old Python codebase which had not been touched in 3 years! Of course, the dependencies were so outdated that the Dockerfile of the project wouldn‚Äôt build. My JavaScript knowledge did not help me much:
how could I do a yarn upgrade-interactive --latest to update dependencies?
where‚Äôs the dependency lockfile?
why do we need to compile C-libraries for Python dependencies?
Luckily for me, my colleague Ondrej patiently explained how to approach these questions.
Using a virtual environment
TL;DR: pip installs packages globally unless we activate a virtual environment.
In Python, the default package manager is call pip and it installs packages from the Python Package Index, shortened to Pypi. The equivalent in JavaScript land would be npm and npmjs.com.
By default, pip installs packages system-wide. This contrasts with the need to pass a --global flag to npm.
To remedy that, we can use a local Python environment (a bit like having our node_modules folder in a JavaScript project). The following command will create a virtual environment in a venv folder in our current directory:
# Create the venv folder container the virtual environment
$ python3 -m venv venv
To make sure pip knows it should install packages in this virtual environment, we must activate it. Depending on your shell, you should source the appropriate activate file in venv&#x2F;bin:
activate, for Bash and ZSH,
activate.fish, for Fish Shell,
activate.csh, for csh
Activate.ps1, for PowerShell.
In my case, I will source the one for ZSH:
$ source venv&#x2F;bin&#x2F;activate
Now, pip install will install packages in the local folder instead of targeting the global scope. My ‚ÄúPython node_modules folder‚Äù is venv&#x2F;lib&#x2F;python3.8&#x2F;site-packages&#x2F;.
Dependencies in Python
TL;DR: use pip-compile to generate a lockfile and pip-sync to install dependencies from that lockfile
To deal with dependencies, we must install the pip-tools package in our virtual environment:
pip install pip-tools
This will allow us to use pip-compile and pip-sync later on.
Once that‚Äôs done, we could for example decide to start a Django project, ‚Äúthe web framework for perfectionists with deadlines‚Äù. The latest version of the package at the time of writing is 3.2.5. Let‚Äôs create our Python equivalent of a package.json file to express our project needs the Django package pinned to version 3.2.5:
# requirements.in
django&#x3D;&#x3D;3.2.5
Note: the better equivalent to a package.json would be a setup.py file, since it contains additional fields like the name of the local package, its version, etc. but we just want to write down the dependencies.
EDIT #1: it‚Äôs apparently not common practice to pin dependency versions in requirements.in, just in case you really need to (if there are breaking changes for example). Thanks for pointing it out, Ondrej.
To generate a corresponding lockfile of the transitive dependencies of Django, we can run the following command:
pip-compile --output-file requirements.txt requirements.in
This will create the following requirements.txt file:
#
# This file is autogenerated by pip-compile with python 3.8
# To update, run:
#
#    pip-compile --output-file&#x3D;requirements.txt requirements.in
#
asgiref&#x3D;&#x3D;3.4.1
    # via django
django&#x3D;&#x3D;3.2.5
    # via -r requirements.in
pytz&#x3D;&#x3D;2021.1
    # via django
sqlparse&#x3D;&#x3D;0.4.1
    # via django

Now that we have this file, we can finally retrieve and install the packages with the following command:
pip-sync
Note: if you try to run pip-sync without a requirements.txt, you will get the following error:
No requirement files given and no requirements.txt found in the current directory
It is indeed necessary to run pip-compile before.
Updating dependencies
Similar to npm oudated, we can list the outdated Python dependencies with
$ pip list --outdated
For example, after downgrading Django to 3.2.3 in my requirements.in, regenerating the lockfile with pip-compile, re-installing the dependencies with pip-sync, the command above will show:
Package    Version Latest Type
---------- ------- ------ -----
Django     3.2.3   3.2.5  wheel
setuptools 44.0.0  57.4.0 wheel
To update the dependency, I can change the version back to 3.2.5 in the requirements.in and go through the same dance:
$ pip-compile --output-file requirements.txt requirements.in
$ pip-sync
$ pip list --outdated
Package    Version Latest Type
---------- ------- ------ -----
setuptools 44.0.0  57.4.0 wheel
EDIT #2: a batteries-included equivalent to Yarn is called Poetry. Thanks for sharing, D√°niel!
Wheels and Eggs
You might wonder what this ‚Äúwheel‚Äù type is for the Django and setuptools packages.
They are still mysterious to me, but here‚Äôs my current understanding: in Python, some dependencies need to be built for specific architectures, as they might be written in Cython, ‚Äúa superset of the Python language that additionally supports calling C functions and declaring C types on variables and class attributes‚Äù. Wheels and Eggs are packaging formats for these.
In particular, it is not a good idea to use Alpine Docker images for Python projects as a lot of packages don‚Äôt have pre-built wheels for that architecture: your Docker build step will need to compile the packages from source, slowing down your entire process (and requiring you to install the necessary build tools for this compilation to happen!).
I don‚Äôt think there is a similar ‚Äúpackaging format‚Äù concept in JavaScript land. But we do have packages shipping prebuilt binaries for specific architectures, for example Sharp, the Node.js image processing package. (And we probably have enough issues with CommonJS vs ES Modules as it is‚Ä¶ :smile:)
Conclusions
All in all, a project needs to:
specify external dependencies and their desired version with semantic ranges
have a way to retrieve said dependencies
keep track of which versions were effectively installed to improve reproducibility.
Despite all these measures, the Docker file of an unmaintained 3-year old project could not build. Software rots!*
#### [How to Download a Brain with Pair Documenting](https:&#x2F;&#x2F;www.robincussol.com&#x2F;download-a-brain-with-pair-documenting&#x2F;) 
*When people leave the company, a lot of specific and ad hoc knowledge goes away with them. Unless there is already a strong documentation culture, there‚Äôs only so much that can be said and done during exit interviews to make up for it.
But this doesn‚Äôt have to be left to fate.
Throughout the month of January, my now ex-colleague Adam Jani≈° and I pair documented all his knowledge about the frontend infrastructure at Kiwi.com. We produced a 24 page document, fixed a few bugs and addressed some tech debt. More importantly, we had fun doing it!
Here‚Äôs how we approached it.
How to pair document
This is an attempt at formalising what we‚Äôve done, feel free to s&#x2F;Newbie&#x2F;Robin&#x2F;g and s&#x2F;Expert&#x2F;Adam&#x2F;g.
The Protagonists
You will need two proactive people: an Expert on the subject to document and a Newbie who is not too cursed with knowledge yet. Bonus points if they have not really worked together but always had good chemistry in their interactions.

The Newbie makes it easy on the Expert for this documentation effort to be a no-brainer:
they organize the pair documenting sessions;
they manage the agenda of the sessions;
they do most of the note-taking;
they digest the notes into documentation drafts in between sessions;
they stay curious and eager to learn more about the subjects, with questions always at the ready (this is hard to fake, so find an adequate Newbie for the task).

The Expert shows up at the sessions and generously shares their knowledge with the Newbie, answering patiently every question they may have. They review the documentation drafts to ensure the prose does not betray the original intent of the notes. Bonus points if they include the Newbie in solving similar problems described in the nascent documentation as they arise in the support channels of the company‚Äôs Slack: learning by doing is a great way to drive home the material and expose remaining ambiguities.

The First Session
The Newbie is in charge and explains how it‚Äôs going to work in the first pair-documenting session. That means going through what‚Äôs expected of each participant in this documentation effort as well as giving an overview of the actual process.
The objective of the first session is crucial: go as broad as possible and capture as many ideas of what needs documenting to form a backlog of topics to go over in the next sessions.
This can be achieved through asking questions like (more examples in this template):
what are things that you know about that very few people know?
what are the things that people always ping you about on Slack?
what tasks pile up when you‚Äôre on vacation?
Once the amount of things to document gets a bit clearer, see how many days are left before they leave and agree on a schedule to leave enough time for this task.
In Between Sessions
The Newbie transforms the raw notes into documentation drafts and gets the Expert to review them.
As more people in the company are aware of this documentation effort, they might have questions of their own; the Newbie adds these points to the agenda for the next session.
The Expert includes the Newbie in all discussions on Slack touching on the subject to maximize the learning opportunities and give the docs a trial by fire.
A Normal Session
In the first 5-10 minutes, the Newbie and the Expert go over unresolved comments in the doc draft, they review the agenda from the previous session and see if anything pops up to be further discussed or explained, and finally, they review the agenda for the current session and decide what to prioritize.
They then go over each point in the agenda: the Expert does most of the talking while the Newbie does most of the note-taking. The Newbie shares their screen for the document to be visible by both pair documentors. The Newbie may interrupt the Expert at any point with questions or with attempts at paraphrasing what the Expert just described. The Expert glances at the notes being taken once in a while to ensure they don‚Äôt contain mistakes from the get-go.
When the time is up, the Newbie and the Expert look at how much they covered from the agenda, move what hasn‚Äôt been covered to the next session, and agree on a date and time for that next session (if it‚Äôs not already regular).
Tools we used
A Calendar: to plan the sessions, to have automatic reminders for them, and to share the visio-conference link.


Custom recurrence with expiry date, Hangouts link, Notification not to miss it, Allow guests to modify event for better collaboration

A Google Document: to store the agenda, the notes and the first documentation drafts. Do make use of the outline on the left-hand side to navigate more easily once the document gets to a certain size. Do make use of comments to discuss and improve the notes and the draft. This is also a good place to involve other people from the company asynchronously. Make sure to put this document in a shared team drive for it to have the right permissions set by default.


Use the ‚ÄúStyles‚Äù dropdown to get this hierarchy

Here‚Äôs a free template Google document to get you started. Feel free to make a copy.
LucidChart: to draw a few diagrams because pictures are great (though you may want to check out Draw.io for a great free alternative).
Why Pair Documenting Works
What usually happens
Unless there is a strong documenting culture, (1) people never prioritize documentation over almost any other task, because it‚Äôs just not as fun as coding or as urgent as the next fire you need to put out. That means that when someone is about to leave, (2) there is an impossible amount of things to document that they don‚Äôt even know where to start. Because they are short on time, they end up drafting a lil‚Äô something and call it a day. (3) Anyway, we never needed that, why are they asking me to document that stuff, who‚Äôs gonna read it anyway?! (Note the use of two ‚Äúanyway‚Äù).
Clear intention through planning
Through planning the pair documenting sessions, we make sure documentation does get prioritized and give it the importance it deserves. If the Expert‚Äôs knowledge is that important and they by happenstance siloed it, it becomes urgent to share this knowledge more widely to deal with that critical bus factor. (Whether they leave or not is almost irrelevant in this case.)
Because we know when the Expert‚Äôs last working day is, it is easier to retro-plan the right number of sessions to cover the entire backlog established in the first session. This of course might need adjusting throughout the pair documentation effort.
More fun and better quality through collaboration
Planning is not enough if the Expert is still lost about what needs documenting and in which level of details. The nagging ‚Äúare they even gonna read it?‚Äù-type questions could well be the end of the documentation effort already: a well-crafted plan not well-executed.
With an accountability buddy, things turn around entirely.
It becomes really difficult to bail out of the plan because you know the other person is expecting you to show up at the session.
Because the Newbie is enthusiastic about the topic, the Expert is more generous in their contribution.
Because the Newbie asks questions and cares about details, the pair documentors tailor the documentation to the level of knowledge on the receiving end. The Expert knows this documentation will be useful. üòå
Aligned incentives
The Expert also knows that what they know should be documented somewhere, and because they like their colleagues, they don‚Äôt want their departure to create a mess. (Right?!)
The Newbie knows this knowledge is valuable, and about to disappear if they don‚Äôt take action. Besides, it‚Äôs something they‚Äôre curious and wanted to learn more about anyway.
The Expert gets to share their knowledge and teach what they know to someone who‚Äôs enthusiastic and interested in the topic; the Newbie gets time with the Expert to learn as much as possible from them.
Parting thoughts
I really enjoyed the pair documenting sessions with Adam and I think they should be made a regular practice, just like pair programming. It‚Äôs a great way to level up people while producing value beyond the scope of that collaboration.
At the same time, documentation is only valuable if it gets read and updated continuously. I‚Äôve been thinking about how to bring it closer to where people are already consuming content. For example, this could take the form of digests of parts of the documentation in the company‚Äôs Slack.
I‚Äôm not super familiar with mob programming, but I do wonder if mob documenting could be a thing to try too.

Acknowledgements:
Adam Jani≈° (@adam_janis) for trying out this pair-documenting idea before his departure :)
Emilia Vidal for her review and suggestions,
Shawn Wang (@swyx) for his review and ideas for the title and Open-Graph image,
Ron Au (@ronvoluted) for providing the font to go ahead with Shawn‚Äôs ideas,
Excalidraw to produce the visuals.*
#### [Year in Review: 2020](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2020&#x2F;) 
*2020, what a ride!
I cannot believe 2020 has already finally come to an end: with the lockdowns and quarantines, time simultaneously flew by and dragged on. A lot of my life was lived through a computer and the Internet. Time to reflect and remember.
Let‚Äôs start with some remarkable facts and events:
personally: - turned 30 in April, without even a beer to celebrate! (hint: the last bit is what‚Äôs remarkable) ‚ùåüç∫ - traveled only once to see my family in France üò¢ - got engaged in August üíç - spent the Christmas holidays alone, for the first time (I feel you, Kevin McCallister) üö∞
at work: - got a raise and earned a promotion üìà - wrote 3 posts on the Frontend Platform‚Äôs internal blog ‚úç
on my blog: - published 8 new posts üöÄ - updated 1 article ‚ôªÔ∏è - started a newsletter (already wrote 2 issues) üóû - broke the 10k unique visitor mark for Build Standalone Expo .apk and .ipa with Turtle CLI üéâ
miscellaneous: - joined 2 great online communities (Coding Career and Blogging For Devs) üôå - revamped a handful of desktop PCs and laptops (cannot believe I was about to get rid of my older laptop when it‚Äôs so smooth now!): most low-end&#x2F;mid computers are slow because of their stock hard drives (and limited RAM), a nice SSD and some RAM extension will do wonders! üíæ - jumped on the sourdough bread baking train (and learnt recently how sourdough baguettes are a lazy baker‚Äôs dream!) üá´üá∑ ü•ñ
Despite everyone calling 2020 their worst year ever, it did not seem so bad personally. Of course, I missed social life and being able to do ‚Äúnormal‚Äù things, but all things considered, I still learnt a lot this year.
Consumer to archivist
Spending so much time online means I absorbed vast amounts of data and after a while, it did not sit so well with me. I believed that I learn best by immersing myself in a continuous flow of information surrounding one topic. Of course, it‚Äôs worked for me so far, but the cost is that I get overwhelmed and it‚Äôs difficult to know when it‚Äôs enough.
Trying to change that brute-force approach to learning, I read here and there that taking notes would force me to slow down and choose what I consume more wisely. I obviously bought ‚ÄúHow to Take Smart Notes‚Äù by S√∂nke Ahrens (and only half-read it), came across the German word Zettlekasten and went on a wild goose chase for the best Personal Knowledge Management system, and read all the articles and watched all the YouTube videos about the subject. Old habits die hard. üòÖ
After using a few of them, I ended up settling with Joplin (which I had of course already set up prior to any of this) and have not looked back. It does not have backlinks so I‚Äôm deeply missing out on interconnected notes, as the hype goes, but it‚Äôs okay. My FOMO is in check for now. Joplin is an active open source project which is available on desktop as well as mobile devices. I retain full ownership (and responsibility) over my notes as Joplin integrates with different storage backends: I chose to use my self-hosted NextCloud instance.
In short:
just-in-case knowledge is expensive; prefer just-in-time knowledge
it‚Äôs easy to go on a wild goose chase only to realise you had everything already
note-taking does force me to slow down and helps to remember better
Archivist to creator
This story does not end here, dear reader. Accumulating notes about topics I‚Äôm interested in helps to slow down and be more intentional with what I consume. But it turns out knowledge without action is mostly useless.
Luckily, Daniel Vassalo wrote this influential tweet:
If you‚Äôre tempted by this, my advice to first-time creators is to start with a very small product: Something you can finish in 2 weeks and charge #### [Build Standalone Expo .apk and .ipa with Turtle CLI [deprecated]](https:&#x2F;&#x2F;www.robincussol.com&#x2F;build-standalone-expo-apk-ipa-with-turtle-cli&#x2F;) 
*This article was updated on February 7, 2023. NOTE: As of Expo SDK 47, the following method does not work any more. With the release of EAS‚Ä¶*
#### [Optimize your img tags with Eleventy Image and WebC](https:&#x2F;&#x2F;www.robincussol.com&#x2F;optimize-your-img-tags-with-eleventy-image-and-webc&#x2F;) 
*I am very excited about WebC and couldn‚Äôt wait to try out the corresponding Eleventy plugin. The first use-case I had in mind was to use‚Ä¶*
#### [Year in Review: 2021](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2021&#x2F;) 
*We‚Äôre already at the start of February 2022, but who says retrospectives need to be done on January 1st?! A lot of things happened in 202‚Ä¶*
#### [Python Dependencies for JavaScript Developers](https:&#x2F;&#x2F;www.robincussol.com&#x2F;python-dependencies-for-javascript-developers&#x2F;) 
*Recently, I needed to update an old Python codebase which had not been touched in 3 years! Of course, the dependencies were so outdated that‚Ä¶*
#### [How to Download a Brain with Pair Documenting](https:&#x2F;&#x2F;www.robincussol.com&#x2F;download-a-brain-with-pair-documenting&#x2F;) 
*When people leave the company, a lot of specific and ad hoc knowledge goes away with them. Unless there is already a strong documentation‚Ä¶*
#### [Year in Review: 2020](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2020&#x2F;) 
*2020, what a ride! I cannot believe 2020 has already finally come to an end: with the lockdowns and quarantines, time simultaneously flew by‚Ä¶*
#### [Docker for JavaScript Devs: How to Containerise Node.js Apps Efficiently](https:&#x2F;&#x2F;www.robincussol.com&#x2F;docker-for-js-devs-how-to-containerise-nodejs-apps-efficiently&#x2F;) 
*Docker is a really cool technology to have applications run the in the same, predictable context, ensuring the ‚Äúbut it works on my machine‚Ä¶*
#### [TypeScript Tidbit: How to Overload an Imported Function](https:&#x2F;&#x2F;www.robincussol.com&#x2F;typescript-tidbit-how-to-overload-an-imported-function&#x2F;) 
*There are times when the type definitions shipped on DefinitelyTyped are not enough and this results in making the TypeScript compiler‚Ä¶*
#### [Wax on, Wax off](https:&#x2F;&#x2F;www.robincussol.com&#x2F;wax-on-wax-off&#x2F;) 
*The reason I got into web development in the first place was the magical ‚ú® feeling you get when you see your code manifest in the browser‚Ä¶*
#### [A Successful Side-Project: Lessons from Swyx](https:&#x2F;&#x2F;www.robincussol.com&#x2F;a-successful-side-project-lessons-from-swyx&#x2F;) 
*If you are on Twitter, chances are you came across this tweet by Daniel Vassallo and it now seems everyone is writing a book! üòÑ Shawn Wang‚Ä¶*0 for it. The experience of getting paid for something you created, directly by consumers, will change you forever. https:&#x2F;&#x2F;t.co&#x2F;UbUD9ch4xQ
‚Äî Daniel Vassallo (@dvassallo) April 10, 2020
 
and Shawn Wang (@swyx) acted on it almost immediately to produce the Coding Career Handbook a few months later. I had followed him for some time on Twitter. His posts, conference talks and online presence in general always brought me value so I wanted to support his work. I was also really glad that half the proceeds would go to FreeCodeCamp. I got the Creators package, not entirely sure what to expect.
This was one of the best decisions of 2020.
As part of the Creators package, there have been regular workshops and they definitely spurred me further to action. After he invited Monica Lent to give a workshop about blogging for developers, I formed a resolve to try and publish a post every 2 weeks, as a way to transform my note-taking game into something more valuable. That‚Äôs when I resurrected my blog with 5 Tips to Start Blogging (for Devs).
A lot of my posts were shared at work and in the company‚Äôs external newsletter (thank you üôÇ) and for the most part, this resurection was successful, even though December was a bit of a hiatus in my blog publishing, as I started my newsletter, Robin‚Äôs Gazette.
I still have a lot to learn when it comes to creating online content and I am looking forward to continuing with this momentum. Whenever I need a reality check of what it takes to embark on this creator journey, I would have a read through Alex West‚Äôs story, as it‚Äôs so real, inspiring and humbling!
Joining online communities
The Coding Career Handbook is an amazing resource and I would like to write a proper review of the book some day; it contains so much valuable information that it would be hard to do it justice here.
What‚Äôs even more awesome about it is that it came with access to a community through Discord and Circle that Shawn manages really well as it keeps delivering value and furthers the book‚Äôs teachings and principles. And if that wasn‚Äôt enough, I met a few interesting people there who I‚Äôm looking forward to getting to know more in 2021.
Judging by how much the Coding Career community helped me to get real with my volitions, I also decided to join Monica Lent‚Äôs Blogging For Devs community because I‚Äôd like to take my blogging further. For example, my article about [Building] Standalone Expo .apk and .ipa with Turtle CLI broke the 10k unique visitor mark in December, through accidental SEO mostly. üéâ I‚Äôm hoping to get a little bit more intentional with SEO as it‚Äôs a great way to magnify the reach of your content. There are so many interesting and inspiring people in Monica‚Äôs community, as well as discussions and workshops about SEO, newsletters, monetization, and of course blogging‚Äîtopics I definitely want to dive deeper in in the new year!
Writing, writing, writing
If you have read this far, it has become pretty apparent that writing is now more than ever my main focus. I think it has been a tremendous source of clarity and success in the last year for me.
The resource that influenced my writing the most this year was this lecture by Larry McEnerney about the Craft of Writing Effectively (here‚Äôs a summary). Having done a PhD, I practiced the ‚Äúwrong‚Äù way of writing for a very long time. Focusing on what‚Äôs valuable for your intended readership makes so much sense.
As I mentioned in my first newsletter issue (let me know if you want a copy of it üòâ), design documents have been crazy useful at work. I must thank my colleage Tobi√°≈° Potoƒçek for bringing about this revolution. In this remote-only work environment, they were a great tool to discuss, make decisions and document them in a searchable manner. Every shortcut needed to be reckoned with and set against the bigger picture. Every quirk or contextual piece of information (which are critically important to understand past decisions or make new ones) are now recorded in writing.
Being a member of the Frontend Platform team, communicating as effectively as possible with the teams we serve was critically important too‚Äîespecially in such challenging times for a travel company in 2020. Most of that communication was done in writing through Slack and Google Documents. (Not to say it was always a smooth ride‚Ä¶)
A look ahead
In 2021, I will focus on staying in shape, physically and mentally. We will go for walks in nature more regularly with Emilia (we agreed at least once a month and have a list of places in Czechia!) I will cycle to work as much as possible, get back into the nice workout rhythm we had during the first lockdown and take care of my sleeping patterns (it‚Äôs all great to wake up earlier to write, but that means going to bed earlier too, Robin ;-)) I will take breaks when I‚Äôm getting overwhelmed, instead of resorting to my usual ‚Äústrategy‚Äù of pushing through until I‚Äôm burnt out.
In 2021, I will focus on maintaining the shift from content consumption to content creation. I want to continue publishing on my blog every 2 weeks as well as send my Gazette every 2 weeks. I will write a book to help PhD graduates transition to web development: I‚Äôm now further along the path (and my work seems to be appreciated :)), so it‚Äôs time to try and lift others as I climb.
In 2021, I will finally speak Slovak fluently to be able to speak to all our wedding guests (still to be planned‚Ä¶ so I got time, I guess :P) in their preferred language. (Robin of January 2022, you‚Äôre welcome!)
C‚Äôest parti!*
#### [Docker for JavaScript Devs: How to Containerise Node.js Apps Efficiently](https:&#x2F;&#x2F;www.robincussol.com&#x2F;docker-for-js-devs-how-to-containerise-nodejs-apps-efficiently&#x2F;) 
*Docker is a really cool technology to have applications run the in the same, predictable context, ensuring the ‚Äúbut it works on my machine‚Äù comments are a thing of the past. Not to mention how Docker integrates with Docker Compose and Kubernetes for larger-scale applications! But that‚Äôs for another day.
In this article, you will learn about some good principles to containerise Node.js apps efficiently. These principles are probably quite general and well-known, but they‚Äôre easy to overlook for beginners to Docker and Dockerfiles.
You will need to have Docker and Node.js installed locally to follow along comfortably.
Docker wants to make you happy, 
Photo by cottonbro from Pexels



Table of contents
Containerising a Next.js app (naive approach)

Docker Glossary
Optimising a Node.js app‚Äôs Docker image

Create a comprehensive .dockerignore file
Use an appropriate base image
Decouple the dependency installation step from application code
Decouple the build from the resulting built application
(Optional) Purge node_modules from unnecessary files
Docker build checklist for JavaScript Devs
Containerising a Next.js app (naive approach)
Let‚Äôs start with a simple Next.js application:
$ npm create next-app --use-npm
and let‚Äôs write the following into a file called Dockerfile at the root of the project:
FROM node:14.15.0

WORKDIR &#x2F;app

COPY . .
RUN npm ci
RUN npm run build

EXPOSE 3000

USER node

CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
Okay, what just happened? üòÑ
Docker Glossary
FROM &lt;image&gt;
WORKDIR &lt;some-path-in-the-container&gt;
COPY &lt;from-context&gt; &lt;to-container&gt;
WORKDIR directory
RUN &lt;command&gt;
docker build process only
EXPOSE &lt;port&gt;
documenting which port the app uses
USER &lt;user&gt;
root with superuser privileges); it‚Äôs good practice to use a different user to run the app.
CMD &lt;command&gt;
docker run &lt;image-tag&gt;, it is not executed during the build process.
Assuming we have Docker installed, we could now run
$ docker build --tag my-containerised-nextjs-app .
This command kindly asks the Docker daemon running on our machine to build the Dockerfile we just wrote with the files present in the current directry (the .) and to call that image my-containerised-nextjs-app (with the --tag flag).
After the build completed, run
$ docker run --rm -p 3000:3000 my-containerised-nextjs-app
and we should have our app running at http:&#x2F;&#x2F;localhost:3000.
This second command orders the Docker daemon to run the image named my-containerised-nextjs-app with port 3000 on my machine to correspond to port 3000 inside the container so that we can interact with our Next.js app. This port mapping is done through the -p hostPort:containerPort flag. Go ahead and change the port mapping and see if you can still access the app.
The --rm flag indicates that we do not want the Docker daemon to keep the container when we stop its execution (with CTRL+C); this is useful not to clog our machines with useless logs while developing.
Voil√†, we have containerised our Next.js app. The End. üéâ
Wait! Don‚Äôt leave, there‚Äôs more! üëá
Optimising a Node.js app‚Äôs Docker image
The section above does the job, but it‚Äôs not optimal. If we only have so few pipeline minutes and we don‚Äôt like wasting resources ‚ôªÔ∏è, this setup will eat more than is necessary. There are a few strategies to optimise a Dockerfile:
Create a comprehensive .dockerignore file
Use an appropriate base image
Decouple the dependency installation step from application code
Decouple the build from the resulting built application
(Optional) Purge node_modules from unnecessary files
Create a comprehensive .dockerignore file
If we look at the logs from building the Docker image, we could read:
Step 4&#x2F;8 : RUN npm ci
 ---&gt; Running in 559b499f0e2c
npm WARN prepare removing existing node_modules&#x2F; before installation
That means we copied the node_modules folder from our local context over to the Docker image being built. What‚Äôs more, npm ci removes them to make sure it works consistently. That is an indication that we should not copy the node_modules in the first place.
To let Docker know some files and folders should be ignored, we can list them in a .dockerignore file. For example, add the following to a file named .dockerignore:
node_modules
Run the build again and the warning disappeared.
What‚Äôs more, we can see how much less was sent to the Docker build context:
# BEFORE
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  101.8MB

# AFTER
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  400.4kB
In practice, we would want to add as many files as possible to our .dockerignore to ensure we‚Äôre not wasting time and energy on files which won‚Äôt be necessary for the build. This can include documentation files (e.g. *.md), configuration files which are only necessary when developing (e.g. .eslint*, .prettier*) as well as our Git history (e.g. .git).
With the following .dockerignore file:
node_modules
*.md
.git
we end up sending the bare minimum to the Docker daemon:
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  248.3kB
Use an appropriate base image
Docker images come in all shapes and sizes. When it comes to building or deploying our app, the smaller the size, the better. For our Next.js app, we don‚Äôt need all that‚Äôs available in node:14.15.0. For example, we don‚Äôt need git or curl. We can instead use the alpine flavour of that image, namely node:14.15.0-alpine.
The difference in size between node:14.15.0 and node:14.15.0-alpine is enormous!
REPOSITORY                    TAG                 SIZE
node                          14.15.0             943MB
node                          14.15.0-alpine      117MB
Our final containerised Next.js app will hence be much smaller thanks to this teeny-tiny modification of our Dockerfile:
- FROM node:14.15.0
+ FROM node:14.15.0-alpine

WORKDIR &#x2F;app

COPY . .
RUN npm ci
RUN npm run build

EXPOSE 3000

USER node

CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
For reference, if we want to inspect the size of the Docker images we have available locally, we can run docker image ls --all.
Our Docker image has size 1.05GB if we use node:14.15.0,
REPOSITORY                    TAG                 IMAGE ID            CREATED             SIZE
my-containerised-nextjs-app   latest              c78d43a2c5bc        15 seconds ago      1.05GB
and it drops to 229MB if we use node:14.15.0-alpine instead!
REPOSITORY                    TAG                 IMAGE ID            CREATED             SIZE
my-containerised-nextjs-app   latest              d0746ef6e8a4        21 seconds ago      229MB
Decouple the dependency installation step from application code
Our setup is already much better with a suitable .dockerignore file and with a much leaner base image. However, we haven‚Äôt made any changes to our package.json and the npm ci step always needs to run if make any changes to our application code.
This is because Docker caches each step as an intermediate Docker container. For example, if we were to run the build again (docker build --tag my-containerised-nextjs-app .), we would see that the cache is used for all steps, resulting in a nearly instant build (because nothing happened, really üòÑ):
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  248.3kB
Step 1&#x2F;8 : FROM node:14.15.0-alpine
 ---&gt; 9db54a688554
Step 2&#x2F;8 : WORKDIR &#x2F;app
 ---&gt; Using cache
 ---&gt; d5d4291dc699
Step 3&#x2F;8 : COPY . .
 ---&gt; Using cache
 ---&gt; b56455e98a93
Step 4&#x2F;8 : RUN npm ci
 ---&gt; Using cache
 ---&gt; ba4ab784f27e
Step 5&#x2F;8 : RUN npm run build
 ---&gt; Using cache
 ---&gt; a51c18594a20
Step 6&#x2F;8 : EXPOSE 3000
 ---&gt; Using cache
 ---&gt; 806dc06cbb6c
Step 7&#x2F;8 : USER node
 ---&gt; Using cache
 ---&gt; b86db08de717
Step 8&#x2F;8 : CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
 ---&gt; Using cache
 ---&gt; d0746ef6e8a4
Successfully built d0746ef6e8a4
Successfully tagged my-containerised-nextjs-app:latest
If we now modify anything in the folder that is not ignored thanks to our .dockerignore file, Docker will have to bust the cache from Step 3 onwards (the ‚ÄúUsing cache‚Äù expression is not printed any more). Let‚Äôs create an empty file and run the build again:
# create an empty file
$ touch file
# build again
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  248.8kB
Step 1&#x2F;8 : FROM node:14.15.0-alpine
 ---&gt; 9db54a688554
Step 2&#x2F;8 : WORKDIR &#x2F;app
 ---&gt; Using cache
 ---&gt; d5d4291dc699
Step 3&#x2F;8 : COPY . .
 ---&gt; e2b761bb08a6         # The cache is not used anymore
Step 4&#x2F;8 : RUN npm ci
 ---&gt; Running in b36f2511e117
...
To remedy this and ensure that npm ci runs only when necessary, we can first copy package.json and package-lock.json files, run npm ci, and then bring in the rest of the files to build the project:
FROM node:14.15.0-alpine

WORKDIR &#x2F;app

- COPY . .
+ COPY package.json .
+ COPY package-lock.json .
RUN npm ci
+ COPY . .
RUN npm run build

EXPOSE 3000

USER node

CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
After we modified the Dockerfile by applying the diff above, we see that Docker does not leverage the cache at all because the steps are different. This always happens when we modify the layers and&#x2F;or their order.
However, after running this build for a first time, subsequent builds will be much faster as the npm ci step will use the cache unless we modify package.json or package-lock.json:
# create another file to see when Docker stops using the cache
$ touch another-file
# run the build again
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  249.3kB
Step 1&#x2F;10 : FROM node:14.15.0-alpine
 ---&gt; 9db54a688554
Step 2&#x2F;10 : WORKDIR &#x2F;app
 ---&gt; Using cache
 ---&gt; d5d4291dc699
Step 3&#x2F;10 : COPY package.json .
 ---&gt; Using cache
 ---&gt; 139b5a611c0b
Step 4&#x2F;10 : COPY package-lock.json .
 ---&gt; Using cache
 ---&gt; 5bc380de1397
Step 5&#x2F;10 : RUN npm ci
 ---&gt; Using cache
 ---&gt; dff6b2da4bdc
Step 6&#x2F;10 : COPY . .
 ---&gt; 08911c09b40f
Step 7&#x2F;10 : RUN npm run build
 ---&gt; Running in f5374a54d9ad

&gt; my-app@0.1.0 build &#x2F;app
&gt; next build
...
Decouple the build from the resulting built application
For this section to make more sense, we will create another Next.js app that uses some dev dependencies which are necessary only when building the app but not when running it in production.
$ npm create next-app --use-npm --example with-tailwindcss with-tailwindcss-app
Copy the Dockerfile and .dockerignore files created in the other example into with-tailwindcss-app. Build the Docker image and run it to make sure it‚Äôs working well before continuing:
$ docker build --tag with-tailwindcss-app .
$ docker run --rm -p 3000:3000 with-tailwindcss-app
As we can see in the package.json file, we have a few dependencies which are only ever going to be used when building our app. We won‚Äôt need them in the final Docker image. So let‚Äôs get rid of them!
We are going to leverage multi-stage Docker builds. They sound more complicated than they are :)
Here‚Äôs a multi-stage build Dockerfile: in the builder container, we install dependencies and build our app, and in the second stage, we copy relevant files from the builder to our final image and install only production dependencies.
FROM node:14.15.0-alpine as builder

WORKDIR &#x2F;app

COPY package.json .
COPY package-lock.json .
RUN npm ci
COPY . .
RUN npm run build

FROM node:14.15.0-alpine

WORKDIR &#x2F;app

COPY --from&#x3D;builder &#x2F;app&#x2F;package.json .
COPY --from&#x3D;builder &#x2F;app&#x2F;package-lock.json .
RUN npm ci --production
COPY --from&#x3D;builder &#x2F;app&#x2F;.next .next

EXPOSE 3000

USER node

CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
If our app also contained a Next.js config file and a public folder, we would also need to copy them from the builder stage:
...
COPY --from&#x3D;builder &#x2F;app&#x2F;.next .
+ COPY --from&#x3D;builder &#x2F;app&#x2F;next.config.js .
+ COPY --from&#x3D;builder &#x2F;app&#x2F;public public
...
Comparing the sizes, we see that we removed 39MB of dev dependencies, not bad.
without multi-stage build
REPOSITORY                    TAG                 IMAGE ID            CREATED              SIZE
with-tailwindcss-app          latest              88089e6f965d        18 minutes ago      269MB
with multi-stage build
REPOSITORY                    TAG                 IMAGE ID            CREATED              SIZE
with-tailwindcss-app          latest              ba7307736fb0        25 seconds ago       230MB
(Optional) Purge node_modules from unnecessary files
Finally, to make our Docker image the leanest, we will purge our node modules from all the files which were included by the library authors and aren‚Äôt directly useful to our Docker image. For example, documentation files and READMEs, config files for Prettier and such, etc.
Note that this is not without risk as we could be removing files that we actually need to run the application correctly (we had a file named test.js that contained important code and it was mercilessly removed by the tool, which broke the application üòÖ).
We will add another stage called production-deps to make our node modules go through a diet with node-prune (GitHub repo). The list of files and folders that node-prune will remove is largely inspired by Yarn‚Äôs default list (generated through yarn autoclean --init).
To install node-prune, we need curl to be a locally available executable, so we can either choose a base image that contains it out of the box, or we can add it to node:14.15.0-alpine. Because we won‚Äôt need anything else, we will choose the latter.
FROM node:14.15.0-alpine as builder

WORKDIR &#x2F;app

COPY package.json .
COPY package-lock.json .
RUN npm ci
COPY . .
RUN npm run build

+ FROM node:14.15.0-alpine as production-deps

+ WORKDIR &#x2F;app

COPY --from&#x3D;builder &#x2F;app&#x2F;package.json .
COPY --from&#x3D;builder &#x2F;app&#x2F;package-lock.json .
RUN npm ci --production
+ # Add curl
+ RUN apk --no-cache add curl
+ # Install node-prune https:&#x2F;&#x2F;github.com&#x2F;tj&#x2F;node-prune
+ RUN curl -sf https:&#x2F;&#x2F;gobinaries.com&#x2F;tj&#x2F;node-prune | sh
+ RUN node-prune &#x2F;app

FROM node:14.15.0-alpine

WORKDIR &#x2F;app

+ COPY --from&#x3D;production-deps &#x2F;app&#x2F;package.json .
+ COPY --from&#x3D;production-deps &#x2F;app&#x2F;package-lock.json .
+ COPY --from&#x3D;production-deps &#x2F;app&#x2F;node_modules node_modules

COPY --from&#x3D;builder &#x2F;app&#x2F;.next .next

EXPOSE 3000

USER node

CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
Try it by building the image once more.
When node-prune ran, it printed out in the console that it removed 12MB:
...
Step 15&#x2F;24 : RUN node-prune &#x2F;app
 ---&gt; Running in 69e030ab8b70


         files total 14,269
       files removed 3,722
        size removed 12 MB
            duration 216ms
...
However, suprinsingly, a whopping 32MB were removed in comparison to our previous Dockerfile. (It seems node-prune‚Äôs tallying is not totally accurate when I tested locally as it removed 20.7 MB instead ‚Äî though it still doesn‚Äôt explain the other 11.3 MB ü§∑‚Äç‚ôÇÔ∏è)
$ docker image ls with-tailwindcss-app
REPOSITORY                    TAG                 IMAGE ID            CREATED              SIZE
with-tailwindcss-app          latest              c5e2081dba30        9 seconds ago        198MB
Let‚Äôs ensure our app is running well without the files node-prune removed and we can be on our merry way! üê≥ üéâ
Docker build checklist for JavaScript Devs
To summarise what we‚Äôve learnt so far, here‚Äôs a small checklist to review our own Docker build setups:
I have a comprehensive .dockerignore file
I use an appropriate base image
I decoupled the dependency installation step to improve caching
I decoupled the resulting built application from the build step
I purged the node_modules from unnecessary files
Time to flex! üí™ Show me your before and after Docker image sizes in the comments below!*
#### [TypeScript Tidbit: How to Overload an Imported Function](https:&#x2F;&#x2F;www.robincussol.com&#x2F;typescript-tidbit-how-to-overload-an-imported-function&#x2F;) 
*There are times when the type definitions shipped on DefinitelyTyped are not enough and this results in making the TypeScript compiler unhappy. Oh noes! üò≠
Functions Overloading Be Like, Photo by Luis Villasmil) on Unsplash.



Overload an imported function in TypeScript
But fear not! It is possible to overload a function imported from a different module (which could even be a local module&#x2F;file, not necessarily a node module) without ‚Äúpatching‚Äù the corresponding @types&#x2F;&lt;package&gt; type definitions.
import { someFunction } from &#39;module&#39;

&#x2F;&#x2F; the function overloading
declare module &#39;module&#39; {
  function someFunction() &#x2F;&#x2F; the overload you need
}

someFunction() &#x2F;&#x2F; with the overloaded version ‚úîÔ∏è
Example: overload Ramda‚Äôs compose function
A practical example is Ramda‚Äôs compose function. If you pass more than 7 functions to the function, you need to overload Ramda‚Äôs type definitions coming from @types&#x2F;ramda as the TypeScript compiler will report an error otherwise (TypeScript Playground Error Example).

DefinitelyTyped obviously cannot provide the type definitions for any number of arguments as compose accepts as many arguments as you want. So it‚Äôs up to you to inform the TypeScript compiler that this usage is actually okay. üòå
This can be done like in the example below (TypeScript Playground Working Example):
import * as R from &#39;ramda&#39;

&#x2F;&#x2F; overloading compose because &#x60;@types&#x2F;ramda&#x60; exposes types for up to 6 functions
declare module &#39;ramda&#39; {
  function compose&lt;V0, T1, T2, T3, T4, T5, T6, T7&gt;(
    fn6: (x: T6) &#x3D;&gt; T7,
    fn5: (x: T5) &#x3D;&gt; T6,
    fn4: (x: T4) &#x3D;&gt; T5,
    fn3: (x: T3) &#x3D;&gt; T4,
    fn2: (x: T2) &#x3D;&gt; T3,
    fn1: (x: T1) &#x3D;&gt; T2,
    fn0: (x0: V0) &#x3D;&gt; T1
  ): (x0: V0) &#x3D;&gt; T7
}

&#x2F;&#x2F; and now, we can use:
const someComplicatedResult &#x3D; R.compose&lt;V0, T1, T2, T3, T4, T5, T6, T7&gt;(
  fn6,
  fn5,
  fn4,
  fn3,
  fn2,
  fn1,
  fn0
)(&#39;üòÖ&#39;)
We can see from the screenshot below that the overload was correctly taken into consideration. üéâ

Caveat
I can imagine that if this is overused, things can become quickly intractable. So use it sparingly and always with a good reason why. Your future self will be happy to find an explanation in a comment above the overloading as it is kind of unusual. üòâ
I discovered this while refactoring @kiwicom&#x2F;splitster to TS (link to commit) and thought it might be useful to share. Hope it helped you!*
#### [Wax on, Wax off](https:&#x2F;&#x2F;www.robincussol.com&#x2F;wax-on-wax-off&#x2F;) 
*The reason I got into web development in the first place was the magical ‚ú® feeling you get when you see your code manifest in the browser.
In my current role at work, I don‚Äôt do much of that anymore. And I guess I kind of miss it. Especially the part when I am given a clearly defined outcome, with clear guidelines. Perks of being labelled a senior, I guess. üòú But I digress.
Since I started with React, a lot of things have happened in web development. At the moment, I‚Äôm especially interested in Svelte and TailwindCSS and after watching Rich Harris‚Äôs latest talk ‚ÄúFuturistic Web Development‚Äù, I needed an excuse to try Svelte ASAP.
Staying sharp with deliberate practice
To ensure my frontend skills don‚Äôt wither, I would like to spend dedicated time each week to practice on a set of frontend challenges and reflect on what I learnt from them.
Fortunately, I recently discovered FrontendMentor.io and this website offers quite the list of frontend challenges, ranging in difficulty and consistently with nice designs.
Improve your front-end coding skills by building real projects
Solve real-world HTML, CSS and JavaScript challenges whilst working to professional designs.
‚Äî FrontendMentor.io
And to practice with new frontend technologies, it‚Äôs good to find nice designs. But it‚Äôs even better when they come with a style guide and assets like pictures and icons. üòç
Here‚Äôs how it works:
You choose a challenge and download the files.
You attempt the challenge with the stack of your choice. Because the challenge files come with a style guide, the necessary pictures and icons, etc. it‚Äôs really easy to get started! (Unless you spend hours deciding which stack to use, of course üòÇ)
You upload it to GitHub and deploy your attempt on Vercel or Netlify.
Finally, you submit your solution through your challenges dashboard on the platform.
You can then get feedback on your submissions and provide reviews for other people‚Äôs submissions too, which I find really cool. I remember how difficult it was to get feedback when I was first learning web development.
Learnings
The last challenge I attempted looked pleasing on my eyes and I honestly did not expect I would learn so much from it. That makes me want to practice even more!
Check out the live deployment!


I encountered the following problems to complete the ‚ÄúSocial media dashboard with theme switcher‚Äù challenge:
setting up Svelte with TailwindCSS (thank you Swyx and Chris Dhanaraj)
implementing a toggle component from scratch
without accessibility in mind (where I started: W3Schools üòÖ)
with accessibility in mind (where I ended up: Smashing Magazine, though I‚Äôm not sure how to test if my current solution is the most accessible)
implementing a theme switcher in Svelte (inspiration from this Svelte REPL)
adding a border with a gradient to a block element (this requires using a CSS trick from nowhere else but CSS Tricks of course)
pulling my hair for not realising that you need the group class for group-hover: modifiers to apply in the children with Tailwind (thank you Estevan Maito)
how to extract the imported Svelte components‚Äô props‚Äô TypeScript types (that‚Äôs a mouthful!), instead of exporting and importing the types directly (TL;DR: use $props_def from the component)
&lt;script lang&#x3D;&quot;ts&quot;&gt;
  import MyComponent from &#39;.&#x2F;MyComponent.svelte&#39;;

  const data: MyComponent[&#39;$props_def&#39;][&#39;data&#39;] &#x3D; ...
&lt;&#x2F;script&gt;

&lt;MyComponent {data} &#x2F;&gt;

...
deploying a ‚Äúmonorepo‚Äù on Vercel without redeploying all the folders all the time by specifying the ‚ÄúIgnored Build Step‚Äù with something like git diff --quiet HEAD^ HEAD -- subfolder-in-monorepo to only rebuild the site if changes were made in subfolder-in-monorepo.
Here‚Äôs the GitHub repository where I will learn in public and add future challenges I will attempt. (Though I might need to rename this repository in the future as I just found this really nice list of project ideas to build with other platforms than FrontendMentor.io üòâ)
Let me know in the comments what your current deliberate practice is!*
#### [A Successful Side-Project: Lessons from Swyx](https:&#x2F;&#x2F;www.robincussol.com&#x2F;a-successful-side-project-lessons-from-swyx&#x2F;) 
*If you are on Twitter, chances are you came across this tweet by Daniel Vassallo
If you‚Äôre tempted by this, my advice to first-time creators is to start with a very small product: Something you can finish in 2 weeks and charge #### [Build Standalone Expo .apk and .ipa with Turtle CLI [deprecated]](https:&#x2F;&#x2F;www.robincussol.com&#x2F;build-standalone-expo-apk-ipa-with-turtle-cli&#x2F;) 
*This article was updated on February 7, 2023. NOTE: As of Expo SDK 47, the following method does not work any more. With the release of EAS‚Ä¶*
#### [Optimize your img tags with Eleventy Image and WebC](https:&#x2F;&#x2F;www.robincussol.com&#x2F;optimize-your-img-tags-with-eleventy-image-and-webc&#x2F;) 
*I am very excited about WebC and couldn‚Äôt wait to try out the corresponding Eleventy plugin. The first use-case I had in mind was to use‚Ä¶*
#### [Year in Review: 2021](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2021&#x2F;) 
*We‚Äôre already at the start of February 2022, but who says retrospectives need to be done on January 1st?! A lot of things happened in 202‚Ä¶*
#### [Python Dependencies for JavaScript Developers](https:&#x2F;&#x2F;www.robincussol.com&#x2F;python-dependencies-for-javascript-developers&#x2F;) 
*Recently, I needed to update an old Python codebase which had not been touched in 3 years! Of course, the dependencies were so outdated that‚Ä¶*
#### [How to Download a Brain with Pair Documenting](https:&#x2F;&#x2F;www.robincussol.com&#x2F;download-a-brain-with-pair-documenting&#x2F;) 
*When people leave the company, a lot of specific and ad hoc knowledge goes away with them. Unless there is already a strong documentation‚Ä¶*
#### [Year in Review: 2020](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2020&#x2F;) 
*2020, what a ride! I cannot believe 2020 has already finally come to an end: with the lockdowns and quarantines, time simultaneously flew by‚Ä¶*
#### [Docker for JavaScript Devs: How to Containerise Node.js Apps Efficiently](https:&#x2F;&#x2F;www.robincussol.com&#x2F;docker-for-js-devs-how-to-containerise-nodejs-apps-efficiently&#x2F;) 
*Docker is a really cool technology to have applications run the in the same, predictable context, ensuring the ‚Äúbut it works on my machine‚Ä¶*
#### [TypeScript Tidbit: How to Overload an Imported Function](https:&#x2F;&#x2F;www.robincussol.com&#x2F;typescript-tidbit-how-to-overload-an-imported-function&#x2F;) 
*There are times when the type definitions shipped on DefinitelyTyped are not enough and this results in making the TypeScript compiler‚Ä¶*
#### [Wax on, Wax off](https:&#x2F;&#x2F;www.robincussol.com&#x2F;wax-on-wax-off&#x2F;) 
*The reason I got into web development in the first place was the magical ‚ú® feeling you get when you see your code manifest in the browser‚Ä¶*
#### [A Successful Side-Project: Lessons from Swyx](https:&#x2F;&#x2F;www.robincussol.com&#x2F;a-successful-side-project-lessons-from-swyx&#x2F;) 
*If you are on Twitter, chances are you came across this tweet by Daniel Vassallo and it now seems everyone is writing a book! üòÑ Shawn Wang‚Ä¶*0 for it. The experience of getting paid for something you created, directly by consumers, will change you forever. https:&#x2F;&#x2F;t.co&#x2F;UbUD9ch4xQ
‚Äî Daniel Vassallo (@dvassallo) April 10, 2020
 
and it now seems everyone is writing a book! üòÑ
Shawn Wang took this advice and decided to go forth with his Coding Career Handbook (for which I‚Äôm grateful! It‚Äôs such a great book!). He shares his lessons and regrets in this talk at js.la üìΩÔ∏è, and here are my notes for my future self when I want to ship a side project (for money or not).
The How
There are 4 aspects:
Pre-selling
Delivering
Launching
Keeping going
Pre-selling - or your own Kickstarter
On the first day of this endeavour, take the time to find a topic, a name and put up a landing page with good marketing copy.
Pre-sell to your friends and close network: they are more likely to ask you about the state of the project and you would hate to disappoint. What‚Äôs more, you‚Äôve got their money which you would awkwardly need to return otherwise.
This is probably a good moment to decide which platform(s) you want to use to support the sale of your book. Gumroad and Podia seem to be fairly big players in that space.
If it is your first side project that you would like to ship for money, don‚Äôt fret too much over the pricing strategy; it is more of a distraction from writing and completing the project. Sticking to Daniel Vassallo‚Äôs recommendation of #### [Build Standalone Expo .apk and .ipa with Turtle CLI [deprecated]](https:&#x2F;&#x2F;www.robincussol.com&#x2F;build-standalone-expo-apk-ipa-with-turtle-cli&#x2F;) 
*This article was updated on February 7, 2023. NOTE: As of Expo SDK 47, the following method does not work any more. With the release of EAS‚Ä¶*
#### [Optimize your img tags with Eleventy Image and WebC](https:&#x2F;&#x2F;www.robincussol.com&#x2F;optimize-your-img-tags-with-eleventy-image-and-webc&#x2F;) 
*I am very excited about WebC and couldn‚Äôt wait to try out the corresponding Eleventy plugin. The first use-case I had in mind was to use‚Ä¶*
#### [Year in Review: 2021](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2021&#x2F;) 
*We‚Äôre already at the start of February 2022, but who says retrospectives need to be done on January 1st?! A lot of things happened in 202‚Ä¶*
#### [Python Dependencies for JavaScript Developers](https:&#x2F;&#x2F;www.robincussol.com&#x2F;python-dependencies-for-javascript-developers&#x2F;) 
*Recently, I needed to update an old Python codebase which had not been touched in 3 years! Of course, the dependencies were so outdated that‚Ä¶*
#### [How to Download a Brain with Pair Documenting](https:&#x2F;&#x2F;www.robincussol.com&#x2F;download-a-brain-with-pair-documenting&#x2F;) 
*When people leave the company, a lot of specific and ad hoc knowledge goes away with them. Unless there is already a strong documentation‚Ä¶*
#### [Year in Review: 2020](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2020&#x2F;) 
*2020, what a ride! I cannot believe 2020 has already finally come to an end: with the lockdowns and quarantines, time simultaneously flew by‚Ä¶*
#### [Docker for JavaScript Devs: How to Containerise Node.js Apps Efficiently](https:&#x2F;&#x2F;www.robincussol.com&#x2F;docker-for-js-devs-how-to-containerise-nodejs-apps-efficiently&#x2F;) 
*Docker is a really cool technology to have applications run the in the same, predictable context, ensuring the ‚Äúbut it works on my machine‚Ä¶*
#### [TypeScript Tidbit: How to Overload an Imported Function](https:&#x2F;&#x2F;www.robincussol.com&#x2F;typescript-tidbit-how-to-overload-an-imported-function&#x2F;) 
*There are times when the type definitions shipped on DefinitelyTyped are not enough and this results in making the TypeScript compiler‚Ä¶*
#### [Wax on, Wax off](https:&#x2F;&#x2F;www.robincussol.com&#x2F;wax-on-wax-off&#x2F;) 
*The reason I got into web development in the first place was the magical ‚ú® feeling you get when you see your code manifest in the browser‚Ä¶*
#### [A Successful Side-Project: Lessons from Swyx](https:&#x2F;&#x2F;www.robincussol.com&#x2F;a-successful-side-project-lessons-from-swyx&#x2F;) 
*If you are on Twitter, chances are you came across this tweet by Daniel Vassallo and it now seems everyone is writing a book! üòÑ Shawn Wang‚Ä¶*0 is probably enough.
Delivering
Thanks to your pre-writing, e.g. gathering notes, writing blog posts, etc., you already have some amount of the material you would like to include in the finished product. If it‚Äôs 25%, that means you still need to actually write the other 75%.
If possible, you should continue your ‚Äúnormal‚Äù activities, like shipping blog posts about other topics, appearing on podcasts, etc.
As you are writing, document your journey and give away one or two chapters for free as teasers. They‚Äôre a showcase for what you‚Äôre producing and could lead to podcast interviews for further exposure.
I was sharing my personal journey, lessons and milestones.
The best marketing is no marketing. No one wants to be sold anything.
‚Äî Alex West, in Two and a half years of building products
Daniel Vassallo‚Äôs advice to time box the project to 2 weeks is a very important idea: it is so easy to fall prey to scope creep by adding more and more topics to cover, especially when you are knowledgeable and excited about it! But this may well mean that you will never actually ship it. So harness your enthusiasm to provide an advantage.
Of course, you have the goal to ship that product, but what parts of your day actively contribute to that goal? If you‚Äôd like to get anything done, adopting a system to support your goals will go a long way.

Systems &gt; Goals, Source: https:&#x2F;&#x2F;jamesclear.com&#x2F;goals-systems
Launching
All your efforts are coming to an end‚Ä¶ or so you thought. Now is the time to launch your product! This phase requires an entirely different skill set so it‚Äôs good to have practice.
Having a great landing page is a must. A good resource on the subject is Rob Hope‚Äôs book Landing Page Hot Tips, and you can read Shawn‚Äôs review of it too.
Make sure to know the rules of the platforms you‚Äôre using to launch: Shawn‚Äôs Show HN post was doing very well and directing a lot of traffic to his landing page, but it was sadly taken down as no free sample of the book was available there (despite the blog posts).
If people leave out a negative comment, take this as an opportunity to turn their opinions around.
Shawn recommends watching Adam Wathan‚Äôs talk Nailing Your First Launch.
Keeping going
This is still not the end. What comes tomorrow? Next week, next month, next year?
You can ‚Äúlaunch‚Äù your product multiple times.
You can start a community around your book or product.
One of the biggest mistakes I see founders make is abandoning what already works and trying to take on a bigger challenge before they‚Äôre making enough money to develop products full-time.
Instead, focus on replicating the same type of product with another angle or in another market, maybe more than once.
‚Äî Rob Walling, in The Stairstep Approach to Bootstrapping
The Why
If you want to go from employee to entrepreneur, it is good to learn without too much risk how to do ‚Äúbusiness‚Äù without all the supports from other departments. For example, as a Software Engineer, you would not be focusing much on attracting leads for your company; there would be a design team and product managers making decisions about the product, etc.
When you‚Äôre launching a product on your own, you need to perform in all the roles and learn as you go. Especially when it comes to side-projects, developing a system to support your goals, and improving your discipline and focus.
You will get acquainted with the valley of despair and go through the emotional journey it describes; this is inevitable, and maybe even necessary, to create anything great.

 Source: https:&#x2F;&#x2F;john.do&#x2F;emotional-journey-creating&#x2F; 
This can be daunting but it will most likely be a rewarding experience, at least in terms of skills acquisition if not financially.
Make sure to define in advance your idea of success for this project: is it for the learning experience and to have a published book to your name, is it solely about making X amount of money?
Resources
üìΩÔ∏è Shawn‚Äôs talk, Lessons and Regrets From Shipping My $50000 Coronavirus Side Project
üìΩÔ∏è Adam Wathan‚Äôs talk, Nailing Your First Launch
üìì Rob Walling, The Stairstep Approach to Bootstrapping
üìì James Clear, Forget About Setting Goals. Focus on This Instead
üìì Alex West, Two and a half years of building products*0 for it. The experience of getting paid for something you created, directly by consumers, will change you forever. https:&#x2F;&#x2F;t.co&#x2F;UbUD9ch4xQ
‚Äî Daniel Vassallo (@dvassallo) April 10, 2020
 
and it now seems everyone is writing a book! üòÑ
Shawn Wang took this advice and decided to go forth with his Coding Career Handbook (for which I‚Äôm grateful! It‚Äôs such a great book!). He shares his lessons and regrets in this talk at js.la üìΩÔ∏è, and here are my notes for my future self when I want to ship a side project (for money or not).
The How
There are 4 aspects:
Pre-selling
Delivering
Launching
Keeping going
Pre-selling - or your own Kickstarter
On the first day of this endeavour, take the time to find a topic, a name and put up a landing page with good marketing copy.
Pre-sell to your friends and close network: they are more likely to ask you about the state of the project and you would hate to disappoint. What‚Äôs more, you‚Äôve got their money which you would awkwardly need to return otherwise.
This is probably a good moment to decide which platform(s) you want to use to support the sale of your book. Gumroad and Podia seem to be fairly big players in that space.
If it is your first side project that you would like to ship for money, don‚Äôt fret too much over the pricing strategy; it is more of a distraction from writing and completing the project. Sticking to Daniel Vassallo‚Äôs recommendation of #### [Build Standalone Expo .apk and .ipa with Turtle CLI [deprecated]](https:&#x2F;&#x2F;www.robincussol.com&#x2F;build-standalone-expo-apk-ipa-with-turtle-cli&#x2F;) 
*This article was updated on February 7, 2023.
NOTE: As of Expo SDK 47, the following method does not work any more.
With the release of EAS builds, it is necessary to have Internet access to create standalone Expo apps locally; see Running builds on your own infrastructure on Expo docs.
You can still use the React Native way to build applications locally after generating necessary files with expo prebuild (see this GitHub comment on expo&#x2F;eas-cli).
This post will not receive further updates.
A great way to start writing React Native applications is to use Expo. You don‚Äôt even need to setup a development environment to get started thanks to Snack, an online React Native application editor. Your application is public by default. Sharing has never been that easy.

Brown turtle swimming underwater, Photo by Wexor Tmg on Unsplash
However, you would like to share an application exclusively with some people, not through an app store or any public channel. One possibility is to share the built application file, e.g. an .apk file for Android and an .ipa file for iOS.
Expo is so great a service (oh, and did I mention free?) that they offer you to publish your app on their servers and if you wanted to build these .apk and .ipa files, you could do so on their servers.
The flow looks like:
$ expo publish
$ expo build:&lt;PLATFORM&gt;
and you obtain a nice URL to the artifact created for you when the build finishes.
But, again, this is public. On a server you don‚Äôt control. (Although, if you made the same mistake as I did, a ticket to their support can delete any files you had wished to keep private. ü•á)
Luckily for you, Expo provide the tools they are using on their servers for free (did I mention they‚Äôre great!?). The build process relies on a CLI tool called turtle-cli. It is open-source and available on GitHub.
Let us go through an example of how to create your application file without resorting to Expo servers. That means you can keep an application private and also build your application while being offline.
The following instructions assume you have bash and Node.js available. In my experience, using the current LTS version of Node.js (version 16.13.2) works best.
Caveat: I could not complete the iOS instructions to the end since I do not have an Apple Developer paid account.
We will go through the following steps:
1. Turtle CLI
2. Create a dummy application
3. Publish Expo app on local server
4. Create APK file ‚Äì Android

4.1. Prerequisites
4.2. Create Keystore
4.3. Build APK
5. Create IPA file ‚Äì iOS

5.1. Prerequisites
5.2. Create Signing keys
5.3. Build IPA
6. Distribute and install

6.1. on Android
6.2. on iOS
Resources
A condensed version of these steps without much explanation or context is available on the accompanying GitHub repository.
1. Turtle CLI
To install Turtle CLI, run
$ npm install -g turtle-cli
This will make command turtle globally available on your system. To verify it was correctly installed, let‚Äôs print the version:
$ turtle -V
0.24.3
2. Create a dummy application
Let‚Äôs create a dummy application using Expo CLI. In your terminal, run
$ npx expo init ExampleApplication
It will ask you a few questions:
# Expo version 5.0.3
npx expo init ExampleApplication
? Choose a template: ‚Ä∫ - Use arrow-keys. Return to submit.
    ----- Managed workflow -----
‚ùØ   blank               a minimal app as clean as an empty canvas
    blank (TypeScript)  same as blank but with TypeScript configuration
    tabs (TypeScript)   several example screens and tabs using react-navigation and TypeScript
    ----- Bare workflow -----
    minimal             bare and minimal, just the essentials to get you started
The blank template is enough for us.
If you have yarn installed, Expo will use it by default to install dependencies. You can use the --npm flag in the init command if you‚Äôd prefer to use npm instead.
Once it‚Äôs done setting up your project, you should see the following output in the terminal:
‚úÖ Your project is ready!

To run your project, navigate to the directory and run one of the following yarn commands.

- cd ExampleApplication
- yarn start
Run the commands and let‚Äôs verify the generated boilerplate works in our emulators:


To finish setting up the dummy application, you need to configure the app.json file because some configuration keys must be specified to build a standalone app.
If you would like to know more about these standalone app specific configurations, check Expo‚Äôs documentation for iOS and for Android.
For this tutorial, it is only necessary to specify the keys &quot;bundleIdentifier&quot; under &quot;ios&quot;, and &quot;package&quot; under &quot;android&quot; in your app.json file:
...
    &quot;ios&quot;: {
      ...
      &quot;bundleIdentifier&quot;: &quot;com.example.exampleApplication&quot;,
      ...
    },
    &quot;android&quot;: {
      ...
      &quot;package&quot;: &quot;com.example.example_application&quot;,
      ...
    }
...
3. Publish Expo app on local server
Expo has this notion of app publishing: it allows you to share a link or QR code to Expo‚Äôs website and anyone can run your app through the Expo app on their devices.
Having your app published is also necessary for over-the-air (OTA) updates, allowing seamless updates to your application, and to publish your application (i.e. building your application files on Expo servers).
You would typically run
$ expo login -u $EXPO_USERNAME -p $EXPO_PASSWORD
$ expo publish
and your app would then be available at https:&#x2F;&#x2F;expo.dev&#x2F;&lt;EXPO_USERNAME&gt;&#x2F;&lt;APP_NAME&gt;.
To have your Expo app ‚Äúpublished‚Äù on your local server (and avoid public publishing on Expo servers), you will use a different command:
$ expo export --dev --public-url &lt;your-url-here&gt;
The --dev flag is necessary because you will use a non-https server to publish your Expo app. Note that this prevents you from using OTA updates.
Your server does not need to be running for this step, but you do need to know which local URL you are going to use in advance. This tuorial assumes you will run a local server at http:&#x2F;&#x2F;127.0.0.1:8000.
You can now export the app:
$ expo export --dev --public-url http:&#x2F;&#x2F;127.0.0.1:8000
...
Export was successful. Your exported files can be found in dist
This command will create a dist directory containing the iOS and Android JavaScript bundles and the different assets you are using.
dist
‚îú‚îÄ‚îÄ android-index.json
‚îú‚îÄ‚îÄ assets
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ 13685372945d816a2b474fc082fd9aaa
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ 140c53a7643ea949007aa9a282153849
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ ...
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ fdbedb7e67aa7c0ecad83d9c2fa4dfba
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ fdc01171a7a7ea76b187afcd162dee7d
‚îú‚îÄ‚îÄ bundles
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ android-a9defc54fb2ffdb7e6fdaf5b8d0be751.js
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ ios-a29c3e4ac97a2abdc5208fd4f06e7708.js
‚îî‚îÄ‚îÄ ios-index.json
You can now serve the dist directory on your web server, e.g.
$ npx http-server -p 8000 dist
Note: if for some reason you need to re-export your application (because you modified your app.json file since the last export, for instance), you must first remove the dist directory:
# assuming you are at the root of the project
$ rm -rf dist
$ expo export --dev --public-url http:&#x2F;&#x2F;127.0.0.1:8000
4. Create APK file ‚Äì Android
First, verify that your local server is running. For example, you should see a similar output:
$ curl http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;android-index.json
{&quot;name&quot;:&quot;ExampleApplication&quot;,&quot;slug&quot;:&quot;ExampleApplication&quot;,&quot;version&quot;:&quot;1.0.0&quot;,&quot;orientation&quot;:&quot;portrait&quot;,&quot;icon&quot;:&quot;.&#x2F;assets&#x2F;icon.png&quot;,&quot;splash&quot;:{&quot;image&quot;:&quot;.&#x2F;assets&#x2F;splash.png&quot;,&quot;resizeMode&quot;:&quot;contain&quot;,&quot;backgroundColor&quot;:&quot;#ffffff&quot;,&quot;imageUrl&quot;:&quot;http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;assets&#x2F;201a91bd1740bb1d6a1dbad049310724&quot;}...
4.1. Prerequisites
For Turtle CLI to work correctly to create an .apk file for Android, you need to make sure the following dependency is installed: Java Development Kit (version 8).
If you know which Expo SDK version you are going to use, you can run
$ turtle setup:android --sdk-version &lt;SDK-VERSION&gt;
This will take some time:
$ turtle setup:android --sdk-version 44.0.5
Jan 20 20:22:45 turtle[61127] INFO:  Downloading Android SDK
  platform: &quot;android&quot;
  buildPhase: &quot;setting up environment&quot;
downloading [&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;] 98% 0.2s
...
Jan 20 20:26:56 turtle[61127] INFO:  shell app for SDK 44.0.5 doesn&#39;t exist, downloading...
  platform: &quot;android&quot;
  buildPhase: &quot;setting up environment&quot;
downloading [&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; ] 95% 0.5sJan 20 20:27:08 turtle[61127] INFO:  shell app has been downloaded
  platform: &quot;android&quot;
  buildPhase: &quot;setting up environment&quot;
...
Jan 20 20:29:51 turtle[61127] INFO:  dependencies installed!
  platform: &quot;android&quot;
  buildPhase: &quot;setting up environment&quot;
Jan 20 20:29:51 turtle[61127] INFO:  it&#39;s all set!
  platform: &quot;android&quot;
  buildPhase: &quot;setting up environment&quot;
In the meantime, you can move on to the next section.
4.2. Create Keystore
Just like any other Android app, this app must be signed with some security certificates. In Android-land, as far as I understand, it‚Äôs called a keystore. The instructions to create such a keystore file are available on the Android Developers documentation.
Basically, just create a dummy Android project with Android Studio, and then go to Build &gt; Generate Signed Bundle &#x2F; APK.... Choose APK and press Next. The UI will ask you which app you want to sign, and your dummy app should be pre-selected. On the same screen, press on the button Create new...; just fill the form and you‚Äôre good to go.
Alternatively, if you have keytool CLI utility available on your system (you can check that by trying keytool --help in your terminal), you can generate a keystore file with the following command
$ keytool -genkeypair -v -keystore keystore.jks -alias keyalias -keyalg RSA -keysize 2048 -validity 9125
Enter keystore password:
Re-enter new password:
What is your first and last name?
  [Unknown]:
What is the name of your organizational unit?
  [Unknown]:
What is the name of your organization?
  [Unknown]:
What is the name of your City or Locality?
  [Unknown]:
What is the name of your State or Province?
  [Unknown]:
What is the two-letter country code for this unit?
  [Unknown]:
Is CN&#x3D;Unknown, OU&#x3D;Unknown, O&#x3D;Unknown, L&#x3D;Unknown, ST&#x3D;Unknown, C&#x3D;Unknown correct?
  [no]:  yes

Generating 2,048 bit RSA key pair and self-signed certificate (SHA256withRSA) with a validity of 9,125 days
	for: CN&#x3D;Unknown, OU&#x3D;Unknown, O&#x3D;Unknown, L&#x3D;Unknown, ST&#x3D;Unknown, C&#x3D;Unknown
Enter key password for &lt;keyalias&gt;
	(RETURN if same as keystore password):
Re-enter new password:
[Storing keystore.jks]

Warning:
The JKS keystore uses a proprietary format. It is recommended to migrate to PKCS12 which is an industry standard format using &quot;keytool -importkeystore -srckeystore keystore.jks -destkeystore keystore.jks -deststoretype pkcs12&quot;.
As a TL;DR, you can just download a dummy certificate on the accompanying repository under should-be-private&#x2F;keystore.jks, for testing purposes only. The keystore file is hugely important if you ever plan to submit your app to Google Play store: it‚Äôs the only way to assert you‚Äôre the rightful owner to provide new updates to your app.
File: keystore.jks
keystorepassword
keyalias
keypassword
4.3. Build APK
Make sure that you are serving the dist directory on http:&#x2F;&#x2F;127.0.0.1:8000 as explained above in Run a local server. Assuming you are using bash as your shell, from the root of your project, run:
EXPO_ANDROID_KEYSTORE_PASSWORD&#x3D;&quot;keystorepassword&quot; \
EXPO_ANDROID_KEY_PASSWORD&#x3D;&quot;keypassword&quot; \
turtle build:android \
  --type apk \
  --keystore-path .&#x2F;should-be-private&#x2F;keystore.jks \
  --keystore-alias &quot;keyalias&quot; \
  --allow-non-https-public-url \
  --public-url http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;android-index.json
Note that you need the flag --public-url to point to http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;android-index.json. In addition, it is also necessary to use the --type apk flag to produce an APK file since version 0.8.0 of turtle-cli.
The build may take some time:
Jan 20 20:38:17 turtle[61719] INFO:  Using manifest: {
  &quot;name&quot;: &quot;ExampleApplication&quot;,
  &quot;slug&quot;: &quot;ExampleApplication&quot;,
  &quot;version&quot;: &quot;1.0.0&quot;,
  &quot;orientation&quot;: &quot;portrait&quot;,
  &quot;icon&quot;: &quot;.&#x2F;assets&#x2F;icon.png&quot;,
...
Jan 20 20:38:51 turtle[61719] INFO:  Starting a Gradle Daemon (subsequent builds will be faster)
  platform: &quot;android&quot;
  buildPhase: &quot;running gradle&quot;
  source: &quot;stdout&quot;
...
Once it finishes, you should see this output in your terminal:
Jan 20 20:43:19 turtle[61719] INFO:  copied build to ~&#x2F;expo-apps&#x2F;@anonymous__ExampleApplication-7f15208a56304617a200538cacd2e50e-signed.apk
  platform: &quot;android&quot;
  buildPhase: &quot;copying build artifact&quot;
This message gives you the location of your built .apk file. You can now move on to the Distribute and install section below if you are not interested in creating an .ipa file for iOS.
Note: if the build fails because of some Gradle error, like Could not resolve com.theartofdev.edmodo:android-image-cropper:2.8.0, make sure to open Android Studio and update the Android SDK and SDK Build-Tools. This should fix it.
5. Create IPA file ‚Äì iOS
First, verify that your local server is running, e.g.
$ curl http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;ios-index.json
{&quot;name&quot;:&quot;ExampleApplication&quot;,&quot;slug&quot;:&quot;ExampleApplication&quot;,&quot;version&quot;:&quot;1.0.0&quot;,&quot;orientation&quot;:&quot;portrait&quot;,&quot;icon&quot;:&quot;.&#x2F;assets&#x2F;icon.png&quot;,&quot;splash&quot;:{&quot;image&quot;:&quot;.&#x2F;assets&#x2F;splash.png&quot;,&quot;resizeMode&quot;:&quot;contain&quot;,&quot;backgroundColor&quot;:&quot;#ffffff&quot;,&quot;imageUrl&quot;:&quot;http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;assets&#x2F;201a91bd1740bb1d6a1dbad049310724&quot;...
5.1. Prerequisites
For Turtle CLI to work correctly to create an .ipa file for iOS, you need to make sure your system is macOS and that the following dependencies are installed:
Xcode (version 13.2.1 or newer)
fastlane
Note: make sure that you have run Xcode at least once and that you have agreed to the license agreements.
For more details, see Expo‚Äôs documentation.
If you know which Expo SDK version you are going to use, you can run
$ turtle setup:ios --sdk-version &lt;SDK-VERSION&gt;
If it errors out, saying that you don‚Äôt have the right version of fastlane, try re-installing fastlane (guide). The version used in this article is fastlane 2.200.0.
This will take some time:
$ turtle setup:ios --sdk-version 44.0.5
Jan 20 21:18:03 turtle[48488] INFO:  shell app for SDK 44.0.5 doesn&#39;t exist, downloading...
  platform: &quot;ios&quot;
  buildPhase: &quot;setting up environment&quot;
downloading [                    ] 1% 8514.8s
...
...
Jan 20 21:24:58 turtle[48488] INFO:  it&#39;s all set!
  platform: &quot;ios&quot;
  buildPhase: &quot;setting up environment&quot;
In the meantime, you can move on to the next section.
5.2. Create Signing keys
This assumes you have an Apple Developer Account, which is a paid account.
To create your distribution certificate file, or .p12 file, you can follow this guide.
You will also need your Apple Team ID and a Provisioning Profile that you can generate through Xcode as well. This other guide covers in greater lengths what all these cerficates are for and how to obtain them.

Note that the provisioning profile expires in 6 days in my case, since I do not have an Apple Developer paid account.
Sadly, it is not possible to share example files.
5.3. Build IPA
Make sure that you are serving the dist directory on http:&#x2F;&#x2F;127.0.0.1:8000 as explained Run a local server. Assuming you are using bash as your shell, from the root of your project, run:
EXPO_IOS_DIST_P12_PASSWORD&#x3D;&quot;&lt;PASSWORD HERE&gt;&quot; \
turtle build:ios \
  --team-id YOUR_TEAM_ID \
  --dist-p12-path &#x2F;path&#x2F;to&#x2F;your&#x2F;dist&#x2F;cert.p12 \
  --provisioning-profile-path &#x2F;path&#x2F;to&#x2F;your&#x2F;provisioning&#x2F;profile.mobileprovision \
  --allow-non-https-public-url \
  --public-url http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;ios-index.json
Note that you need the flag --public-url to point to http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;ios-index.json.
Once the build finishes successfully, you should get the path to your .ipa file.
6. Distribute and install
6.1. on Android
Take your .apk and share it through some Google Drive link or other medium of your choice.
If you download this .apk file through an Android device, it should offer you to install the application on the device.
Trick: if the URL is really not friendly to type, and for whatever reason you have to type it manually, use a QR Code generator (e.g. http:&#x2F;&#x2F;www.barcode-generator.org&#x2F;) and your device‚Äôs camera to simplify your life!
Alternatively, if you connect an Android device to your computer, you should be able to run:
$ adb devices
emulator-5554	device
to list all your connected Android devices and emulators. (In my case, only the emulator is ‚Äúconnected‚Äù.)
It is then possible to install the .apk file by running:
$ adb -s emulator-5554 install ~&#x2F;expo-apps&#x2F;@anonymous__ExampleApplication-7f15208a56304617a200538cacd2e50e-signed.apk
Performing Streamed Install
Success

6.2. on iOS
Caveat: I could not fully test this section, so my apologies if this does not work as intended.
Since you should have Xcode, the most promising solution is in this guide. It also mentions other ways to install the .ipa file.
That‚Äôs it for now, thank you for reading this far. You will find below the resources mentioned in this article.
If you have any questions or comments, please drop me a line on Twitter. I shall reply as soon as possible.
Stay tuned for more.
Resources
Expo: https:&#x2F;&#x2F;expo.dev
Turtle CLI: https:&#x2F;&#x2F;github.com&#x2F;expo&#x2F;turtle#readme
Expo‚Äôs guide to Building Standalone apps: https:&#x2F;&#x2F;docs.expo.dev&#x2F;classic&#x2F;building-standalone-apps&#x2F;
Configuring app.json: https:&#x2F;&#x2F;docs.expo.dev&#x2F;workflow&#x2F;configuration&#x2F;
Expo docs to configure CI with Turtle CLI: https:&#x2F;&#x2F;docs.expo.dev&#x2F;classic&#x2F;turtle-cli&#x2F;
Expo docs to host application on your own servers: https:&#x2F;&#x2F;docs.expo.dev&#x2F;distribution&#x2F;hosting-your-app&#x2F;
How to create a keystore for Android: https:&#x2F;&#x2F;developer.android.com&#x2F;studio&#x2F;publish&#x2F;app-signing#generate-key
Supporting GitHub repository: https:&#x2F;&#x2F;github.com&#x2F;RobinCsl&#x2F;build-standalone-expo-app&#x2F;*
#### [Optimize your img tags with Eleventy Image and WebC](https:&#x2F;&#x2F;www.robincussol.com&#x2F;optimize-your-img-tags-with-eleventy-image-and-webc&#x2F;) 
*I am very excited about WebC and couldn‚Äôt wait to try out the corresponding Eleventy plugin.
The first use-case I had in mind was to use Eleventy Image for the native HTML img tag, that can be generated from Markdown and without shortcode. I had done this before, for my unpublished blog rewrite that‚Äôs been waiting to be released for ever now, through hooking up Eleventy Image into a markdown-it plugin. It wasn‚Äôt pretty as markdown-it plugins are pretty alien to me.
But now, this can be done ‚Äúnatively‚Äù, √†-la-Cloudflare Workers for your native HTML elements!
UPDATE (04&#x2F;11&#x2F;2022): After sharing this article on Twitter, Zach Leatherman pointed out there should be an easier solution. It didn‚Äôt work as expected at first, which put me on a journey to fix the underlying issue in @11ty&#x2F;webc. I‚Äôm very pleased to share that my first contribution to the project was accepted and landed in v0.6.0. As a result, the content of the last section was updated to remove the dirty data file hack with _data&#x2F;Image.js: your image optimization logic can now truly live in a single file.
The documentation for WebC mentioned this use-case exactly, in the shape of this innocent puzzle:

‚ÄúFree idea: use the Eleventy Image plugin to return optimized markup‚Äù
So it should be easy, right?
Remember this lad?
I have discovered a truly remarkable proof of this theorem which this margin is too small to contain.
Pierre de Fermat, cca. 1637
No need to wait 3 centuries for the answer this time, because it was ultimately not so hard‚Ä¶ But I did struggle and wrestle with it for a few hours :D
Anyway, hope that can be useful to someone.
If you want to see the finished implementation, you can get it on GitHub: RobinCsl&#x2F;11ty-webc-img-demo.
Set up a WebC-powered Eleventy project
or take a shortcut by cloning this repo and going to the 01-initial folder.
Initialise the project
Let‚Äôs start with an empty folder and add a basic package.json file:
mkdir 11ty-webc-img
cd 11ty-webc-img
npm init -y
We need to install the latest canary release (2.0.0-canary.16 at the time of writing) of Eleventy as well as the WebC plugin:
 npm install @11ty&#x2F;eleventy@2.0.0-canary.16 @11ty&#x2F;eleventy-plugin-webc
Configure Eleventy
We will now configure Eleventy to use the WebC plugin by creating a .eleventy.js file with the following content:
const webc &#x3D; require(&quot;@11ty&#x2F;eleventy-plugin-webc&quot;);

module.exports &#x3D; function(eleventyConfig) {
	eleventyConfig.addPlugin(webc, {
		components: &quot;_includes&#x2F;webc&#x2F;*.webc&quot;
	});
}

In particular, components in the _includes&#x2F;webc folder will be available in the global scope, no need to import them explicitly!
Scaffold a minimal project
To finish our setup, we create a layout file and a simple WebC component which we will use in a basic page, to make sure our setup is working correctly.
We create the layout file under _includes&#x2F;layouts&#x2F;base.webc. It is a simple HTML template with the @html&#x3D;&quot;content&quot;  WebC directive set on the body tag. (See my-layout.webc in the docs)
&lt;!doctype html&gt;
&lt;html lang&#x3D;&quot;en&quot;&gt;
	&lt;head&gt;
		&lt;meta charset&#x3D;&quot;utf-8&quot;&gt;
		&lt;title&gt;Eleventy Images + WebC rocks!&lt;&#x2F;title&gt;
	&lt;&#x2F;head&gt;
	&lt;body @html&#x3D;&quot;content&quot;&gt;&lt;&#x2F;body&gt;
&lt;&#x2F;html&gt;
We now create a simple WebC component and write the following content, taken from the promising website 11ty.webc.fun, in _includes&#x2F;webc&#x2F;site-footer.webc :
&lt;footer&gt;
  &lt;p&gt;&amp;copy; 2022 Yours Truly.&lt;&#x2F;p&gt;
&lt;&#x2F;footer&gt;
Finally, we create our basic page at the root of the project in index.webc:
---
layout: layouts&#x2F;base.webc
---

Fun with WebC

&lt;site-footer&gt;&lt;&#x2F;site-footer&gt;
If all went according to plan, we should now be able to run
npx @11ty&#x2F;eleventy --serve
in the terminal and see the following output in our browser at http:&#x2F;&#x2F;localhost:8080:

Create an img.webc component
or check the code on GitHub in the 02-img folder if you want to see the code right away.
In this section, we will create our img.webc override for the native img HTML tag and use Eleventy Image within it.
As a starting point, we will use the example from the documentation from which the screenshot at the start of this post is taken. In a new file _includes&#x2F;webc&#x2F;img.webc, add the following:
&lt;script webc:type&#x3D;&quot;render&quot; webc:is&#x3D;&quot;template&quot;&gt;
function() {
	if(!this.alt) {
		throw new Error(&quot;[img.webc] the alt text is missing, no fun&quot;);
	}
	return &#x60;&lt;img src&#x3D;&quot;${this.src}&quot; alt&#x3D;&quot;${this.alt}&quot;&gt;&#x60;;
}
&lt;&#x2F;script&gt;
This essentially verifies at build-time that all your images have a non-empty alt text, neat!
Let‚Äôs add a ‚Äúbroken‚Äù image to our index page, in index.webc, to verify that this works correctly:
---
layout: layouts&#x2F;base.webc
---

Fun with WebC

&lt;img src&#x3D;&quot;https:&#x2F;&#x2F;images.unsplash.com&#x2F;photo-1627224286457-923944e5b159?auto&#x3D;format&amp;fit&#x3D;crop&amp;w&#x3D;387&amp;q&#x3D;80&quot;&gt;

&lt;site-footer&gt;&lt;&#x2F;site-footer&gt;
And indeed, running npx @11ty&#x2F;eleventy --serve yields an expected error:
$ npx @11ty&#x2F;eleventy --serve
[11ty] Problem writing Eleventy templates: (more in DEBUG output)
[11ty] 1. Having trouble rendering webc template .&#x2F;index.webc (via TemplateContentRenderError)
[11ty] 2. [img.webc] the alt text is missing, no fun (via Error)
Add an alt text (‚Äúpossum hanging from a palm leaf‚Äù should work) and try again. Oh no! Another error:
$ npx @11ty&#x2F;eleventy --serve  
[11ty] Problem writing Eleventy templates: (more in DEBUG output)
[11ty] 1. Having trouble rendering webc template .&#x2F;index.webc (via TemplateContentRenderError)
[11ty] 2. Circular dependency error: You cannot use &lt;img&gt; inside the definition for .&#x2F;_includes&#x2F;webc&#x2F;img.webc (via Error)
That makes sense, when you think about it! All our .webc files are processed by WebC, so if we return an img tag in a img.webc component, the compiler would work indefinitely to get to the bottom of it, because it‚Äôs turtles img all the way down!
Luckily for us, we can let WebC know when its job is done through the webc:raw attribute:
Use webc:raw to opt-out of WebC template processing for all child content of the current node. Notably, attributes on the current node will be processed.
Let‚Äôs fix it in _includes&#x2F;webc&#x2F;img.webc:
  &lt;script webc:type&#x3D;&quot;render&quot; webc:is&#x3D;&quot;template&quot;&gt;
  function() {
	  if(!this.alt) {
	  	throw new Error(&quot;[img.webc] the alt text is missing, no fun&quot;);
	  }
-	  return &#x60;&lt;img src&#x3D;&quot;${this.src}&quot; alt&#x3D;&quot;${this.alt}&quot;&gt;&#x60;;
+	  return &#x60;&lt;img webc:raw src&#x3D;&quot;${this.src}&quot; alt&#x3D;&quot;${this.alt}&quot;&gt;&#x60;;
  }
  &lt;&#x2F;script&gt;
It compiles now! üéâ
Here‚Äôs the expected output:

We have effectively augmented our img tag to verify at build time that alt text is present.
Let‚Äôs now add Eleventy Image to the party!
Optimize your HTML img with Eleventy Image
or check the code on GitHub in the 03-final folder if you want to see my solution.
Let‚Äôs first install Eleventy Image in our project:
npm install @11ty&#x2F;eleventy-img
We will more or less copy the example from the Eleventy Image docs in the Asynchronous Shortcode section, because our JavaScript render function can be async!
In the file _includes&#x2F;webc&#x2F;img.webc, let‚Äôs add the following:
  &lt;script webc:type&#x3D;&quot;render&quot; webc:is&#x3D;&quot;template&quot;&gt;
-   function() {
-      if(!this.alt) {
-          throw new Error(&quot;[img.webc] the alt text is missing, no fun&quot;);
-      }
-      return &#x60;&lt;img webc:raw src&#x3D;&quot;${this.src}&quot; alt&#x3D;&quot;${this.alt}&quot;&gt;&#x60;;
+    const Image &#x3D; require(&quot;@11ty&#x2F;eleventy-img&quot;);
+    module.exports &#x3D; async function() {
+      let metadata &#x3D; await Image(this.src, {
+        widths: [300],
+        formats: [&quot;avif&quot;, &quot;jpeg&quot;],
+        outputDir: &quot;_site&#x2F;img&#x2F;&quot;,
+      });

+      let imageAttributes &#x3D; {
+        alt: this.alt,
+        sizes: &quot;100vw&quot;,
+        loading: &quot;lazy&quot;,
+        decoding: &quot;async&quot;,
+      };

+      &#x2F;&#x2F; You bet we throw an error on missing alt in &#x60;imageAttributes&#x60; (alt&#x3D;&quot;&quot; works okay)
+      return Image.generateHTML(metadata, imageAttributes);
  }
  &lt;&#x2F;script&gt;

Note that we harcoded the value for  sizes in the imageAttributes object, and prepended both src and alt by this to wire things up correctly. We also instruct the Image plugin to output optimized images in our _site&#x2F;img&#x2F; folder directly for them to be available when using the following markup:
&lt;img alt&#x3D;&quot;a lovely image&quot; src&#x3D;&quot;&#x2F;img&#x2F;hash-width.jpeg&quot;&gt;
Let‚Äôs run npx @11ty&#x2F;eleventy --serve once more:
$  npx @11ty&#x2F;eleventy --serve
[11ty] Problem writing Eleventy templates: (more in DEBUG output)
[11ty] 1. Having trouble rendering webc template .&#x2F;index.webc (via TemplateContentRenderError)
[11ty] 2. Circular dependency error: You cannot use &lt;img&gt; inside the definition for .&#x2F;_includes&#x2F;webc&#x2F;img.webc (via Error)
That error sounds familiar, right?
We need to tell WebC to ignore img tags generated by Eleventy Image, and it‚Äôs as simple as adding &quot;webc:raw&quot;: true to the imageAttributes object:
  &lt;script webc:type&#x3D;&quot;render&quot; webc:is&#x3D;&quot;template&quot;&gt;
  const Image &#x3D; require(&quot;@11ty&#x2F;eleventy-img&quot;);
  module.exports &#x3D; async function() {
    let metadata &#x3D; await Image(this.src, {
      widths: [300],
      formats: [&quot;avif&quot;, &quot;jpeg&quot;],
      outputDir: &quot;_site&#x2F;img&#x2F;&quot;,
    });
  
    let imageAttributes &#x3D; {
      alt: this.alt,
      sizes: &quot;100vw&quot;,
      loading: &quot;lazy&quot;,
      decoding: &quot;async&quot;,
+     &quot;webc:raw&quot;: true,
    };
  
    &#x2F;&#x2F; You bet we throw an error on missing alt in &#x60;imageAttributes&#x60; (alt&#x3D;&quot;&quot; works okay)
    return Image.generateHTML(metadata, imageAttributes);
  }
  &lt;&#x2F;script&gt;
And we‚Äôre done!! (Note how the image now aligns perfectly with localhost:8080 #IncontestableTruth)

with corresponding markup:
&lt;!doctype html&gt;
&lt;html lang&#x3D;&quot;en&quot;&gt;
&lt;head&gt;
        &lt;meta charset&#x3D;&quot;utf-8&quot;&gt;
        &lt;title&gt;Eleventy Images + WebC rocks!&lt;&#x2F;title&gt;
    &lt;&#x2F;head&gt;
    &lt;body&gt;Fun with WebC

&lt;picture&gt;&lt;source type&#x3D;&quot;image&#x2F;avif&quot; srcset&#x3D;&quot;&#x2F;img&#x2F;SwdsuTpRbT-300.avif 300w&quot;&gt;&lt;img alt&#x3D;&quot;possum hanging from a palm leaf&quot; loading&#x3D;&quot;lazy&quot; decoding&#x3D;&quot;async&quot; src&#x3D;&quot;&#x2F;img&#x2F;SwdsuTpRbT-300.jpeg&quot; width&#x3D;&quot;300&quot; height&#x3D;&quot;450&quot;&gt;&lt;&#x2F;picture&gt;


&lt;footer&gt;
  &lt;p&gt;¬© 2022 Yours Truly.&lt;&#x2F;p&gt;
&lt;&#x2F;footer&gt;

&lt;&#x2F;body&gt;
&lt;&#x2F;html&gt;
Parting words
I am so excited to explore further the possibilities of using WebC to augment other native HTML elements.
This article only scratches the surface when it comes to the img tag. You could pass props down from the markup to Eleventy Image and control the behaviour of the image optimization. But we can now augment our native img tag without much hassle as it‚Äôs all in one file.
It even works with Markdown images (and yields the cutest webpage ever):
  ---
  layout: layouts&#x2F;base.webc
  ---
  
  Fun with WebC
  
  &lt;img alt&#x3D;&quot;possum hanging from a palm leaf&quot; src&#x3D;&quot;https:&#x2F;&#x2F;images.unsplash.com&#x2F;photo-1627224286457-923944e5b159?auto&#x3D;format&amp;fit&#x3D;crop&amp;w&#x3D;387&amp;q&#x3D;80&quot;&gt;
  
+  &lt;template webc:type&#x3D;&quot;11ty&quot; 11ty:type&#x3D;&quot;md&quot;&gt;
+  
+   ![&#39;close-up of a baby possum among ferns&#39;](https:&#x2F;&#x2F;images.pexels.com&#x2F;photos&#x2F;13960994&#x2F;pexels-photo-13960994.jpeg)
+  
+  &lt;&#x2F;template&gt;
  
  &lt;site-footer&gt;&lt;&#x2F;site-footer&gt;
  

All the more reasons to optimize your images now!
Find the code supporting this article on the RobinCsl&#x2F;11ty-webc-img-demo repository.*
#### [Year in Review: 2021](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2021&#x2F;) 
*We‚Äôre already at the start of February 2022, but who says retrospectives need to be done on January 1st?! A lot of things happened in 2021, both personally and professionally. Time to reflect and remember.
Personal üë∂üíçüìÑüìÉüìëüìú
This first part is the personal stuff, so if you don‚Äôt care about it, you can skip to the professional stuff instead. And if you don‚Äôt care about that too, why are you here? üòÇ
Welcome, L√©onard!
In January of 2021 came the great news that we were expecting a baby and a few months later, my son L√©onard came to this world! It‚Äôs been a few months now and it‚Äôs insane how much this event changed our lives.
It‚Äôs quite amazing to witness a human being‚Äôs awakening to the world, I do feel privileged.
Of course, it‚Äôs not just rainbows and unicorns.
Sleeping as much as I want is now a distant memory&#x2F;dream, though I‚Äôve been surprised that it‚Äôs actually quite possible to operate without the amount of sleep I used to get.
Having free time for side projects and writing almost vanished (and usually eats up time when I should sleep instead, while it‚Äôs allowed by baby-boss). I don‚Äôt know how other parents manage but time just flies by.
One thing‚Äôs for sure, L√©onard makes sure I keep fit and exercise regularly (a promise I made myself at the beginning of last year, right):
it‚Äôs quite a normal day when I need to go up and down the 4 floors of the block of flats we live in (and when it‚Äôs at night, I have this game where I switch the lights on and go up and down within the 3 minutes they‚Äôre programmed to stay on; naturally, after my 4th round trip, I usually do the last flight of stairs in the dark üòÖüòÆ‚Äçüí®).
it‚Äôs also quite a normal day when I need to carry him in my arms for 10- to 20-minute stretches, while doing squats, at least 2 or 3 times.
Coach L√©onard can ask for these drills at any time of the day (and night‚Ä¶), he says it‚Äôs for my own good. My knees and hips and back and arms tend to disagree.
Paperwork, paperwork, paperwork
In 2021, I‚Äôve had time to think so many times if the amount of paperwork we‚Äôre doomed to go through is some sort of devilish scheme to keep people busy on the boring stuff. It definitely does not help when you‚Äôre an expat.
If you had told me having a baby would generate so much paperwork chores, I probably would not have believed you. The story goes that we wanted to do an early recognition of fatherhood for me to be officially recognised as the father of my child to be.
In France, as a French person, this is a 5-minute visit to my local townhall, easy-peasy.
In Czechia, as a foreigner, this would have required tons of documents that also needed translating by a certified translator (aka costs some money).
Since we were engaged, and you‚Äôre officially recognised as the father when having a baby as a married couple, we thought we might as well go through paperwork hell to get married.
It did not disappoint.
Our child was due some time in the middle of September, so we had almost the entire year to get married, should be easy, right.
Being so diligent, we got in touch with the French embassy to understand what we need to do to get married in April:
weddings at the embassy are quite a rare thing, you should get married through the local authorities
getting married in Prague is like getting married in Las Vegas (say what?)
Only to realise at the end of June that:
babies aren‚Äôt always born around the due date
it‚Äôs already the end of June
Let‚Äôs just say that we managed to be on time paperwork-wise for our wedding at the beginning of August (ever heard of the necessary 2-week public display of your intent on getting married, during which somebody has the right to oppose it, to get the paper allowing a French person to marry‚Ä¶?), but the ‚Äúgetting married like in Las Vegas‚Äù was lost on us.
Professionally
Promo
In January last year, I got promoted to Staff Engineer at Kiwi.com. Pretty crazy to me to think that I started working in the industry in September 2017. Even though titles only mean so much, it‚Äôs still a nice recognition that I bring value to the company.
Pair Documenting
I definitely learnt a lot about infrastructure and Kubernetes, which might seem overkill for a frontend platformer, but there was a void to fill when my ex-colleague Adam Jani≈° left, so I put on my newbie hat and pair-documented Adam‚Äôs knowledge throughout his notice period. I still refer or point people to that document quite regularly, it‚Äôs an investment that keeps on giving after all these months!
This was also the first time I tried to add original schematics&#x2F;pictures and Excalidraw made it super fun and easy!
Robin‚Äôs Gazette
My newsletter, Robin‚Äôs Gazette, kept going quite well! It turned one year old on December, 9th! üéÇ
In 2021, I published 25 issues (784 emails in total!), and went from 9 subscribers to 49 at the end of the year!
Given the quite low volume of subscribers, my average open rate and click rate are pretty okay (though they are ‚Äúall-time‚Äù performance metrics):
70.35% open rate,
24.38% click rate.
Even though it‚Äôs always some amount of work, I deem it worthy of my time as I get to practice writing and I always learn something slightly more deeply than if I just scrolled Twitter or Hacker News. This continues my efforts from ‚Äúarchivist to creator‚Äù that I mentioned in my last retro.
Special mention to Shawn @swyx Wang for being so encouraging along the way!
My goal for this year is to continue on that path, though I do need to put some effort into advertising it better:
the subscribe form is hard to find on my website,
the content is short-lived and behind closed doors ‚Äì so I should repurpose it to an extent,
start marketing it more (instead of the infrequent tweets I‚Äôve tried at some point).
One small change for this year: I now send the Gazette every other Friday instead of every other Wednesday.
Some of the feedback I received üòä
‚ÄúSuch a great newsletter this week Robin, amazing job!‚Äù
‚ÄúStill enjoying the newsletter!‚Äù
Blog
The blog was a bit quiet last year, I only published 3 posts and refreshed my most read article about building APK files locally for Expo projects (it recently crossed 20K views in its lifetime! üéâ).
They were:
Python Dependencies for JavaScript Developers
How to Download a Brain with Pair Documenting (already mentioned above)
Year in Review: 2020
I really hope to start writing more again on the blog because the SEO game takes a long time for Google to start recommending your stuff: I saw more traffic to my How to Test Your ESLint Config and Get your Own Sentry Playground articles, and they were written in September 2020!
Started working on a course
In the last retro, I announced that I planned to write a book. That did not happen‚Ä¶ üòÖ
Instead, I started working on a video course which essentially replicates the now defunct Margarita project from scratch (which was the subject of this article on my blog), showcasing how to build cross-platform web and native mobile apps through React Native and React Native Web.
This was the occasion to spend some time weeks watching all the microphone reviews on YouTube, all the Audacity and Obs Studio tutorials for sound production, to ultimately produce a half-finished tutorial on YouTube (the best 33 seconds of your life, trust me).
Source



Ever since my son was born, I‚Äôve had little time to focus for longer than 5-minute stretches outside of work, so this project has lost steam right now. I hope I‚Äôll manage to finish it in the first semester!
A look back and forward
Revisiting some of my plans for 2021 and making some for 2022.
Family
As much as I would love to work on side-projects and such, my family comes first, and I want to keep it that way. I‚Äôm excited to continue discovering what my next workouts will be, courtesy of Coach L√©onard! (Seriously, I‚Äôve got some arms now! üí™)
I cannot wait for my son to meet all his grand-parents, aunts and uncles in France later this year!
Nehovor√≠m pliynule po slovensky
aka I don‚Äôt speak Slovak fluently.
One of my goals was to make sure I would be able to speak to all my wedding guests in their preferred language (amongst French, English and Slovak). Because of the above (and COVID not helping‚Ä¶), the guest list was actually pretty small and my mastery of Slovak would not be entirely necessary to do well on my goal. So I guess I will learn better alongside my son this year whilst we wait for the big party?
Almost no SAD this past year
Come December, I usually feel pretty burnt out and in dire need of vacation to recharge. Somehow, in December 2021, I did not feel like that at all.
My new family life provided some amount of distractions from work. Even though that increased my context switching throughout the days and the nights were not as restful, it somehow created some distance between work and me. Or maybe because living with a newborn forces you to live in the moment, one day at a time‚Ä¶ üòÖ
Writing
Less paperwork, more blog posts. ü§û
Keep the newsletter going, and make it better, faster, stronger!
Improve my note taking system, which is a bit chaotic and not really systematic at the moment.
Learning Rust
In 2021, I started dabbling with Rust, mostly through the really great WIP book from Luca Palmieri, Zero To Production In Rust. It assumed some knowledge so I sometimes struggled had fun filling in the gaps.
Given where the JS ecosystem is going in terms of tooling (oh yeah, in 2021 I started this Awesome List of JavaScript Tooling Not Written In JavaScript on GitHub ‚Äì 667 stars so far!), I think it‚Äôs important to explore beyond the confines of JavaScript&#x2F;TypeScript. So I‚Äôd like to spend more time with Rust this coming year!
Lots of things to be grateful for last year and lots to look forward to this year. C‚Äôest parti !*
#### [Python Dependencies for JavaScript Developers](https:&#x2F;&#x2F;www.robincussol.com&#x2F;python-dependencies-for-javascript-developers&#x2F;) 
*Recently, I needed to update an old Python codebase which had not been touched in 3 years! Of course, the dependencies were so outdated that the Dockerfile of the project wouldn‚Äôt build. My JavaScript knowledge did not help me much:
how could I do a yarn upgrade-interactive --latest to update dependencies?
where‚Äôs the dependency lockfile?
why do we need to compile C-libraries for Python dependencies?
Luckily for me, my colleague Ondrej patiently explained how to approach these questions.
Using a virtual environment
TL;DR: pip installs packages globally unless we activate a virtual environment.
In Python, the default package manager is call pip and it installs packages from the Python Package Index, shortened to Pypi. The equivalent in JavaScript land would be npm and npmjs.com.
By default, pip installs packages system-wide. This contrasts with the need to pass a --global flag to npm.
To remedy that, we can use a local Python environment (a bit like having our node_modules folder in a JavaScript project). The following command will create a virtual environment in a venv folder in our current directory:
# Create the venv folder container the virtual environment
$ python3 -m venv venv
To make sure pip knows it should install packages in this virtual environment, we must activate it. Depending on your shell, you should source the appropriate activate file in venv&#x2F;bin:
activate, for Bash and ZSH,
activate.fish, for Fish Shell,
activate.csh, for csh
Activate.ps1, for PowerShell.
In my case, I will source the one for ZSH:
$ source venv&#x2F;bin&#x2F;activate
Now, pip install will install packages in the local folder instead of targeting the global scope. My ‚ÄúPython node_modules folder‚Äù is venv&#x2F;lib&#x2F;python3.8&#x2F;site-packages&#x2F;.
Dependencies in Python
TL;DR: use pip-compile to generate a lockfile and pip-sync to install dependencies from that lockfile
To deal with dependencies, we must install the pip-tools package in our virtual environment:
pip install pip-tools
This will allow us to use pip-compile and pip-sync later on.
Once that‚Äôs done, we could for example decide to start a Django project, ‚Äúthe web framework for perfectionists with deadlines‚Äù. The latest version of the package at the time of writing is 3.2.5. Let‚Äôs create our Python equivalent of a package.json file to express our project needs the Django package pinned to version 3.2.5:
# requirements.in
django&#x3D;&#x3D;3.2.5
Note: the better equivalent to a package.json would be a setup.py file, since it contains additional fields like the name of the local package, its version, etc. but we just want to write down the dependencies.
EDIT #1: it‚Äôs apparently not common practice to pin dependency versions in requirements.in, just in case you really need to (if there are breaking changes for example). Thanks for pointing it out, Ondrej.
To generate a corresponding lockfile of the transitive dependencies of Django, we can run the following command:
pip-compile --output-file requirements.txt requirements.in
This will create the following requirements.txt file:
#
# This file is autogenerated by pip-compile with python 3.8
# To update, run:
#
#    pip-compile --output-file&#x3D;requirements.txt requirements.in
#
asgiref&#x3D;&#x3D;3.4.1
    # via django
django&#x3D;&#x3D;3.2.5
    # via -r requirements.in
pytz&#x3D;&#x3D;2021.1
    # via django
sqlparse&#x3D;&#x3D;0.4.1
    # via django

Now that we have this file, we can finally retrieve and install the packages with the following command:
pip-sync
Note: if you try to run pip-sync without a requirements.txt, you will get the following error:
No requirement files given and no requirements.txt found in the current directory
It is indeed necessary to run pip-compile before.
Updating dependencies
Similar to npm oudated, we can list the outdated Python dependencies with
$ pip list --outdated
For example, after downgrading Django to 3.2.3 in my requirements.in, regenerating the lockfile with pip-compile, re-installing the dependencies with pip-sync, the command above will show:
Package    Version Latest Type
---------- ------- ------ -----
Django     3.2.3   3.2.5  wheel
setuptools 44.0.0  57.4.0 wheel
To update the dependency, I can change the version back to 3.2.5 in the requirements.in and go through the same dance:
$ pip-compile --output-file requirements.txt requirements.in
$ pip-sync
$ pip list --outdated
Package    Version Latest Type
---------- ------- ------ -----
setuptools 44.0.0  57.4.0 wheel
EDIT #2: a batteries-included equivalent to Yarn is called Poetry. Thanks for sharing, D√°niel!
Wheels and Eggs
You might wonder what this ‚Äúwheel‚Äù type is for the Django and setuptools packages.
They are still mysterious to me, but here‚Äôs my current understanding: in Python, some dependencies need to be built for specific architectures, as they might be written in Cython, ‚Äúa superset of the Python language that additionally supports calling C functions and declaring C types on variables and class attributes‚Äù. Wheels and Eggs are packaging formats for these.
In particular, it is not a good idea to use Alpine Docker images for Python projects as a lot of packages don‚Äôt have pre-built wheels for that architecture: your Docker build step will need to compile the packages from source, slowing down your entire process (and requiring you to install the necessary build tools for this compilation to happen!).
I don‚Äôt think there is a similar ‚Äúpackaging format‚Äù concept in JavaScript land. But we do have packages shipping prebuilt binaries for specific architectures, for example Sharp, the Node.js image processing package. (And we probably have enough issues with CommonJS vs ES Modules as it is‚Ä¶ :smile:)
Conclusions
All in all, a project needs to:
specify external dependencies and their desired version with semantic ranges
have a way to retrieve said dependencies
keep track of which versions were effectively installed to improve reproducibility.
Despite all these measures, the Docker file of an unmaintained 3-year old project could not build. Software rots!*
#### [How to Download a Brain with Pair Documenting](https:&#x2F;&#x2F;www.robincussol.com&#x2F;download-a-brain-with-pair-documenting&#x2F;) 
*When people leave the company, a lot of specific and ad hoc knowledge goes away with them. Unless there is already a strong documentation culture, there‚Äôs only so much that can be said and done during exit interviews to make up for it.
But this doesn‚Äôt have to be left to fate.
Throughout the month of January, my now ex-colleague Adam Jani≈° and I pair documented all his knowledge about the frontend infrastructure at Kiwi.com. We produced a 24 page document, fixed a few bugs and addressed some tech debt. More importantly, we had fun doing it!
Here‚Äôs how we approached it.
How to pair document
This is an attempt at formalising what we‚Äôve done, feel free to s&#x2F;Newbie&#x2F;Robin&#x2F;g and s&#x2F;Expert&#x2F;Adam&#x2F;g.
The Protagonists
You will need two proactive people: an Expert on the subject to document and a Newbie who is not too cursed with knowledge yet. Bonus points if they have not really worked together but always had good chemistry in their interactions.

The Newbie makes it easy on the Expert for this documentation effort to be a no-brainer:
they organize the pair documenting sessions;
they manage the agenda of the sessions;
they do most of the note-taking;
they digest the notes into documentation drafts in between sessions;
they stay curious and eager to learn more about the subjects, with questions always at the ready (this is hard to fake, so find an adequate Newbie for the task).

The Expert shows up at the sessions and generously shares their knowledge with the Newbie, answering patiently every question they may have. They review the documentation drafts to ensure the prose does not betray the original intent of the notes. Bonus points if they include the Newbie in solving similar problems described in the nascent documentation as they arise in the support channels of the company‚Äôs Slack: learning by doing is a great way to drive home the material and expose remaining ambiguities.

The First Session
The Newbie is in charge and explains how it‚Äôs going to work in the first pair-documenting session. That means going through what‚Äôs expected of each participant in this documentation effort as well as giving an overview of the actual process.
The objective of the first session is crucial: go as broad as possible and capture as many ideas of what needs documenting to form a backlog of topics to go over in the next sessions.
This can be achieved through asking questions like (more examples in this template):
what are things that you know about that very few people know?
what are the things that people always ping you about on Slack?
what tasks pile up when you‚Äôre on vacation?
Once the amount of things to document gets a bit clearer, see how many days are left before they leave and agree on a schedule to leave enough time for this task.
In Between Sessions
The Newbie transforms the raw notes into documentation drafts and gets the Expert to review them.
As more people in the company are aware of this documentation effort, they might have questions of their own; the Newbie adds these points to the agenda for the next session.
The Expert includes the Newbie in all discussions on Slack touching on the subject to maximize the learning opportunities and give the docs a trial by fire.
A Normal Session
In the first 5-10 minutes, the Newbie and the Expert go over unresolved comments in the doc draft, they review the agenda from the previous session and see if anything pops up to be further discussed or explained, and finally, they review the agenda for the current session and decide what to prioritize.
They then go over each point in the agenda: the Expert does most of the talking while the Newbie does most of the note-taking. The Newbie shares their screen for the document to be visible by both pair documentors. The Newbie may interrupt the Expert at any point with questions or with attempts at paraphrasing what the Expert just described. The Expert glances at the notes being taken once in a while to ensure they don‚Äôt contain mistakes from the get-go.
When the time is up, the Newbie and the Expert look at how much they covered from the agenda, move what hasn‚Äôt been covered to the next session, and agree on a date and time for that next session (if it‚Äôs not already regular).
Tools we used
A Calendar: to plan the sessions, to have automatic reminders for them, and to share the visio-conference link.


Custom recurrence with expiry date, Hangouts link, Notification not to miss it, Allow guests to modify event for better collaboration

A Google Document: to store the agenda, the notes and the first documentation drafts. Do make use of the outline on the left-hand side to navigate more easily once the document gets to a certain size. Do make use of comments to discuss and improve the notes and the draft. This is also a good place to involve other people from the company asynchronously. Make sure to put this document in a shared team drive for it to have the right permissions set by default.


Use the ‚ÄúStyles‚Äù dropdown to get this hierarchy

Here‚Äôs a free template Google document to get you started. Feel free to make a copy.
LucidChart: to draw a few diagrams because pictures are great (though you may want to check out Draw.io for a great free alternative).
Why Pair Documenting Works
What usually happens
Unless there is a strong documenting culture, (1) people never prioritize documentation over almost any other task, because it‚Äôs just not as fun as coding or as urgent as the next fire you need to put out. That means that when someone is about to leave, (2) there is an impossible amount of things to document that they don‚Äôt even know where to start. Because they are short on time, they end up drafting a lil‚Äô something and call it a day. (3) Anyway, we never needed that, why are they asking me to document that stuff, who‚Äôs gonna read it anyway?! (Note the use of two ‚Äúanyway‚Äù).
Clear intention through planning
Through planning the pair documenting sessions, we make sure documentation does get prioritized and give it the importance it deserves. If the Expert‚Äôs knowledge is that important and they by happenstance siloed it, it becomes urgent to share this knowledge more widely to deal with that critical bus factor. (Whether they leave or not is almost irrelevant in this case.)
Because we know when the Expert‚Äôs last working day is, it is easier to retro-plan the right number of sessions to cover the entire backlog established in the first session. This of course might need adjusting throughout the pair documentation effort.
More fun and better quality through collaboration
Planning is not enough if the Expert is still lost about what needs documenting and in which level of details. The nagging ‚Äúare they even gonna read it?‚Äù-type questions could well be the end of the documentation effort already: a well-crafted plan not well-executed.
With an accountability buddy, things turn around entirely.
It becomes really difficult to bail out of the plan because you know the other person is expecting you to show up at the session.
Because the Newbie is enthusiastic about the topic, the Expert is more generous in their contribution.
Because the Newbie asks questions and cares about details, the pair documentors tailor the documentation to the level of knowledge on the receiving end. The Expert knows this documentation will be useful. üòå
Aligned incentives
The Expert also knows that what they know should be documented somewhere, and because they like their colleagues, they don‚Äôt want their departure to create a mess. (Right?!)
The Newbie knows this knowledge is valuable, and about to disappear if they don‚Äôt take action. Besides, it‚Äôs something they‚Äôre curious and wanted to learn more about anyway.
The Expert gets to share their knowledge and teach what they know to someone who‚Äôs enthusiastic and interested in the topic; the Newbie gets time with the Expert to learn as much as possible from them.
Parting thoughts
I really enjoyed the pair documenting sessions with Adam and I think they should be made a regular practice, just like pair programming. It‚Äôs a great way to level up people while producing value beyond the scope of that collaboration.
At the same time, documentation is only valuable if it gets read and updated continuously. I‚Äôve been thinking about how to bring it closer to where people are already consuming content. For example, this could take the form of digests of parts of the documentation in the company‚Äôs Slack.
I‚Äôm not super familiar with mob programming, but I do wonder if mob documenting could be a thing to try too.

Acknowledgements:
Adam Jani≈° (@adam_janis) for trying out this pair-documenting idea before his departure :)
Emilia Vidal for her review and suggestions,
Shawn Wang (@swyx) for his review and ideas for the title and Open-Graph image,
Ron Au (@ronvoluted) for providing the font to go ahead with Shawn‚Äôs ideas,
Excalidraw to produce the visuals.*
#### [Year in Review: 2020](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2020&#x2F;) 
*2020, what a ride!
I cannot believe 2020 has already finally come to an end: with the lockdowns and quarantines, time simultaneously flew by and dragged on. A lot of my life was lived through a computer and the Internet. Time to reflect and remember.
Let‚Äôs start with some remarkable facts and events:
personally: - turned 30 in April, without even a beer to celebrate! (hint: the last bit is what‚Äôs remarkable) ‚ùåüç∫ - traveled only once to see my family in France üò¢ - got engaged in August üíç - spent the Christmas holidays alone, for the first time (I feel you, Kevin McCallister) üö∞
at work: - got a raise and earned a promotion üìà - wrote 3 posts on the Frontend Platform‚Äôs internal blog ‚úç
on my blog: - published 8 new posts üöÄ - updated 1 article ‚ôªÔ∏è - started a newsletter (already wrote 2 issues) üóû - broke the 10k unique visitor mark for Build Standalone Expo .apk and .ipa with Turtle CLI üéâ
miscellaneous: - joined 2 great online communities (Coding Career and Blogging For Devs) üôå - revamped a handful of desktop PCs and laptops (cannot believe I was about to get rid of my older laptop when it‚Äôs so smooth now!): most low-end&#x2F;mid computers are slow because of their stock hard drives (and limited RAM), a nice SSD and some RAM extension will do wonders! üíæ - jumped on the sourdough bread baking train (and learnt recently how sourdough baguettes are a lazy baker‚Äôs dream!) üá´üá∑ ü•ñ
Despite everyone calling 2020 their worst year ever, it did not seem so bad personally. Of course, I missed social life and being able to do ‚Äúnormal‚Äù things, but all things considered, I still learnt a lot this year.
Consumer to archivist
Spending so much time online means I absorbed vast amounts of data and after a while, it did not sit so well with me. I believed that I learn best by immersing myself in a continuous flow of information surrounding one topic. Of course, it‚Äôs worked for me so far, but the cost is that I get overwhelmed and it‚Äôs difficult to know when it‚Äôs enough.
Trying to change that brute-force approach to learning, I read here and there that taking notes would force me to slow down and choose what I consume more wisely. I obviously bought ‚ÄúHow to Take Smart Notes‚Äù by S√∂nke Ahrens (and only half-read it), came across the German word Zettlekasten and went on a wild goose chase for the best Personal Knowledge Management system, and read all the articles and watched all the YouTube videos about the subject. Old habits die hard. üòÖ
After using a few of them, I ended up settling with Joplin (which I had of course already set up prior to any of this) and have not looked back. It does not have backlinks so I‚Äôm deeply missing out on interconnected notes, as the hype goes, but it‚Äôs okay. My FOMO is in check for now. Joplin is an active open source project which is available on desktop as well as mobile devices. I retain full ownership (and responsibility) over my notes as Joplin integrates with different storage backends: I chose to use my self-hosted NextCloud instance.
In short:
just-in-case knowledge is expensive; prefer just-in-time knowledge
it‚Äôs easy to go on a wild goose chase only to realise you had everything already
note-taking does force me to slow down and helps to remember better
Archivist to creator
This story does not end here, dear reader. Accumulating notes about topics I‚Äôm interested in helps to slow down and be more intentional with what I consume. But it turns out knowledge without action is mostly useless.
Luckily, Daniel Vassalo wrote this influential tweet:
If you‚Äôre tempted by this, my advice to first-time creators is to start with a very small product: Something you can finish in 2 weeks and charge #### [Build Standalone Expo .apk and .ipa with Turtle CLI [deprecated]](https:&#x2F;&#x2F;www.robincussol.com&#x2F;build-standalone-expo-apk-ipa-with-turtle-cli&#x2F;) 
*This article was updated on February 7, 2023. NOTE: As of Expo SDK 47, the following method does not work any more. With the release of EAS‚Ä¶*
#### [Optimize your img tags with Eleventy Image and WebC](https:&#x2F;&#x2F;www.robincussol.com&#x2F;optimize-your-img-tags-with-eleventy-image-and-webc&#x2F;) 
*I am very excited about WebC and couldn‚Äôt wait to try out the corresponding Eleventy plugin. The first use-case I had in mind was to use‚Ä¶*
#### [Year in Review: 2021](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2021&#x2F;) 
*We‚Äôre already at the start of February 2022, but who says retrospectives need to be done on January 1st?! A lot of things happened in 202‚Ä¶*
#### [Python Dependencies for JavaScript Developers](https:&#x2F;&#x2F;www.robincussol.com&#x2F;python-dependencies-for-javascript-developers&#x2F;) 
*Recently, I needed to update an old Python codebase which had not been touched in 3 years! Of course, the dependencies were so outdated that‚Ä¶*
#### [How to Download a Brain with Pair Documenting](https:&#x2F;&#x2F;www.robincussol.com&#x2F;download-a-brain-with-pair-documenting&#x2F;) 
*When people leave the company, a lot of specific and ad hoc knowledge goes away with them. Unless there is already a strong documentation‚Ä¶*
#### [Year in Review: 2020](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2020&#x2F;) 
*2020, what a ride! I cannot believe 2020 has already finally come to an end: with the lockdowns and quarantines, time simultaneously flew by‚Ä¶*
#### [Docker for JavaScript Devs: How to Containerise Node.js Apps Efficiently](https:&#x2F;&#x2F;www.robincussol.com&#x2F;docker-for-js-devs-how-to-containerise-nodejs-apps-efficiently&#x2F;) 
*Docker is a really cool technology to have applications run the in the same, predictable context, ensuring the ‚Äúbut it works on my machine‚Ä¶*
#### [TypeScript Tidbit: How to Overload an Imported Function](https:&#x2F;&#x2F;www.robincussol.com&#x2F;typescript-tidbit-how-to-overload-an-imported-function&#x2F;) 
*There are times when the type definitions shipped on DefinitelyTyped are not enough and this results in making the TypeScript compiler‚Ä¶*
#### [Wax on, Wax off](https:&#x2F;&#x2F;www.robincussol.com&#x2F;wax-on-wax-off&#x2F;) 
*The reason I got into web development in the first place was the magical ‚ú® feeling you get when you see your code manifest in the browser‚Ä¶*
#### [A Successful Side-Project: Lessons from Swyx](https:&#x2F;&#x2F;www.robincussol.com&#x2F;a-successful-side-project-lessons-from-swyx&#x2F;) 
*If you are on Twitter, chances are you came across this tweet by Daniel Vassallo and it now seems everyone is writing a book! üòÑ Shawn Wang‚Ä¶*0 for it. The experience of getting paid for something you created, directly by consumers, will change you forever. https:&#x2F;&#x2F;t.co&#x2F;UbUD9ch4xQ
‚Äî Daniel Vassallo (@dvassallo) April 10, 2020
 
and Shawn Wang (@swyx) acted on it almost immediately to produce the Coding Career Handbook a few months later. I had followed him for some time on Twitter. His posts, conference talks and online presence in general always brought me value so I wanted to support his work. I was also really glad that half the proceeds would go to FreeCodeCamp. I got the Creators package, not entirely sure what to expect.
This was one of the best decisions of 2020.
As part of the Creators package, there have been regular workshops and they definitely spurred me further to action. After he invited Monica Lent to give a workshop about blogging for developers, I formed a resolve to try and publish a post every 2 weeks, as a way to transform my note-taking game into something more valuable. That‚Äôs when I resurrected my blog with 5 Tips to Start Blogging (for Devs).
A lot of my posts were shared at work and in the company‚Äôs external newsletter (thank you üôÇ) and for the most part, this resurection was successful, even though December was a bit of a hiatus in my blog publishing, as I started my newsletter, Robin‚Äôs Gazette.
I still have a lot to learn when it comes to creating online content and I am looking forward to continuing with this momentum. Whenever I need a reality check of what it takes to embark on this creator journey, I would have a read through Alex West‚Äôs story, as it‚Äôs so real, inspiring and humbling!
Joining online communities
The Coding Career Handbook is an amazing resource and I would like to write a proper review of the book some day; it contains so much valuable information that it would be hard to do it justice here.
What‚Äôs even more awesome about it is that it came with access to a community through Discord and Circle that Shawn manages really well as it keeps delivering value and furthers the book‚Äôs teachings and principles. And if that wasn‚Äôt enough, I met a few interesting people there who I‚Äôm looking forward to getting to know more in 2021.
Judging by how much the Coding Career community helped me to get real with my volitions, I also decided to join Monica Lent‚Äôs Blogging For Devs community because I‚Äôd like to take my blogging further. For example, my article about [Building] Standalone Expo .apk and .ipa with Turtle CLI broke the 10k unique visitor mark in December, through accidental SEO mostly. üéâ I‚Äôm hoping to get a little bit more intentional with SEO as it‚Äôs a great way to magnify the reach of your content. There are so many interesting and inspiring people in Monica‚Äôs community, as well as discussions and workshops about SEO, newsletters, monetization, and of course blogging‚Äîtopics I definitely want to dive deeper in in the new year!
Writing, writing, writing
If you have read this far, it has become pretty apparent that writing is now more than ever my main focus. I think it has been a tremendous source of clarity and success in the last year for me.
The resource that influenced my writing the most this year was this lecture by Larry McEnerney about the Craft of Writing Effectively (here‚Äôs a summary). Having done a PhD, I practiced the ‚Äúwrong‚Äù way of writing for a very long time. Focusing on what‚Äôs valuable for your intended readership makes so much sense.
As I mentioned in my first newsletter issue (let me know if you want a copy of it üòâ), design documents have been crazy useful at work. I must thank my colleage Tobi√°≈° Potoƒçek for bringing about this revolution. In this remote-only work environment, they were a great tool to discuss, make decisions and document them in a searchable manner. Every shortcut needed to be reckoned with and set against the bigger picture. Every quirk or contextual piece of information (which are critically important to understand past decisions or make new ones) are now recorded in writing.
Being a member of the Frontend Platform team, communicating as effectively as possible with the teams we serve was critically important too‚Äîespecially in such challenging times for a travel company in 2020. Most of that communication was done in writing through Slack and Google Documents. (Not to say it was always a smooth ride‚Ä¶)
A look ahead
In 2021, I will focus on staying in shape, physically and mentally. We will go for walks in nature more regularly with Emilia (we agreed at least once a month and have a list of places in Czechia!) I will cycle to work as much as possible, get back into the nice workout rhythm we had during the first lockdown and take care of my sleeping patterns (it‚Äôs all great to wake up earlier to write, but that means going to bed earlier too, Robin ;-)) I will take breaks when I‚Äôm getting overwhelmed, instead of resorting to my usual ‚Äústrategy‚Äù of pushing through until I‚Äôm burnt out.
In 2021, I will focus on maintaining the shift from content consumption to content creation. I want to continue publishing on my blog every 2 weeks as well as send my Gazette every 2 weeks. I will write a book to help PhD graduates transition to web development: I‚Äôm now further along the path (and my work seems to be appreciated :)), so it‚Äôs time to try and lift others as I climb.
In 2021, I will finally speak Slovak fluently to be able to speak to all our wedding guests (still to be planned‚Ä¶ so I got time, I guess :P) in their preferred language. (Robin of January 2022, you‚Äôre welcome!)
C‚Äôest parti!*
#### [Docker for JavaScript Devs: How to Containerise Node.js Apps Efficiently](https:&#x2F;&#x2F;www.robincussol.com&#x2F;docker-for-js-devs-how-to-containerise-nodejs-apps-efficiently&#x2F;) 
*Docker is a really cool technology to have applications run the in the same, predictable context, ensuring the ‚Äúbut it works on my machine‚Äù comments are a thing of the past. Not to mention how Docker integrates with Docker Compose and Kubernetes for larger-scale applications! But that‚Äôs for another day.
In this article, you will learn about some good principles to containerise Node.js apps efficiently. These principles are probably quite general and well-known, but they‚Äôre easy to overlook for beginners to Docker and Dockerfiles.
You will need to have Docker and Node.js installed locally to follow along comfortably.
Docker wants to make you happy, 
Photo by cottonbro from Pexels



Table of contents
Containerising a Next.js app (naive approach)

Docker Glossary
Optimising a Node.js app‚Äôs Docker image

Create a comprehensive .dockerignore file
Use an appropriate base image
Decouple the dependency installation step from application code
Decouple the build from the resulting built application
(Optional) Purge node_modules from unnecessary files
Docker build checklist for JavaScript Devs
Containerising a Next.js app (naive approach)
Let‚Äôs start with a simple Next.js application:
$ npm create next-app --use-npm
and let‚Äôs write the following into a file called Dockerfile at the root of the project:
FROM node:14.15.0

WORKDIR &#x2F;app

COPY . .
RUN npm ci
RUN npm run build

EXPOSE 3000

USER node

CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
Okay, what just happened? üòÑ
Docker Glossary
FROM &lt;image&gt;
WORKDIR &lt;some-path-in-the-container&gt;
COPY &lt;from-context&gt; &lt;to-container&gt;
WORKDIR directory
RUN &lt;command&gt;
docker build process only
EXPOSE &lt;port&gt;
documenting which port the app uses
USER &lt;user&gt;
root with superuser privileges); it‚Äôs good practice to use a different user to run the app.
CMD &lt;command&gt;
docker run &lt;image-tag&gt;, it is not executed during the build process.
Assuming we have Docker installed, we could now run
$ docker build --tag my-containerised-nextjs-app .
This command kindly asks the Docker daemon running on our machine to build the Dockerfile we just wrote with the files present in the current directry (the .) and to call that image my-containerised-nextjs-app (with the --tag flag).
After the build completed, run
$ docker run --rm -p 3000:3000 my-containerised-nextjs-app
and we should have our app running at http:&#x2F;&#x2F;localhost:3000.
This second command orders the Docker daemon to run the image named my-containerised-nextjs-app with port 3000 on my machine to correspond to port 3000 inside the container so that we can interact with our Next.js app. This port mapping is done through the -p hostPort:containerPort flag. Go ahead and change the port mapping and see if you can still access the app.
The --rm flag indicates that we do not want the Docker daemon to keep the container when we stop its execution (with CTRL+C); this is useful not to clog our machines with useless logs while developing.
Voil√†, we have containerised our Next.js app. The End. üéâ
Wait! Don‚Äôt leave, there‚Äôs more! üëá
Optimising a Node.js app‚Äôs Docker image
The section above does the job, but it‚Äôs not optimal. If we only have so few pipeline minutes and we don‚Äôt like wasting resources ‚ôªÔ∏è, this setup will eat more than is necessary. There are a few strategies to optimise a Dockerfile:
Create a comprehensive .dockerignore file
Use an appropriate base image
Decouple the dependency installation step from application code
Decouple the build from the resulting built application
(Optional) Purge node_modules from unnecessary files
Create a comprehensive .dockerignore file
If we look at the logs from building the Docker image, we could read:
Step 4&#x2F;8 : RUN npm ci
 ---&gt; Running in 559b499f0e2c
npm WARN prepare removing existing node_modules&#x2F; before installation
That means we copied the node_modules folder from our local context over to the Docker image being built. What‚Äôs more, npm ci removes them to make sure it works consistently. That is an indication that we should not copy the node_modules in the first place.
To let Docker know some files and folders should be ignored, we can list them in a .dockerignore file. For example, add the following to a file named .dockerignore:
node_modules
Run the build again and the warning disappeared.
What‚Äôs more, we can see how much less was sent to the Docker build context:
# BEFORE
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  101.8MB

# AFTER
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  400.4kB
In practice, we would want to add as many files as possible to our .dockerignore to ensure we‚Äôre not wasting time and energy on files which won‚Äôt be necessary for the build. This can include documentation files (e.g. *.md), configuration files which are only necessary when developing (e.g. .eslint*, .prettier*) as well as our Git history (e.g. .git).
With the following .dockerignore file:
node_modules
*.md
.git
we end up sending the bare minimum to the Docker daemon:
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  248.3kB
Use an appropriate base image
Docker images come in all shapes and sizes. When it comes to building or deploying our app, the smaller the size, the better. For our Next.js app, we don‚Äôt need all that‚Äôs available in node:14.15.0. For example, we don‚Äôt need git or curl. We can instead use the alpine flavour of that image, namely node:14.15.0-alpine.
The difference in size between node:14.15.0 and node:14.15.0-alpine is enormous!
REPOSITORY                    TAG                 SIZE
node                          14.15.0             943MB
node                          14.15.0-alpine      117MB
Our final containerised Next.js app will hence be much smaller thanks to this teeny-tiny modification of our Dockerfile:
- FROM node:14.15.0
+ FROM node:14.15.0-alpine

WORKDIR &#x2F;app

COPY . .
RUN npm ci
RUN npm run build

EXPOSE 3000

USER node

CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
For reference, if we want to inspect the size of the Docker images we have available locally, we can run docker image ls --all.
Our Docker image has size 1.05GB if we use node:14.15.0,
REPOSITORY                    TAG                 IMAGE ID            CREATED             SIZE
my-containerised-nextjs-app   latest              c78d43a2c5bc        15 seconds ago      1.05GB
and it drops to 229MB if we use node:14.15.0-alpine instead!
REPOSITORY                    TAG                 IMAGE ID            CREATED             SIZE
my-containerised-nextjs-app   latest              d0746ef6e8a4        21 seconds ago      229MB
Decouple the dependency installation step from application code
Our setup is already much better with a suitable .dockerignore file and with a much leaner base image. However, we haven‚Äôt made any changes to our package.json and the npm ci step always needs to run if make any changes to our application code.
This is because Docker caches each step as an intermediate Docker container. For example, if we were to run the build again (docker build --tag my-containerised-nextjs-app .), we would see that the cache is used for all steps, resulting in a nearly instant build (because nothing happened, really üòÑ):
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  248.3kB
Step 1&#x2F;8 : FROM node:14.15.0-alpine
 ---&gt; 9db54a688554
Step 2&#x2F;8 : WORKDIR &#x2F;app
 ---&gt; Using cache
 ---&gt; d5d4291dc699
Step 3&#x2F;8 : COPY . .
 ---&gt; Using cache
 ---&gt; b56455e98a93
Step 4&#x2F;8 : RUN npm ci
 ---&gt; Using cache
 ---&gt; ba4ab784f27e
Step 5&#x2F;8 : RUN npm run build
 ---&gt; Using cache
 ---&gt; a51c18594a20
Step 6&#x2F;8 : EXPOSE 3000
 ---&gt; Using cache
 ---&gt; 806dc06cbb6c
Step 7&#x2F;8 : USER node
 ---&gt; Using cache
 ---&gt; b86db08de717
Step 8&#x2F;8 : CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
 ---&gt; Using cache
 ---&gt; d0746ef6e8a4
Successfully built d0746ef6e8a4
Successfully tagged my-containerised-nextjs-app:latest
If we now modify anything in the folder that is not ignored thanks to our .dockerignore file, Docker will have to bust the cache from Step 3 onwards (the ‚ÄúUsing cache‚Äù expression is not printed any more). Let‚Äôs create an empty file and run the build again:
# create an empty file
$ touch file
# build again
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  248.8kB
Step 1&#x2F;8 : FROM node:14.15.0-alpine
 ---&gt; 9db54a688554
Step 2&#x2F;8 : WORKDIR &#x2F;app
 ---&gt; Using cache
 ---&gt; d5d4291dc699
Step 3&#x2F;8 : COPY . .
 ---&gt; e2b761bb08a6         # The cache is not used anymore
Step 4&#x2F;8 : RUN npm ci
 ---&gt; Running in b36f2511e117
...
To remedy this and ensure that npm ci runs only when necessary, we can first copy package.json and package-lock.json files, run npm ci, and then bring in the rest of the files to build the project:
FROM node:14.15.0-alpine

WORKDIR &#x2F;app

- COPY . .
+ COPY package.json .
+ COPY package-lock.json .
RUN npm ci
+ COPY . .
RUN npm run build

EXPOSE 3000

USER node

CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
After we modified the Dockerfile by applying the diff above, we see that Docker does not leverage the cache at all because the steps are different. This always happens when we modify the layers and&#x2F;or their order.
However, after running this build for a first time, subsequent builds will be much faster as the npm ci step will use the cache unless we modify package.json or package-lock.json:
# create another file to see when Docker stops using the cache
$ touch another-file
# run the build again
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  249.3kB
Step 1&#x2F;10 : FROM node:14.15.0-alpine
 ---&gt; 9db54a688554
Step 2&#x2F;10 : WORKDIR &#x2F;app
 ---&gt; Using cache
 ---&gt; d5d4291dc699
Step 3&#x2F;10 : COPY package.json .
 ---&gt; Using cache
 ---&gt; 139b5a611c0b
Step 4&#x2F;10 : COPY package-lock.json .
 ---&gt; Using cache
 ---&gt; 5bc380de1397
Step 5&#x2F;10 : RUN npm ci
 ---&gt; Using cache
 ---&gt; dff6b2da4bdc
Step 6&#x2F;10 : COPY . .
 ---&gt; 08911c09b40f
Step 7&#x2F;10 : RUN npm run build
 ---&gt; Running in f5374a54d9ad

&gt; my-app@0.1.0 build &#x2F;app
&gt; next build
...
Decouple the build from the resulting built application
For this section to make more sense, we will create another Next.js app that uses some dev dependencies which are necessary only when building the app but not when running it in production.
$ npm create next-app --use-npm --example with-tailwindcss with-tailwindcss-app
Copy the Dockerfile and .dockerignore files created in the other example into with-tailwindcss-app. Build the Docker image and run it to make sure it‚Äôs working well before continuing:
$ docker build --tag with-tailwindcss-app .
$ docker run --rm -p 3000:3000 with-tailwindcss-app
As we can see in the package.json file, we have a few dependencies which are only ever going to be used when building our app. We won‚Äôt need them in the final Docker image. So let‚Äôs get rid of them!
We are going to leverage multi-stage Docker builds. They sound more complicated than they are :)
Here‚Äôs a multi-stage build Dockerfile: in the builder container, we install dependencies and build our app, and in the second stage, we copy relevant files from the builder to our final image and install only production dependencies.
FROM node:14.15.0-alpine as builder

WORKDIR &#x2F;app

COPY package.json .
COPY package-lock.json .
RUN npm ci
COPY . .
RUN npm run build

FROM node:14.15.0-alpine

WORKDIR &#x2F;app

COPY --from&#x3D;builder &#x2F;app&#x2F;package.json .
COPY --from&#x3D;builder &#x2F;app&#x2F;package-lock.json .
RUN npm ci --production
COPY --from&#x3D;builder &#x2F;app&#x2F;.next .next

EXPOSE 3000

USER node

CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
If our app also contained a Next.js config file and a public folder, we would also need to copy them from the builder stage:
...
COPY --from&#x3D;builder &#x2F;app&#x2F;.next .
+ COPY --from&#x3D;builder &#x2F;app&#x2F;next.config.js .
+ COPY --from&#x3D;builder &#x2F;app&#x2F;public public
...
Comparing the sizes, we see that we removed 39MB of dev dependencies, not bad.
without multi-stage build
REPOSITORY                    TAG                 IMAGE ID            CREATED              SIZE
with-tailwindcss-app          latest              88089e6f965d        18 minutes ago      269MB
with multi-stage build
REPOSITORY                    TAG                 IMAGE ID            CREATED              SIZE
with-tailwindcss-app          latest              ba7307736fb0        25 seconds ago       230MB
(Optional) Purge node_modules from unnecessary files
Finally, to make our Docker image the leanest, we will purge our node modules from all the files which were included by the library authors and aren‚Äôt directly useful to our Docker image. For example, documentation files and READMEs, config files for Prettier and such, etc.
Note that this is not without risk as we could be removing files that we actually need to run the application correctly (we had a file named test.js that contained important code and it was mercilessly removed by the tool, which broke the application üòÖ).
We will add another stage called production-deps to make our node modules go through a diet with node-prune (GitHub repo). The list of files and folders that node-prune will remove is largely inspired by Yarn‚Äôs default list (generated through yarn autoclean --init).
To install node-prune, we need curl to be a locally available executable, so we can either choose a base image that contains it out of the box, or we can add it to node:14.15.0-alpine. Because we won‚Äôt need anything else, we will choose the latter.
FROM node:14.15.0-alpine as builder

WORKDIR &#x2F;app

COPY package.json .
COPY package-lock.json .
RUN npm ci
COPY . .
RUN npm run build

+ FROM node:14.15.0-alpine as production-deps

+ WORKDIR &#x2F;app

COPY --from&#x3D;builder &#x2F;app&#x2F;package.json .
COPY --from&#x3D;builder &#x2F;app&#x2F;package-lock.json .
RUN npm ci --production
+ # Add curl
+ RUN apk --no-cache add curl
+ # Install node-prune https:&#x2F;&#x2F;github.com&#x2F;tj&#x2F;node-prune
+ RUN curl -sf https:&#x2F;&#x2F;gobinaries.com&#x2F;tj&#x2F;node-prune | sh
+ RUN node-prune &#x2F;app

FROM node:14.15.0-alpine

WORKDIR &#x2F;app

+ COPY --from&#x3D;production-deps &#x2F;app&#x2F;package.json .
+ COPY --from&#x3D;production-deps &#x2F;app&#x2F;package-lock.json .
+ COPY --from&#x3D;production-deps &#x2F;app&#x2F;node_modules node_modules

COPY --from&#x3D;builder &#x2F;app&#x2F;.next .next

EXPOSE 3000

USER node

CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
Try it by building the image once more.
When node-prune ran, it printed out in the console that it removed 12MB:
...
Step 15&#x2F;24 : RUN node-prune &#x2F;app
 ---&gt; Running in 69e030ab8b70


         files total 14,269
       files removed 3,722
        size removed 12 MB
            duration 216ms
...
However, suprinsingly, a whopping 32MB were removed in comparison to our previous Dockerfile. (It seems node-prune‚Äôs tallying is not totally accurate when I tested locally as it removed 20.7 MB instead ‚Äî though it still doesn‚Äôt explain the other 11.3 MB ü§∑‚Äç‚ôÇÔ∏è)
$ docker image ls with-tailwindcss-app
REPOSITORY                    TAG                 IMAGE ID            CREATED              SIZE
with-tailwindcss-app          latest              c5e2081dba30        9 seconds ago        198MB
Let‚Äôs ensure our app is running well without the files node-prune removed and we can be on our merry way! üê≥ üéâ
Docker build checklist for JavaScript Devs
To summarise what we‚Äôve learnt so far, here‚Äôs a small checklist to review our own Docker build setups:
I have a comprehensive .dockerignore file
I use an appropriate base image
I decoupled the dependency installation step to improve caching
I decoupled the resulting built application from the build step
I purged the node_modules from unnecessary files
Time to flex! üí™ Show me your before and after Docker image sizes in the comments below!*
#### [TypeScript Tidbit: How to Overload an Imported Function](https:&#x2F;&#x2F;www.robincussol.com&#x2F;typescript-tidbit-how-to-overload-an-imported-function&#x2F;) 
*There are times when the type definitions shipped on DefinitelyTyped are not enough and this results in making the TypeScript compiler unhappy. Oh noes! üò≠
Functions Overloading Be Like, Photo by Luis Villasmil) on Unsplash.



Overload an imported function in TypeScript
But fear not! It is possible to overload a function imported from a different module (which could even be a local module&#x2F;file, not necessarily a node module) without ‚Äúpatching‚Äù the corresponding @types&#x2F;&lt;package&gt; type definitions.
import { someFunction } from &#39;module&#39;

&#x2F;&#x2F; the function overloading
declare module &#39;module&#39; {
  function someFunction() &#x2F;&#x2F; the overload you need
}

someFunction() &#x2F;&#x2F; with the overloaded version ‚úîÔ∏è
Example: overload Ramda‚Äôs compose function
A practical example is Ramda‚Äôs compose function. If you pass more than 7 functions to the function, you need to overload Ramda‚Äôs type definitions coming from @types&#x2F;ramda as the TypeScript compiler will report an error otherwise (TypeScript Playground Error Example).

DefinitelyTyped obviously cannot provide the type definitions for any number of arguments as compose accepts as many arguments as you want. So it‚Äôs up to you to inform the TypeScript compiler that this usage is actually okay. üòå
This can be done like in the example below (TypeScript Playground Working Example):
import * as R from &#39;ramda&#39;

&#x2F;&#x2F; overloading compose because &#x60;@types&#x2F;ramda&#x60; exposes types for up to 6 functions
declare module &#39;ramda&#39; {
  function compose&lt;V0, T1, T2, T3, T4, T5, T6, T7&gt;(
    fn6: (x: T6) &#x3D;&gt; T7,
    fn5: (x: T5) &#x3D;&gt; T6,
    fn4: (x: T4) &#x3D;&gt; T5,
    fn3: (x: T3) &#x3D;&gt; T4,
    fn2: (x: T2) &#x3D;&gt; T3,
    fn1: (x: T1) &#x3D;&gt; T2,
    fn0: (x0: V0) &#x3D;&gt; T1
  ): (x0: V0) &#x3D;&gt; T7
}

&#x2F;&#x2F; and now, we can use:
const someComplicatedResult &#x3D; R.compose&lt;V0, T1, T2, T3, T4, T5, T6, T7&gt;(
  fn6,
  fn5,
  fn4,
  fn3,
  fn2,
  fn1,
  fn0
)(&#39;üòÖ&#39;)
We can see from the screenshot below that the overload was correctly taken into consideration. üéâ

Caveat
I can imagine that if this is overused, things can become quickly intractable. So use it sparingly and always with a good reason why. Your future self will be happy to find an explanation in a comment above the overloading as it is kind of unusual. üòâ
I discovered this while refactoring @kiwicom&#x2F;splitster to TS (link to commit) and thought it might be useful to share. Hope it helped you!*
#### [Wax on, Wax off](https:&#x2F;&#x2F;www.robincussol.com&#x2F;wax-on-wax-off&#x2F;) 
*The reason I got into web development in the first place was the magical ‚ú® feeling you get when you see your code manifest in the browser.
In my current role at work, I don‚Äôt do much of that anymore. And I guess I kind of miss it. Especially the part when I am given a clearly defined outcome, with clear guidelines. Perks of being labelled a senior, I guess. üòú But I digress.
Since I started with React, a lot of things have happened in web development. At the moment, I‚Äôm especially interested in Svelte and TailwindCSS and after watching Rich Harris‚Äôs latest talk ‚ÄúFuturistic Web Development‚Äù, I needed an excuse to try Svelte ASAP.
Staying sharp with deliberate practice
To ensure my frontend skills don‚Äôt wither, I would like to spend dedicated time each week to practice on a set of frontend challenges and reflect on what I learnt from them.
Fortunately, I recently discovered FrontendMentor.io and this website offers quite the list of frontend challenges, ranging in difficulty and consistently with nice designs.
Improve your front-end coding skills by building real projects
Solve real-world HTML, CSS and JavaScript challenges whilst working to professional designs.
‚Äî FrontendMentor.io
And to practice with new frontend technologies, it‚Äôs good to find nice designs. But it‚Äôs even better when they come with a style guide and assets like pictures and icons. üòç
Here‚Äôs how it works:
You choose a challenge and download the files.
You attempt the challenge with the stack of your choice. Because the challenge files come with a style guide, the necessary pictures and icons, etc. it‚Äôs really easy to get started! (Unless you spend hours deciding which stack to use, of course üòÇ)
You upload it to GitHub and deploy your attempt on Vercel or Netlify.
Finally, you submit your solution through your challenges dashboard on the platform.
You can then get feedback on your submissions and provide reviews for other people‚Äôs submissions too, which I find really cool. I remember how difficult it was to get feedback when I was first learning web development.
Learnings
The last challenge I attempted looked pleasing on my eyes and I honestly did not expect I would learn so much from it. That makes me want to practice even more!
Check out the live deployment!


I encountered the following problems to complete the ‚ÄúSocial media dashboard with theme switcher‚Äù challenge:
setting up Svelte with TailwindCSS (thank you Swyx and Chris Dhanaraj)
implementing a toggle component from scratch
without accessibility in mind (where I started: W3Schools üòÖ)
with accessibility in mind (where I ended up: Smashing Magazine, though I‚Äôm not sure how to test if my current solution is the most accessible)
implementing a theme switcher in Svelte (inspiration from this Svelte REPL)
adding a border with a gradient to a block element (this requires using a CSS trick from nowhere else but CSS Tricks of course)
pulling my hair for not realising that you need the group class for group-hover: modifiers to apply in the children with Tailwind (thank you Estevan Maito)
how to extract the imported Svelte components‚Äô props‚Äô TypeScript types (that‚Äôs a mouthful!), instead of exporting and importing the types directly (TL;DR: use $props_def from the component)
&lt;script lang&#x3D;&quot;ts&quot;&gt;
  import MyComponent from &#39;.&#x2F;MyComponent.svelte&#39;;

  const data: MyComponent[&#39;$props_def&#39;][&#39;data&#39;] &#x3D; ...
&lt;&#x2F;script&gt;

&lt;MyComponent {data} &#x2F;&gt;

...
deploying a ‚Äúmonorepo‚Äù on Vercel without redeploying all the folders all the time by specifying the ‚ÄúIgnored Build Step‚Äù with something like git diff --quiet HEAD^ HEAD -- subfolder-in-monorepo to only rebuild the site if changes were made in subfolder-in-monorepo.
Here‚Äôs the GitHub repository where I will learn in public and add future challenges I will attempt. (Though I might need to rename this repository in the future as I just found this really nice list of project ideas to build with other platforms than FrontendMentor.io üòâ)
Let me know in the comments what your current deliberate practice is!*
#### [A Successful Side-Project: Lessons from Swyx](https:&#x2F;&#x2F;www.robincussol.com&#x2F;a-successful-side-project-lessons-from-swyx&#x2F;) 
*If you are on Twitter, chances are you came across this tweet by Daniel Vassallo
If you‚Äôre tempted by this, my advice to first-time creators is to start with a very small product: Something you can finish in 2 weeks and charge #### [Build Standalone Expo .apk and .ipa with Turtle CLI [deprecated]](https:&#x2F;&#x2F;www.robincussol.com&#x2F;build-standalone-expo-apk-ipa-with-turtle-cli&#x2F;) 
*This article was updated on February 7, 2023. NOTE: As of Expo SDK 47, the following method does not work any more. With the release of EAS‚Ä¶*
#### [Optimize your img tags with Eleventy Image and WebC](https:&#x2F;&#x2F;www.robincussol.com&#x2F;optimize-your-img-tags-with-eleventy-image-and-webc&#x2F;) 
*I am very excited about WebC and couldn‚Äôt wait to try out the corresponding Eleventy plugin. The first use-case I had in mind was to use‚Ä¶*
#### [Year in Review: 2021](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2021&#x2F;) 
*We‚Äôre already at the start of February 2022, but who says retrospectives need to be done on January 1st?! A lot of things happened in 202‚Ä¶*
#### [Python Dependencies for JavaScript Developers](https:&#x2F;&#x2F;www.robincussol.com&#x2F;python-dependencies-for-javascript-developers&#x2F;) 
*Recently, I needed to update an old Python codebase which had not been touched in 3 years! Of course, the dependencies were so outdated that‚Ä¶*
#### [How to Download a Brain with Pair Documenting](https:&#x2F;&#x2F;www.robincussol.com&#x2F;download-a-brain-with-pair-documenting&#x2F;) 
*When people leave the company, a lot of specific and ad hoc knowledge goes away with them. Unless there is already a strong documentation‚Ä¶*
#### [Year in Review: 2020](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2020&#x2F;) 
*2020, what a ride! I cannot believe 2020 has already finally come to an end: with the lockdowns and quarantines, time simultaneously flew by‚Ä¶*
#### [Docker for JavaScript Devs: How to Containerise Node.js Apps Efficiently](https:&#x2F;&#x2F;www.robincussol.com&#x2F;docker-for-js-devs-how-to-containerise-nodejs-apps-efficiently&#x2F;) 
*Docker is a really cool technology to have applications run the in the same, predictable context, ensuring the ‚Äúbut it works on my machine‚Ä¶*
#### [TypeScript Tidbit: How to Overload an Imported Function](https:&#x2F;&#x2F;www.robincussol.com&#x2F;typescript-tidbit-how-to-overload-an-imported-function&#x2F;) 
*There are times when the type definitions shipped on DefinitelyTyped are not enough and this results in making the TypeScript compiler‚Ä¶*
#### [Wax on, Wax off](https:&#x2F;&#x2F;www.robincussol.com&#x2F;wax-on-wax-off&#x2F;) 
*The reason I got into web development in the first place was the magical ‚ú® feeling you get when you see your code manifest in the browser‚Ä¶*
#### [A Successful Side-Project: Lessons from Swyx](https:&#x2F;&#x2F;www.robincussol.com&#x2F;a-successful-side-project-lessons-from-swyx&#x2F;) 
*If you are on Twitter, chances are you came across this tweet by Daniel Vassallo and it now seems everyone is writing a book! üòÑ Shawn Wang‚Ä¶*0 for it. The experience of getting paid for something you created, directly by consumers, will change you forever. https:&#x2F;&#x2F;t.co&#x2F;UbUD9ch4xQ
‚Äî Daniel Vassallo (@dvassallo) April 10, 2020
 
and it now seems everyone is writing a book! üòÑ
Shawn Wang took this advice and decided to go forth with his Coding Career Handbook (for which I‚Äôm grateful! It‚Äôs such a great book!). He shares his lessons and regrets in this talk at js.la üìΩÔ∏è, and here are my notes for my future self when I want to ship a side project (for money or not).
The How
There are 4 aspects:
Pre-selling
Delivering
Launching
Keeping going
Pre-selling - or your own Kickstarter
On the first day of this endeavour, take the time to find a topic, a name and put up a landing page with good marketing copy.
Pre-sell to your friends and close network: they are more likely to ask you about the state of the project and you would hate to disappoint. What‚Äôs more, you‚Äôve got their money which you would awkwardly need to return otherwise.
This is probably a good moment to decide which platform(s) you want to use to support the sale of your book. Gumroad and Podia seem to be fairly big players in that space.
If it is your first side project that you would like to ship for money, don‚Äôt fret too much over the pricing strategy; it is more of a distraction from writing and completing the project. Sticking to Daniel Vassallo‚Äôs recommendation of #### [Build Standalone Expo .apk and .ipa with Turtle CLI [deprecated]](https:&#x2F;&#x2F;www.robincussol.com&#x2F;build-standalone-expo-apk-ipa-with-turtle-cli&#x2F;) 
*This article was updated on February 7, 2023. NOTE: As of Expo SDK 47, the following method does not work any more. With the release of EAS‚Ä¶*
#### [Optimize your img tags with Eleventy Image and WebC](https:&#x2F;&#x2F;www.robincussol.com&#x2F;optimize-your-img-tags-with-eleventy-image-and-webc&#x2F;) 
*I am very excited about WebC and couldn‚Äôt wait to try out the corresponding Eleventy plugin. The first use-case I had in mind was to use‚Ä¶*
#### [Year in Review: 2021](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2021&#x2F;) 
*We‚Äôre already at the start of February 2022, but who says retrospectives need to be done on January 1st?! A lot of things happened in 202‚Ä¶*
#### [Python Dependencies for JavaScript Developers](https:&#x2F;&#x2F;www.robincussol.com&#x2F;python-dependencies-for-javascript-developers&#x2F;) 
*Recently, I needed to update an old Python codebase which had not been touched in 3 years! Of course, the dependencies were so outdated that‚Ä¶*
#### [How to Download a Brain with Pair Documenting](https:&#x2F;&#x2F;www.robincussol.com&#x2F;download-a-brain-with-pair-documenting&#x2F;) 
*When people leave the company, a lot of specific and ad hoc knowledge goes away with them. Unless there is already a strong documentation‚Ä¶*
#### [Year in Review: 2020](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2020&#x2F;) 
*2020, what a ride! I cannot believe 2020 has already finally come to an end: with the lockdowns and quarantines, time simultaneously flew by‚Ä¶*
#### [Docker for JavaScript Devs: How to Containerise Node.js Apps Efficiently](https:&#x2F;&#x2F;www.robincussol.com&#x2F;docker-for-js-devs-how-to-containerise-nodejs-apps-efficiently&#x2F;) 
*Docker is a really cool technology to have applications run the in the same, predictable context, ensuring the ‚Äúbut it works on my machine‚Ä¶*
#### [TypeScript Tidbit: How to Overload an Imported Function](https:&#x2F;&#x2F;www.robincussol.com&#x2F;typescript-tidbit-how-to-overload-an-imported-function&#x2F;) 
*There are times when the type definitions shipped on DefinitelyTyped are not enough and this results in making the TypeScript compiler‚Ä¶*
#### [Wax on, Wax off](https:&#x2F;&#x2F;www.robincussol.com&#x2F;wax-on-wax-off&#x2F;) 
*The reason I got into web development in the first place was the magical ‚ú® feeling you get when you see your code manifest in the browser‚Ä¶*
#### [A Successful Side-Project: Lessons from Swyx](https:&#x2F;&#x2F;www.robincussol.com&#x2F;a-successful-side-project-lessons-from-swyx&#x2F;) 
*If you are on Twitter, chances are you came across this tweet by Daniel Vassallo and it now seems everyone is writing a book! üòÑ Shawn Wang‚Ä¶*0 is probably enough.
Delivering
Thanks to your pre-writing, e.g. gathering notes, writing blog posts, etc., you already have some amount of the material you would like to include in the finished product. If it‚Äôs 25%, that means you still need to actually write the other 75%.
If possible, you should continue your ‚Äúnormal‚Äù activities, like shipping blog posts about other topics, appearing on podcasts, etc.
As you are writing, document your journey and give away one or two chapters for free as teasers. They‚Äôre a showcase for what you‚Äôre producing and could lead to podcast interviews for further exposure.
I was sharing my personal journey, lessons and milestones.
The best marketing is no marketing. No one wants to be sold anything.
‚Äî Alex West, in Two and a half years of building products
Daniel Vassallo‚Äôs advice to time box the project to 2 weeks is a very important idea: it is so easy to fall prey to scope creep by adding more and more topics to cover, especially when you are knowledgeable and excited about it! But this may well mean that you will never actually ship it. So harness your enthusiasm to provide an advantage.
Of course, you have the goal to ship that product, but what parts of your day actively contribute to that goal? If you‚Äôd like to get anything done, adopting a system to support your goals will go a long way.

Systems &gt; Goals, Source: https:&#x2F;&#x2F;jamesclear.com&#x2F;goals-systems
Launching
All your efforts are coming to an end‚Ä¶ or so you thought. Now is the time to launch your product! This phase requires an entirely different skill set so it‚Äôs good to have practice.
Having a great landing page is a must. A good resource on the subject is Rob Hope‚Äôs book Landing Page Hot Tips, and you can read Shawn‚Äôs review of it too.
Make sure to know the rules of the platforms you‚Äôre using to launch: Shawn‚Äôs Show HN post was doing very well and directing a lot of traffic to his landing page, but it was sadly taken down as no free sample of the book was available there (despite the blog posts).
If people leave out a negative comment, take this as an opportunity to turn their opinions around.
Shawn recommends watching Adam Wathan‚Äôs talk Nailing Your First Launch.
Keeping going
This is still not the end. What comes tomorrow? Next week, next month, next year?
You can ‚Äúlaunch‚Äù your product multiple times.
You can start a community around your book or product.
One of the biggest mistakes I see founders make is abandoning what already works and trying to take on a bigger challenge before they‚Äôre making enough money to develop products full-time.
Instead, focus on replicating the same type of product with another angle or in another market, maybe more than once.
‚Äî Rob Walling, in The Stairstep Approach to Bootstrapping
The Why
If you want to go from employee to entrepreneur, it is good to learn without too much risk how to do ‚Äúbusiness‚Äù without all the supports from other departments. For example, as a Software Engineer, you would not be focusing much on attracting leads for your company; there would be a design team and product managers making decisions about the product, etc.
When you‚Äôre launching a product on your own, you need to perform in all the roles and learn as you go. Especially when it comes to side-projects, developing a system to support your goals, and improving your discipline and focus.
You will get acquainted with the valley of despair and go through the emotional journey it describes; this is inevitable, and maybe even necessary, to create anything great.

 Source: https:&#x2F;&#x2F;john.do&#x2F;emotional-journey-creating&#x2F; 
This can be daunting but it will most likely be a rewarding experience, at least in terms of skills acquisition if not financially.
Make sure to define in advance your idea of success for this project: is it for the learning experience and to have a published book to your name, is it solely about making X amount of money?
Resources
üìΩÔ∏è Shawn‚Äôs talk, Lessons and Regrets From Shipping My $50000 Coronavirus Side Project
üìΩÔ∏è Adam Wathan‚Äôs talk, Nailing Your First Launch
üìì Rob Walling, The Stairstep Approach to Bootstrapping
üìì James Clear, Forget About Setting Goals. Focus on This Instead
üìì Alex West, Two and a half years of building products*0 is probably enough.
Delivering
Thanks to your pre-writing, e.g. gathering notes, writing blog posts, etc., you already have some amount of the material you would like to include in the finished product. If it‚Äôs 25%, that means you still need to actually write the other 75%.
If possible, you should continue your ‚Äúnormal‚Äù activities, like shipping blog posts about other topics, appearing on podcasts, etc.
As you are writing, document your journey and give away one or two chapters for free as teasers. They‚Äôre a showcase for what you‚Äôre producing and could lead to podcast interviews for further exposure.
I was sharing my personal journey, lessons and milestones.
The best marketing is no marketing. No one wants to be sold anything.
‚Äî Alex West, in Two and a half years of building products
Daniel Vassallo‚Äôs advice to time box the project to 2 weeks is a very important idea: it is so easy to fall prey to scope creep by adding more and more topics to cover, especially when you are knowledgeable and excited about it! But this may well mean that you will never actually ship it. So harness your enthusiasm to provide an advantage.
Of course, you have the goal to ship that product, but what parts of your day actively contribute to that goal? If you‚Äôd like to get anything done, adopting a system to support your goals will go a long way.

Systems &gt; Goals, Source: https:&#x2F;&#x2F;jamesclear.com&#x2F;goals-systems
Launching
All your efforts are coming to an end‚Ä¶ or so you thought. Now is the time to launch your product! This phase requires an entirely different skill set so it‚Äôs good to have practice.
Having a great landing page is a must. A good resource on the subject is Rob Hope‚Äôs book Landing Page Hot Tips, and you can read Shawn‚Äôs review of it too.
Make sure to know the rules of the platforms you‚Äôre using to launch: Shawn‚Äôs Show HN post was doing very well and directing a lot of traffic to his landing page, but it was sadly taken down as no free sample of the book was available there (despite the blog posts).
If people leave out a negative comment, take this as an opportunity to turn their opinions around.
Shawn recommends watching Adam Wathan‚Äôs talk Nailing Your First Launch.
Keeping going
This is still not the end. What comes tomorrow? Next week, next month, next year?
You can ‚Äúlaunch‚Äù your product multiple times.
You can start a community around your book or product.
One of the biggest mistakes I see founders make is abandoning what already works and trying to take on a bigger challenge before they‚Äôre making enough money to develop products full-time.
Instead, focus on replicating the same type of product with another angle or in another market, maybe more than once.
‚Äî Rob Walling, in The Stairstep Approach to Bootstrapping
The Why
If you want to go from employee to entrepreneur, it is good to learn without too much risk how to do ‚Äúbusiness‚Äù without all the supports from other departments. For example, as a Software Engineer, you would not be focusing much on attracting leads for your company; there would be a design team and product managers making decisions about the product, etc.
When you‚Äôre launching a product on your own, you need to perform in all the roles and learn as you go. Especially when it comes to side-projects, developing a system to support your goals, and improving your discipline and focus.
You will get acquainted with the valley of despair and go through the emotional journey it describes; this is inevitable, and maybe even necessary, to create anything great.

 Source: https:&#x2F;&#x2F;john.do&#x2F;emotional-journey-creating&#x2F; 
This can be daunting but it will most likely be a rewarding experience, at least in terms of skills acquisition if not financially.
Make sure to define in advance your idea of success for this project: is it for the learning experience and to have a published book to your name, is it solely about making X amount of money?
Resources
üìΩÔ∏è Shawn‚Äôs talk, Lessons and Regrets From Shipping My $50000 Coronavirus Side Project
üìΩÔ∏è Adam Wathan‚Äôs talk, Nailing Your First Launch
üìì Rob Walling, The Stairstep Approach to Bootstrapping
üìì James Clear, Forget About Setting Goals. Focus on This Instead
üìì Alex West, Two and a half years of building products*0 for it. The experience of getting paid for something you created, directly by consumers, will change you forever. https:&#x2F;&#x2F;t.co&#x2F;UbUD9ch4xQ
‚Äî Daniel Vassallo (@dvassallo) April 10, 2020
 
and Shawn Wang (@swyx) acted on it almost immediately to produce the Coding Career Handbook a few months later. I had followed him for some time on Twitter. His posts, conference talks and online presence in general always brought me value so I wanted to support his work. I was also really glad that half the proceeds would go to FreeCodeCamp. I got the Creators package, not entirely sure what to expect.
This was one of the best decisions of 2020.
As part of the Creators package, there have been regular workshops and they definitely spurred me further to action. After he invited Monica Lent to give a workshop about blogging for developers, I formed a resolve to try and publish a post every 2 weeks, as a way to transform my note-taking game into something more valuable. That‚Äôs when I resurrected my blog with 5 Tips to Start Blogging (for Devs).
A lot of my posts were shared at work and in the company‚Äôs external newsletter (thank you üôÇ) and for the most part, this resurection was successful, even though December was a bit of a hiatus in my blog publishing, as I started my newsletter, Robin‚Äôs Gazette.
I still have a lot to learn when it comes to creating online content and I am looking forward to continuing with this momentum. Whenever I need a reality check of what it takes to embark on this creator journey, I would have a read through Alex West‚Äôs story, as it‚Äôs so real, inspiring and humbling!
Joining online communities
The Coding Career Handbook is an amazing resource and I would like to write a proper review of the book some day; it contains so much valuable information that it would be hard to do it justice here.
What‚Äôs even more awesome about it is that it came with access to a community through Discord and Circle that Shawn manages really well as it keeps delivering value and furthers the book‚Äôs teachings and principles. And if that wasn‚Äôt enough, I met a few interesting people there who I‚Äôm looking forward to getting to know more in 2021.
Judging by how much the Coding Career community helped me to get real with my volitions, I also decided to join Monica Lent‚Äôs Blogging For Devs community because I‚Äôd like to take my blogging further. For example, my article about [Building] Standalone Expo .apk and .ipa with Turtle CLI broke the 10k unique visitor mark in December, through accidental SEO mostly. üéâ I‚Äôm hoping to get a little bit more intentional with SEO as it‚Äôs a great way to magnify the reach of your content. There are so many interesting and inspiring people in Monica‚Äôs community, as well as discussions and workshops about SEO, newsletters, monetization, and of course blogging‚Äîtopics I definitely want to dive deeper in in the new year!
Writing, writing, writing
If you have read this far, it has become pretty apparent that writing is now more than ever my main focus. I think it has been a tremendous source of clarity and success in the last year for me.
The resource that influenced my writing the most this year was this lecture by Larry McEnerney about the Craft of Writing Effectively (here‚Äôs a summary). Having done a PhD, I practiced the ‚Äúwrong‚Äù way of writing for a very long time. Focusing on what‚Äôs valuable for your intended readership makes so much sense.
As I mentioned in my first newsletter issue (let me know if you want a copy of it üòâ), design documents have been crazy useful at work. I must thank my colleage Tobi√°≈° Potoƒçek for bringing about this revolution. In this remote-only work environment, they were a great tool to discuss, make decisions and document them in a searchable manner. Every shortcut needed to be reckoned with and set against the bigger picture. Every quirk or contextual piece of information (which are critically important to understand past decisions or make new ones) are now recorded in writing.
Being a member of the Frontend Platform team, communicating as effectively as possible with the teams we serve was critically important too‚Äîespecially in such challenging times for a travel company in 2020. Most of that communication was done in writing through Slack and Google Documents. (Not to say it was always a smooth ride‚Ä¶)
A look ahead
In 2021, I will focus on staying in shape, physically and mentally. We will go for walks in nature more regularly with Emilia (we agreed at least once a month and have a list of places in Czechia!) I will cycle to work as much as possible, get back into the nice workout rhythm we had during the first lockdown and take care of my sleeping patterns (it‚Äôs all great to wake up earlier to write, but that means going to bed earlier too, Robin ;-)) I will take breaks when I‚Äôm getting overwhelmed, instead of resorting to my usual ‚Äústrategy‚Äù of pushing through until I‚Äôm burnt out.
In 2021, I will focus on maintaining the shift from content consumption to content creation. I want to continue publishing on my blog every 2 weeks as well as send my Gazette every 2 weeks. I will write a book to help PhD graduates transition to web development: I‚Äôm now further along the path (and my work seems to be appreciated :)), so it‚Äôs time to try and lift others as I climb.
In 2021, I will finally speak Slovak fluently to be able to speak to all our wedding guests (still to be planned‚Ä¶ so I got time, I guess :P) in their preferred language. (Robin of January 2022, you‚Äôre welcome!)
C‚Äôest parti!*
#### [Docker for JavaScript Devs: How to Containerise Node.js Apps Efficiently](https:&#x2F;&#x2F;www.robincussol.com&#x2F;docker-for-js-devs-how-to-containerise-nodejs-apps-efficiently&#x2F;) 
*Docker is a really cool technology to have applications run the in the same, predictable context, ensuring the ‚Äúbut it works on my machine‚Äù comments are a thing of the past. Not to mention how Docker integrates with Docker Compose and Kubernetes for larger-scale applications! But that‚Äôs for another day.
In this article, you will learn about some good principles to containerise Node.js apps efficiently. These principles are probably quite general and well-known, but they‚Äôre easy to overlook for beginners to Docker and Dockerfiles.
You will need to have Docker and Node.js installed locally to follow along comfortably.
Docker wants to make you happy, 
Photo by cottonbro from Pexels



Table of contents
Containerising a Next.js app (naive approach)

Docker Glossary
Optimising a Node.js app‚Äôs Docker image

Create a comprehensive .dockerignore file
Use an appropriate base image
Decouple the dependency installation step from application code
Decouple the build from the resulting built application
(Optional) Purge node_modules from unnecessary files
Docker build checklist for JavaScript Devs
Containerising a Next.js app (naive approach)
Let‚Äôs start with a simple Next.js application:
$ npm create next-app --use-npm
and let‚Äôs write the following into a file called Dockerfile at the root of the project:
FROM node:14.15.0

WORKDIR &#x2F;app

COPY . .
RUN npm ci
RUN npm run build

EXPOSE 3000

USER node

CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
Okay, what just happened? üòÑ
Docker Glossary
FROM &lt;image&gt;
WORKDIR &lt;some-path-in-the-container&gt;
COPY &lt;from-context&gt; &lt;to-container&gt;
WORKDIR directory
RUN &lt;command&gt;
docker build process only
EXPOSE &lt;port&gt;
documenting which port the app uses
USER &lt;user&gt;
root with superuser privileges); it‚Äôs good practice to use a different user to run the app.
CMD &lt;command&gt;
docker run &lt;image-tag&gt;, it is not executed during the build process.
Assuming we have Docker installed, we could now run
$ docker build --tag my-containerised-nextjs-app .
This command kindly asks the Docker daemon running on our machine to build the Dockerfile we just wrote with the files present in the current directry (the .) and to call that image my-containerised-nextjs-app (with the --tag flag).
After the build completed, run
$ docker run --rm -p 3000:3000 my-containerised-nextjs-app
and we should have our app running at http:&#x2F;&#x2F;localhost:3000.
This second command orders the Docker daemon to run the image named my-containerised-nextjs-app with port 3000 on my machine to correspond to port 3000 inside the container so that we can interact with our Next.js app. This port mapping is done through the -p hostPort:containerPort flag. Go ahead and change the port mapping and see if you can still access the app.
The --rm flag indicates that we do not want the Docker daemon to keep the container when we stop its execution (with CTRL+C); this is useful not to clog our machines with useless logs while developing.
Voil√†, we have containerised our Next.js app. The End. üéâ
Wait! Don‚Äôt leave, there‚Äôs more! üëá
Optimising a Node.js app‚Äôs Docker image
The section above does the job, but it‚Äôs not optimal. If we only have so few pipeline minutes and we don‚Äôt like wasting resources ‚ôªÔ∏è, this setup will eat more than is necessary. There are a few strategies to optimise a Dockerfile:
Create a comprehensive .dockerignore file
Use an appropriate base image
Decouple the dependency installation step from application code
Decouple the build from the resulting built application
(Optional) Purge node_modules from unnecessary files
Create a comprehensive .dockerignore file
If we look at the logs from building the Docker image, we could read:
Step 4&#x2F;8 : RUN npm ci
 ---&gt; Running in 559b499f0e2c
npm WARN prepare removing existing node_modules&#x2F; before installation
That means we copied the node_modules folder from our local context over to the Docker image being built. What‚Äôs more, npm ci removes them to make sure it works consistently. That is an indication that we should not copy the node_modules in the first place.
To let Docker know some files and folders should be ignored, we can list them in a .dockerignore file. For example, add the following to a file named .dockerignore:
node_modules
Run the build again and the warning disappeared.
What‚Äôs more, we can see how much less was sent to the Docker build context:
# BEFORE
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  101.8MB

# AFTER
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  400.4kB
In practice, we would want to add as many files as possible to our .dockerignore to ensure we‚Äôre not wasting time and energy on files which won‚Äôt be necessary for the build. This can include documentation files (e.g. *.md), configuration files which are only necessary when developing (e.g. .eslint*, .prettier*) as well as our Git history (e.g. .git).
With the following .dockerignore file:
node_modules
*.md
.git
we end up sending the bare minimum to the Docker daemon:
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  248.3kB
Use an appropriate base image
Docker images come in all shapes and sizes. When it comes to building or deploying our app, the smaller the size, the better. For our Next.js app, we don‚Äôt need all that‚Äôs available in node:14.15.0. For example, we don‚Äôt need git or curl. We can instead use the alpine flavour of that image, namely node:14.15.0-alpine.
The difference in size between node:14.15.0 and node:14.15.0-alpine is enormous!
REPOSITORY                    TAG                 SIZE
node                          14.15.0             943MB
node                          14.15.0-alpine      117MB
Our final containerised Next.js app will hence be much smaller thanks to this teeny-tiny modification of our Dockerfile:
- FROM node:14.15.0
+ FROM node:14.15.0-alpine

WORKDIR &#x2F;app

COPY . .
RUN npm ci
RUN npm run build

EXPOSE 3000

USER node

CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
For reference, if we want to inspect the size of the Docker images we have available locally, we can run docker image ls --all.
Our Docker image has size 1.05GB if we use node:14.15.0,
REPOSITORY                    TAG                 IMAGE ID            CREATED             SIZE
my-containerised-nextjs-app   latest              c78d43a2c5bc        15 seconds ago      1.05GB
and it drops to 229MB if we use node:14.15.0-alpine instead!
REPOSITORY                    TAG                 IMAGE ID            CREATED             SIZE
my-containerised-nextjs-app   latest              d0746ef6e8a4        21 seconds ago      229MB
Decouple the dependency installation step from application code
Our setup is already much better with a suitable .dockerignore file and with a much leaner base image. However, we haven‚Äôt made any changes to our package.json and the npm ci step always needs to run if make any changes to our application code.
This is because Docker caches each step as an intermediate Docker container. For example, if we were to run the build again (docker build --tag my-containerised-nextjs-app .), we would see that the cache is used for all steps, resulting in a nearly instant build (because nothing happened, really üòÑ):
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  248.3kB
Step 1&#x2F;8 : FROM node:14.15.0-alpine
 ---&gt; 9db54a688554
Step 2&#x2F;8 : WORKDIR &#x2F;app
 ---&gt; Using cache
 ---&gt; d5d4291dc699
Step 3&#x2F;8 : COPY . .
 ---&gt; Using cache
 ---&gt; b56455e98a93
Step 4&#x2F;8 : RUN npm ci
 ---&gt; Using cache
 ---&gt; ba4ab784f27e
Step 5&#x2F;8 : RUN npm run build
 ---&gt; Using cache
 ---&gt; a51c18594a20
Step 6&#x2F;8 : EXPOSE 3000
 ---&gt; Using cache
 ---&gt; 806dc06cbb6c
Step 7&#x2F;8 : USER node
 ---&gt; Using cache
 ---&gt; b86db08de717
Step 8&#x2F;8 : CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
 ---&gt; Using cache
 ---&gt; d0746ef6e8a4
Successfully built d0746ef6e8a4
Successfully tagged my-containerised-nextjs-app:latest
If we now modify anything in the folder that is not ignored thanks to our .dockerignore file, Docker will have to bust the cache from Step 3 onwards (the ‚ÄúUsing cache‚Äù expression is not printed any more). Let‚Äôs create an empty file and run the build again:
# create an empty file
$ touch file
# build again
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  248.8kB
Step 1&#x2F;8 : FROM node:14.15.0-alpine
 ---&gt; 9db54a688554
Step 2&#x2F;8 : WORKDIR &#x2F;app
 ---&gt; Using cache
 ---&gt; d5d4291dc699
Step 3&#x2F;8 : COPY . .
 ---&gt; e2b761bb08a6         # The cache is not used anymore
Step 4&#x2F;8 : RUN npm ci
 ---&gt; Running in b36f2511e117
...
To remedy this and ensure that npm ci runs only when necessary, we can first copy package.json and package-lock.json files, run npm ci, and then bring in the rest of the files to build the project:
FROM node:14.15.0-alpine

WORKDIR &#x2F;app

- COPY . .
+ COPY package.json .
+ COPY package-lock.json .
RUN npm ci
+ COPY . .
RUN npm run build

EXPOSE 3000

USER node

CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
After we modified the Dockerfile by applying the diff above, we see that Docker does not leverage the cache at all because the steps are different. This always happens when we modify the layers and&#x2F;or their order.
However, after running this build for a first time, subsequent builds will be much faster as the npm ci step will use the cache unless we modify package.json or package-lock.json:
# create another file to see when Docker stops using the cache
$ touch another-file
# run the build again
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  249.3kB
Step 1&#x2F;10 : FROM node:14.15.0-alpine
 ---&gt; 9db54a688554
Step 2&#x2F;10 : WORKDIR &#x2F;app
 ---&gt; Using cache
 ---&gt; d5d4291dc699
Step 3&#x2F;10 : COPY package.json .
 ---&gt; Using cache
 ---&gt; 139b5a611c0b
Step 4&#x2F;10 : COPY package-lock.json .
 ---&gt; Using cache
 ---&gt; 5bc380de1397
Step 5&#x2F;10 : RUN npm ci
 ---&gt; Using cache
 ---&gt; dff6b2da4bdc
Step 6&#x2F;10 : COPY . .
 ---&gt; 08911c09b40f
Step 7&#x2F;10 : RUN npm run build
 ---&gt; Running in f5374a54d9ad

&gt; my-app@0.1.0 build &#x2F;app
&gt; next build
...
Decouple the build from the resulting built application
For this section to make more sense, we will create another Next.js app that uses some dev dependencies which are necessary only when building the app but not when running it in production.
$ npm create next-app --use-npm --example with-tailwindcss with-tailwindcss-app
Copy the Dockerfile and .dockerignore files created in the other example into with-tailwindcss-app. Build the Docker image and run it to make sure it‚Äôs working well before continuing:
$ docker build --tag with-tailwindcss-app .
$ docker run --rm -p 3000:3000 with-tailwindcss-app
As we can see in the package.json file, we have a few dependencies which are only ever going to be used when building our app. We won‚Äôt need them in the final Docker image. So let‚Äôs get rid of them!
We are going to leverage multi-stage Docker builds. They sound more complicated than they are :)
Here‚Äôs a multi-stage build Dockerfile: in the builder container, we install dependencies and build our app, and in the second stage, we copy relevant files from the builder to our final image and install only production dependencies.
FROM node:14.15.0-alpine as builder

WORKDIR &#x2F;app

COPY package.json .
COPY package-lock.json .
RUN npm ci
COPY . .
RUN npm run build

FROM node:14.15.0-alpine

WORKDIR &#x2F;app

COPY --from&#x3D;builder &#x2F;app&#x2F;package.json .
COPY --from&#x3D;builder &#x2F;app&#x2F;package-lock.json .
RUN npm ci --production
COPY --from&#x3D;builder &#x2F;app&#x2F;.next .next

EXPOSE 3000

USER node

CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
If our app also contained a Next.js config file and a public folder, we would also need to copy them from the builder stage:
...
COPY --from&#x3D;builder &#x2F;app&#x2F;.next .
+ COPY --from&#x3D;builder &#x2F;app&#x2F;next.config.js .
+ COPY --from&#x3D;builder &#x2F;app&#x2F;public public
...
Comparing the sizes, we see that we removed 39MB of dev dependencies, not bad.
without multi-stage build
REPOSITORY                    TAG                 IMAGE ID            CREATED              SIZE
with-tailwindcss-app          latest              88089e6f965d        18 minutes ago      269MB
with multi-stage build
REPOSITORY                    TAG                 IMAGE ID            CREATED              SIZE
with-tailwindcss-app          latest              ba7307736fb0        25 seconds ago       230MB
(Optional) Purge node_modules from unnecessary files
Finally, to make our Docker image the leanest, we will purge our node modules from all the files which were included by the library authors and aren‚Äôt directly useful to our Docker image. For example, documentation files and READMEs, config files for Prettier and such, etc.
Note that this is not without risk as we could be removing files that we actually need to run the application correctly (we had a file named test.js that contained important code and it was mercilessly removed by the tool, which broke the application üòÖ).
We will add another stage called production-deps to make our node modules go through a diet with node-prune (GitHub repo). The list of files and folders that node-prune will remove is largely inspired by Yarn‚Äôs default list (generated through yarn autoclean --init).
To install node-prune, we need curl to be a locally available executable, so we can either choose a base image that contains it out of the box, or we can add it to node:14.15.0-alpine. Because we won‚Äôt need anything else, we will choose the latter.
FROM node:14.15.0-alpine as builder

WORKDIR &#x2F;app

COPY package.json .
COPY package-lock.json .
RUN npm ci
COPY . .
RUN npm run build

+ FROM node:14.15.0-alpine as production-deps

+ WORKDIR &#x2F;app

COPY --from&#x3D;builder &#x2F;app&#x2F;package.json .
COPY --from&#x3D;builder &#x2F;app&#x2F;package-lock.json .
RUN npm ci --production
+ # Add curl
+ RUN apk --no-cache add curl
+ # Install node-prune https:&#x2F;&#x2F;github.com&#x2F;tj&#x2F;node-prune
+ RUN curl -sf https:&#x2F;&#x2F;gobinaries.com&#x2F;tj&#x2F;node-prune | sh
+ RUN node-prune &#x2F;app

FROM node:14.15.0-alpine

WORKDIR &#x2F;app

+ COPY --from&#x3D;production-deps &#x2F;app&#x2F;package.json .
+ COPY --from&#x3D;production-deps &#x2F;app&#x2F;package-lock.json .
+ COPY --from&#x3D;production-deps &#x2F;app&#x2F;node_modules node_modules

COPY --from&#x3D;builder &#x2F;app&#x2F;.next .next

EXPOSE 3000

USER node

CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
Try it by building the image once more.
When node-prune ran, it printed out in the console that it removed 12MB:
...
Step 15&#x2F;24 : RUN node-prune &#x2F;app
 ---&gt; Running in 69e030ab8b70


         files total 14,269
       files removed 3,722
        size removed 12 MB
            duration 216ms
...
However, suprinsingly, a whopping 32MB were removed in comparison to our previous Dockerfile. (It seems node-prune‚Äôs tallying is not totally accurate when I tested locally as it removed 20.7 MB instead ‚Äî though it still doesn‚Äôt explain the other 11.3 MB ü§∑‚Äç‚ôÇÔ∏è)
$ docker image ls with-tailwindcss-app
REPOSITORY                    TAG                 IMAGE ID            CREATED              SIZE
with-tailwindcss-app          latest              c5e2081dba30        9 seconds ago        198MB
Let‚Äôs ensure our app is running well without the files node-prune removed and we can be on our merry way! üê≥ üéâ
Docker build checklist for JavaScript Devs
To summarise what we‚Äôve learnt so far, here‚Äôs a small checklist to review our own Docker build setups:
I have a comprehensive .dockerignore file
I use an appropriate base image
I decoupled the dependency installation step to improve caching
I decoupled the resulting built application from the build step
I purged the node_modules from unnecessary files
Time to flex! üí™ Show me your before and after Docker image sizes in the comments below!*
#### [TypeScript Tidbit: How to Overload an Imported Function](https:&#x2F;&#x2F;www.robincussol.com&#x2F;typescript-tidbit-how-to-overload-an-imported-function&#x2F;) 
*There are times when the type definitions shipped on DefinitelyTyped are not enough and this results in making the TypeScript compiler unhappy. Oh noes! üò≠
Functions Overloading Be Like, Photo by Luis Villasmil) on Unsplash.



Overload an imported function in TypeScript
But fear not! It is possible to overload a function imported from a different module (which could even be a local module&#x2F;file, not necessarily a node module) without ‚Äúpatching‚Äù the corresponding @types&#x2F;&lt;package&gt; type definitions.
import { someFunction } from &#39;module&#39;

&#x2F;&#x2F; the function overloading
declare module &#39;module&#39; {
  function someFunction() &#x2F;&#x2F; the overload you need
}

someFunction() &#x2F;&#x2F; with the overloaded version ‚úîÔ∏è
Example: overload Ramda‚Äôs compose function
A practical example is Ramda‚Äôs compose function. If you pass more than 7 functions to the function, you need to overload Ramda‚Äôs type definitions coming from @types&#x2F;ramda as the TypeScript compiler will report an error otherwise (TypeScript Playground Error Example).

DefinitelyTyped obviously cannot provide the type definitions for any number of arguments as compose accepts as many arguments as you want. So it‚Äôs up to you to inform the TypeScript compiler that this usage is actually okay. üòå
This can be done like in the example below (TypeScript Playground Working Example):
import * as R from &#39;ramda&#39;

&#x2F;&#x2F; overloading compose because &#x60;@types&#x2F;ramda&#x60; exposes types for up to 6 functions
declare module &#39;ramda&#39; {
  function compose&lt;V0, T1, T2, T3, T4, T5, T6, T7&gt;(
    fn6: (x: T6) &#x3D;&gt; T7,
    fn5: (x: T5) &#x3D;&gt; T6,
    fn4: (x: T4) &#x3D;&gt; T5,
    fn3: (x: T3) &#x3D;&gt; T4,
    fn2: (x: T2) &#x3D;&gt; T3,
    fn1: (x: T1) &#x3D;&gt; T2,
    fn0: (x0: V0) &#x3D;&gt; T1
  ): (x0: V0) &#x3D;&gt; T7
}

&#x2F;&#x2F; and now, we can use:
const someComplicatedResult &#x3D; R.compose&lt;V0, T1, T2, T3, T4, T5, T6, T7&gt;(
  fn6,
  fn5,
  fn4,
  fn3,
  fn2,
  fn1,
  fn0
)(&#39;üòÖ&#39;)
We can see from the screenshot below that the overload was correctly taken into consideration. üéâ

Caveat
I can imagine that if this is overused, things can become quickly intractable. So use it sparingly and always with a good reason why. Your future self will be happy to find an explanation in a comment above the overloading as it is kind of unusual. üòâ
I discovered this while refactoring @kiwicom&#x2F;splitster to TS (link to commit) and thought it might be useful to share. Hope it helped you!*
#### [Wax on, Wax off](https:&#x2F;&#x2F;www.robincussol.com&#x2F;wax-on-wax-off&#x2F;) 
*The reason I got into web development in the first place was the magical ‚ú® feeling you get when you see your code manifest in the browser.
In my current role at work, I don‚Äôt do much of that anymore. And I guess I kind of miss it. Especially the part when I am given a clearly defined outcome, with clear guidelines. Perks of being labelled a senior, I guess. üòú But I digress.
Since I started with React, a lot of things have happened in web development. At the moment, I‚Äôm especially interested in Svelte and TailwindCSS and after watching Rich Harris‚Äôs latest talk ‚ÄúFuturistic Web Development‚Äù, I needed an excuse to try Svelte ASAP.
Staying sharp with deliberate practice
To ensure my frontend skills don‚Äôt wither, I would like to spend dedicated time each week to practice on a set of frontend challenges and reflect on what I learnt from them.
Fortunately, I recently discovered FrontendMentor.io and this website offers quite the list of frontend challenges, ranging in difficulty and consistently with nice designs.
Improve your front-end coding skills by building real projects
Solve real-world HTML, CSS and JavaScript challenges whilst working to professional designs.
‚Äî FrontendMentor.io
And to practice with new frontend technologies, it‚Äôs good to find nice designs. But it‚Äôs even better when they come with a style guide and assets like pictures and icons. üòç
Here‚Äôs how it works:
You choose a challenge and download the files.
You attempt the challenge with the stack of your choice. Because the challenge files come with a style guide, the necessary pictures and icons, etc. it‚Äôs really easy to get started! (Unless you spend hours deciding which stack to use, of course üòÇ)
You upload it to GitHub and deploy your attempt on Vercel or Netlify.
Finally, you submit your solution through your challenges dashboard on the platform.
You can then get feedback on your submissions and provide reviews for other people‚Äôs submissions too, which I find really cool. I remember how difficult it was to get feedback when I was first learning web development.
Learnings
The last challenge I attempted looked pleasing on my eyes and I honestly did not expect I would learn so much from it. That makes me want to practice even more!
Check out the live deployment!


I encountered the following problems to complete the ‚ÄúSocial media dashboard with theme switcher‚Äù challenge:
setting up Svelte with TailwindCSS (thank you Swyx and Chris Dhanaraj)
implementing a toggle component from scratch
without accessibility in mind (where I started: W3Schools üòÖ)
with accessibility in mind (where I ended up: Smashing Magazine, though I‚Äôm not sure how to test if my current solution is the most accessible)
implementing a theme switcher in Svelte (inspiration from this Svelte REPL)
adding a border with a gradient to a block element (this requires using a CSS trick from nowhere else but CSS Tricks of course)
pulling my hair for not realising that you need the group class for group-hover: modifiers to apply in the children with Tailwind (thank you Estevan Maito)
how to extract the imported Svelte components‚Äô props‚Äô TypeScript types (that‚Äôs a mouthful!), instead of exporting and importing the types directly (TL;DR: use $props_def from the component)
&lt;script lang&#x3D;&quot;ts&quot;&gt;
  import MyComponent from &#39;.&#x2F;MyComponent.svelte&#39;;

  const data: MyComponent[&#39;$props_def&#39;][&#39;data&#39;] &#x3D; ...
&lt;&#x2F;script&gt;

&lt;MyComponent {data} &#x2F;&gt;

...
deploying a ‚Äúmonorepo‚Äù on Vercel without redeploying all the folders all the time by specifying the ‚ÄúIgnored Build Step‚Äù with something like git diff --quiet HEAD^ HEAD -- subfolder-in-monorepo to only rebuild the site if changes were made in subfolder-in-monorepo.
Here‚Äôs the GitHub repository where I will learn in public and add future challenges I will attempt. (Though I might need to rename this repository in the future as I just found this really nice list of project ideas to build with other platforms than FrontendMentor.io üòâ)
Let me know in the comments what your current deliberate practice is!*
#### [A Successful Side-Project: Lessons from Swyx](https:&#x2F;&#x2F;www.robincussol.com&#x2F;a-successful-side-project-lessons-from-swyx&#x2F;) 
*If you are on Twitter, chances are you came across this tweet by Daniel Vassallo
If you‚Äôre tempted by this, my advice to first-time creators is to start with a very small product: Something you can finish in 2 weeks and charge #### [Build Standalone Expo .apk and .ipa with Turtle CLI [deprecated]](https:&#x2F;&#x2F;www.robincussol.com&#x2F;build-standalone-expo-apk-ipa-with-turtle-cli&#x2F;) 
*This article was updated on February 7, 2023.
NOTE: As of Expo SDK 47, the following method does not work any more.
With the release of EAS builds, it is necessary to have Internet access to create standalone Expo apps locally; see Running builds on your own infrastructure on Expo docs.
You can still use the React Native way to build applications locally after generating necessary files with expo prebuild (see this GitHub comment on expo&#x2F;eas-cli).
This post will not receive further updates.
A great way to start writing React Native applications is to use Expo. You don‚Äôt even need to setup a development environment to get started thanks to Snack, an online React Native application editor. Your application is public by default. Sharing has never been that easy.

Brown turtle swimming underwater, Photo by Wexor Tmg on Unsplash
However, you would like to share an application exclusively with some people, not through an app store or any public channel. One possibility is to share the built application file, e.g. an .apk file for Android and an .ipa file for iOS.
Expo is so great a service (oh, and did I mention free?) that they offer you to publish your app on their servers and if you wanted to build these .apk and .ipa files, you could do so on their servers.
The flow looks like:
$ expo publish
$ expo build:&lt;PLATFORM&gt;
and you obtain a nice URL to the artifact created for you when the build finishes.
But, again, this is public. On a server you don‚Äôt control. (Although, if you made the same mistake as I did, a ticket to their support can delete any files you had wished to keep private. ü•á)
Luckily for you, Expo provide the tools they are using on their servers for free (did I mention they‚Äôre great!?). The build process relies on a CLI tool called turtle-cli. It is open-source and available on GitHub.
Let us go through an example of how to create your application file without resorting to Expo servers. That means you can keep an application private and also build your application while being offline.
The following instructions assume you have bash and Node.js available. In my experience, using the current LTS version of Node.js (version 16.13.2) works best.
Caveat: I could not complete the iOS instructions to the end since I do not have an Apple Developer paid account.
We will go through the following steps:
1. Turtle CLI
2. Create a dummy application
3. Publish Expo app on local server
4. Create APK file ‚Äì Android

4.1. Prerequisites
4.2. Create Keystore
4.3. Build APK
5. Create IPA file ‚Äì iOS

5.1. Prerequisites
5.2. Create Signing keys
5.3. Build IPA
6. Distribute and install

6.1. on Android
6.2. on iOS
Resources
A condensed version of these steps without much explanation or context is available on the accompanying GitHub repository.
1. Turtle CLI
To install Turtle CLI, run
$ npm install -g turtle-cli
This will make command turtle globally available on your system. To verify it was correctly installed, let‚Äôs print the version:
$ turtle -V
0.24.3
2. Create a dummy application
Let‚Äôs create a dummy application using Expo CLI. In your terminal, run
$ npx expo init ExampleApplication
It will ask you a few questions:
# Expo version 5.0.3
npx expo init ExampleApplication
? Choose a template: ‚Ä∫ - Use arrow-keys. Return to submit.
    ----- Managed workflow -----
‚ùØ   blank               a minimal app as clean as an empty canvas
    blank (TypeScript)  same as blank but with TypeScript configuration
    tabs (TypeScript)   several example screens and tabs using react-navigation and TypeScript
    ----- Bare workflow -----
    minimal             bare and minimal, just the essentials to get you started
The blank template is enough for us.
If you have yarn installed, Expo will use it by default to install dependencies. You can use the --npm flag in the init command if you‚Äôd prefer to use npm instead.
Once it‚Äôs done setting up your project, you should see the following output in the terminal:
‚úÖ Your project is ready!

To run your project, navigate to the directory and run one of the following yarn commands.

- cd ExampleApplication
- yarn start
Run the commands and let‚Äôs verify the generated boilerplate works in our emulators:


To finish setting up the dummy application, you need to configure the app.json file because some configuration keys must be specified to build a standalone app.
If you would like to know more about these standalone app specific configurations, check Expo‚Äôs documentation for iOS and for Android.
For this tutorial, it is only necessary to specify the keys &quot;bundleIdentifier&quot; under &quot;ios&quot;, and &quot;package&quot; under &quot;android&quot; in your app.json file:
...
    &quot;ios&quot;: {
      ...
      &quot;bundleIdentifier&quot;: &quot;com.example.exampleApplication&quot;,
      ...
    },
    &quot;android&quot;: {
      ...
      &quot;package&quot;: &quot;com.example.example_application&quot;,
      ...
    }
...
3. Publish Expo app on local server
Expo has this notion of app publishing: it allows you to share a link or QR code to Expo‚Äôs website and anyone can run your app through the Expo app on their devices.
Having your app published is also necessary for over-the-air (OTA) updates, allowing seamless updates to your application, and to publish your application (i.e. building your application files on Expo servers).
You would typically run
$ expo login -u $EXPO_USERNAME -p $EXPO_PASSWORD
$ expo publish
and your app would then be available at https:&#x2F;&#x2F;expo.dev&#x2F;&lt;EXPO_USERNAME&gt;&#x2F;&lt;APP_NAME&gt;.
To have your Expo app ‚Äúpublished‚Äù on your local server (and avoid public publishing on Expo servers), you will use a different command:
$ expo export --dev --public-url &lt;your-url-here&gt;
The --dev flag is necessary because you will use a non-https server to publish your Expo app. Note that this prevents you from using OTA updates.
Your server does not need to be running for this step, but you do need to know which local URL you are going to use in advance. This tuorial assumes you will run a local server at http:&#x2F;&#x2F;127.0.0.1:8000.
You can now export the app:
$ expo export --dev --public-url http:&#x2F;&#x2F;127.0.0.1:8000
...
Export was successful. Your exported files can be found in dist
This command will create a dist directory containing the iOS and Android JavaScript bundles and the different assets you are using.
dist
‚îú‚îÄ‚îÄ android-index.json
‚îú‚îÄ‚îÄ assets
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ 13685372945d816a2b474fc082fd9aaa
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ 140c53a7643ea949007aa9a282153849
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ ...
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ fdbedb7e67aa7c0ecad83d9c2fa4dfba
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ fdc01171a7a7ea76b187afcd162dee7d
‚îú‚îÄ‚îÄ bundles
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ android-a9defc54fb2ffdb7e6fdaf5b8d0be751.js
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ ios-a29c3e4ac97a2abdc5208fd4f06e7708.js
‚îî‚îÄ‚îÄ ios-index.json
You can now serve the dist directory on your web server, e.g.
$ npx http-server -p 8000 dist
Note: if for some reason you need to re-export your application (because you modified your app.json file since the last export, for instance), you must first remove the dist directory:
# assuming you are at the root of the project
$ rm -rf dist
$ expo export --dev --public-url http:&#x2F;&#x2F;127.0.0.1:8000
4. Create APK file ‚Äì Android
First, verify that your local server is running. For example, you should see a similar output:
$ curl http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;android-index.json
{&quot;name&quot;:&quot;ExampleApplication&quot;,&quot;slug&quot;:&quot;ExampleApplication&quot;,&quot;version&quot;:&quot;1.0.0&quot;,&quot;orientation&quot;:&quot;portrait&quot;,&quot;icon&quot;:&quot;.&#x2F;assets&#x2F;icon.png&quot;,&quot;splash&quot;:{&quot;image&quot;:&quot;.&#x2F;assets&#x2F;splash.png&quot;,&quot;resizeMode&quot;:&quot;contain&quot;,&quot;backgroundColor&quot;:&quot;#ffffff&quot;,&quot;imageUrl&quot;:&quot;http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;assets&#x2F;201a91bd1740bb1d6a1dbad049310724&quot;}...
4.1. Prerequisites
For Turtle CLI to work correctly to create an .apk file for Android, you need to make sure the following dependency is installed: Java Development Kit (version 8).
If you know which Expo SDK version you are going to use, you can run
$ turtle setup:android --sdk-version &lt;SDK-VERSION&gt;
This will take some time:
$ turtle setup:android --sdk-version 44.0.5
Jan 20 20:22:45 turtle[61127] INFO:  Downloading Android SDK
  platform: &quot;android&quot;
  buildPhase: &quot;setting up environment&quot;
downloading [&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;] 98% 0.2s
...
Jan 20 20:26:56 turtle[61127] INFO:  shell app for SDK 44.0.5 doesn&#39;t exist, downloading...
  platform: &quot;android&quot;
  buildPhase: &quot;setting up environment&quot;
downloading [&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; ] 95% 0.5sJan 20 20:27:08 turtle[61127] INFO:  shell app has been downloaded
  platform: &quot;android&quot;
  buildPhase: &quot;setting up environment&quot;
...
Jan 20 20:29:51 turtle[61127] INFO:  dependencies installed!
  platform: &quot;android&quot;
  buildPhase: &quot;setting up environment&quot;
Jan 20 20:29:51 turtle[61127] INFO:  it&#39;s all set!
  platform: &quot;android&quot;
  buildPhase: &quot;setting up environment&quot;
In the meantime, you can move on to the next section.
4.2. Create Keystore
Just like any other Android app, this app must be signed with some security certificates. In Android-land, as far as I understand, it‚Äôs called a keystore. The instructions to create such a keystore file are available on the Android Developers documentation.
Basically, just create a dummy Android project with Android Studio, and then go to Build &gt; Generate Signed Bundle &#x2F; APK.... Choose APK and press Next. The UI will ask you which app you want to sign, and your dummy app should be pre-selected. On the same screen, press on the button Create new...; just fill the form and you‚Äôre good to go.
Alternatively, if you have keytool CLI utility available on your system (you can check that by trying keytool --help in your terminal), you can generate a keystore file with the following command
$ keytool -genkeypair -v -keystore keystore.jks -alias keyalias -keyalg RSA -keysize 2048 -validity 9125
Enter keystore password:
Re-enter new password:
What is your first and last name?
  [Unknown]:
What is the name of your organizational unit?
  [Unknown]:
What is the name of your organization?
  [Unknown]:
What is the name of your City or Locality?
  [Unknown]:
What is the name of your State or Province?
  [Unknown]:
What is the two-letter country code for this unit?
  [Unknown]:
Is CN&#x3D;Unknown, OU&#x3D;Unknown, O&#x3D;Unknown, L&#x3D;Unknown, ST&#x3D;Unknown, C&#x3D;Unknown correct?
  [no]:  yes

Generating 2,048 bit RSA key pair and self-signed certificate (SHA256withRSA) with a validity of 9,125 days
	for: CN&#x3D;Unknown, OU&#x3D;Unknown, O&#x3D;Unknown, L&#x3D;Unknown, ST&#x3D;Unknown, C&#x3D;Unknown
Enter key password for &lt;keyalias&gt;
	(RETURN if same as keystore password):
Re-enter new password:
[Storing keystore.jks]

Warning:
The JKS keystore uses a proprietary format. It is recommended to migrate to PKCS12 which is an industry standard format using &quot;keytool -importkeystore -srckeystore keystore.jks -destkeystore keystore.jks -deststoretype pkcs12&quot;.
As a TL;DR, you can just download a dummy certificate on the accompanying repository under should-be-private&#x2F;keystore.jks, for testing purposes only. The keystore file is hugely important if you ever plan to submit your app to Google Play store: it‚Äôs the only way to assert you‚Äôre the rightful owner to provide new updates to your app.
File: keystore.jks
keystorepassword
keyalias
keypassword
4.3. Build APK
Make sure that you are serving the dist directory on http:&#x2F;&#x2F;127.0.0.1:8000 as explained above in Run a local server. Assuming you are using bash as your shell, from the root of your project, run:
EXPO_ANDROID_KEYSTORE_PASSWORD&#x3D;&quot;keystorepassword&quot; \
EXPO_ANDROID_KEY_PASSWORD&#x3D;&quot;keypassword&quot; \
turtle build:android \
  --type apk \
  --keystore-path .&#x2F;should-be-private&#x2F;keystore.jks \
  --keystore-alias &quot;keyalias&quot; \
  --allow-non-https-public-url \
  --public-url http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;android-index.json
Note that you need the flag --public-url to point to http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;android-index.json. In addition, it is also necessary to use the --type apk flag to produce an APK file since version 0.8.0 of turtle-cli.
The build may take some time:
Jan 20 20:38:17 turtle[61719] INFO:  Using manifest: {
  &quot;name&quot;: &quot;ExampleApplication&quot;,
  &quot;slug&quot;: &quot;ExampleApplication&quot;,
  &quot;version&quot;: &quot;1.0.0&quot;,
  &quot;orientation&quot;: &quot;portrait&quot;,
  &quot;icon&quot;: &quot;.&#x2F;assets&#x2F;icon.png&quot;,
...
Jan 20 20:38:51 turtle[61719] INFO:  Starting a Gradle Daemon (subsequent builds will be faster)
  platform: &quot;android&quot;
  buildPhase: &quot;running gradle&quot;
  source: &quot;stdout&quot;
...
Once it finishes, you should see this output in your terminal:
Jan 20 20:43:19 turtle[61719] INFO:  copied build to ~&#x2F;expo-apps&#x2F;@anonymous__ExampleApplication-7f15208a56304617a200538cacd2e50e-signed.apk
  platform: &quot;android&quot;
  buildPhase: &quot;copying build artifact&quot;
This message gives you the location of your built .apk file. You can now move on to the Distribute and install section below if you are not interested in creating an .ipa file for iOS.
Note: if the build fails because of some Gradle error, like Could not resolve com.theartofdev.edmodo:android-image-cropper:2.8.0, make sure to open Android Studio and update the Android SDK and SDK Build-Tools. This should fix it.
5. Create IPA file ‚Äì iOS
First, verify that your local server is running, e.g.
$ curl http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;ios-index.json
{&quot;name&quot;:&quot;ExampleApplication&quot;,&quot;slug&quot;:&quot;ExampleApplication&quot;,&quot;version&quot;:&quot;1.0.0&quot;,&quot;orientation&quot;:&quot;portrait&quot;,&quot;icon&quot;:&quot;.&#x2F;assets&#x2F;icon.png&quot;,&quot;splash&quot;:{&quot;image&quot;:&quot;.&#x2F;assets&#x2F;splash.png&quot;,&quot;resizeMode&quot;:&quot;contain&quot;,&quot;backgroundColor&quot;:&quot;#ffffff&quot;,&quot;imageUrl&quot;:&quot;http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;assets&#x2F;201a91bd1740bb1d6a1dbad049310724&quot;...
5.1. Prerequisites
For Turtle CLI to work correctly to create an .ipa file for iOS, you need to make sure your system is macOS and that the following dependencies are installed:
Xcode (version 13.2.1 or newer)
fastlane
Note: make sure that you have run Xcode at least once and that you have agreed to the license agreements.
For more details, see Expo‚Äôs documentation.
If you know which Expo SDK version you are going to use, you can run
$ turtle setup:ios --sdk-version &lt;SDK-VERSION&gt;
If it errors out, saying that you don‚Äôt have the right version of fastlane, try re-installing fastlane (guide). The version used in this article is fastlane 2.200.0.
This will take some time:
$ turtle setup:ios --sdk-version 44.0.5
Jan 20 21:18:03 turtle[48488] INFO:  shell app for SDK 44.0.5 doesn&#39;t exist, downloading...
  platform: &quot;ios&quot;
  buildPhase: &quot;setting up environment&quot;
downloading [                    ] 1% 8514.8s
...
...
Jan 20 21:24:58 turtle[48488] INFO:  it&#39;s all set!
  platform: &quot;ios&quot;
  buildPhase: &quot;setting up environment&quot;
In the meantime, you can move on to the next section.
5.2. Create Signing keys
This assumes you have an Apple Developer Account, which is a paid account.
To create your distribution certificate file, or .p12 file, you can follow this guide.
You will also need your Apple Team ID and a Provisioning Profile that you can generate through Xcode as well. This other guide covers in greater lengths what all these cerficates are for and how to obtain them.

Note that the provisioning profile expires in 6 days in my case, since I do not have an Apple Developer paid account.
Sadly, it is not possible to share example files.
5.3. Build IPA
Make sure that you are serving the dist directory on http:&#x2F;&#x2F;127.0.0.1:8000 as explained Run a local server. Assuming you are using bash as your shell, from the root of your project, run:
EXPO_IOS_DIST_P12_PASSWORD&#x3D;&quot;&lt;PASSWORD HERE&gt;&quot; \
turtle build:ios \
  --team-id YOUR_TEAM_ID \
  --dist-p12-path &#x2F;path&#x2F;to&#x2F;your&#x2F;dist&#x2F;cert.p12 \
  --provisioning-profile-path &#x2F;path&#x2F;to&#x2F;your&#x2F;provisioning&#x2F;profile.mobileprovision \
  --allow-non-https-public-url \
  --public-url http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;ios-index.json
Note that you need the flag --public-url to point to http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;ios-index.json.
Once the build finishes successfully, you should get the path to your .ipa file.
6. Distribute and install
6.1. on Android
Take your .apk and share it through some Google Drive link or other medium of your choice.
If you download this .apk file through an Android device, it should offer you to install the application on the device.
Trick: if the URL is really not friendly to type, and for whatever reason you have to type it manually, use a QR Code generator (e.g. http:&#x2F;&#x2F;www.barcode-generator.org&#x2F;) and your device‚Äôs camera to simplify your life!
Alternatively, if you connect an Android device to your computer, you should be able to run:
$ adb devices
emulator-5554	device
to list all your connected Android devices and emulators. (In my case, only the emulator is ‚Äúconnected‚Äù.)
It is then possible to install the .apk file by running:
$ adb -s emulator-5554 install ~&#x2F;expo-apps&#x2F;@anonymous__ExampleApplication-7f15208a56304617a200538cacd2e50e-signed.apk
Performing Streamed Install
Success

6.2. on iOS
Caveat: I could not fully test this section, so my apologies if this does not work as intended.
Since you should have Xcode, the most promising solution is in this guide. It also mentions other ways to install the .ipa file.
That‚Äôs it for now, thank you for reading this far. You will find below the resources mentioned in this article.
If you have any questions or comments, please drop me a line on Twitter. I shall reply as soon as possible.
Stay tuned for more.
Resources
Expo: https:&#x2F;&#x2F;expo.dev
Turtle CLI: https:&#x2F;&#x2F;github.com&#x2F;expo&#x2F;turtle#readme
Expo‚Äôs guide to Building Standalone apps: https:&#x2F;&#x2F;docs.expo.dev&#x2F;classic&#x2F;building-standalone-apps&#x2F;
Configuring app.json: https:&#x2F;&#x2F;docs.expo.dev&#x2F;workflow&#x2F;configuration&#x2F;
Expo docs to configure CI with Turtle CLI: https:&#x2F;&#x2F;docs.expo.dev&#x2F;classic&#x2F;turtle-cli&#x2F;
Expo docs to host application on your own servers: https:&#x2F;&#x2F;docs.expo.dev&#x2F;distribution&#x2F;hosting-your-app&#x2F;
How to create a keystore for Android: https:&#x2F;&#x2F;developer.android.com&#x2F;studio&#x2F;publish&#x2F;app-signing#generate-key
Supporting GitHub repository: https:&#x2F;&#x2F;github.com&#x2F;RobinCsl&#x2F;build-standalone-expo-app&#x2F;*
#### [Optimize your img tags with Eleventy Image and WebC](https:&#x2F;&#x2F;www.robincussol.com&#x2F;optimize-your-img-tags-with-eleventy-image-and-webc&#x2F;) 
*I am very excited about WebC and couldn‚Äôt wait to try out the corresponding Eleventy plugin.
The first use-case I had in mind was to use Eleventy Image for the native HTML img tag, that can be generated from Markdown and without shortcode. I had done this before, for my unpublished blog rewrite that‚Äôs been waiting to be released for ever now, through hooking up Eleventy Image into a markdown-it plugin. It wasn‚Äôt pretty as markdown-it plugins are pretty alien to me.
But now, this can be done ‚Äúnatively‚Äù, √†-la-Cloudflare Workers for your native HTML elements!
UPDATE (04&#x2F;11&#x2F;2022): After sharing this article on Twitter, Zach Leatherman pointed out there should be an easier solution. It didn‚Äôt work as expected at first, which put me on a journey to fix the underlying issue in @11ty&#x2F;webc. I‚Äôm very pleased to share that my first contribution to the project was accepted and landed in v0.6.0. As a result, the content of the last section was updated to remove the dirty data file hack with _data&#x2F;Image.js: your image optimization logic can now truly live in a single file.
The documentation for WebC mentioned this use-case exactly, in the shape of this innocent puzzle:

‚ÄúFree idea: use the Eleventy Image plugin to return optimized markup‚Äù
So it should be easy, right?
Remember this lad?
I have discovered a truly remarkable proof of this theorem which this margin is too small to contain.
Pierre de Fermat, cca. 1637
No need to wait 3 centuries for the answer this time, because it was ultimately not so hard‚Ä¶ But I did struggle and wrestle with it for a few hours :D
Anyway, hope that can be useful to someone.
If you want to see the finished implementation, you can get it on GitHub: RobinCsl&#x2F;11ty-webc-img-demo.
Set up a WebC-powered Eleventy project
or take a shortcut by cloning this repo and going to the 01-initial folder.
Initialise the project
Let‚Äôs start with an empty folder and add a basic package.json file:
mkdir 11ty-webc-img
cd 11ty-webc-img
npm init -y
We need to install the latest canary release (2.0.0-canary.16 at the time of writing) of Eleventy as well as the WebC plugin:
 npm install @11ty&#x2F;eleventy@2.0.0-canary.16 @11ty&#x2F;eleventy-plugin-webc
Configure Eleventy
We will now configure Eleventy to use the WebC plugin by creating a .eleventy.js file with the following content:
const webc &#x3D; require(&quot;@11ty&#x2F;eleventy-plugin-webc&quot;);

module.exports &#x3D; function(eleventyConfig) {
	eleventyConfig.addPlugin(webc, {
		components: &quot;_includes&#x2F;webc&#x2F;*.webc&quot;
	});
}

In particular, components in the _includes&#x2F;webc folder will be available in the global scope, no need to import them explicitly!
Scaffold a minimal project
To finish our setup, we create a layout file and a simple WebC component which we will use in a basic page, to make sure our setup is working correctly.
We create the layout file under _includes&#x2F;layouts&#x2F;base.webc. It is a simple HTML template with the @html&#x3D;&quot;content&quot;  WebC directive set on the body tag. (See my-layout.webc in the docs)
&lt;!doctype html&gt;
&lt;html lang&#x3D;&quot;en&quot;&gt;
	&lt;head&gt;
		&lt;meta charset&#x3D;&quot;utf-8&quot;&gt;
		&lt;title&gt;Eleventy Images + WebC rocks!&lt;&#x2F;title&gt;
	&lt;&#x2F;head&gt;
	&lt;body @html&#x3D;&quot;content&quot;&gt;&lt;&#x2F;body&gt;
&lt;&#x2F;html&gt;
We now create a simple WebC component and write the following content, taken from the promising website 11ty.webc.fun, in _includes&#x2F;webc&#x2F;site-footer.webc :
&lt;footer&gt;
  &lt;p&gt;&amp;copy; 2022 Yours Truly.&lt;&#x2F;p&gt;
&lt;&#x2F;footer&gt;
Finally, we create our basic page at the root of the project in index.webc:
---
layout: layouts&#x2F;base.webc
---

Fun with WebC

&lt;site-footer&gt;&lt;&#x2F;site-footer&gt;
If all went according to plan, we should now be able to run
npx @11ty&#x2F;eleventy --serve
in the terminal and see the following output in our browser at http:&#x2F;&#x2F;localhost:8080:

Create an img.webc component
or check the code on GitHub in the 02-img folder if you want to see the code right away.
In this section, we will create our img.webc override for the native img HTML tag and use Eleventy Image within it.
As a starting point, we will use the example from the documentation from which the screenshot at the start of this post is taken. In a new file _includes&#x2F;webc&#x2F;img.webc, add the following:
&lt;script webc:type&#x3D;&quot;render&quot; webc:is&#x3D;&quot;template&quot;&gt;
function() {
	if(!this.alt) {
		throw new Error(&quot;[img.webc] the alt text is missing, no fun&quot;);
	}
	return &#x60;&lt;img src&#x3D;&quot;${this.src}&quot; alt&#x3D;&quot;${this.alt}&quot;&gt;&#x60;;
}
&lt;&#x2F;script&gt;
This essentially verifies at build-time that all your images have a non-empty alt text, neat!
Let‚Äôs add a ‚Äúbroken‚Äù image to our index page, in index.webc, to verify that this works correctly:
---
layout: layouts&#x2F;base.webc
---

Fun with WebC

&lt;img src&#x3D;&quot;https:&#x2F;&#x2F;images.unsplash.com&#x2F;photo-1627224286457-923944e5b159?auto&#x3D;format&amp;fit&#x3D;crop&amp;w&#x3D;387&amp;q&#x3D;80&quot;&gt;

&lt;site-footer&gt;&lt;&#x2F;site-footer&gt;
And indeed, running npx @11ty&#x2F;eleventy --serve yields an expected error:
$ npx @11ty&#x2F;eleventy --serve
[11ty] Problem writing Eleventy templates: (more in DEBUG output)
[11ty] 1. Having trouble rendering webc template .&#x2F;index.webc (via TemplateContentRenderError)
[11ty] 2. [img.webc] the alt text is missing, no fun (via Error)
Add an alt text (‚Äúpossum hanging from a palm leaf‚Äù should work) and try again. Oh no! Another error:
$ npx @11ty&#x2F;eleventy --serve  
[11ty] Problem writing Eleventy templates: (more in DEBUG output)
[11ty] 1. Having trouble rendering webc template .&#x2F;index.webc (via TemplateContentRenderError)
[11ty] 2. Circular dependency error: You cannot use &lt;img&gt; inside the definition for .&#x2F;_includes&#x2F;webc&#x2F;img.webc (via Error)
That makes sense, when you think about it! All our .webc files are processed by WebC, so if we return an img tag in a img.webc component, the compiler would work indefinitely to get to the bottom of it, because it‚Äôs turtles img all the way down!
Luckily for us, we can let WebC know when its job is done through the webc:raw attribute:
Use webc:raw to opt-out of WebC template processing for all child content of the current node. Notably, attributes on the current node will be processed.
Let‚Äôs fix it in _includes&#x2F;webc&#x2F;img.webc:
  &lt;script webc:type&#x3D;&quot;render&quot; webc:is&#x3D;&quot;template&quot;&gt;
  function() {
	  if(!this.alt) {
	  	throw new Error(&quot;[img.webc] the alt text is missing, no fun&quot;);
	  }
-	  return &#x60;&lt;img src&#x3D;&quot;${this.src}&quot; alt&#x3D;&quot;${this.alt}&quot;&gt;&#x60;;
+	  return &#x60;&lt;img webc:raw src&#x3D;&quot;${this.src}&quot; alt&#x3D;&quot;${this.alt}&quot;&gt;&#x60;;
  }
  &lt;&#x2F;script&gt;
It compiles now! üéâ
Here‚Äôs the expected output:

We have effectively augmented our img tag to verify at build time that alt text is present.
Let‚Äôs now add Eleventy Image to the party!
Optimize your HTML img with Eleventy Image
or check the code on GitHub in the 03-final folder if you want to see my solution.
Let‚Äôs first install Eleventy Image in our project:
npm install @11ty&#x2F;eleventy-img
We will more or less copy the example from the Eleventy Image docs in the Asynchronous Shortcode section, because our JavaScript render function can be async!
In the file _includes&#x2F;webc&#x2F;img.webc, let‚Äôs add the following:
  &lt;script webc:type&#x3D;&quot;render&quot; webc:is&#x3D;&quot;template&quot;&gt;
-   function() {
-      if(!this.alt) {
-          throw new Error(&quot;[img.webc] the alt text is missing, no fun&quot;);
-      }
-      return &#x60;&lt;img webc:raw src&#x3D;&quot;${this.src}&quot; alt&#x3D;&quot;${this.alt}&quot;&gt;&#x60;;
+    const Image &#x3D; require(&quot;@11ty&#x2F;eleventy-img&quot;);
+    module.exports &#x3D; async function() {
+      let metadata &#x3D; await Image(this.src, {
+        widths: [300],
+        formats: [&quot;avif&quot;, &quot;jpeg&quot;],
+        outputDir: &quot;_site&#x2F;img&#x2F;&quot;,
+      });

+      let imageAttributes &#x3D; {
+        alt: this.alt,
+        sizes: &quot;100vw&quot;,
+        loading: &quot;lazy&quot;,
+        decoding: &quot;async&quot;,
+      };

+      &#x2F;&#x2F; You bet we throw an error on missing alt in &#x60;imageAttributes&#x60; (alt&#x3D;&quot;&quot; works okay)
+      return Image.generateHTML(metadata, imageAttributes);
  }
  &lt;&#x2F;script&gt;

Note that we harcoded the value for  sizes in the imageAttributes object, and prepended both src and alt by this to wire things up correctly. We also instruct the Image plugin to output optimized images in our _site&#x2F;img&#x2F; folder directly for them to be available when using the following markup:
&lt;img alt&#x3D;&quot;a lovely image&quot; src&#x3D;&quot;&#x2F;img&#x2F;hash-width.jpeg&quot;&gt;
Let‚Äôs run npx @11ty&#x2F;eleventy --serve once more:
$  npx @11ty&#x2F;eleventy --serve
[11ty] Problem writing Eleventy templates: (more in DEBUG output)
[11ty] 1. Having trouble rendering webc template .&#x2F;index.webc (via TemplateContentRenderError)
[11ty] 2. Circular dependency error: You cannot use &lt;img&gt; inside the definition for .&#x2F;_includes&#x2F;webc&#x2F;img.webc (via Error)
That error sounds familiar, right?
We need to tell WebC to ignore img tags generated by Eleventy Image, and it‚Äôs as simple as adding &quot;webc:raw&quot;: true to the imageAttributes object:
  &lt;script webc:type&#x3D;&quot;render&quot; webc:is&#x3D;&quot;template&quot;&gt;
  const Image &#x3D; require(&quot;@11ty&#x2F;eleventy-img&quot;);
  module.exports &#x3D; async function() {
    let metadata &#x3D; await Image(this.src, {
      widths: [300],
      formats: [&quot;avif&quot;, &quot;jpeg&quot;],
      outputDir: &quot;_site&#x2F;img&#x2F;&quot;,
    });
  
    let imageAttributes &#x3D; {
      alt: this.alt,
      sizes: &quot;100vw&quot;,
      loading: &quot;lazy&quot;,
      decoding: &quot;async&quot;,
+     &quot;webc:raw&quot;: true,
    };
  
    &#x2F;&#x2F; You bet we throw an error on missing alt in &#x60;imageAttributes&#x60; (alt&#x3D;&quot;&quot; works okay)
    return Image.generateHTML(metadata, imageAttributes);
  }
  &lt;&#x2F;script&gt;
And we‚Äôre done!! (Note how the image now aligns perfectly with localhost:8080 #IncontestableTruth)

with corresponding markup:
&lt;!doctype html&gt;
&lt;html lang&#x3D;&quot;en&quot;&gt;
&lt;head&gt;
        &lt;meta charset&#x3D;&quot;utf-8&quot;&gt;
        &lt;title&gt;Eleventy Images + WebC rocks!&lt;&#x2F;title&gt;
    &lt;&#x2F;head&gt;
    &lt;body&gt;Fun with WebC

&lt;picture&gt;&lt;source type&#x3D;&quot;image&#x2F;avif&quot; srcset&#x3D;&quot;&#x2F;img&#x2F;SwdsuTpRbT-300.avif 300w&quot;&gt;&lt;img alt&#x3D;&quot;possum hanging from a palm leaf&quot; loading&#x3D;&quot;lazy&quot; decoding&#x3D;&quot;async&quot; src&#x3D;&quot;&#x2F;img&#x2F;SwdsuTpRbT-300.jpeg&quot; width&#x3D;&quot;300&quot; height&#x3D;&quot;450&quot;&gt;&lt;&#x2F;picture&gt;


&lt;footer&gt;
  &lt;p&gt;¬© 2022 Yours Truly.&lt;&#x2F;p&gt;
&lt;&#x2F;footer&gt;

&lt;&#x2F;body&gt;
&lt;&#x2F;html&gt;
Parting words
I am so excited to explore further the possibilities of using WebC to augment other native HTML elements.
This article only scratches the surface when it comes to the img tag. You could pass props down from the markup to Eleventy Image and control the behaviour of the image optimization. But we can now augment our native img tag without much hassle as it‚Äôs all in one file.
It even works with Markdown images (and yields the cutest webpage ever):
  ---
  layout: layouts&#x2F;base.webc
  ---
  
  Fun with WebC
  
  &lt;img alt&#x3D;&quot;possum hanging from a palm leaf&quot; src&#x3D;&quot;https:&#x2F;&#x2F;images.unsplash.com&#x2F;photo-1627224286457-923944e5b159?auto&#x3D;format&amp;fit&#x3D;crop&amp;w&#x3D;387&amp;q&#x3D;80&quot;&gt;
  
+  &lt;template webc:type&#x3D;&quot;11ty&quot; 11ty:type&#x3D;&quot;md&quot;&gt;
+  
+   ![&#39;close-up of a baby possum among ferns&#39;](https:&#x2F;&#x2F;images.pexels.com&#x2F;photos&#x2F;13960994&#x2F;pexels-photo-13960994.jpeg)
+  
+  &lt;&#x2F;template&gt;
  
  &lt;site-footer&gt;&lt;&#x2F;site-footer&gt;
  

All the more reasons to optimize your images now!
Find the code supporting this article on the RobinCsl&#x2F;11ty-webc-img-demo repository.*
#### [Year in Review: 2021](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2021&#x2F;) 
*We‚Äôre already at the start of February 2022, but who says retrospectives need to be done on January 1st?! A lot of things happened in 2021, both personally and professionally. Time to reflect and remember.
Personal üë∂üíçüìÑüìÉüìëüìú
This first part is the personal stuff, so if you don‚Äôt care about it, you can skip to the professional stuff instead. And if you don‚Äôt care about that too, why are you here? üòÇ
Welcome, L√©onard!
In January of 2021 came the great news that we were expecting a baby and a few months later, my son L√©onard came to this world! It‚Äôs been a few months now and it‚Äôs insane how much this event changed our lives.
It‚Äôs quite amazing to witness a human being‚Äôs awakening to the world, I do feel privileged.
Of course, it‚Äôs not just rainbows and unicorns.
Sleeping as much as I want is now a distant memory&#x2F;dream, though I‚Äôve been surprised that it‚Äôs actually quite possible to operate without the amount of sleep I used to get.
Having free time for side projects and writing almost vanished (and usually eats up time when I should sleep instead, while it‚Äôs allowed by baby-boss). I don‚Äôt know how other parents manage but time just flies by.
One thing‚Äôs for sure, L√©onard makes sure I keep fit and exercise regularly (a promise I made myself at the beginning of last year, right):
it‚Äôs quite a normal day when I need to go up and down the 4 floors of the block of flats we live in (and when it‚Äôs at night, I have this game where I switch the lights on and go up and down within the 3 minutes they‚Äôre programmed to stay on; naturally, after my 4th round trip, I usually do the last flight of stairs in the dark üòÖüòÆ‚Äçüí®).
it‚Äôs also quite a normal day when I need to carry him in my arms for 10- to 20-minute stretches, while doing squats, at least 2 or 3 times.
Coach L√©onard can ask for these drills at any time of the day (and night‚Ä¶), he says it‚Äôs for my own good. My knees and hips and back and arms tend to disagree.
Paperwork, paperwork, paperwork
In 2021, I‚Äôve had time to think so many times if the amount of paperwork we‚Äôre doomed to go through is some sort of devilish scheme to keep people busy on the boring stuff. It definitely does not help when you‚Äôre an expat.
If you had told me having a baby would generate so much paperwork chores, I probably would not have believed you. The story goes that we wanted to do an early recognition of fatherhood for me to be officially recognised as the father of my child to be.
In France, as a French person, this is a 5-minute visit to my local townhall, easy-peasy.
In Czechia, as a foreigner, this would have required tons of documents that also needed translating by a certified translator (aka costs some money).
Since we were engaged, and you‚Äôre officially recognised as the father when having a baby as a married couple, we thought we might as well go through paperwork hell to get married.
It did not disappoint.
Our child was due some time in the middle of September, so we had almost the entire year to get married, should be easy, right.
Being so diligent, we got in touch with the French embassy to understand what we need to do to get married in April:
weddings at the embassy are quite a rare thing, you should get married through the local authorities
getting married in Prague is like getting married in Las Vegas (say what?)
Only to realise at the end of June that:
babies aren‚Äôt always born around the due date
it‚Äôs already the end of June
Let‚Äôs just say that we managed to be on time paperwork-wise for our wedding at the beginning of August (ever heard of the necessary 2-week public display of your intent on getting married, during which somebody has the right to oppose it, to get the paper allowing a French person to marry‚Ä¶?), but the ‚Äúgetting married like in Las Vegas‚Äù was lost on us.
Professionally
Promo
In January last year, I got promoted to Staff Engineer at Kiwi.com. Pretty crazy to me to think that I started working in the industry in September 2017. Even though titles only mean so much, it‚Äôs still a nice recognition that I bring value to the company.
Pair Documenting
I definitely learnt a lot about infrastructure and Kubernetes, which might seem overkill for a frontend platformer, but there was a void to fill when my ex-colleague Adam Jani≈° left, so I put on my newbie hat and pair-documented Adam‚Äôs knowledge throughout his notice period. I still refer or point people to that document quite regularly, it‚Äôs an investment that keeps on giving after all these months!
This was also the first time I tried to add original schematics&#x2F;pictures and Excalidraw made it super fun and easy!
Robin‚Äôs Gazette
My newsletter, Robin‚Äôs Gazette, kept going quite well! It turned one year old on December, 9th! üéÇ
In 2021, I published 25 issues (784 emails in total!), and went from 9 subscribers to 49 at the end of the year!
Given the quite low volume of subscribers, my average open rate and click rate are pretty okay (though they are ‚Äúall-time‚Äù performance metrics):
70.35% open rate,
24.38% click rate.
Even though it‚Äôs always some amount of work, I deem it worthy of my time as I get to practice writing and I always learn something slightly more deeply than if I just scrolled Twitter or Hacker News. This continues my efforts from ‚Äúarchivist to creator‚Äù that I mentioned in my last retro.
Special mention to Shawn @swyx Wang for being so encouraging along the way!
My goal for this year is to continue on that path, though I do need to put some effort into advertising it better:
the subscribe form is hard to find on my website,
the content is short-lived and behind closed doors ‚Äì so I should repurpose it to an extent,
start marketing it more (instead of the infrequent tweets I‚Äôve tried at some point).
One small change for this year: I now send the Gazette every other Friday instead of every other Wednesday.
Some of the feedback I received üòä
‚ÄúSuch a great newsletter this week Robin, amazing job!‚Äù
‚ÄúStill enjoying the newsletter!‚Äù
Blog
The blog was a bit quiet last year, I only published 3 posts and refreshed my most read article about building APK files locally for Expo projects (it recently crossed 20K views in its lifetime! üéâ).
They were:
Python Dependencies for JavaScript Developers
How to Download a Brain with Pair Documenting (already mentioned above)
Year in Review: 2020
I really hope to start writing more again on the blog because the SEO game takes a long time for Google to start recommending your stuff: I saw more traffic to my How to Test Your ESLint Config and Get your Own Sentry Playground articles, and they were written in September 2020!
Started working on a course
In the last retro, I announced that I planned to write a book. That did not happen‚Ä¶ üòÖ
Instead, I started working on a video course which essentially replicates the now defunct Margarita project from scratch (which was the subject of this article on my blog), showcasing how to build cross-platform web and native mobile apps through React Native and React Native Web.
This was the occasion to spend some time weeks watching all the microphone reviews on YouTube, all the Audacity and Obs Studio tutorials for sound production, to ultimately produce a half-finished tutorial on YouTube (the best 33 seconds of your life, trust me).
Source



Ever since my son was born, I‚Äôve had little time to focus for longer than 5-minute stretches outside of work, so this project has lost steam right now. I hope I‚Äôll manage to finish it in the first semester!
A look back and forward
Revisiting some of my plans for 2021 and making some for 2022.
Family
As much as I would love to work on side-projects and such, my family comes first, and I want to keep it that way. I‚Äôm excited to continue discovering what my next workouts will be, courtesy of Coach L√©onard! (Seriously, I‚Äôve got some arms now! üí™)
I cannot wait for my son to meet all his grand-parents, aunts and uncles in France later this year!
Nehovor√≠m pliynule po slovensky
aka I don‚Äôt speak Slovak fluently.
One of my goals was to make sure I would be able to speak to all my wedding guests in their preferred language (amongst French, English and Slovak). Because of the above (and COVID not helping‚Ä¶), the guest list was actually pretty small and my mastery of Slovak would not be entirely necessary to do well on my goal. So I guess I will learn better alongside my son this year whilst we wait for the big party?
Almost no SAD this past year
Come December, I usually feel pretty burnt out and in dire need of vacation to recharge. Somehow, in December 2021, I did not feel like that at all.
My new family life provided some amount of distractions from work. Even though that increased my context switching throughout the days and the nights were not as restful, it somehow created some distance between work and me. Or maybe because living with a newborn forces you to live in the moment, one day at a time‚Ä¶ üòÖ
Writing
Less paperwork, more blog posts. ü§û
Keep the newsletter going, and make it better, faster, stronger!
Improve my note taking system, which is a bit chaotic and not really systematic at the moment.
Learning Rust
In 2021, I started dabbling with Rust, mostly through the really great WIP book from Luca Palmieri, Zero To Production In Rust. It assumed some knowledge so I sometimes struggled had fun filling in the gaps.
Given where the JS ecosystem is going in terms of tooling (oh yeah, in 2021 I started this Awesome List of JavaScript Tooling Not Written In JavaScript on GitHub ‚Äì 667 stars so far!), I think it‚Äôs important to explore beyond the confines of JavaScript&#x2F;TypeScript. So I‚Äôd like to spend more time with Rust this coming year!
Lots of things to be grateful for last year and lots to look forward to this year. C‚Äôest parti !*
#### [Python Dependencies for JavaScript Developers](https:&#x2F;&#x2F;www.robincussol.com&#x2F;python-dependencies-for-javascript-developers&#x2F;) 
*Recently, I needed to update an old Python codebase which had not been touched in 3 years! Of course, the dependencies were so outdated that the Dockerfile of the project wouldn‚Äôt build. My JavaScript knowledge did not help me much:
how could I do a yarn upgrade-interactive --latest to update dependencies?
where‚Äôs the dependency lockfile?
why do we need to compile C-libraries for Python dependencies?
Luckily for me, my colleague Ondrej patiently explained how to approach these questions.
Using a virtual environment
TL;DR: pip installs packages globally unless we activate a virtual environment.
In Python, the default package manager is call pip and it installs packages from the Python Package Index, shortened to Pypi. The equivalent in JavaScript land would be npm and npmjs.com.
By default, pip installs packages system-wide. This contrasts with the need to pass a --global flag to npm.
To remedy that, we can use a local Python environment (a bit like having our node_modules folder in a JavaScript project). The following command will create a virtual environment in a venv folder in our current directory:
# Create the venv folder container the virtual environment
$ python3 -m venv venv
To make sure pip knows it should install packages in this virtual environment, we must activate it. Depending on your shell, you should source the appropriate activate file in venv&#x2F;bin:
activate, for Bash and ZSH,
activate.fish, for Fish Shell,
activate.csh, for csh
Activate.ps1, for PowerShell.
In my case, I will source the one for ZSH:
$ source venv&#x2F;bin&#x2F;activate
Now, pip install will install packages in the local folder instead of targeting the global scope. My ‚ÄúPython node_modules folder‚Äù is venv&#x2F;lib&#x2F;python3.8&#x2F;site-packages&#x2F;.
Dependencies in Python
TL;DR: use pip-compile to generate a lockfile and pip-sync to install dependencies from that lockfile
To deal with dependencies, we must install the pip-tools package in our virtual environment:
pip install pip-tools
This will allow us to use pip-compile and pip-sync later on.
Once that‚Äôs done, we could for example decide to start a Django project, ‚Äúthe web framework for perfectionists with deadlines‚Äù. The latest version of the package at the time of writing is 3.2.5. Let‚Äôs create our Python equivalent of a package.json file to express our project needs the Django package pinned to version 3.2.5:
# requirements.in
django&#x3D;&#x3D;3.2.5
Note: the better equivalent to a package.json would be a setup.py file, since it contains additional fields like the name of the local package, its version, etc. but we just want to write down the dependencies.
EDIT #1: it‚Äôs apparently not common practice to pin dependency versions in requirements.in, just in case you really need to (if there are breaking changes for example). Thanks for pointing it out, Ondrej.
To generate a corresponding lockfile of the transitive dependencies of Django, we can run the following command:
pip-compile --output-file requirements.txt requirements.in
This will create the following requirements.txt file:
#
# This file is autogenerated by pip-compile with python 3.8
# To update, run:
#
#    pip-compile --output-file&#x3D;requirements.txt requirements.in
#
asgiref&#x3D;&#x3D;3.4.1
    # via django
django&#x3D;&#x3D;3.2.5
    # via -r requirements.in
pytz&#x3D;&#x3D;2021.1
    # via django
sqlparse&#x3D;&#x3D;0.4.1
    # via django

Now that we have this file, we can finally retrieve and install the packages with the following command:
pip-sync
Note: if you try to run pip-sync without a requirements.txt, you will get the following error:
No requirement files given and no requirements.txt found in the current directory
It is indeed necessary to run pip-compile before.
Updating dependencies
Similar to npm oudated, we can list the outdated Python dependencies with
$ pip list --outdated
For example, after downgrading Django to 3.2.3 in my requirements.in, regenerating the lockfile with pip-compile, re-installing the dependencies with pip-sync, the command above will show:
Package    Version Latest Type
---------- ------- ------ -----
Django     3.2.3   3.2.5  wheel
setuptools 44.0.0  57.4.0 wheel
To update the dependency, I can change the version back to 3.2.5 in the requirements.in and go through the same dance:
$ pip-compile --output-file requirements.txt requirements.in
$ pip-sync
$ pip list --outdated
Package    Version Latest Type
---------- ------- ------ -----
setuptools 44.0.0  57.4.0 wheel
EDIT #2: a batteries-included equivalent to Yarn is called Poetry. Thanks for sharing, D√°niel!
Wheels and Eggs
You might wonder what this ‚Äúwheel‚Äù type is for the Django and setuptools packages.
They are still mysterious to me, but here‚Äôs my current understanding: in Python, some dependencies need to be built for specific architectures, as they might be written in Cython, ‚Äúa superset of the Python language that additionally supports calling C functions and declaring C types on variables and class attributes‚Äù. Wheels and Eggs are packaging formats for these.
In particular, it is not a good idea to use Alpine Docker images for Python projects as a lot of packages don‚Äôt have pre-built wheels for that architecture: your Docker build step will need to compile the packages from source, slowing down your entire process (and requiring you to install the necessary build tools for this compilation to happen!).
I don‚Äôt think there is a similar ‚Äúpackaging format‚Äù concept in JavaScript land. But we do have packages shipping prebuilt binaries for specific architectures, for example Sharp, the Node.js image processing package. (And we probably have enough issues with CommonJS vs ES Modules as it is‚Ä¶ :smile:)
Conclusions
All in all, a project needs to:
specify external dependencies and their desired version with semantic ranges
have a way to retrieve said dependencies
keep track of which versions were effectively installed to improve reproducibility.
Despite all these measures, the Docker file of an unmaintained 3-year old project could not build. Software rots!*
#### [How to Download a Brain with Pair Documenting](https:&#x2F;&#x2F;www.robincussol.com&#x2F;download-a-brain-with-pair-documenting&#x2F;) 
*When people leave the company, a lot of specific and ad hoc knowledge goes away with them. Unless there is already a strong documentation culture, there‚Äôs only so much that can be said and done during exit interviews to make up for it.
But this doesn‚Äôt have to be left to fate.
Throughout the month of January, my now ex-colleague Adam Jani≈° and I pair documented all his knowledge about the frontend infrastructure at Kiwi.com. We produced a 24 page document, fixed a few bugs and addressed some tech debt. More importantly, we had fun doing it!
Here‚Äôs how we approached it.
How to pair document
This is an attempt at formalising what we‚Äôve done, feel free to s&#x2F;Newbie&#x2F;Robin&#x2F;g and s&#x2F;Expert&#x2F;Adam&#x2F;g.
The Protagonists
You will need two proactive people: an Expert on the subject to document and a Newbie who is not too cursed with knowledge yet. Bonus points if they have not really worked together but always had good chemistry in their interactions.

The Newbie makes it easy on the Expert for this documentation effort to be a no-brainer:
they organize the pair documenting sessions;
they manage the agenda of the sessions;
they do most of the note-taking;
they digest the notes into documentation drafts in between sessions;
they stay curious and eager to learn more about the subjects, with questions always at the ready (this is hard to fake, so find an adequate Newbie for the task).

The Expert shows up at the sessions and generously shares their knowledge with the Newbie, answering patiently every question they may have. They review the documentation drafts to ensure the prose does not betray the original intent of the notes. Bonus points if they include the Newbie in solving similar problems described in the nascent documentation as they arise in the support channels of the company‚Äôs Slack: learning by doing is a great way to drive home the material and expose remaining ambiguities.

The First Session
The Newbie is in charge and explains how it‚Äôs going to work in the first pair-documenting session. That means going through what‚Äôs expected of each participant in this documentation effort as well as giving an overview of the actual process.
The objective of the first session is crucial: go as broad as possible and capture as many ideas of what needs documenting to form a backlog of topics to go over in the next sessions.
This can be achieved through asking questions like (more examples in this template):
what are things that you know about that very few people know?
what are the things that people always ping you about on Slack?
what tasks pile up when you‚Äôre on vacation?
Once the amount of things to document gets a bit clearer, see how many days are left before they leave and agree on a schedule to leave enough time for this task.
In Between Sessions
The Newbie transforms the raw notes into documentation drafts and gets the Expert to review them.
As more people in the company are aware of this documentation effort, they might have questions of their own; the Newbie adds these points to the agenda for the next session.
The Expert includes the Newbie in all discussions on Slack touching on the subject to maximize the learning opportunities and give the docs a trial by fire.
A Normal Session
In the first 5-10 minutes, the Newbie and the Expert go over unresolved comments in the doc draft, they review the agenda from the previous session and see if anything pops up to be further discussed or explained, and finally, they review the agenda for the current session and decide what to prioritize.
They then go over each point in the agenda: the Expert does most of the talking while the Newbie does most of the note-taking. The Newbie shares their screen for the document to be visible by both pair documentors. The Newbie may interrupt the Expert at any point with questions or with attempts at paraphrasing what the Expert just described. The Expert glances at the notes being taken once in a while to ensure they don‚Äôt contain mistakes from the get-go.
When the time is up, the Newbie and the Expert look at how much they covered from the agenda, move what hasn‚Äôt been covered to the next session, and agree on a date and time for that next session (if it‚Äôs not already regular).
Tools we used
A Calendar: to plan the sessions, to have automatic reminders for them, and to share the visio-conference link.


Custom recurrence with expiry date, Hangouts link, Notification not to miss it, Allow guests to modify event for better collaboration

A Google Document: to store the agenda, the notes and the first documentation drafts. Do make use of the outline on the left-hand side to navigate more easily once the document gets to a certain size. Do make use of comments to discuss and improve the notes and the draft. This is also a good place to involve other people from the company asynchronously. Make sure to put this document in a shared team drive for it to have the right permissions set by default.


Use the ‚ÄúStyles‚Äù dropdown to get this hierarchy

Here‚Äôs a free template Google document to get you started. Feel free to make a copy.
LucidChart: to draw a few diagrams because pictures are great (though you may want to check out Draw.io for a great free alternative).
Why Pair Documenting Works
What usually happens
Unless there is a strong documenting culture, (1) people never prioritize documentation over almost any other task, because it‚Äôs just not as fun as coding or as urgent as the next fire you need to put out. That means that when someone is about to leave, (2) there is an impossible amount of things to document that they don‚Äôt even know where to start. Because they are short on time, they end up drafting a lil‚Äô something and call it a day. (3) Anyway, we never needed that, why are they asking me to document that stuff, who‚Äôs gonna read it anyway?! (Note the use of two ‚Äúanyway‚Äù).
Clear intention through planning
Through planning the pair documenting sessions, we make sure documentation does get prioritized and give it the importance it deserves. If the Expert‚Äôs knowledge is that important and they by happenstance siloed it, it becomes urgent to share this knowledge more widely to deal with that critical bus factor. (Whether they leave or not is almost irrelevant in this case.)
Because we know when the Expert‚Äôs last working day is, it is easier to retro-plan the right number of sessions to cover the entire backlog established in the first session. This of course might need adjusting throughout the pair documentation effort.
More fun and better quality through collaboration
Planning is not enough if the Expert is still lost about what needs documenting and in which level of details. The nagging ‚Äúare they even gonna read it?‚Äù-type questions could well be the end of the documentation effort already: a well-crafted plan not well-executed.
With an accountability buddy, things turn around entirely.
It becomes really difficult to bail out of the plan because you know the other person is expecting you to show up at the session.
Because the Newbie is enthusiastic about the topic, the Expert is more generous in their contribution.
Because the Newbie asks questions and cares about details, the pair documentors tailor the documentation to the level of knowledge on the receiving end. The Expert knows this documentation will be useful. üòå
Aligned incentives
The Expert also knows that what they know should be documented somewhere, and because they like their colleagues, they don‚Äôt want their departure to create a mess. (Right?!)
The Newbie knows this knowledge is valuable, and about to disappear if they don‚Äôt take action. Besides, it‚Äôs something they‚Äôre curious and wanted to learn more about anyway.
The Expert gets to share their knowledge and teach what they know to someone who‚Äôs enthusiastic and interested in the topic; the Newbie gets time with the Expert to learn as much as possible from them.
Parting thoughts
I really enjoyed the pair documenting sessions with Adam and I think they should be made a regular practice, just like pair programming. It‚Äôs a great way to level up people while producing value beyond the scope of that collaboration.
At the same time, documentation is only valuable if it gets read and updated continuously. I‚Äôve been thinking about how to bring it closer to where people are already consuming content. For example, this could take the form of digests of parts of the documentation in the company‚Äôs Slack.
I‚Äôm not super familiar with mob programming, but I do wonder if mob documenting could be a thing to try too.

Acknowledgements:
Adam Jani≈° (@adam_janis) for trying out this pair-documenting idea before his departure :)
Emilia Vidal for her review and suggestions,
Shawn Wang (@swyx) for his review and ideas for the title and Open-Graph image,
Ron Au (@ronvoluted) for providing the font to go ahead with Shawn‚Äôs ideas,
Excalidraw to produce the visuals.*
#### [Year in Review: 2020](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2020&#x2F;) 
*2020, what a ride!
I cannot believe 2020 has already finally come to an end: with the lockdowns and quarantines, time simultaneously flew by and dragged on. A lot of my life was lived through a computer and the Internet. Time to reflect and remember.
Let‚Äôs start with some remarkable facts and events:
personally: - turned 30 in April, without even a beer to celebrate! (hint: the last bit is what‚Äôs remarkable) ‚ùåüç∫ - traveled only once to see my family in France üò¢ - got engaged in August üíç - spent the Christmas holidays alone, for the first time (I feel you, Kevin McCallister) üö∞
at work: - got a raise and earned a promotion üìà - wrote 3 posts on the Frontend Platform‚Äôs internal blog ‚úç
on my blog: - published 8 new posts üöÄ - updated 1 article ‚ôªÔ∏è - started a newsletter (already wrote 2 issues) üóû - broke the 10k unique visitor mark for Build Standalone Expo .apk and .ipa with Turtle CLI üéâ
miscellaneous: - joined 2 great online communities (Coding Career and Blogging For Devs) üôå - revamped a handful of desktop PCs and laptops (cannot believe I was about to get rid of my older laptop when it‚Äôs so smooth now!): most low-end&#x2F;mid computers are slow because of their stock hard drives (and limited RAM), a nice SSD and some RAM extension will do wonders! üíæ - jumped on the sourdough bread baking train (and learnt recently how sourdough baguettes are a lazy baker‚Äôs dream!) üá´üá∑ ü•ñ
Despite everyone calling 2020 their worst year ever, it did not seem so bad personally. Of course, I missed social life and being able to do ‚Äúnormal‚Äù things, but all things considered, I still learnt a lot this year.
Consumer to archivist
Spending so much time online means I absorbed vast amounts of data and after a while, it did not sit so well with me. I believed that I learn best by immersing myself in a continuous flow of information surrounding one topic. Of course, it‚Äôs worked for me so far, but the cost is that I get overwhelmed and it‚Äôs difficult to know when it‚Äôs enough.
Trying to change that brute-force approach to learning, I read here and there that taking notes would force me to slow down and choose what I consume more wisely. I obviously bought ‚ÄúHow to Take Smart Notes‚Äù by S√∂nke Ahrens (and only half-read it), came across the German word Zettlekasten and went on a wild goose chase for the best Personal Knowledge Management system, and read all the articles and watched all the YouTube videos about the subject. Old habits die hard. üòÖ
After using a few of them, I ended up settling with Joplin (which I had of course already set up prior to any of this) and have not looked back. It does not have backlinks so I‚Äôm deeply missing out on interconnected notes, as the hype goes, but it‚Äôs okay. My FOMO is in check for now. Joplin is an active open source project which is available on desktop as well as mobile devices. I retain full ownership (and responsibility) over my notes as Joplin integrates with different storage backends: I chose to use my self-hosted NextCloud instance.
In short:
just-in-case knowledge is expensive; prefer just-in-time knowledge
it‚Äôs easy to go on a wild goose chase only to realise you had everything already
note-taking does force me to slow down and helps to remember better
Archivist to creator
This story does not end here, dear reader. Accumulating notes about topics I‚Äôm interested in helps to slow down and be more intentional with what I consume. But it turns out knowledge without action is mostly useless.
Luckily, Daniel Vassalo wrote this influential tweet:
If you‚Äôre tempted by this, my advice to first-time creators is to start with a very small product: Something you can finish in 2 weeks and charge #### [Build Standalone Expo .apk and .ipa with Turtle CLI [deprecated]](https:&#x2F;&#x2F;www.robincussol.com&#x2F;build-standalone-expo-apk-ipa-with-turtle-cli&#x2F;) 
*This article was updated on February 7, 2023.
NOTE: As of Expo SDK 47, the following method does not work any more.
With the release of EAS builds, it is necessary to have Internet access to create standalone Expo apps locally; see Running builds on your own infrastructure on Expo docs.
You can still use the React Native way to build applications locally after generating necessary files with expo prebuild (see this GitHub comment on expo&#x2F;eas-cli).
This post will not receive further updates.
A great way to start writing React Native applications is to use Expo. You don‚Äôt even need to setup a development environment to get started thanks to Snack, an online React Native application editor. Your application is public by default. Sharing has never been that easy.

Brown turtle swimming underwater, Photo by Wexor Tmg on Unsplash
However, you would like to share an application exclusively with some people, not through an app store or any public channel. One possibility is to share the built application file, e.g. an .apk file for Android and an .ipa file for iOS.
Expo is so great a service (oh, and did I mention free?) that they offer you to publish your app on their servers and if you wanted to build these .apk and .ipa files, you could do so on their servers.
The flow looks like:
$ expo publish
$ expo build:&lt;PLATFORM&gt;
and you obtain a nice URL to the artifact created for you when the build finishes.
But, again, this is public. On a server you don‚Äôt control. (Although, if you made the same mistake as I did, a ticket to their support can delete any files you had wished to keep private. ü•á)
Luckily for you, Expo provide the tools they are using on their servers for free (did I mention they‚Äôre great!?). The build process relies on a CLI tool called turtle-cli. It is open-source and available on GitHub.
Let us go through an example of how to create your application file without resorting to Expo servers. That means you can keep an application private and also build your application while being offline.
The following instructions assume you have bash and Node.js available. In my experience, using the current LTS version of Node.js (version 16.13.2) works best.
Caveat: I could not complete the iOS instructions to the end since I do not have an Apple Developer paid account.
We will go through the following steps:
1. Turtle CLI
2. Create a dummy application
3. Publish Expo app on local server
4. Create APK file ‚Äì Android

4.1. Prerequisites
4.2. Create Keystore
4.3. Build APK
5. Create IPA file ‚Äì iOS

5.1. Prerequisites
5.2. Create Signing keys
5.3. Build IPA
6. Distribute and install

6.1. on Android
6.2. on iOS
Resources
A condensed version of these steps without much explanation or context is available on the accompanying GitHub repository.
1. Turtle CLI
To install Turtle CLI, run
$ npm install -g turtle-cli
This will make command turtle globally available on your system. To verify it was correctly installed, let‚Äôs print the version:
$ turtle -V
0.24.3
2. Create a dummy application
Let‚Äôs create a dummy application using Expo CLI. In your terminal, run
$ npx expo init ExampleApplication
It will ask you a few questions:
# Expo version 5.0.3
npx expo init ExampleApplication
? Choose a template: ‚Ä∫ - Use arrow-keys. Return to submit.
    ----- Managed workflow -----
‚ùØ   blank               a minimal app as clean as an empty canvas
    blank (TypeScript)  same as blank but with TypeScript configuration
    tabs (TypeScript)   several example screens and tabs using react-navigation and TypeScript
    ----- Bare workflow -----
    minimal             bare and minimal, just the essentials to get you started
The blank template is enough for us.
If you have yarn installed, Expo will use it by default to install dependencies. You can use the --npm flag in the init command if you‚Äôd prefer to use npm instead.
Once it‚Äôs done setting up your project, you should see the following output in the terminal:
‚úÖ Your project is ready!

To run your project, navigate to the directory and run one of the following yarn commands.

- cd ExampleApplication
- yarn start
Run the commands and let‚Äôs verify the generated boilerplate works in our emulators:


To finish setting up the dummy application, you need to configure the app.json file because some configuration keys must be specified to build a standalone app.
If you would like to know more about these standalone app specific configurations, check Expo‚Äôs documentation for iOS and for Android.
For this tutorial, it is only necessary to specify the keys &quot;bundleIdentifier&quot; under &quot;ios&quot;, and &quot;package&quot; under &quot;android&quot; in your app.json file:
...
    &quot;ios&quot;: {
      ...
      &quot;bundleIdentifier&quot;: &quot;com.example.exampleApplication&quot;,
      ...
    },
    &quot;android&quot;: {
      ...
      &quot;package&quot;: &quot;com.example.example_application&quot;,
      ...
    }
...
3. Publish Expo app on local server
Expo has this notion of app publishing: it allows you to share a link or QR code to Expo‚Äôs website and anyone can run your app through the Expo app on their devices.
Having your app published is also necessary for over-the-air (OTA) updates, allowing seamless updates to your application, and to publish your application (i.e. building your application files on Expo servers).
You would typically run
$ expo login -u $EXPO_USERNAME -p $EXPO_PASSWORD
$ expo publish
and your app would then be available at https:&#x2F;&#x2F;expo.dev&#x2F;&lt;EXPO_USERNAME&gt;&#x2F;&lt;APP_NAME&gt;.
To have your Expo app ‚Äúpublished‚Äù on your local server (and avoid public publishing on Expo servers), you will use a different command:
$ expo export --dev --public-url &lt;your-url-here&gt;
The --dev flag is necessary because you will use a non-https server to publish your Expo app. Note that this prevents you from using OTA updates.
Your server does not need to be running for this step, but you do need to know which local URL you are going to use in advance. This tuorial assumes you will run a local server at http:&#x2F;&#x2F;127.0.0.1:8000.
You can now export the app:
$ expo export --dev --public-url http:&#x2F;&#x2F;127.0.0.1:8000
...
Export was successful. Your exported files can be found in dist
This command will create a dist directory containing the iOS and Android JavaScript bundles and the different assets you are using.
dist
‚îú‚îÄ‚îÄ android-index.json
‚îú‚îÄ‚îÄ assets
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ 13685372945d816a2b474fc082fd9aaa
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ 140c53a7643ea949007aa9a282153849
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ ...
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ fdbedb7e67aa7c0ecad83d9c2fa4dfba
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ fdc01171a7a7ea76b187afcd162dee7d
‚îú‚îÄ‚îÄ bundles
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ android-a9defc54fb2ffdb7e6fdaf5b8d0be751.js
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ ios-a29c3e4ac97a2abdc5208fd4f06e7708.js
‚îî‚îÄ‚îÄ ios-index.json
You can now serve the dist directory on your web server, e.g.
$ npx http-server -p 8000 dist
Note: if for some reason you need to re-export your application (because you modified your app.json file since the last export, for instance), you must first remove the dist directory:
# assuming you are at the root of the project
$ rm -rf dist
$ expo export --dev --public-url http:&#x2F;&#x2F;127.0.0.1:8000
4. Create APK file ‚Äì Android
First, verify that your local server is running. For example, you should see a similar output:
$ curl http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;android-index.json
{&quot;name&quot;:&quot;ExampleApplication&quot;,&quot;slug&quot;:&quot;ExampleApplication&quot;,&quot;version&quot;:&quot;1.0.0&quot;,&quot;orientation&quot;:&quot;portrait&quot;,&quot;icon&quot;:&quot;.&#x2F;assets&#x2F;icon.png&quot;,&quot;splash&quot;:{&quot;image&quot;:&quot;.&#x2F;assets&#x2F;splash.png&quot;,&quot;resizeMode&quot;:&quot;contain&quot;,&quot;backgroundColor&quot;:&quot;#ffffff&quot;,&quot;imageUrl&quot;:&quot;http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;assets&#x2F;201a91bd1740bb1d6a1dbad049310724&quot;}...
4.1. Prerequisites
For Turtle CLI to work correctly to create an .apk file for Android, you need to make sure the following dependency is installed: Java Development Kit (version 8).
If you know which Expo SDK version you are going to use, you can run
$ turtle setup:android --sdk-version &lt;SDK-VERSION&gt;
This will take some time:
$ turtle setup:android --sdk-version 44.0.5
Jan 20 20:22:45 turtle[61127] INFO:  Downloading Android SDK
  platform: &quot;android&quot;
  buildPhase: &quot;setting up environment&quot;
downloading [&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;] 98% 0.2s
...
Jan 20 20:26:56 turtle[61127] INFO:  shell app for SDK 44.0.5 doesn&#39;t exist, downloading...
  platform: &quot;android&quot;
  buildPhase: &quot;setting up environment&quot;
downloading [&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; ] 95% 0.5sJan 20 20:27:08 turtle[61127] INFO:  shell app has been downloaded
  platform: &quot;android&quot;
  buildPhase: &quot;setting up environment&quot;
...
Jan 20 20:29:51 turtle[61127] INFO:  dependencies installed!
  platform: &quot;android&quot;
  buildPhase: &quot;setting up environment&quot;
Jan 20 20:29:51 turtle[61127] INFO:  it&#39;s all set!
  platform: &quot;android&quot;
  buildPhase: &quot;setting up environment&quot;
In the meantime, you can move on to the next section.
4.2. Create Keystore
Just like any other Android app, this app must be signed with some security certificates. In Android-land, as far as I understand, it‚Äôs called a keystore. The instructions to create such a keystore file are available on the Android Developers documentation.
Basically, just create a dummy Android project with Android Studio, and then go to Build &gt; Generate Signed Bundle &#x2F; APK.... Choose APK and press Next. The UI will ask you which app you want to sign, and your dummy app should be pre-selected. On the same screen, press on the button Create new...; just fill the form and you‚Äôre good to go.
Alternatively, if you have keytool CLI utility available on your system (you can check that by trying keytool --help in your terminal), you can generate a keystore file with the following command
$ keytool -genkeypair -v -keystore keystore.jks -alias keyalias -keyalg RSA -keysize 2048 -validity 9125
Enter keystore password:
Re-enter new password:
What is your first and last name?
  [Unknown]:
What is the name of your organizational unit?
  [Unknown]:
What is the name of your organization?
  [Unknown]:
What is the name of your City or Locality?
  [Unknown]:
What is the name of your State or Province?
  [Unknown]:
What is the two-letter country code for this unit?
  [Unknown]:
Is CN&#x3D;Unknown, OU&#x3D;Unknown, O&#x3D;Unknown, L&#x3D;Unknown, ST&#x3D;Unknown, C&#x3D;Unknown correct?
  [no]:  yes

Generating 2,048 bit RSA key pair and self-signed certificate (SHA256withRSA) with a validity of 9,125 days
	for: CN&#x3D;Unknown, OU&#x3D;Unknown, O&#x3D;Unknown, L&#x3D;Unknown, ST&#x3D;Unknown, C&#x3D;Unknown
Enter key password for &lt;keyalias&gt;
	(RETURN if same as keystore password):
Re-enter new password:
[Storing keystore.jks]

Warning:
The JKS keystore uses a proprietary format. It is recommended to migrate to PKCS12 which is an industry standard format using &quot;keytool -importkeystore -srckeystore keystore.jks -destkeystore keystore.jks -deststoretype pkcs12&quot;.
As a TL;DR, you can just download a dummy certificate on the accompanying repository under should-be-private&#x2F;keystore.jks, for testing purposes only. The keystore file is hugely important if you ever plan to submit your app to Google Play store: it‚Äôs the only way to assert you‚Äôre the rightful owner to provide new updates to your app.
File: keystore.jks
keystorepassword
keyalias
keypassword
4.3. Build APK
Make sure that you are serving the dist directory on http:&#x2F;&#x2F;127.0.0.1:8000 as explained above in Run a local server. Assuming you are using bash as your shell, from the root of your project, run:
EXPO_ANDROID_KEYSTORE_PASSWORD&#x3D;&quot;keystorepassword&quot; \
EXPO_ANDROID_KEY_PASSWORD&#x3D;&quot;keypassword&quot; \
turtle build:android \
  --type apk \
  --keystore-path .&#x2F;should-be-private&#x2F;keystore.jks \
  --keystore-alias &quot;keyalias&quot; \
  --allow-non-https-public-url \
  --public-url http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;android-index.json
Note that you need the flag --public-url to point to http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;android-index.json. In addition, it is also necessary to use the --type apk flag to produce an APK file since version 0.8.0 of turtle-cli.
The build may take some time:
Jan 20 20:38:17 turtle[61719] INFO:  Using manifest: {
  &quot;name&quot;: &quot;ExampleApplication&quot;,
  &quot;slug&quot;: &quot;ExampleApplication&quot;,
  &quot;version&quot;: &quot;1.0.0&quot;,
  &quot;orientation&quot;: &quot;portrait&quot;,
  &quot;icon&quot;: &quot;.&#x2F;assets&#x2F;icon.png&quot;,
...
Jan 20 20:38:51 turtle[61719] INFO:  Starting a Gradle Daemon (subsequent builds will be faster)
  platform: &quot;android&quot;
  buildPhase: &quot;running gradle&quot;
  source: &quot;stdout&quot;
...
Once it finishes, you should see this output in your terminal:
Jan 20 20:43:19 turtle[61719] INFO:  copied build to ~&#x2F;expo-apps&#x2F;@anonymous__ExampleApplication-7f15208a56304617a200538cacd2e50e-signed.apk
  platform: &quot;android&quot;
  buildPhase: &quot;copying build artifact&quot;
This message gives you the location of your built .apk file. You can now move on to the Distribute and install section below if you are not interested in creating an .ipa file for iOS.
Note: if the build fails because of some Gradle error, like Could not resolve com.theartofdev.edmodo:android-image-cropper:2.8.0, make sure to open Android Studio and update the Android SDK and SDK Build-Tools. This should fix it.
5. Create IPA file ‚Äì iOS
First, verify that your local server is running, e.g.
$ curl http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;ios-index.json
{&quot;name&quot;:&quot;ExampleApplication&quot;,&quot;slug&quot;:&quot;ExampleApplication&quot;,&quot;version&quot;:&quot;1.0.0&quot;,&quot;orientation&quot;:&quot;portrait&quot;,&quot;icon&quot;:&quot;.&#x2F;assets&#x2F;icon.png&quot;,&quot;splash&quot;:{&quot;image&quot;:&quot;.&#x2F;assets&#x2F;splash.png&quot;,&quot;resizeMode&quot;:&quot;contain&quot;,&quot;backgroundColor&quot;:&quot;#ffffff&quot;,&quot;imageUrl&quot;:&quot;http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;assets&#x2F;201a91bd1740bb1d6a1dbad049310724&quot;...
5.1. Prerequisites
For Turtle CLI to work correctly to create an .ipa file for iOS, you need to make sure your system is macOS and that the following dependencies are installed:
Xcode (version 13.2.1 or newer)
fastlane
Note: make sure that you have run Xcode at least once and that you have agreed to the license agreements.
For more details, see Expo‚Äôs documentation.
If you know which Expo SDK version you are going to use, you can run
$ turtle setup:ios --sdk-version &lt;SDK-VERSION&gt;
If it errors out, saying that you don‚Äôt have the right version of fastlane, try re-installing fastlane (guide). The version used in this article is fastlane 2.200.0.
This will take some time:
$ turtle setup:ios --sdk-version 44.0.5
Jan 20 21:18:03 turtle[48488] INFO:  shell app for SDK 44.0.5 doesn&#39;t exist, downloading...
  platform: &quot;ios&quot;
  buildPhase: &quot;setting up environment&quot;
downloading [                    ] 1% 8514.8s
...
...
Jan 20 21:24:58 turtle[48488] INFO:  it&#39;s all set!
  platform: &quot;ios&quot;
  buildPhase: &quot;setting up environment&quot;
In the meantime, you can move on to the next section.
5.2. Create Signing keys
This assumes you have an Apple Developer Account, which is a paid account.
To create your distribution certificate file, or .p12 file, you can follow this guide.
You will also need your Apple Team ID and a Provisioning Profile that you can generate through Xcode as well. This other guide covers in greater lengths what all these cerficates are for and how to obtain them.

Note that the provisioning profile expires in 6 days in my case, since I do not have an Apple Developer paid account.
Sadly, it is not possible to share example files.
5.3. Build IPA
Make sure that you are serving the dist directory on http:&#x2F;&#x2F;127.0.0.1:8000 as explained Run a local server. Assuming you are using bash as your shell, from the root of your project, run:
EXPO_IOS_DIST_P12_PASSWORD&#x3D;&quot;&lt;PASSWORD HERE&gt;&quot; \
turtle build:ios \
  --team-id YOUR_TEAM_ID \
  --dist-p12-path &#x2F;path&#x2F;to&#x2F;your&#x2F;dist&#x2F;cert.p12 \
  --provisioning-profile-path &#x2F;path&#x2F;to&#x2F;your&#x2F;provisioning&#x2F;profile.mobileprovision \
  --allow-non-https-public-url \
  --public-url http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;ios-index.json
Note that you need the flag --public-url to point to http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;ios-index.json.
Once the build finishes successfully, you should get the path to your .ipa file.
6. Distribute and install
6.1. on Android
Take your .apk and share it through some Google Drive link or other medium of your choice.
If you download this .apk file through an Android device, it should offer you to install the application on the device.
Trick: if the URL is really not friendly to type, and for whatever reason you have to type it manually, use a QR Code generator (e.g. http:&#x2F;&#x2F;www.barcode-generator.org&#x2F;) and your device‚Äôs camera to simplify your life!
Alternatively, if you connect an Android device to your computer, you should be able to run:
$ adb devices
emulator-5554	device
to list all your connected Android devices and emulators. (In my case, only the emulator is ‚Äúconnected‚Äù.)
It is then possible to install the .apk file by running:
$ adb -s emulator-5554 install ~&#x2F;expo-apps&#x2F;@anonymous__ExampleApplication-7f15208a56304617a200538cacd2e50e-signed.apk
Performing Streamed Install
Success

6.2. on iOS
Caveat: I could not fully test this section, so my apologies if this does not work as intended.
Since you should have Xcode, the most promising solution is in this guide. It also mentions other ways to install the .ipa file.
That‚Äôs it for now, thank you for reading this far. You will find below the resources mentioned in this article.
If you have any questions or comments, please drop me a line on Twitter. I shall reply as soon as possible.
Stay tuned for more.
Resources
Expo: https:&#x2F;&#x2F;expo.dev
Turtle CLI: https:&#x2F;&#x2F;github.com&#x2F;expo&#x2F;turtle#readme
Expo‚Äôs guide to Building Standalone apps: https:&#x2F;&#x2F;docs.expo.dev&#x2F;classic&#x2F;building-standalone-apps&#x2F;
Configuring app.json: https:&#x2F;&#x2F;docs.expo.dev&#x2F;workflow&#x2F;configuration&#x2F;
Expo docs to configure CI with Turtle CLI: https:&#x2F;&#x2F;docs.expo.dev&#x2F;classic&#x2F;turtle-cli&#x2F;
Expo docs to host application on your own servers: https:&#x2F;&#x2F;docs.expo.dev&#x2F;distribution&#x2F;hosting-your-app&#x2F;
How to create a keystore for Android: https:&#x2F;&#x2F;developer.android.com&#x2F;studio&#x2F;publish&#x2F;app-signing#generate-key
Supporting GitHub repository: https:&#x2F;&#x2F;github.com&#x2F;RobinCsl&#x2F;build-standalone-expo-app&#x2F;*
#### [Optimize your img tags with Eleventy Image and WebC](https:&#x2F;&#x2F;www.robincussol.com&#x2F;optimize-your-img-tags-with-eleventy-image-and-webc&#x2F;) 
*I am very excited about WebC and couldn‚Äôt wait to try out the corresponding Eleventy plugin.
The first use-case I had in mind was to use Eleventy Image for the native HTML img tag, that can be generated from Markdown and without shortcode. I had done this before, for my unpublished blog rewrite that‚Äôs been waiting to be released for ever now, through hooking up Eleventy Image into a markdown-it plugin. It wasn‚Äôt pretty as markdown-it plugins are pretty alien to me.
But now, this can be done ‚Äúnatively‚Äù, √†-la-Cloudflare Workers for your native HTML elements!
UPDATE (04&#x2F;11&#x2F;2022): After sharing this article on Twitter, Zach Leatherman pointed out there should be an easier solution. It didn‚Äôt work as expected at first, which put me on a journey to fix the underlying issue in @11ty&#x2F;webc. I‚Äôm very pleased to share that my first contribution to the project was accepted and landed in v0.6.0. As a result, the content of the last section was updated to remove the dirty data file hack with _data&#x2F;Image.js: your image optimization logic can now truly live in a single file.
The documentation for WebC mentioned this use-case exactly, in the shape of this innocent puzzle:

‚ÄúFree idea: use the Eleventy Image plugin to return optimized markup‚Äù
So it should be easy, right?
Remember this lad?
I have discovered a truly remarkable proof of this theorem which this margin is too small to contain.
Pierre de Fermat, cca. 1637
No need to wait 3 centuries for the answer this time, because it was ultimately not so hard‚Ä¶ But I did struggle and wrestle with it for a few hours :D
Anyway, hope that can be useful to someone.
If you want to see the finished implementation, you can get it on GitHub: RobinCsl&#x2F;11ty-webc-img-demo.
Set up a WebC-powered Eleventy project
or take a shortcut by cloning this repo and going to the 01-initial folder.
Initialise the project
Let‚Äôs start with an empty folder and add a basic package.json file:
mkdir 11ty-webc-img
cd 11ty-webc-img
npm init -y
We need to install the latest canary release (2.0.0-canary.16 at the time of writing) of Eleventy as well as the WebC plugin:
 npm install @11ty&#x2F;eleventy@2.0.0-canary.16 @11ty&#x2F;eleventy-plugin-webc
Configure Eleventy
We will now configure Eleventy to use the WebC plugin by creating a .eleventy.js file with the following content:
const webc &#x3D; require(&quot;@11ty&#x2F;eleventy-plugin-webc&quot;);

module.exports &#x3D; function(eleventyConfig) {
	eleventyConfig.addPlugin(webc, {
		components: &quot;_includes&#x2F;webc&#x2F;*.webc&quot;
	});
}

In particular, components in the _includes&#x2F;webc folder will be available in the global scope, no need to import them explicitly!
Scaffold a minimal project
To finish our setup, we create a layout file and a simple WebC component which we will use in a basic page, to make sure our setup is working correctly.
We create the layout file under _includes&#x2F;layouts&#x2F;base.webc. It is a simple HTML template with the @html&#x3D;&quot;content&quot;  WebC directive set on the body tag. (See my-layout.webc in the docs)
&lt;!doctype html&gt;
&lt;html lang&#x3D;&quot;en&quot;&gt;
	&lt;head&gt;
		&lt;meta charset&#x3D;&quot;utf-8&quot;&gt;
		&lt;title&gt;Eleventy Images + WebC rocks!&lt;&#x2F;title&gt;
	&lt;&#x2F;head&gt;
	&lt;body @html&#x3D;&quot;content&quot;&gt;&lt;&#x2F;body&gt;
&lt;&#x2F;html&gt;
We now create a simple WebC component and write the following content, taken from the promising website 11ty.webc.fun, in _includes&#x2F;webc&#x2F;site-footer.webc :
&lt;footer&gt;
  &lt;p&gt;&amp;copy; 2022 Yours Truly.&lt;&#x2F;p&gt;
&lt;&#x2F;footer&gt;
Finally, we create our basic page at the root of the project in index.webc:
---
layout: layouts&#x2F;base.webc
---

Fun with WebC

&lt;site-footer&gt;&lt;&#x2F;site-footer&gt;
If all went according to plan, we should now be able to run
npx @11ty&#x2F;eleventy --serve
in the terminal and see the following output in our browser at http:&#x2F;&#x2F;localhost:8080:

Create an img.webc component
or check the code on GitHub in the 02-img folder if you want to see the code right away.
In this section, we will create our img.webc override for the native img HTML tag and use Eleventy Image within it.
As a starting point, we will use the example from the documentation from which the screenshot at the start of this post is taken. In a new file _includes&#x2F;webc&#x2F;img.webc, add the following:
&lt;script webc:type&#x3D;&quot;render&quot; webc:is&#x3D;&quot;template&quot;&gt;
function() {
	if(!this.alt) {
		throw new Error(&quot;[img.webc] the alt text is missing, no fun&quot;);
	}
	return &#x60;&lt;img src&#x3D;&quot;${this.src}&quot; alt&#x3D;&quot;${this.alt}&quot;&gt;&#x60;;
}
&lt;&#x2F;script&gt;
This essentially verifies at build-time that all your images have a non-empty alt text, neat!
Let‚Äôs add a ‚Äúbroken‚Äù image to our index page, in index.webc, to verify that this works correctly:
---
layout: layouts&#x2F;base.webc
---

Fun with WebC

&lt;img src&#x3D;&quot;https:&#x2F;&#x2F;images.unsplash.com&#x2F;photo-1627224286457-923944e5b159?auto&#x3D;format&amp;fit&#x3D;crop&amp;w&#x3D;387&amp;q&#x3D;80&quot;&gt;

&lt;site-footer&gt;&lt;&#x2F;site-footer&gt;
And indeed, running npx @11ty&#x2F;eleventy --serve yields an expected error:
$ npx @11ty&#x2F;eleventy --serve
[11ty] Problem writing Eleventy templates: (more in DEBUG output)
[11ty] 1. Having trouble rendering webc template .&#x2F;index.webc (via TemplateContentRenderError)
[11ty] 2. [img.webc] the alt text is missing, no fun (via Error)
Add an alt text (‚Äúpossum hanging from a palm leaf‚Äù should work) and try again. Oh no! Another error:
$ npx @11ty&#x2F;eleventy --serve  
[11ty] Problem writing Eleventy templates: (more in DEBUG output)
[11ty] 1. Having trouble rendering webc template .&#x2F;index.webc (via TemplateContentRenderError)
[11ty] 2. Circular dependency error: You cannot use &lt;img&gt; inside the definition for .&#x2F;_includes&#x2F;webc&#x2F;img.webc (via Error)
That makes sense, when you think about it! All our .webc files are processed by WebC, so if we return an img tag in a img.webc component, the compiler would work indefinitely to get to the bottom of it, because it‚Äôs turtles img all the way down!
Luckily for us, we can let WebC know when its job is done through the webc:raw attribute:
Use webc:raw to opt-out of WebC template processing for all child content of the current node. Notably, attributes on the current node will be processed.
Let‚Äôs fix it in _includes&#x2F;webc&#x2F;img.webc:
  &lt;script webc:type&#x3D;&quot;render&quot; webc:is&#x3D;&quot;template&quot;&gt;
  function() {
	  if(!this.alt) {
	  	throw new Error(&quot;[img.webc] the alt text is missing, no fun&quot;);
	  }
-	  return &#x60;&lt;img src&#x3D;&quot;${this.src}&quot; alt&#x3D;&quot;${this.alt}&quot;&gt;&#x60;;
+	  return &#x60;&lt;img webc:raw src&#x3D;&quot;${this.src}&quot; alt&#x3D;&quot;${this.alt}&quot;&gt;&#x60;;
  }
  &lt;&#x2F;script&gt;
It compiles now! üéâ
Here‚Äôs the expected output:

We have effectively augmented our img tag to verify at build time that alt text is present.
Let‚Äôs now add Eleventy Image to the party!
Optimize your HTML img with Eleventy Image
or check the code on GitHub in the 03-final folder if you want to see my solution.
Let‚Äôs first install Eleventy Image in our project:
npm install @11ty&#x2F;eleventy-img
We will more or less copy the example from the Eleventy Image docs in the Asynchronous Shortcode section, because our JavaScript render function can be async!
In the file _includes&#x2F;webc&#x2F;img.webc, let‚Äôs add the following:
  &lt;script webc:type&#x3D;&quot;render&quot; webc:is&#x3D;&quot;template&quot;&gt;
-   function() {
-      if(!this.alt) {
-          throw new Error(&quot;[img.webc] the alt text is missing, no fun&quot;);
-      }
-      return &#x60;&lt;img webc:raw src&#x3D;&quot;${this.src}&quot; alt&#x3D;&quot;${this.alt}&quot;&gt;&#x60;;
+    const Image &#x3D; require(&quot;@11ty&#x2F;eleventy-img&quot;);
+    module.exports &#x3D; async function() {
+      let metadata &#x3D; await Image(this.src, {
+        widths: [300],
+        formats: [&quot;avif&quot;, &quot;jpeg&quot;],
+        outputDir: &quot;_site&#x2F;img&#x2F;&quot;,
+      });

+      let imageAttributes &#x3D; {
+        alt: this.alt,
+        sizes: &quot;100vw&quot;,
+        loading: &quot;lazy&quot;,
+        decoding: &quot;async&quot;,
+      };

+      &#x2F;&#x2F; You bet we throw an error on missing alt in &#x60;imageAttributes&#x60; (alt&#x3D;&quot;&quot; works okay)
+      return Image.generateHTML(metadata, imageAttributes);
  }
  &lt;&#x2F;script&gt;

Note that we harcoded the value for  sizes in the imageAttributes object, and prepended both src and alt by this to wire things up correctly. We also instruct the Image plugin to output optimized images in our _site&#x2F;img&#x2F; folder directly for them to be available when using the following markup:
&lt;img alt&#x3D;&quot;a lovely image&quot; src&#x3D;&quot;&#x2F;img&#x2F;hash-width.jpeg&quot;&gt;
Let‚Äôs run npx @11ty&#x2F;eleventy --serve once more:
$  npx @11ty&#x2F;eleventy --serve
[11ty] Problem writing Eleventy templates: (more in DEBUG output)
[11ty] 1. Having trouble rendering webc template .&#x2F;index.webc (via TemplateContentRenderError)
[11ty] 2. Circular dependency error: You cannot use &lt;img&gt; inside the definition for .&#x2F;_includes&#x2F;webc&#x2F;img.webc (via Error)
That error sounds familiar, right?
We need to tell WebC to ignore img tags generated by Eleventy Image, and it‚Äôs as simple as adding &quot;webc:raw&quot;: true to the imageAttributes object:
  &lt;script webc:type&#x3D;&quot;render&quot; webc:is&#x3D;&quot;template&quot;&gt;
  const Image &#x3D; require(&quot;@11ty&#x2F;eleventy-img&quot;);
  module.exports &#x3D; async function() {
    let metadata &#x3D; await Image(this.src, {
      widths: [300],
      formats: [&quot;avif&quot;, &quot;jpeg&quot;],
      outputDir: &quot;_site&#x2F;img&#x2F;&quot;,
    });
  
    let imageAttributes &#x3D; {
      alt: this.alt,
      sizes: &quot;100vw&quot;,
      loading: &quot;lazy&quot;,
      decoding: &quot;async&quot;,
+     &quot;webc:raw&quot;: true,
    };
  
    &#x2F;&#x2F; You bet we throw an error on missing alt in &#x60;imageAttributes&#x60; (alt&#x3D;&quot;&quot; works okay)
    return Image.generateHTML(metadata, imageAttributes);
  }
  &lt;&#x2F;script&gt;
And we‚Äôre done!! (Note how the image now aligns perfectly with localhost:8080 #IncontestableTruth)

with corresponding markup:
&lt;!doctype html&gt;
&lt;html lang&#x3D;&quot;en&quot;&gt;
&lt;head&gt;
        &lt;meta charset&#x3D;&quot;utf-8&quot;&gt;
        &lt;title&gt;Eleventy Images + WebC rocks!&lt;&#x2F;title&gt;
    &lt;&#x2F;head&gt;
    &lt;body&gt;Fun with WebC

&lt;picture&gt;&lt;source type&#x3D;&quot;image&#x2F;avif&quot; srcset&#x3D;&quot;&#x2F;img&#x2F;SwdsuTpRbT-300.avif 300w&quot;&gt;&lt;img alt&#x3D;&quot;possum hanging from a palm leaf&quot; loading&#x3D;&quot;lazy&quot; decoding&#x3D;&quot;async&quot; src&#x3D;&quot;&#x2F;img&#x2F;SwdsuTpRbT-300.jpeg&quot; width&#x3D;&quot;300&quot; height&#x3D;&quot;450&quot;&gt;&lt;&#x2F;picture&gt;


&lt;footer&gt;
  &lt;p&gt;¬© 2022 Yours Truly.&lt;&#x2F;p&gt;
&lt;&#x2F;footer&gt;

&lt;&#x2F;body&gt;
&lt;&#x2F;html&gt;
Parting words
I am so excited to explore further the possibilities of using WebC to augment other native HTML elements.
This article only scratches the surface when it comes to the img tag. You could pass props down from the markup to Eleventy Image and control the behaviour of the image optimization. But we can now augment our native img tag without much hassle as it‚Äôs all in one file.
It even works with Markdown images (and yields the cutest webpage ever):
  ---
  layout: layouts&#x2F;base.webc
  ---
  
  Fun with WebC
  
  &lt;img alt&#x3D;&quot;possum hanging from a palm leaf&quot; src&#x3D;&quot;https:&#x2F;&#x2F;images.unsplash.com&#x2F;photo-1627224286457-923944e5b159?auto&#x3D;format&amp;fit&#x3D;crop&amp;w&#x3D;387&amp;q&#x3D;80&quot;&gt;
  
+  &lt;template webc:type&#x3D;&quot;11ty&quot; 11ty:type&#x3D;&quot;md&quot;&gt;
+  
+   ![&#39;close-up of a baby possum among ferns&#39;](https:&#x2F;&#x2F;images.pexels.com&#x2F;photos&#x2F;13960994&#x2F;pexels-photo-13960994.jpeg)
+  
+  &lt;&#x2F;template&gt;
  
  &lt;site-footer&gt;&lt;&#x2F;site-footer&gt;
  

All the more reasons to optimize your images now!
Find the code supporting this article on the RobinCsl&#x2F;11ty-webc-img-demo repository.*
#### [Year in Review: 2021](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2021&#x2F;) 
*We‚Äôre already at the start of February 2022, but who says retrospectives need to be done on January 1st?! A lot of things happened in 2021, both personally and professionally. Time to reflect and remember.
Personal üë∂üíçüìÑüìÉüìëüìú
This first part is the personal stuff, so if you don‚Äôt care about it, you can skip to the professional stuff instead. And if you don‚Äôt care about that too, why are you here? üòÇ
Welcome, L√©onard!
In January of 2021 came the great news that we were expecting a baby and a few months later, my son L√©onard came to this world! It‚Äôs been a few months now and it‚Äôs insane how much this event changed our lives.
It‚Äôs quite amazing to witness a human being‚Äôs awakening to the world, I do feel privileged.
Of course, it‚Äôs not just rainbows and unicorns.
Sleeping as much as I want is now a distant memory&#x2F;dream, though I‚Äôve been surprised that it‚Äôs actually quite possible to operate without the amount of sleep I used to get.
Having free time for side projects and writing almost vanished (and usually eats up time when I should sleep instead, while it‚Äôs allowed by baby-boss). I don‚Äôt know how other parents manage but time just flies by.
One thing‚Äôs for sure, L√©onard makes sure I keep fit and exercise regularly (a promise I made myself at the beginning of last year, right):
it‚Äôs quite a normal day when I need to go up and down the 4 floors of the block of flats we live in (and when it‚Äôs at night, I have this game where I switch the lights on and go up and down within the 3 minutes they‚Äôre programmed to stay on; naturally, after my 4th round trip, I usually do the last flight of stairs in the dark üòÖüòÆ‚Äçüí®).
it‚Äôs also quite a normal day when I need to carry him in my arms for 10- to 20-minute stretches, while doing squats, at least 2 or 3 times.
Coach L√©onard can ask for these drills at any time of the day (and night‚Ä¶), he says it‚Äôs for my own good. My knees and hips and back and arms tend to disagree.
Paperwork, paperwork, paperwork
In 2021, I‚Äôve had time to think so many times if the amount of paperwork we‚Äôre doomed to go through is some sort of devilish scheme to keep people busy on the boring stuff. It definitely does not help when you‚Äôre an expat.
If you had told me having a baby would generate so much paperwork chores, I probably would not have believed you. The story goes that we wanted to do an early recognition of fatherhood for me to be officially recognised as the father of my child to be.
In France, as a French person, this is a 5-minute visit to my local townhall, easy-peasy.
In Czechia, as a foreigner, this would have required tons of documents that also needed translating by a certified translator (aka costs some money).
Since we were engaged, and you‚Äôre officially recognised as the father when having a baby as a married couple, we thought we might as well go through paperwork hell to get married.
It did not disappoint.
Our child was due some time in the middle of September, so we had almost the entire year to get married, should be easy, right.
Being so diligent, we got in touch with the French embassy to understand what we need to do to get married in April:
weddings at the embassy are quite a rare thing, you should get married through the local authorities
getting married in Prague is like getting married in Las Vegas (say what?)
Only to realise at the end of June that:
babies aren‚Äôt always born around the due date
it‚Äôs already the end of June
Let‚Äôs just say that we managed to be on time paperwork-wise for our wedding at the beginning of August (ever heard of the necessary 2-week public display of your intent on getting married, during which somebody has the right to oppose it, to get the paper allowing a French person to marry‚Ä¶?), but the ‚Äúgetting married like in Las Vegas‚Äù was lost on us.
Professionally
Promo
In January last year, I got promoted to Staff Engineer at Kiwi.com. Pretty crazy to me to think that I started working in the industry in September 2017. Even though titles only mean so much, it‚Äôs still a nice recognition that I bring value to the company.
Pair Documenting
I definitely learnt a lot about infrastructure and Kubernetes, which might seem overkill for a frontend platformer, but there was a void to fill when my ex-colleague Adam Jani≈° left, so I put on my newbie hat and pair-documented Adam‚Äôs knowledge throughout his notice period. I still refer or point people to that document quite regularly, it‚Äôs an investment that keeps on giving after all these months!
This was also the first time I tried to add original schematics&#x2F;pictures and Excalidraw made it super fun and easy!
Robin‚Äôs Gazette
My newsletter, Robin‚Äôs Gazette, kept going quite well! It turned one year old on December, 9th! üéÇ
In 2021, I published 25 issues (784 emails in total!), and went from 9 subscribers to 49 at the end of the year!
Given the quite low volume of subscribers, my average open rate and click rate are pretty okay (though they are ‚Äúall-time‚Äù performance metrics):
70.35% open rate,
24.38% click rate.
Even though it‚Äôs always some amount of work, I deem it worthy of my time as I get to practice writing and I always learn something slightly more deeply than if I just scrolled Twitter or Hacker News. This continues my efforts from ‚Äúarchivist to creator‚Äù that I mentioned in my last retro.
Special mention to Shawn @swyx Wang for being so encouraging along the way!
My goal for this year is to continue on that path, though I do need to put some effort into advertising it better:
the subscribe form is hard to find on my website,
the content is short-lived and behind closed doors ‚Äì so I should repurpose it to an extent,
start marketing it more (instead of the infrequent tweets I‚Äôve tried at some point).
One small change for this year: I now send the Gazette every other Friday instead of every other Wednesday.
Some of the feedback I received üòä
‚ÄúSuch a great newsletter this week Robin, amazing job!‚Äù
‚ÄúStill enjoying the newsletter!‚Äù
Blog
The blog was a bit quiet last year, I only published 3 posts and refreshed my most read article about building APK files locally for Expo projects (it recently crossed 20K views in its lifetime! üéâ).
They were:
Python Dependencies for JavaScript Developers
How to Download a Brain with Pair Documenting (already mentioned above)
Year in Review: 2020
I really hope to start writing more again on the blog because the SEO game takes a long time for Google to start recommending your stuff: I saw more traffic to my How to Test Your ESLint Config and Get your Own Sentry Playground articles, and they were written in September 2020!
Started working on a course
In the last retro, I announced that I planned to write a book. That did not happen‚Ä¶ üòÖ
Instead, I started working on a video course which essentially replicates the now defunct Margarita project from scratch (which was the subject of this article on my blog), showcasing how to build cross-platform web and native mobile apps through React Native and React Native Web.
This was the occasion to spend some time weeks watching all the microphone reviews on YouTube, all the Audacity and Obs Studio tutorials for sound production, to ultimately produce a half-finished tutorial on YouTube (the best 33 seconds of your life, trust me).
Source



Ever since my son was born, I‚Äôve had little time to focus for longer than 5-minute stretches outside of work, so this project has lost steam right now. I hope I‚Äôll manage to finish it in the first semester!
A look back and forward
Revisiting some of my plans for 2021 and making some for 2022.
Family
As much as I would love to work on side-projects and such, my family comes first, and I want to keep it that way. I‚Äôm excited to continue discovering what my next workouts will be, courtesy of Coach L√©onard! (Seriously, I‚Äôve got some arms now! üí™)
I cannot wait for my son to meet all his grand-parents, aunts and uncles in France later this year!
Nehovor√≠m pliynule po slovensky
aka I don‚Äôt speak Slovak fluently.
One of my goals was to make sure I would be able to speak to all my wedding guests in their preferred language (amongst French, English and Slovak). Because of the above (and COVID not helping‚Ä¶), the guest list was actually pretty small and my mastery of Slovak would not be entirely necessary to do well on my goal. So I guess I will learn better alongside my son this year whilst we wait for the big party?
Almost no SAD this past year
Come December, I usually feel pretty burnt out and in dire need of vacation to recharge. Somehow, in December 2021, I did not feel like that at all.
My new family life provided some amount of distractions from work. Even though that increased my context switching throughout the days and the nights were not as restful, it somehow created some distance between work and me. Or maybe because living with a newborn forces you to live in the moment, one day at a time‚Ä¶ üòÖ
Writing
Less paperwork, more blog posts. ü§û
Keep the newsletter going, and make it better, faster, stronger!
Improve my note taking system, which is a bit chaotic and not really systematic at the moment.
Learning Rust
In 2021, I started dabbling with Rust, mostly through the really great WIP book from Luca Palmieri, Zero To Production In Rust. It assumed some knowledge so I sometimes struggled had fun filling in the gaps.
Given where the JS ecosystem is going in terms of tooling (oh yeah, in 2021 I started this Awesome List of JavaScript Tooling Not Written In JavaScript on GitHub ‚Äì 667 stars so far!), I think it‚Äôs important to explore beyond the confines of JavaScript&#x2F;TypeScript. So I‚Äôd like to spend more time with Rust this coming year!
Lots of things to be grateful for last year and lots to look forward to this year. C‚Äôest parti !*
#### [Python Dependencies for JavaScript Developers](https:&#x2F;&#x2F;www.robincussol.com&#x2F;python-dependencies-for-javascript-developers&#x2F;) 
*Recently, I needed to update an old Python codebase which had not been touched in 3 years! Of course, the dependencies were so outdated that the Dockerfile of the project wouldn‚Äôt build. My JavaScript knowledge did not help me much:
how could I do a yarn upgrade-interactive --latest to update dependencies?
where‚Äôs the dependency lockfile?
why do we need to compile C-libraries for Python dependencies?
Luckily for me, my colleague Ondrej patiently explained how to approach these questions.
Using a virtual environment
TL;DR: pip installs packages globally unless we activate a virtual environment.
In Python, the default package manager is call pip and it installs packages from the Python Package Index, shortened to Pypi. The equivalent in JavaScript land would be npm and npmjs.com.
By default, pip installs packages system-wide. This contrasts with the need to pass a --global flag to npm.
To remedy that, we can use a local Python environment (a bit like having our node_modules folder in a JavaScript project). The following command will create a virtual environment in a venv folder in our current directory:
# Create the venv folder container the virtual environment
$ python3 -m venv venv
To make sure pip knows it should install packages in this virtual environment, we must activate it. Depending on your shell, you should source the appropriate activate file in venv&#x2F;bin:
activate, for Bash and ZSH,
activate.fish, for Fish Shell,
activate.csh, for csh
Activate.ps1, for PowerShell.
In my case, I will source the one for ZSH:
$ source venv&#x2F;bin&#x2F;activate
Now, pip install will install packages in the local folder instead of targeting the global scope. My ‚ÄúPython node_modules folder‚Äù is venv&#x2F;lib&#x2F;python3.8&#x2F;site-packages&#x2F;.
Dependencies in Python
TL;DR: use pip-compile to generate a lockfile and pip-sync to install dependencies from that lockfile
To deal with dependencies, we must install the pip-tools package in our virtual environment:
pip install pip-tools
This will allow us to use pip-compile and pip-sync later on.
Once that‚Äôs done, we could for example decide to start a Django project, ‚Äúthe web framework for perfectionists with deadlines‚Äù. The latest version of the package at the time of writing is 3.2.5. Let‚Äôs create our Python equivalent of a package.json file to express our project needs the Django package pinned to version 3.2.5:
# requirements.in
django&#x3D;&#x3D;3.2.5
Note: the better equivalent to a package.json would be a setup.py file, since it contains additional fields like the name of the local package, its version, etc. but we just want to write down the dependencies.
EDIT #1: it‚Äôs apparently not common practice to pin dependency versions in requirements.in, just in case you really need to (if there are breaking changes for example). Thanks for pointing it out, Ondrej.
To generate a corresponding lockfile of the transitive dependencies of Django, we can run the following command:
pip-compile --output-file requirements.txt requirements.in
This will create the following requirements.txt file:
#
# This file is autogenerated by pip-compile with python 3.8
# To update, run:
#
#    pip-compile --output-file&#x3D;requirements.txt requirements.in
#
asgiref&#x3D;&#x3D;3.4.1
    # via django
django&#x3D;&#x3D;3.2.5
    # via -r requirements.in
pytz&#x3D;&#x3D;2021.1
    # via django
sqlparse&#x3D;&#x3D;0.4.1
    # via django

Now that we have this file, we can finally retrieve and install the packages with the following command:
pip-sync
Note: if you try to run pip-sync without a requirements.txt, you will get the following error:
No requirement files given and no requirements.txt found in the current directory
It is indeed necessary to run pip-compile before.
Updating dependencies
Similar to npm oudated, we can list the outdated Python dependencies with
$ pip list --outdated
For example, after downgrading Django to 3.2.3 in my requirements.in, regenerating the lockfile with pip-compile, re-installing the dependencies with pip-sync, the command above will show:
Package    Version Latest Type
---------- ------- ------ -----
Django     3.2.3   3.2.5  wheel
setuptools 44.0.0  57.4.0 wheel
To update the dependency, I can change the version back to 3.2.5 in the requirements.in and go through the same dance:
$ pip-compile --output-file requirements.txt requirements.in
$ pip-sync
$ pip list --outdated
Package    Version Latest Type
---------- ------- ------ -----
setuptools 44.0.0  57.4.0 wheel
EDIT #2: a batteries-included equivalent to Yarn is called Poetry. Thanks for sharing, D√°niel!
Wheels and Eggs
You might wonder what this ‚Äúwheel‚Äù type is for the Django and setuptools packages.
They are still mysterious to me, but here‚Äôs my current understanding: in Python, some dependencies need to be built for specific architectures, as they might be written in Cython, ‚Äúa superset of the Python language that additionally supports calling C functions and declaring C types on variables and class attributes‚Äù. Wheels and Eggs are packaging formats for these.
In particular, it is not a good idea to use Alpine Docker images for Python projects as a lot of packages don‚Äôt have pre-built wheels for that architecture: your Docker build step will need to compile the packages from source, slowing down your entire process (and requiring you to install the necessary build tools for this compilation to happen!).
I don‚Äôt think there is a similar ‚Äúpackaging format‚Äù concept in JavaScript land. But we do have packages shipping prebuilt binaries for specific architectures, for example Sharp, the Node.js image processing package. (And we probably have enough issues with CommonJS vs ES Modules as it is‚Ä¶ :smile:)
Conclusions
All in all, a project needs to:
specify external dependencies and their desired version with semantic ranges
have a way to retrieve said dependencies
keep track of which versions were effectively installed to improve reproducibility.
Despite all these measures, the Docker file of an unmaintained 3-year old project could not build. Software rots!*
#### [How to Download a Brain with Pair Documenting](https:&#x2F;&#x2F;www.robincussol.com&#x2F;download-a-brain-with-pair-documenting&#x2F;) 
*When people leave the company, a lot of specific and ad hoc knowledge goes away with them. Unless there is already a strong documentation culture, there‚Äôs only so much that can be said and done during exit interviews to make up for it.
But this doesn‚Äôt have to be left to fate.
Throughout the month of January, my now ex-colleague Adam Jani≈° and I pair documented all his knowledge about the frontend infrastructure at Kiwi.com. We produced a 24 page document, fixed a few bugs and addressed some tech debt. More importantly, we had fun doing it!
Here‚Äôs how we approached it.
How to pair document
This is an attempt at formalising what we‚Äôve done, feel free to s&#x2F;Newbie&#x2F;Robin&#x2F;g and s&#x2F;Expert&#x2F;Adam&#x2F;g.
The Protagonists
You will need two proactive people: an Expert on the subject to document and a Newbie who is not too cursed with knowledge yet. Bonus points if they have not really worked together but always had good chemistry in their interactions.

The Newbie makes it easy on the Expert for this documentation effort to be a no-brainer:
they organize the pair documenting sessions;
they manage the agenda of the sessions;
they do most of the note-taking;
they digest the notes into documentation drafts in between sessions;
they stay curious and eager to learn more about the subjects, with questions always at the ready (this is hard to fake, so find an adequate Newbie for the task).

The Expert shows up at the sessions and generously shares their knowledge with the Newbie, answering patiently every question they may have. They review the documentation drafts to ensure the prose does not betray the original intent of the notes. Bonus points if they include the Newbie in solving similar problems described in the nascent documentation as they arise in the support channels of the company‚Äôs Slack: learning by doing is a great way to drive home the material and expose remaining ambiguities.

The First Session
The Newbie is in charge and explains how it‚Äôs going to work in the first pair-documenting session. That means going through what‚Äôs expected of each participant in this documentation effort as well as giving an overview of the actual process.
The objective of the first session is crucial: go as broad as possible and capture as many ideas of what needs documenting to form a backlog of topics to go over in the next sessions.
This can be achieved through asking questions like (more examples in this template):
what are things that you know about that very few people know?
what are the things that people always ping you about on Slack?
what tasks pile up when you‚Äôre on vacation?
Once the amount of things to document gets a bit clearer, see how many days are left before they leave and agree on a schedule to leave enough time for this task.
In Between Sessions
The Newbie transforms the raw notes into documentation drafts and gets the Expert to review them.
As more people in the company are aware of this documentation effort, they might have questions of their own; the Newbie adds these points to the agenda for the next session.
The Expert includes the Newbie in all discussions on Slack touching on the subject to maximize the learning opportunities and give the docs a trial by fire.
A Normal Session
In the first 5-10 minutes, the Newbie and the Expert go over unresolved comments in the doc draft, they review the agenda from the previous session and see if anything pops up to be further discussed or explained, and finally, they review the agenda for the current session and decide what to prioritize.
They then go over each point in the agenda: the Expert does most of the talking while the Newbie does most of the note-taking. The Newbie shares their screen for the document to be visible by both pair documentors. The Newbie may interrupt the Expert at any point with questions or with attempts at paraphrasing what the Expert just described. The Expert glances at the notes being taken once in a while to ensure they don‚Äôt contain mistakes from the get-go.
When the time is up, the Newbie and the Expert look at how much they covered from the agenda, move what hasn‚Äôt been covered to the next session, and agree on a date and time for that next session (if it‚Äôs not already regular).
Tools we used
A Calendar: to plan the sessions, to have automatic reminders for them, and to share the visio-conference link.


Custom recurrence with expiry date, Hangouts link, Notification not to miss it, Allow guests to modify event for better collaboration

A Google Document: to store the agenda, the notes and the first documentation drafts. Do make use of the outline on the left-hand side to navigate more easily once the document gets to a certain size. Do make use of comments to discuss and improve the notes and the draft. This is also a good place to involve other people from the company asynchronously. Make sure to put this document in a shared team drive for it to have the right permissions set by default.


Use the ‚ÄúStyles‚Äù dropdown to get this hierarchy

Here‚Äôs a free template Google document to get you started. Feel free to make a copy.
LucidChart: to draw a few diagrams because pictures are great (though you may want to check out Draw.io for a great free alternative).
Why Pair Documenting Works
What usually happens
Unless there is a strong documenting culture, (1) people never prioritize documentation over almost any other task, because it‚Äôs just not as fun as coding or as urgent as the next fire you need to put out. That means that when someone is about to leave, (2) there is an impossible amount of things to document that they don‚Äôt even know where to start. Because they are short on time, they end up drafting a lil‚Äô something and call it a day. (3) Anyway, we never needed that, why are they asking me to document that stuff, who‚Äôs gonna read it anyway?! (Note the use of two ‚Äúanyway‚Äù).
Clear intention through planning
Through planning the pair documenting sessions, we make sure documentation does get prioritized and give it the importance it deserves. If the Expert‚Äôs knowledge is that important and they by happenstance siloed it, it becomes urgent to share this knowledge more widely to deal with that critical bus factor. (Whether they leave or not is almost irrelevant in this case.)
Because we know when the Expert‚Äôs last working day is, it is easier to retro-plan the right number of sessions to cover the entire backlog established in the first session. This of course might need adjusting throughout the pair documentation effort.
More fun and better quality through collaboration
Planning is not enough if the Expert is still lost about what needs documenting and in which level of details. The nagging ‚Äúare they even gonna read it?‚Äù-type questions could well be the end of the documentation effort already: a well-crafted plan not well-executed.
With an accountability buddy, things turn around entirely.
It becomes really difficult to bail out of the plan because you know the other person is expecting you to show up at the session.
Because the Newbie is enthusiastic about the topic, the Expert is more generous in their contribution.
Because the Newbie asks questions and cares about details, the pair documentors tailor the documentation to the level of knowledge on the receiving end. The Expert knows this documentation will be useful. üòå
Aligned incentives
The Expert also knows that what they know should be documented somewhere, and because they like their colleagues, they don‚Äôt want their departure to create a mess. (Right?!)
The Newbie knows this knowledge is valuable, and about to disappear if they don‚Äôt take action. Besides, it‚Äôs something they‚Äôre curious and wanted to learn more about anyway.
The Expert gets to share their knowledge and teach what they know to someone who‚Äôs enthusiastic and interested in the topic; the Newbie gets time with the Expert to learn as much as possible from them.
Parting thoughts
I really enjoyed the pair documenting sessions with Adam and I think they should be made a regular practice, just like pair programming. It‚Äôs a great way to level up people while producing value beyond the scope of that collaboration.
At the same time, documentation is only valuable if it gets read and updated continuously. I‚Äôve been thinking about how to bring it closer to where people are already consuming content. For example, this could take the form of digests of parts of the documentation in the company‚Äôs Slack.
I‚Äôm not super familiar with mob programming, but I do wonder if mob documenting could be a thing to try too.

Acknowledgements:
Adam Jani≈° (@adam_janis) for trying out this pair-documenting idea before his departure :)
Emilia Vidal for her review and suggestions,
Shawn Wang (@swyx) for his review and ideas for the title and Open-Graph image,
Ron Au (@ronvoluted) for providing the font to go ahead with Shawn‚Äôs ideas,
Excalidraw to produce the visuals.*
#### [Year in Review: 2020](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2020&#x2F;) 
*2020, what a ride!
I cannot believe 2020 has already finally come to an end: with the lockdowns and quarantines, time simultaneously flew by and dragged on. A lot of my life was lived through a computer and the Internet. Time to reflect and remember.
Let‚Äôs start with some remarkable facts and events:
personally: - turned 30 in April, without even a beer to celebrate! (hint: the last bit is what‚Äôs remarkable) ‚ùåüç∫ - traveled only once to see my family in France üò¢ - got engaged in August üíç - spent the Christmas holidays alone, for the first time (I feel you, Kevin McCallister) üö∞
at work: - got a raise and earned a promotion üìà - wrote 3 posts on the Frontend Platform‚Äôs internal blog ‚úç
on my blog: - published 8 new posts üöÄ - updated 1 article ‚ôªÔ∏è - started a newsletter (already wrote 2 issues) üóû - broke the 10k unique visitor mark for Build Standalone Expo .apk and .ipa with Turtle CLI üéâ
miscellaneous: - joined 2 great online communities (Coding Career and Blogging For Devs) üôå - revamped a handful of desktop PCs and laptops (cannot believe I was about to get rid of my older laptop when it‚Äôs so smooth now!): most low-end&#x2F;mid computers are slow because of their stock hard drives (and limited RAM), a nice SSD and some RAM extension will do wonders! üíæ - jumped on the sourdough bread baking train (and learnt recently how sourdough baguettes are a lazy baker‚Äôs dream!) üá´üá∑ ü•ñ
Despite everyone calling 2020 their worst year ever, it did not seem so bad personally. Of course, I missed social life and being able to do ‚Äúnormal‚Äù things, but all things considered, I still learnt a lot this year.
Consumer to archivist
Spending so much time online means I absorbed vast amounts of data and after a while, it did not sit so well with me. I believed that I learn best by immersing myself in a continuous flow of information surrounding one topic. Of course, it‚Äôs worked for me so far, but the cost is that I get overwhelmed and it‚Äôs difficult to know when it‚Äôs enough.
Trying to change that brute-force approach to learning, I read here and there that taking notes would force me to slow down and choose what I consume more wisely. I obviously bought ‚ÄúHow to Take Smart Notes‚Äù by S√∂nke Ahrens (and only half-read it), came across the German word Zettlekasten and went on a wild goose chase for the best Personal Knowledge Management system, and read all the articles and watched all the YouTube videos about the subject. Old habits die hard. üòÖ
After using a few of them, I ended up settling with Joplin (which I had of course already set up prior to any of this) and have not looked back. It does not have backlinks so I‚Äôm deeply missing out on interconnected notes, as the hype goes, but it‚Äôs okay. My FOMO is in check for now. Joplin is an active open source project which is available on desktop as well as mobile devices. I retain full ownership (and responsibility) over my notes as Joplin integrates with different storage backends: I chose to use my self-hosted NextCloud instance.
In short:
just-in-case knowledge is expensive; prefer just-in-time knowledge
it‚Äôs easy to go on a wild goose chase only to realise you had everything already
note-taking does force me to slow down and helps to remember better
Archivist to creator
This story does not end here, dear reader. Accumulating notes about topics I‚Äôm interested in helps to slow down and be more intentional with what I consume. But it turns out knowledge without action is mostly useless.
Luckily, Daniel Vassalo wrote this influential tweet:
If you‚Äôre tempted by this, my advice to first-time creators is to start with a very small product: Something you can finish in 2 weeks and charge #### [Build Standalone Expo .apk and .ipa with Turtle CLI [deprecated]](https:&#x2F;&#x2F;www.robincussol.com&#x2F;build-standalone-expo-apk-ipa-with-turtle-cli&#x2F;) 
*This article was updated on February 7, 2023. NOTE: As of Expo SDK 47, the following method does not work any more. With the release of EAS‚Ä¶*
#### [Optimize your img tags with Eleventy Image and WebC](https:&#x2F;&#x2F;www.robincussol.com&#x2F;optimize-your-img-tags-with-eleventy-image-and-webc&#x2F;) 
*I am very excited about WebC and couldn‚Äôt wait to try out the corresponding Eleventy plugin. The first use-case I had in mind was to use‚Ä¶*
#### [Year in Review: 2021](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2021&#x2F;) 
*We‚Äôre already at the start of February 2022, but who says retrospectives need to be done on January 1st?! A lot of things happened in 202‚Ä¶*
#### [Python Dependencies for JavaScript Developers](https:&#x2F;&#x2F;www.robincussol.com&#x2F;python-dependencies-for-javascript-developers&#x2F;) 
*Recently, I needed to update an old Python codebase which had not been touched in 3 years! Of course, the dependencies were so outdated that‚Ä¶*
#### [How to Download a Brain with Pair Documenting](https:&#x2F;&#x2F;www.robincussol.com&#x2F;download-a-brain-with-pair-documenting&#x2F;) 
*When people leave the company, a lot of specific and ad hoc knowledge goes away with them. Unless there is already a strong documentation‚Ä¶*
#### [Year in Review: 2020](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2020&#x2F;) 
*2020, what a ride! I cannot believe 2020 has already finally come to an end: with the lockdowns and quarantines, time simultaneously flew by‚Ä¶*
#### [Docker for JavaScript Devs: How to Containerise Node.js Apps Efficiently](https:&#x2F;&#x2F;www.robincussol.com&#x2F;docker-for-js-devs-how-to-containerise-nodejs-apps-efficiently&#x2F;) 
*Docker is a really cool technology to have applications run the in the same, predictable context, ensuring the ‚Äúbut it works on my machine‚Ä¶*
#### [TypeScript Tidbit: How to Overload an Imported Function](https:&#x2F;&#x2F;www.robincussol.com&#x2F;typescript-tidbit-how-to-overload-an-imported-function&#x2F;) 
*There are times when the type definitions shipped on DefinitelyTyped are not enough and this results in making the TypeScript compiler‚Ä¶*
#### [Wax on, Wax off](https:&#x2F;&#x2F;www.robincussol.com&#x2F;wax-on-wax-off&#x2F;) 
*The reason I got into web development in the first place was the magical ‚ú® feeling you get when you see your code manifest in the browser‚Ä¶*
#### [A Successful Side-Project: Lessons from Swyx](https:&#x2F;&#x2F;www.robincussol.com&#x2F;a-successful-side-project-lessons-from-swyx&#x2F;) 
*If you are on Twitter, chances are you came across this tweet by Daniel Vassallo and it now seems everyone is writing a book! üòÑ Shawn Wang‚Ä¶*0 for it. The experience of getting paid for something you created, directly by consumers, will change you forever. https:&#x2F;&#x2F;t.co&#x2F;UbUD9ch4xQ
‚Äî Daniel Vassallo (@dvassallo) April 10, 2020
 
and Shawn Wang (@swyx) acted on it almost immediately to produce the Coding Career Handbook a few months later. I had followed him for some time on Twitter. His posts, conference talks and online presence in general always brought me value so I wanted to support his work. I was also really glad that half the proceeds would go to FreeCodeCamp. I got the Creators package, not entirely sure what to expect.
This was one of the best decisions of 2020.
As part of the Creators package, there have been regular workshops and they definitely spurred me further to action. After he invited Monica Lent to give a workshop about blogging for developers, I formed a resolve to try and publish a post every 2 weeks, as a way to transform my note-taking game into something more valuable. That‚Äôs when I resurrected my blog with 5 Tips to Start Blogging (for Devs).
A lot of my posts were shared at work and in the company‚Äôs external newsletter (thank you üôÇ) and for the most part, this resurection was successful, even though December was a bit of a hiatus in my blog publishing, as I started my newsletter, Robin‚Äôs Gazette.
I still have a lot to learn when it comes to creating online content and I am looking forward to continuing with this momentum. Whenever I need a reality check of what it takes to embark on this creator journey, I would have a read through Alex West‚Äôs story, as it‚Äôs so real, inspiring and humbling!
Joining online communities
The Coding Career Handbook is an amazing resource and I would like to write a proper review of the book some day; it contains so much valuable information that it would be hard to do it justice here.
What‚Äôs even more awesome about it is that it came with access to a community through Discord and Circle that Shawn manages really well as it keeps delivering value and furthers the book‚Äôs teachings and principles. And if that wasn‚Äôt enough, I met a few interesting people there who I‚Äôm looking forward to getting to know more in 2021.
Judging by how much the Coding Career community helped me to get real with my volitions, I also decided to join Monica Lent‚Äôs Blogging For Devs community because I‚Äôd like to take my blogging further. For example, my article about [Building] Standalone Expo .apk and .ipa with Turtle CLI broke the 10k unique visitor mark in December, through accidental SEO mostly. üéâ I‚Äôm hoping to get a little bit more intentional with SEO as it‚Äôs a great way to magnify the reach of your content. There are so many interesting and inspiring people in Monica‚Äôs community, as well as discussions and workshops about SEO, newsletters, monetization, and of course blogging‚Äîtopics I definitely want to dive deeper in in the new year!
Writing, writing, writing
If you have read this far, it has become pretty apparent that writing is now more than ever my main focus. I think it has been a tremendous source of clarity and success in the last year for me.
The resource that influenced my writing the most this year was this lecture by Larry McEnerney about the Craft of Writing Effectively (here‚Äôs a summary). Having done a PhD, I practiced the ‚Äúwrong‚Äù way of writing for a very long time. Focusing on what‚Äôs valuable for your intended readership makes so much sense.
As I mentioned in my first newsletter issue (let me know if you want a copy of it üòâ), design documents have been crazy useful at work. I must thank my colleage Tobi√°≈° Potoƒçek for bringing about this revolution. In this remote-only work environment, they were a great tool to discuss, make decisions and document them in a searchable manner. Every shortcut needed to be reckoned with and set against the bigger picture. Every quirk or contextual piece of information (which are critically important to understand past decisions or make new ones) are now recorded in writing.
Being a member of the Frontend Platform team, communicating as effectively as possible with the teams we serve was critically important too‚Äîespecially in such challenging times for a travel company in 2020. Most of that communication was done in writing through Slack and Google Documents. (Not to say it was always a smooth ride‚Ä¶)
A look ahead
In 2021, I will focus on staying in shape, physically and mentally. We will go for walks in nature more regularly with Emilia (we agreed at least once a month and have a list of places in Czechia!) I will cycle to work as much as possible, get back into the nice workout rhythm we had during the first lockdown and take care of my sleeping patterns (it‚Äôs all great to wake up earlier to write, but that means going to bed earlier too, Robin ;-)) I will take breaks when I‚Äôm getting overwhelmed, instead of resorting to my usual ‚Äústrategy‚Äù of pushing through until I‚Äôm burnt out.
In 2021, I will focus on maintaining the shift from content consumption to content creation. I want to continue publishing on my blog every 2 weeks as well as send my Gazette every 2 weeks. I will write a book to help PhD graduates transition to web development: I‚Äôm now further along the path (and my work seems to be appreciated :)), so it‚Äôs time to try and lift others as I climb.
In 2021, I will finally speak Slovak fluently to be able to speak to all our wedding guests (still to be planned‚Ä¶ so I got time, I guess :P) in their preferred language. (Robin of January 2022, you‚Äôre welcome!)
C‚Äôest parti!*
#### [Docker for JavaScript Devs: How to Containerise Node.js Apps Efficiently](https:&#x2F;&#x2F;www.robincussol.com&#x2F;docker-for-js-devs-how-to-containerise-nodejs-apps-efficiently&#x2F;) 
*Docker is a really cool technology to have applications run the in the same, predictable context, ensuring the ‚Äúbut it works on my machine‚Äù comments are a thing of the past. Not to mention how Docker integrates with Docker Compose and Kubernetes for larger-scale applications! But that‚Äôs for another day.
In this article, you will learn about some good principles to containerise Node.js apps efficiently. These principles are probably quite general and well-known, but they‚Äôre easy to overlook for beginners to Docker and Dockerfiles.
You will need to have Docker and Node.js installed locally to follow along comfortably.
Docker wants to make you happy, 
Photo by cottonbro from Pexels



Table of contents
Containerising a Next.js app (naive approach)

Docker Glossary
Optimising a Node.js app‚Äôs Docker image

Create a comprehensive .dockerignore file
Use an appropriate base image
Decouple the dependency installation step from application code
Decouple the build from the resulting built application
(Optional) Purge node_modules from unnecessary files
Docker build checklist for JavaScript Devs
Containerising a Next.js app (naive approach)
Let‚Äôs start with a simple Next.js application:
$ npm create next-app --use-npm
and let‚Äôs write the following into a file called Dockerfile at the root of the project:
FROM node:14.15.0

WORKDIR &#x2F;app

COPY . .
RUN npm ci
RUN npm run build

EXPOSE 3000

USER node

CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
Okay, what just happened? üòÑ
Docker Glossary
FROM &lt;image&gt;
WORKDIR &lt;some-path-in-the-container&gt;
COPY &lt;from-context&gt; &lt;to-container&gt;
WORKDIR directory
RUN &lt;command&gt;
docker build process only
EXPOSE &lt;port&gt;
documenting which port the app uses
USER &lt;user&gt;
root with superuser privileges); it‚Äôs good practice to use a different user to run the app.
CMD &lt;command&gt;
docker run &lt;image-tag&gt;, it is not executed during the build process.
Assuming we have Docker installed, we could now run
$ docker build --tag my-containerised-nextjs-app .
This command kindly asks the Docker daemon running on our machine to build the Dockerfile we just wrote with the files present in the current directry (the .) and to call that image my-containerised-nextjs-app (with the --tag flag).
After the build completed, run
$ docker run --rm -p 3000:3000 my-containerised-nextjs-app
and we should have our app running at http:&#x2F;&#x2F;localhost:3000.
This second command orders the Docker daemon to run the image named my-containerised-nextjs-app with port 3000 on my machine to correspond to port 3000 inside the container so that we can interact with our Next.js app. This port mapping is done through the -p hostPort:containerPort flag. Go ahead and change the port mapping and see if you can still access the app.
The --rm flag indicates that we do not want the Docker daemon to keep the container when we stop its execution (with CTRL+C); this is useful not to clog our machines with useless logs while developing.
Voil√†, we have containerised our Next.js app. The End. üéâ
Wait! Don‚Äôt leave, there‚Äôs more! üëá
Optimising a Node.js app‚Äôs Docker image
The section above does the job, but it‚Äôs not optimal. If we only have so few pipeline minutes and we don‚Äôt like wasting resources ‚ôªÔ∏è, this setup will eat more than is necessary. There are a few strategies to optimise a Dockerfile:
Create a comprehensive .dockerignore file
Use an appropriate base image
Decouple the dependency installation step from application code
Decouple the build from the resulting built application
(Optional) Purge node_modules from unnecessary files
Create a comprehensive .dockerignore file
If we look at the logs from building the Docker image, we could read:
Step 4&#x2F;8 : RUN npm ci
 ---&gt; Running in 559b499f0e2c
npm WARN prepare removing existing node_modules&#x2F; before installation
That means we copied the node_modules folder from our local context over to the Docker image being built. What‚Äôs more, npm ci removes them to make sure it works consistently. That is an indication that we should not copy the node_modules in the first place.
To let Docker know some files and folders should be ignored, we can list them in a .dockerignore file. For example, add the following to a file named .dockerignore:
node_modules
Run the build again and the warning disappeared.
What‚Äôs more, we can see how much less was sent to the Docker build context:
# BEFORE
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  101.8MB

# AFTER
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  400.4kB
In practice, we would want to add as many files as possible to our .dockerignore to ensure we‚Äôre not wasting time and energy on files which won‚Äôt be necessary for the build. This can include documentation files (e.g. *.md), configuration files which are only necessary when developing (e.g. .eslint*, .prettier*) as well as our Git history (e.g. .git).
With the following .dockerignore file:
node_modules
*.md
.git
we end up sending the bare minimum to the Docker daemon:
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  248.3kB
Use an appropriate base image
Docker images come in all shapes and sizes. When it comes to building or deploying our app, the smaller the size, the better. For our Next.js app, we don‚Äôt need all that‚Äôs available in node:14.15.0. For example, we don‚Äôt need git or curl. We can instead use the alpine flavour of that image, namely node:14.15.0-alpine.
The difference in size between node:14.15.0 and node:14.15.0-alpine is enormous!
REPOSITORY                    TAG                 SIZE
node                          14.15.0             943MB
node                          14.15.0-alpine      117MB
Our final containerised Next.js app will hence be much smaller thanks to this teeny-tiny modification of our Dockerfile:
- FROM node:14.15.0
+ FROM node:14.15.0-alpine

WORKDIR &#x2F;app

COPY . .
RUN npm ci
RUN npm run build

EXPOSE 3000

USER node

CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
For reference, if we want to inspect the size of the Docker images we have available locally, we can run docker image ls --all.
Our Docker image has size 1.05GB if we use node:14.15.0,
REPOSITORY                    TAG                 IMAGE ID            CREATED             SIZE
my-containerised-nextjs-app   latest              c78d43a2c5bc        15 seconds ago      1.05GB
and it drops to 229MB if we use node:14.15.0-alpine instead!
REPOSITORY                    TAG                 IMAGE ID            CREATED             SIZE
my-containerised-nextjs-app   latest              d0746ef6e8a4        21 seconds ago      229MB
Decouple the dependency installation step from application code
Our setup is already much better with a suitable .dockerignore file and with a much leaner base image. However, we haven‚Äôt made any changes to our package.json and the npm ci step always needs to run if make any changes to our application code.
This is because Docker caches each step as an intermediate Docker container. For example, if we were to run the build again (docker build --tag my-containerised-nextjs-app .), we would see that the cache is used for all steps, resulting in a nearly instant build (because nothing happened, really üòÑ):
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  248.3kB
Step 1&#x2F;8 : FROM node:14.15.0-alpine
 ---&gt; 9db54a688554
Step 2&#x2F;8 : WORKDIR &#x2F;app
 ---&gt; Using cache
 ---&gt; d5d4291dc699
Step 3&#x2F;8 : COPY . .
 ---&gt; Using cache
 ---&gt; b56455e98a93
Step 4&#x2F;8 : RUN npm ci
 ---&gt; Using cache
 ---&gt; ba4ab784f27e
Step 5&#x2F;8 : RUN npm run build
 ---&gt; Using cache
 ---&gt; a51c18594a20
Step 6&#x2F;8 : EXPOSE 3000
 ---&gt; Using cache
 ---&gt; 806dc06cbb6c
Step 7&#x2F;8 : USER node
 ---&gt; Using cache
 ---&gt; b86db08de717
Step 8&#x2F;8 : CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
 ---&gt; Using cache
 ---&gt; d0746ef6e8a4
Successfully built d0746ef6e8a4
Successfully tagged my-containerised-nextjs-app:latest
If we now modify anything in the folder that is not ignored thanks to our .dockerignore file, Docker will have to bust the cache from Step 3 onwards (the ‚ÄúUsing cache‚Äù expression is not printed any more). Let‚Äôs create an empty file and run the build again:
# create an empty file
$ touch file
# build again
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  248.8kB
Step 1&#x2F;8 : FROM node:14.15.0-alpine
 ---&gt; 9db54a688554
Step 2&#x2F;8 : WORKDIR &#x2F;app
 ---&gt; Using cache
 ---&gt; d5d4291dc699
Step 3&#x2F;8 : COPY . .
 ---&gt; e2b761bb08a6         # The cache is not used anymore
Step 4&#x2F;8 : RUN npm ci
 ---&gt; Running in b36f2511e117
...
To remedy this and ensure that npm ci runs only when necessary, we can first copy package.json and package-lock.json files, run npm ci, and then bring in the rest of the files to build the project:
FROM node:14.15.0-alpine

WORKDIR &#x2F;app

- COPY . .
+ COPY package.json .
+ COPY package-lock.json .
RUN npm ci
+ COPY . .
RUN npm run build

EXPOSE 3000

USER node

CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
After we modified the Dockerfile by applying the diff above, we see that Docker does not leverage the cache at all because the steps are different. This always happens when we modify the layers and&#x2F;or their order.
However, after running this build for a first time, subsequent builds will be much faster as the npm ci step will use the cache unless we modify package.json or package-lock.json:
# create another file to see when Docker stops using the cache
$ touch another-file
# run the build again
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  249.3kB
Step 1&#x2F;10 : FROM node:14.15.0-alpine
 ---&gt; 9db54a688554
Step 2&#x2F;10 : WORKDIR &#x2F;app
 ---&gt; Using cache
 ---&gt; d5d4291dc699
Step 3&#x2F;10 : COPY package.json .
 ---&gt; Using cache
 ---&gt; 139b5a611c0b
Step 4&#x2F;10 : COPY package-lock.json .
 ---&gt; Using cache
 ---&gt; 5bc380de1397
Step 5&#x2F;10 : RUN npm ci
 ---&gt; Using cache
 ---&gt; dff6b2da4bdc
Step 6&#x2F;10 : COPY . .
 ---&gt; 08911c09b40f
Step 7&#x2F;10 : RUN npm run build
 ---&gt; Running in f5374a54d9ad

&gt; my-app@0.1.0 build &#x2F;app
&gt; next build
...
Decouple the build from the resulting built application
For this section to make more sense, we will create another Next.js app that uses some dev dependencies which are necessary only when building the app but not when running it in production.
$ npm create next-app --use-npm --example with-tailwindcss with-tailwindcss-app
Copy the Dockerfile and .dockerignore files created in the other example into with-tailwindcss-app. Build the Docker image and run it to make sure it‚Äôs working well before continuing:
$ docker build --tag with-tailwindcss-app .
$ docker run --rm -p 3000:3000 with-tailwindcss-app
As we can see in the package.json file, we have a few dependencies which are only ever going to be used when building our app. We won‚Äôt need them in the final Docker image. So let‚Äôs get rid of them!
We are going to leverage multi-stage Docker builds. They sound more complicated than they are :)
Here‚Äôs a multi-stage build Dockerfile: in the builder container, we install dependencies and build our app, and in the second stage, we copy relevant files from the builder to our final image and install only production dependencies.
FROM node:14.15.0-alpine as builder

WORKDIR &#x2F;app

COPY package.json .
COPY package-lock.json .
RUN npm ci
COPY . .
RUN npm run build

FROM node:14.15.0-alpine

WORKDIR &#x2F;app

COPY --from&#x3D;builder &#x2F;app&#x2F;package.json .
COPY --from&#x3D;builder &#x2F;app&#x2F;package-lock.json .
RUN npm ci --production
COPY --from&#x3D;builder &#x2F;app&#x2F;.next .next

EXPOSE 3000

USER node

CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
If our app also contained a Next.js config file and a public folder, we would also need to copy them from the builder stage:
...
COPY --from&#x3D;builder &#x2F;app&#x2F;.next .
+ COPY --from&#x3D;builder &#x2F;app&#x2F;next.config.js .
+ COPY --from&#x3D;builder &#x2F;app&#x2F;public public
...
Comparing the sizes, we see that we removed 39MB of dev dependencies, not bad.
without multi-stage build
REPOSITORY                    TAG                 IMAGE ID            CREATED              SIZE
with-tailwindcss-app          latest              88089e6f965d        18 minutes ago      269MB
with multi-stage build
REPOSITORY                    TAG                 IMAGE ID            CREATED              SIZE
with-tailwindcss-app          latest              ba7307736fb0        25 seconds ago       230MB
(Optional) Purge node_modules from unnecessary files
Finally, to make our Docker image the leanest, we will purge our node modules from all the files which were included by the library authors and aren‚Äôt directly useful to our Docker image. For example, documentation files and READMEs, config files for Prettier and such, etc.
Note that this is not without risk as we could be removing files that we actually need to run the application correctly (we had a file named test.js that contained important code and it was mercilessly removed by the tool, which broke the application üòÖ).
We will add another stage called production-deps to make our node modules go through a diet with node-prune (GitHub repo). The list of files and folders that node-prune will remove is largely inspired by Yarn‚Äôs default list (generated through yarn autoclean --init).
To install node-prune, we need curl to be a locally available executable, so we can either choose a base image that contains it out of the box, or we can add it to node:14.15.0-alpine. Because we won‚Äôt need anything else, we will choose the latter.
FROM node:14.15.0-alpine as builder

WORKDIR &#x2F;app

COPY package.json .
COPY package-lock.json .
RUN npm ci
COPY . .
RUN npm run build

+ FROM node:14.15.0-alpine as production-deps

+ WORKDIR &#x2F;app

COPY --from&#x3D;builder &#x2F;app&#x2F;package.json .
COPY --from&#x3D;builder &#x2F;app&#x2F;package-lock.json .
RUN npm ci --production
+ # Add curl
+ RUN apk --no-cache add curl
+ # Install node-prune https:&#x2F;&#x2F;github.com&#x2F;tj&#x2F;node-prune
+ RUN curl -sf https:&#x2F;&#x2F;gobinaries.com&#x2F;tj&#x2F;node-prune | sh
+ RUN node-prune &#x2F;app

FROM node:14.15.0-alpine

WORKDIR &#x2F;app

+ COPY --from&#x3D;production-deps &#x2F;app&#x2F;package.json .
+ COPY --from&#x3D;production-deps &#x2F;app&#x2F;package-lock.json .
+ COPY --from&#x3D;production-deps &#x2F;app&#x2F;node_modules node_modules

COPY --from&#x3D;builder &#x2F;app&#x2F;.next .next

EXPOSE 3000

USER node

CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
Try it by building the image once more.
When node-prune ran, it printed out in the console that it removed 12MB:
...
Step 15&#x2F;24 : RUN node-prune &#x2F;app
 ---&gt; Running in 69e030ab8b70


         files total 14,269
       files removed 3,722
        size removed 12 MB
            duration 216ms
...
However, suprinsingly, a whopping 32MB were removed in comparison to our previous Dockerfile. (It seems node-prune‚Äôs tallying is not totally accurate when I tested locally as it removed 20.7 MB instead ‚Äî though it still doesn‚Äôt explain the other 11.3 MB ü§∑‚Äç‚ôÇÔ∏è)
$ docker image ls with-tailwindcss-app
REPOSITORY                    TAG                 IMAGE ID            CREATED              SIZE
with-tailwindcss-app          latest              c5e2081dba30        9 seconds ago        198MB
Let‚Äôs ensure our app is running well without the files node-prune removed and we can be on our merry way! üê≥ üéâ
Docker build checklist for JavaScript Devs
To summarise what we‚Äôve learnt so far, here‚Äôs a small checklist to review our own Docker build setups:
I have a comprehensive .dockerignore file
I use an appropriate base image
I decoupled the dependency installation step to improve caching
I decoupled the resulting built application from the build step
I purged the node_modules from unnecessary files
Time to flex! üí™ Show me your before and after Docker image sizes in the comments below!*
#### [TypeScript Tidbit: How to Overload an Imported Function](https:&#x2F;&#x2F;www.robincussol.com&#x2F;typescript-tidbit-how-to-overload-an-imported-function&#x2F;) 
*There are times when the type definitions shipped on DefinitelyTyped are not enough and this results in making the TypeScript compiler unhappy. Oh noes! üò≠
Functions Overloading Be Like, Photo by Luis Villasmil) on Unsplash.



Overload an imported function in TypeScript
But fear not! It is possible to overload a function imported from a different module (which could even be a local module&#x2F;file, not necessarily a node module) without ‚Äúpatching‚Äù the corresponding @types&#x2F;&lt;package&gt; type definitions.
import { someFunction } from &#39;module&#39;

&#x2F;&#x2F; the function overloading
declare module &#39;module&#39; {
  function someFunction() &#x2F;&#x2F; the overload you need
}

someFunction() &#x2F;&#x2F; with the overloaded version ‚úîÔ∏è
Example: overload Ramda‚Äôs compose function
A practical example is Ramda‚Äôs compose function. If you pass more than 7 functions to the function, you need to overload Ramda‚Äôs type definitions coming from @types&#x2F;ramda as the TypeScript compiler will report an error otherwise (TypeScript Playground Error Example).

DefinitelyTyped obviously cannot provide the type definitions for any number of arguments as compose accepts as many arguments as you want. So it‚Äôs up to you to inform the TypeScript compiler that this usage is actually okay. üòå
This can be done like in the example below (TypeScript Playground Working Example):
import * as R from &#39;ramda&#39;

&#x2F;&#x2F; overloading compose because &#x60;@types&#x2F;ramda&#x60; exposes types for up to 6 functions
declare module &#39;ramda&#39; {
  function compose&lt;V0, T1, T2, T3, T4, T5, T6, T7&gt;(
    fn6: (x: T6) &#x3D;&gt; T7,
    fn5: (x: T5) &#x3D;&gt; T6,
    fn4: (x: T4) &#x3D;&gt; T5,
    fn3: (x: T3) &#x3D;&gt; T4,
    fn2: (x: T2) &#x3D;&gt; T3,
    fn1: (x: T1) &#x3D;&gt; T2,
    fn0: (x0: V0) &#x3D;&gt; T1
  ): (x0: V0) &#x3D;&gt; T7
}

&#x2F;&#x2F; and now, we can use:
const someComplicatedResult &#x3D; R.compose&lt;V0, T1, T2, T3, T4, T5, T6, T7&gt;(
  fn6,
  fn5,
  fn4,
  fn3,
  fn2,
  fn1,
  fn0
)(&#39;üòÖ&#39;)
We can see from the screenshot below that the overload was correctly taken into consideration. üéâ

Caveat
I can imagine that if this is overused, things can become quickly intractable. So use it sparingly and always with a good reason why. Your future self will be happy to find an explanation in a comment above the overloading as it is kind of unusual. üòâ
I discovered this while refactoring @kiwicom&#x2F;splitster to TS (link to commit) and thought it might be useful to share. Hope it helped you!*
#### [Wax on, Wax off](https:&#x2F;&#x2F;www.robincussol.com&#x2F;wax-on-wax-off&#x2F;) 
*The reason I got into web development in the first place was the magical ‚ú® feeling you get when you see your code manifest in the browser.
In my current role at work, I don‚Äôt do much of that anymore. And I guess I kind of miss it. Especially the part when I am given a clearly defined outcome, with clear guidelines. Perks of being labelled a senior, I guess. üòú But I digress.
Since I started with React, a lot of things have happened in web development. At the moment, I‚Äôm especially interested in Svelte and TailwindCSS and after watching Rich Harris‚Äôs latest talk ‚ÄúFuturistic Web Development‚Äù, I needed an excuse to try Svelte ASAP.
Staying sharp with deliberate practice
To ensure my frontend skills don‚Äôt wither, I would like to spend dedicated time each week to practice on a set of frontend challenges and reflect on what I learnt from them.
Fortunately, I recently discovered FrontendMentor.io and this website offers quite the list of frontend challenges, ranging in difficulty and consistently with nice designs.
Improve your front-end coding skills by building real projects
Solve real-world HTML, CSS and JavaScript challenges whilst working to professional designs.
‚Äî FrontendMentor.io
And to practice with new frontend technologies, it‚Äôs good to find nice designs. But it‚Äôs even better when they come with a style guide and assets like pictures and icons. üòç
Here‚Äôs how it works:
You choose a challenge and download the files.
You attempt the challenge with the stack of your choice. Because the challenge files come with a style guide, the necessary pictures and icons, etc. it‚Äôs really easy to get started! (Unless you spend hours deciding which stack to use, of course üòÇ)
You upload it to GitHub and deploy your attempt on Vercel or Netlify.
Finally, you submit your solution through your challenges dashboard on the platform.
You can then get feedback on your submissions and provide reviews for other people‚Äôs submissions too, which I find really cool. I remember how difficult it was to get feedback when I was first learning web development.
Learnings
The last challenge I attempted looked pleasing on my eyes and I honestly did not expect I would learn so much from it. That makes me want to practice even more!
Check out the live deployment!


I encountered the following problems to complete the ‚ÄúSocial media dashboard with theme switcher‚Äù challenge:
setting up Svelte with TailwindCSS (thank you Swyx and Chris Dhanaraj)
implementing a toggle component from scratch
without accessibility in mind (where I started: W3Schools üòÖ)
with accessibility in mind (where I ended up: Smashing Magazine, though I‚Äôm not sure how to test if my current solution is the most accessible)
implementing a theme switcher in Svelte (inspiration from this Svelte REPL)
adding a border with a gradient to a block element (this requires using a CSS trick from nowhere else but CSS Tricks of course)
pulling my hair for not realising that you need the group class for group-hover: modifiers to apply in the children with Tailwind (thank you Estevan Maito)
how to extract the imported Svelte components‚Äô props‚Äô TypeScript types (that‚Äôs a mouthful!), instead of exporting and importing the types directly (TL;DR: use $props_def from the component)
&lt;script lang&#x3D;&quot;ts&quot;&gt;
  import MyComponent from &#39;.&#x2F;MyComponent.svelte&#39;;

  const data: MyComponent[&#39;$props_def&#39;][&#39;data&#39;] &#x3D; ...
&lt;&#x2F;script&gt;

&lt;MyComponent {data} &#x2F;&gt;

...
deploying a ‚Äúmonorepo‚Äù on Vercel without redeploying all the folders all the time by specifying the ‚ÄúIgnored Build Step‚Äù with something like git diff --quiet HEAD^ HEAD -- subfolder-in-monorepo to only rebuild the site if changes were made in subfolder-in-monorepo.
Here‚Äôs the GitHub repository where I will learn in public and add future challenges I will attempt. (Though I might need to rename this repository in the future as I just found this really nice list of project ideas to build with other platforms than FrontendMentor.io üòâ)
Let me know in the comments what your current deliberate practice is!*
#### [A Successful Side-Project: Lessons from Swyx](https:&#x2F;&#x2F;www.robincussol.com&#x2F;a-successful-side-project-lessons-from-swyx&#x2F;) 
*If you are on Twitter, chances are you came across this tweet by Daniel Vassallo
If you‚Äôre tempted by this, my advice to first-time creators is to start with a very small product: Something you can finish in 2 weeks and charge #### [Build Standalone Expo .apk and .ipa with Turtle CLI [deprecated]](https:&#x2F;&#x2F;www.robincussol.com&#x2F;build-standalone-expo-apk-ipa-with-turtle-cli&#x2F;) 
*This article was updated on February 7, 2023. NOTE: As of Expo SDK 47, the following method does not work any more. With the release of EAS‚Ä¶*
#### [Optimize your img tags with Eleventy Image and WebC](https:&#x2F;&#x2F;www.robincussol.com&#x2F;optimize-your-img-tags-with-eleventy-image-and-webc&#x2F;) 
*I am very excited about WebC and couldn‚Äôt wait to try out the corresponding Eleventy plugin. The first use-case I had in mind was to use‚Ä¶*
#### [Year in Review: 2021](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2021&#x2F;) 
*We‚Äôre already at the start of February 2022, but who says retrospectives need to be done on January 1st?! A lot of things happened in 202‚Ä¶*
#### [Python Dependencies for JavaScript Developers](https:&#x2F;&#x2F;www.robincussol.com&#x2F;python-dependencies-for-javascript-developers&#x2F;) 
*Recently, I needed to update an old Python codebase which had not been touched in 3 years! Of course, the dependencies were so outdated that‚Ä¶*
#### [How to Download a Brain with Pair Documenting](https:&#x2F;&#x2F;www.robincussol.com&#x2F;download-a-brain-with-pair-documenting&#x2F;) 
*When people leave the company, a lot of specific and ad hoc knowledge goes away with them. Unless there is already a strong documentation‚Ä¶*
#### [Year in Review: 2020](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2020&#x2F;) 
*2020, what a ride! I cannot believe 2020 has already finally come to an end: with the lockdowns and quarantines, time simultaneously flew by‚Ä¶*
#### [Docker for JavaScript Devs: How to Containerise Node.js Apps Efficiently](https:&#x2F;&#x2F;www.robincussol.com&#x2F;docker-for-js-devs-how-to-containerise-nodejs-apps-efficiently&#x2F;) 
*Docker is a really cool technology to have applications run the in the same, predictable context, ensuring the ‚Äúbut it works on my machine‚Ä¶*
#### [TypeScript Tidbit: How to Overload an Imported Function](https:&#x2F;&#x2F;www.robincussol.com&#x2F;typescript-tidbit-how-to-overload-an-imported-function&#x2F;) 
*There are times when the type definitions shipped on DefinitelyTyped are not enough and this results in making the TypeScript compiler‚Ä¶*
#### [Wax on, Wax off](https:&#x2F;&#x2F;www.robincussol.com&#x2F;wax-on-wax-off&#x2F;) 
*The reason I got into web development in the first place was the magical ‚ú® feeling you get when you see your code manifest in the browser‚Ä¶*
#### [A Successful Side-Project: Lessons from Swyx](https:&#x2F;&#x2F;www.robincussol.com&#x2F;a-successful-side-project-lessons-from-swyx&#x2F;) 
*If you are on Twitter, chances are you came across this tweet by Daniel Vassallo and it now seems everyone is writing a book! üòÑ Shawn Wang‚Ä¶*0 for it. The experience of getting paid for something you created, directly by consumers, will change you forever. https:&#x2F;&#x2F;t.co&#x2F;UbUD9ch4xQ
‚Äî Daniel Vassallo (@dvassallo) April 10, 2020
 
and it now seems everyone is writing a book! üòÑ
Shawn Wang took this advice and decided to go forth with his Coding Career Handbook (for which I‚Äôm grateful! It‚Äôs such a great book!). He shares his lessons and regrets in this talk at js.la üìΩÔ∏è, and here are my notes for my future self when I want to ship a side project (for money or not).
The How
There are 4 aspects:
Pre-selling
Delivering
Launching
Keeping going
Pre-selling - or your own Kickstarter
On the first day of this endeavour, take the time to find a topic, a name and put up a landing page with good marketing copy.
Pre-sell to your friends and close network: they are more likely to ask you about the state of the project and you would hate to disappoint. What‚Äôs more, you‚Äôve got their money which you would awkwardly need to return otherwise.
This is probably a good moment to decide which platform(s) you want to use to support the sale of your book. Gumroad and Podia seem to be fairly big players in that space.
If it is your first side project that you would like to ship for money, don‚Äôt fret too much over the pricing strategy; it is more of a distraction from writing and completing the project. Sticking to Daniel Vassallo‚Äôs recommendation of #### [Build Standalone Expo .apk and .ipa with Turtle CLI [deprecated]](https:&#x2F;&#x2F;www.robincussol.com&#x2F;build-standalone-expo-apk-ipa-with-turtle-cli&#x2F;) 
*This article was updated on February 7, 2023. NOTE: As of Expo SDK 47, the following method does not work any more. With the release of EAS‚Ä¶*
#### [Optimize your img tags with Eleventy Image and WebC](https:&#x2F;&#x2F;www.robincussol.com&#x2F;optimize-your-img-tags-with-eleventy-image-and-webc&#x2F;) 
*I am very excited about WebC and couldn‚Äôt wait to try out the corresponding Eleventy plugin. The first use-case I had in mind was to use‚Ä¶*
#### [Year in Review: 2021](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2021&#x2F;) 
*We‚Äôre already at the start of February 2022, but who says retrospectives need to be done on January 1st?! A lot of things happened in 202‚Ä¶*
#### [Python Dependencies for JavaScript Developers](https:&#x2F;&#x2F;www.robincussol.com&#x2F;python-dependencies-for-javascript-developers&#x2F;) 
*Recently, I needed to update an old Python codebase which had not been touched in 3 years! Of course, the dependencies were so outdated that‚Ä¶*
#### [How to Download a Brain with Pair Documenting](https:&#x2F;&#x2F;www.robincussol.com&#x2F;download-a-brain-with-pair-documenting&#x2F;) 
*When people leave the company, a lot of specific and ad hoc knowledge goes away with them. Unless there is already a strong documentation‚Ä¶*
#### [Year in Review: 2020](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2020&#x2F;) 
*2020, what a ride! I cannot believe 2020 has already finally come to an end: with the lockdowns and quarantines, time simultaneously flew by‚Ä¶*
#### [Docker for JavaScript Devs: How to Containerise Node.js Apps Efficiently](https:&#x2F;&#x2F;www.robincussol.com&#x2F;docker-for-js-devs-how-to-containerise-nodejs-apps-efficiently&#x2F;) 
*Docker is a really cool technology to have applications run the in the same, predictable context, ensuring the ‚Äúbut it works on my machine‚Ä¶*
#### [TypeScript Tidbit: How to Overload an Imported Function](https:&#x2F;&#x2F;www.robincussol.com&#x2F;typescript-tidbit-how-to-overload-an-imported-function&#x2F;) 
*There are times when the type definitions shipped on DefinitelyTyped are not enough and this results in making the TypeScript compiler‚Ä¶*
#### [Wax on, Wax off](https:&#x2F;&#x2F;www.robincussol.com&#x2F;wax-on-wax-off&#x2F;) 
*The reason I got into web development in the first place was the magical ‚ú® feeling you get when you see your code manifest in the browser‚Ä¶*
#### [A Successful Side-Project: Lessons from Swyx](https:&#x2F;&#x2F;www.robincussol.com&#x2F;a-successful-side-project-lessons-from-swyx&#x2F;) 
*If you are on Twitter, chances are you came across this tweet by Daniel Vassallo and it now seems everyone is writing a book! üòÑ Shawn Wang‚Ä¶*0 is probably enough.
Delivering
Thanks to your pre-writing, e.g. gathering notes, writing blog posts, etc., you already have some amount of the material you would like to include in the finished product. If it‚Äôs 25%, that means you still need to actually write the other 75%.
If possible, you should continue your ‚Äúnormal‚Äù activities, like shipping blog posts about other topics, appearing on podcasts, etc.
As you are writing, document your journey and give away one or two chapters for free as teasers. They‚Äôre a showcase for what you‚Äôre producing and could lead to podcast interviews for further exposure.
I was sharing my personal journey, lessons and milestones.
The best marketing is no marketing. No one wants to be sold anything.
‚Äî Alex West, in Two and a half years of building products
Daniel Vassallo‚Äôs advice to time box the project to 2 weeks is a very important idea: it is so easy to fall prey to scope creep by adding more and more topics to cover, especially when you are knowledgeable and excited about it! But this may well mean that you will never actually ship it. So harness your enthusiasm to provide an advantage.
Of course, you have the goal to ship that product, but what parts of your day actively contribute to that goal? If you‚Äôd like to get anything done, adopting a system to support your goals will go a long way.

Systems &gt; Goals, Source: https:&#x2F;&#x2F;jamesclear.com&#x2F;goals-systems
Launching
All your efforts are coming to an end‚Ä¶ or so you thought. Now is the time to launch your product! This phase requires an entirely different skill set so it‚Äôs good to have practice.
Having a great landing page is a must. A good resource on the subject is Rob Hope‚Äôs book Landing Page Hot Tips, and you can read Shawn‚Äôs review of it too.
Make sure to know the rules of the platforms you‚Äôre using to launch: Shawn‚Äôs Show HN post was doing very well and directing a lot of traffic to his landing page, but it was sadly taken down as no free sample of the book was available there (despite the blog posts).
If people leave out a negative comment, take this as an opportunity to turn their opinions around.
Shawn recommends watching Adam Wathan‚Äôs talk Nailing Your First Launch.
Keeping going
This is still not the end. What comes tomorrow? Next week, next month, next year?
You can ‚Äúlaunch‚Äù your product multiple times.
You can start a community around your book or product.
One of the biggest mistakes I see founders make is abandoning what already works and trying to take on a bigger challenge before they‚Äôre making enough money to develop products full-time.
Instead, focus on replicating the same type of product with another angle or in another market, maybe more than once.
‚Äî Rob Walling, in The Stairstep Approach to Bootstrapping
The Why
If you want to go from employee to entrepreneur, it is good to learn without too much risk how to do ‚Äúbusiness‚Äù without all the supports from other departments. For example, as a Software Engineer, you would not be focusing much on attracting leads for your company; there would be a design team and product managers making decisions about the product, etc.
When you‚Äôre launching a product on your own, you need to perform in all the roles and learn as you go. Especially when it comes to side-projects, developing a system to support your goals, and improving your discipline and focus.
You will get acquainted with the valley of despair and go through the emotional journey it describes; this is inevitable, and maybe even necessary, to create anything great.

 Source: https:&#x2F;&#x2F;john.do&#x2F;emotional-journey-creating&#x2F; 
This can be daunting but it will most likely be a rewarding experience, at least in terms of skills acquisition if not financially.
Make sure to define in advance your idea of success for this project: is it for the learning experience and to have a published book to your name, is it solely about making X amount of money?
Resources
üìΩÔ∏è Shawn‚Äôs talk, Lessons and Regrets From Shipping My $50000 Coronavirus Side Project
üìΩÔ∏è Adam Wathan‚Äôs talk, Nailing Your First Launch
üìì Rob Walling, The Stairstep Approach to Bootstrapping
üìì James Clear, Forget About Setting Goals. Focus on This Instead
üìì Alex West, Two and a half years of building products*0 for it. The experience of getting paid for something you created, directly by consumers, will change you forever. https:&#x2F;&#x2F;t.co&#x2F;UbUD9ch4xQ
‚Äî Daniel Vassallo (@dvassallo) April 10, 2020
 
and Shawn Wang (@swyx) acted on it almost immediately to produce the Coding Career Handbook a few months later. I had followed him for some time on Twitter. His posts, conference talks and online presence in general always brought me value so I wanted to support his work. I was also really glad that half the proceeds would go to FreeCodeCamp. I got the Creators package, not entirely sure what to expect.
This was one of the best decisions of 2020.
As part of the Creators package, there have been regular workshops and they definitely spurred me further to action. After he invited Monica Lent to give a workshop about blogging for developers, I formed a resolve to try and publish a post every 2 weeks, as a way to transform my note-taking game into something more valuable. That‚Äôs when I resurrected my blog with 5 Tips to Start Blogging (for Devs).
A lot of my posts were shared at work and in the company‚Äôs external newsletter (thank you üôÇ) and for the most part, this resurection was successful, even though December was a bit of a hiatus in my blog publishing, as I started my newsletter, Robin‚Äôs Gazette.
I still have a lot to learn when it comes to creating online content and I am looking forward to continuing with this momentum. Whenever I need a reality check of what it takes to embark on this creator journey, I would have a read through Alex West‚Äôs story, as it‚Äôs so real, inspiring and humbling!
Joining online communities
The Coding Career Handbook is an amazing resource and I would like to write a proper review of the book some day; it contains so much valuable information that it would be hard to do it justice here.
What‚Äôs even more awesome about it is that it came with access to a community through Discord and Circle that Shawn manages really well as it keeps delivering value and furthers the book‚Äôs teachings and principles. And if that wasn‚Äôt enough, I met a few interesting people there who I‚Äôm looking forward to getting to know more in 2021.
Judging by how much the Coding Career community helped me to get real with my volitions, I also decided to join Monica Lent‚Äôs Blogging For Devs community because I‚Äôd like to take my blogging further. For example, my article about [Building] Standalone Expo .apk and .ipa with Turtle CLI broke the 10k unique visitor mark in December, through accidental SEO mostly. üéâ I‚Äôm hoping to get a little bit more intentional with SEO as it‚Äôs a great way to magnify the reach of your content. There are so many interesting and inspiring people in Monica‚Äôs community, as well as discussions and workshops about SEO, newsletters, monetization, and of course blogging‚Äîtopics I definitely want to dive deeper in in the new year!
Writing, writing, writing
If you have read this far, it has become pretty apparent that writing is now more than ever my main focus. I think it has been a tremendous source of clarity and success in the last year for me.
The resource that influenced my writing the most this year was this lecture by Larry McEnerney about the Craft of Writing Effectively (here‚Äôs a summary). Having done a PhD, I practiced the ‚Äúwrong‚Äù way of writing for a very long time. Focusing on what‚Äôs valuable for your intended readership makes so much sense.
As I mentioned in my first newsletter issue (let me know if you want a copy of it üòâ), design documents have been crazy useful at work. I must thank my colleage Tobi√°≈° Potoƒçek for bringing about this revolution. In this remote-only work environment, they were a great tool to discuss, make decisions and document them in a searchable manner. Every shortcut needed to be reckoned with and set against the bigger picture. Every quirk or contextual piece of information (which are critically important to understand past decisions or make new ones) are now recorded in writing.
Being a member of the Frontend Platform team, communicating as effectively as possible with the teams we serve was critically important too‚Äîespecially in such challenging times for a travel company in 2020. Most of that communication was done in writing through Slack and Google Documents. (Not to say it was always a smooth ride‚Ä¶)
A look ahead
In 2021, I will focus on staying in shape, physically and mentally. We will go for walks in nature more regularly with Emilia (we agreed at least once a month and have a list of places in Czechia!) I will cycle to work as much as possible, get back into the nice workout rhythm we had during the first lockdown and take care of my sleeping patterns (it‚Äôs all great to wake up earlier to write, but that means going to bed earlier too, Robin ;-)) I will take breaks when I‚Äôm getting overwhelmed, instead of resorting to my usual ‚Äústrategy‚Äù of pushing through until I‚Äôm burnt out.
In 2021, I will focus on maintaining the shift from content consumption to content creation. I want to continue publishing on my blog every 2 weeks as well as send my Gazette every 2 weeks. I will write a book to help PhD graduates transition to web development: I‚Äôm now further along the path (and my work seems to be appreciated :)), so it‚Äôs time to try and lift others as I climb.
In 2021, I will finally speak Slovak fluently to be able to speak to all our wedding guests (still to be planned‚Ä¶ so I got time, I guess :P) in their preferred language. (Robin of January 2022, you‚Äôre welcome!)
C‚Äôest parti!*
#### [Docker for JavaScript Devs: How to Containerise Node.js Apps Efficiently](https:&#x2F;&#x2F;www.robincussol.com&#x2F;docker-for-js-devs-how-to-containerise-nodejs-apps-efficiently&#x2F;) 
*Docker is a really cool technology to have applications run the in the same, predictable context, ensuring the ‚Äúbut it works on my machine‚Äù comments are a thing of the past. Not to mention how Docker integrates with Docker Compose and Kubernetes for larger-scale applications! But that‚Äôs for another day.
In this article, you will learn about some good principles to containerise Node.js apps efficiently. These principles are probably quite general and well-known, but they‚Äôre easy to overlook for beginners to Docker and Dockerfiles.
You will need to have Docker and Node.js installed locally to follow along comfortably.
Docker wants to make you happy, 
Photo by cottonbro from Pexels



Table of contents
Containerising a Next.js app (naive approach)

Docker Glossary
Optimising a Node.js app‚Äôs Docker image

Create a comprehensive .dockerignore file
Use an appropriate base image
Decouple the dependency installation step from application code
Decouple the build from the resulting built application
(Optional) Purge node_modules from unnecessary files
Docker build checklist for JavaScript Devs
Containerising a Next.js app (naive approach)
Let‚Äôs start with a simple Next.js application:
$ npm create next-app --use-npm
and let‚Äôs write the following into a file called Dockerfile at the root of the project:
FROM node:14.15.0

WORKDIR &#x2F;app

COPY . .
RUN npm ci
RUN npm run build

EXPOSE 3000

USER node

CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
Okay, what just happened? üòÑ
Docker Glossary
FROM &lt;image&gt;
WORKDIR &lt;some-path-in-the-container&gt;
COPY &lt;from-context&gt; &lt;to-container&gt;
WORKDIR directory
RUN &lt;command&gt;
docker build process only
EXPOSE &lt;port&gt;
documenting which port the app uses
USER &lt;user&gt;
root with superuser privileges); it‚Äôs good practice to use a different user to run the app.
CMD &lt;command&gt;
docker run &lt;image-tag&gt;, it is not executed during the build process.
Assuming we have Docker installed, we could now run
$ docker build --tag my-containerised-nextjs-app .
This command kindly asks the Docker daemon running on our machine to build the Dockerfile we just wrote with the files present in the current directry (the .) and to call that image my-containerised-nextjs-app (with the --tag flag).
After the build completed, run
$ docker run --rm -p 3000:3000 my-containerised-nextjs-app
and we should have our app running at http:&#x2F;&#x2F;localhost:3000.
This second command orders the Docker daemon to run the image named my-containerised-nextjs-app with port 3000 on my machine to correspond to port 3000 inside the container so that we can interact with our Next.js app. This port mapping is done through the -p hostPort:containerPort flag. Go ahead and change the port mapping and see if you can still access the app.
The --rm flag indicates that we do not want the Docker daemon to keep the container when we stop its execution (with CTRL+C); this is useful not to clog our machines with useless logs while developing.
Voil√†, we have containerised our Next.js app. The End. üéâ
Wait! Don‚Äôt leave, there‚Äôs more! üëá
Optimising a Node.js app‚Äôs Docker image
The section above does the job, but it‚Äôs not optimal. If we only have so few pipeline minutes and we don‚Äôt like wasting resources ‚ôªÔ∏è, this setup will eat more than is necessary. There are a few strategies to optimise a Dockerfile:
Create a comprehensive .dockerignore file
Use an appropriate base image
Decouple the dependency installation step from application code
Decouple the build from the resulting built application
(Optional) Purge node_modules from unnecessary files
Create a comprehensive .dockerignore file
If we look at the logs from building the Docker image, we could read:
Step 4&#x2F;8 : RUN npm ci
 ---&gt; Running in 559b499f0e2c
npm WARN prepare removing existing node_modules&#x2F; before installation
That means we copied the node_modules folder from our local context over to the Docker image being built. What‚Äôs more, npm ci removes them to make sure it works consistently. That is an indication that we should not copy the node_modules in the first place.
To let Docker know some files and folders should be ignored, we can list them in a .dockerignore file. For example, add the following to a file named .dockerignore:
node_modules
Run the build again and the warning disappeared.
What‚Äôs more, we can see how much less was sent to the Docker build context:
# BEFORE
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  101.8MB

# AFTER
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  400.4kB
In practice, we would want to add as many files as possible to our .dockerignore to ensure we‚Äôre not wasting time and energy on files which won‚Äôt be necessary for the build. This can include documentation files (e.g. *.md), configuration files which are only necessary when developing (e.g. .eslint*, .prettier*) as well as our Git history (e.g. .git).
With the following .dockerignore file:
node_modules
*.md
.git
we end up sending the bare minimum to the Docker daemon:
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  248.3kB
Use an appropriate base image
Docker images come in all shapes and sizes. When it comes to building or deploying our app, the smaller the size, the better. For our Next.js app, we don‚Äôt need all that‚Äôs available in node:14.15.0. For example, we don‚Äôt need git or curl. We can instead use the alpine flavour of that image, namely node:14.15.0-alpine.
The difference in size between node:14.15.0 and node:14.15.0-alpine is enormous!
REPOSITORY                    TAG                 SIZE
node                          14.15.0             943MB
node                          14.15.0-alpine      117MB
Our final containerised Next.js app will hence be much smaller thanks to this teeny-tiny modification of our Dockerfile:
- FROM node:14.15.0
+ FROM node:14.15.0-alpine

WORKDIR &#x2F;app

COPY . .
RUN npm ci
RUN npm run build

EXPOSE 3000

USER node

CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
For reference, if we want to inspect the size of the Docker images we have available locally, we can run docker image ls --all.
Our Docker image has size 1.05GB if we use node:14.15.0,
REPOSITORY                    TAG                 IMAGE ID            CREATED             SIZE
my-containerised-nextjs-app   latest              c78d43a2c5bc        15 seconds ago      1.05GB
and it drops to 229MB if we use node:14.15.0-alpine instead!
REPOSITORY                    TAG                 IMAGE ID            CREATED             SIZE
my-containerised-nextjs-app   latest              d0746ef6e8a4        21 seconds ago      229MB
Decouple the dependency installation step from application code
Our setup is already much better with a suitable .dockerignore file and with a much leaner base image. However, we haven‚Äôt made any changes to our package.json and the npm ci step always needs to run if make any changes to our application code.
This is because Docker caches each step as an intermediate Docker container. For example, if we were to run the build again (docker build --tag my-containerised-nextjs-app .), we would see that the cache is used for all steps, resulting in a nearly instant build (because nothing happened, really üòÑ):
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  248.3kB
Step 1&#x2F;8 : FROM node:14.15.0-alpine
 ---&gt; 9db54a688554
Step 2&#x2F;8 : WORKDIR &#x2F;app
 ---&gt; Using cache
 ---&gt; d5d4291dc699
Step 3&#x2F;8 : COPY . .
 ---&gt; Using cache
 ---&gt; b56455e98a93
Step 4&#x2F;8 : RUN npm ci
 ---&gt; Using cache
 ---&gt; ba4ab784f27e
Step 5&#x2F;8 : RUN npm run build
 ---&gt; Using cache
 ---&gt; a51c18594a20
Step 6&#x2F;8 : EXPOSE 3000
 ---&gt; Using cache
 ---&gt; 806dc06cbb6c
Step 7&#x2F;8 : USER node
 ---&gt; Using cache
 ---&gt; b86db08de717
Step 8&#x2F;8 : CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
 ---&gt; Using cache
 ---&gt; d0746ef6e8a4
Successfully built d0746ef6e8a4
Successfully tagged my-containerised-nextjs-app:latest
If we now modify anything in the folder that is not ignored thanks to our .dockerignore file, Docker will have to bust the cache from Step 3 onwards (the ‚ÄúUsing cache‚Äù expression is not printed any more). Let‚Äôs create an empty file and run the build again:
# create an empty file
$ touch file
# build again
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  248.8kB
Step 1&#x2F;8 : FROM node:14.15.0-alpine
 ---&gt; 9db54a688554
Step 2&#x2F;8 : WORKDIR &#x2F;app
 ---&gt; Using cache
 ---&gt; d5d4291dc699
Step 3&#x2F;8 : COPY . .
 ---&gt; e2b761bb08a6         # The cache is not used anymore
Step 4&#x2F;8 : RUN npm ci
 ---&gt; Running in b36f2511e117
...
To remedy this and ensure that npm ci runs only when necessary, we can first copy package.json and package-lock.json files, run npm ci, and then bring in the rest of the files to build the project:
FROM node:14.15.0-alpine

WORKDIR &#x2F;app

- COPY . .
+ COPY package.json .
+ COPY package-lock.json .
RUN npm ci
+ COPY . .
RUN npm run build

EXPOSE 3000

USER node

CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
After we modified the Dockerfile by applying the diff above, we see that Docker does not leverage the cache at all because the steps are different. This always happens when we modify the layers and&#x2F;or their order.
However, after running this build for a first time, subsequent builds will be much faster as the npm ci step will use the cache unless we modify package.json or package-lock.json:
# create another file to see when Docker stops using the cache
$ touch another-file
# run the build again
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  249.3kB
Step 1&#x2F;10 : FROM node:14.15.0-alpine
 ---&gt; 9db54a688554
Step 2&#x2F;10 : WORKDIR &#x2F;app
 ---&gt; Using cache
 ---&gt; d5d4291dc699
Step 3&#x2F;10 : COPY package.json .
 ---&gt; Using cache
 ---&gt; 139b5a611c0b
Step 4&#x2F;10 : COPY package-lock.json .
 ---&gt; Using cache
 ---&gt; 5bc380de1397
Step 5&#x2F;10 : RUN npm ci
 ---&gt; Using cache
 ---&gt; dff6b2da4bdc
Step 6&#x2F;10 : COPY . .
 ---&gt; 08911c09b40f
Step 7&#x2F;10 : RUN npm run build
 ---&gt; Running in f5374a54d9ad

&gt; my-app@0.1.0 build &#x2F;app
&gt; next build
...
Decouple the build from the resulting built application
For this section to make more sense, we will create another Next.js app that uses some dev dependencies which are necessary only when building the app but not when running it in production.
$ npm create next-app --use-npm --example with-tailwindcss with-tailwindcss-app
Copy the Dockerfile and .dockerignore files created in the other example into with-tailwindcss-app. Build the Docker image and run it to make sure it‚Äôs working well before continuing:
$ docker build --tag with-tailwindcss-app .
$ docker run --rm -p 3000:3000 with-tailwindcss-app
As we can see in the package.json file, we have a few dependencies which are only ever going to be used when building our app. We won‚Äôt need them in the final Docker image. So let‚Äôs get rid of them!
We are going to leverage multi-stage Docker builds. They sound more complicated than they are :)
Here‚Äôs a multi-stage build Dockerfile: in the builder container, we install dependencies and build our app, and in the second stage, we copy relevant files from the builder to our final image and install only production dependencies.
FROM node:14.15.0-alpine as builder

WORKDIR &#x2F;app

COPY package.json .
COPY package-lock.json .
RUN npm ci
COPY . .
RUN npm run build

FROM node:14.15.0-alpine

WORKDIR &#x2F;app

COPY --from&#x3D;builder &#x2F;app&#x2F;package.json .
COPY --from&#x3D;builder &#x2F;app&#x2F;package-lock.json .
RUN npm ci --production
COPY --from&#x3D;builder &#x2F;app&#x2F;.next .next

EXPOSE 3000

USER node

CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
If our app also contained a Next.js config file and a public folder, we would also need to copy them from the builder stage:
...
COPY --from&#x3D;builder &#x2F;app&#x2F;.next .
+ COPY --from&#x3D;builder &#x2F;app&#x2F;next.config.js .
+ COPY --from&#x3D;builder &#x2F;app&#x2F;public public
...
Comparing the sizes, we see that we removed 39MB of dev dependencies, not bad.
without multi-stage build
REPOSITORY                    TAG                 IMAGE ID            CREATED              SIZE
with-tailwindcss-app          latest              88089e6f965d        18 minutes ago      269MB
with multi-stage build
REPOSITORY                    TAG                 IMAGE ID            CREATED              SIZE
with-tailwindcss-app          latest              ba7307736fb0        25 seconds ago       230MB
(Optional) Purge node_modules from unnecessary files
Finally, to make our Docker image the leanest, we will purge our node modules from all the files which were included by the library authors and aren‚Äôt directly useful to our Docker image. For example, documentation files and READMEs, config files for Prettier and such, etc.
Note that this is not without risk as we could be removing files that we actually need to run the application correctly (we had a file named test.js that contained important code and it was mercilessly removed by the tool, which broke the application üòÖ).
We will add another stage called production-deps to make our node modules go through a diet with node-prune (GitHub repo). The list of files and folders that node-prune will remove is largely inspired by Yarn‚Äôs default list (generated through yarn autoclean --init).
To install node-prune, we need curl to be a locally available executable, so we can either choose a base image that contains it out of the box, or we can add it to node:14.15.0-alpine. Because we won‚Äôt need anything else, we will choose the latter.
FROM node:14.15.0-alpine as builder

WORKDIR &#x2F;app

COPY package.json .
COPY package-lock.json .
RUN npm ci
COPY . .
RUN npm run build

+ FROM node:14.15.0-alpine as production-deps

+ WORKDIR &#x2F;app

COPY --from&#x3D;builder &#x2F;app&#x2F;package.json .
COPY --from&#x3D;builder &#x2F;app&#x2F;package-lock.json .
RUN npm ci --production
+ # Add curl
+ RUN apk --no-cache add curl
+ # Install node-prune https:&#x2F;&#x2F;github.com&#x2F;tj&#x2F;node-prune
+ RUN curl -sf https:&#x2F;&#x2F;gobinaries.com&#x2F;tj&#x2F;node-prune | sh
+ RUN node-prune &#x2F;app

FROM node:14.15.0-alpine

WORKDIR &#x2F;app

+ COPY --from&#x3D;production-deps &#x2F;app&#x2F;package.json .
+ COPY --from&#x3D;production-deps &#x2F;app&#x2F;package-lock.json .
+ COPY --from&#x3D;production-deps &#x2F;app&#x2F;node_modules node_modules

COPY --from&#x3D;builder &#x2F;app&#x2F;.next .next

EXPOSE 3000

USER node

CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
Try it by building the image once more.
When node-prune ran, it printed out in the console that it removed 12MB:
...
Step 15&#x2F;24 : RUN node-prune &#x2F;app
 ---&gt; Running in 69e030ab8b70


         files total 14,269
       files removed 3,722
        size removed 12 MB
            duration 216ms
...
However, suprinsingly, a whopping 32MB were removed in comparison to our previous Dockerfile. (It seems node-prune‚Äôs tallying is not totally accurate when I tested locally as it removed 20.7 MB instead ‚Äî though it still doesn‚Äôt explain the other 11.3 MB ü§∑‚Äç‚ôÇÔ∏è)
$ docker image ls with-tailwindcss-app
REPOSITORY                    TAG                 IMAGE ID            CREATED              SIZE
with-tailwindcss-app          latest              c5e2081dba30        9 seconds ago        198MB
Let‚Äôs ensure our app is running well without the files node-prune removed and we can be on our merry way! üê≥ üéâ
Docker build checklist for JavaScript Devs
To summarise what we‚Äôve learnt so far, here‚Äôs a small checklist to review our own Docker build setups:
I have a comprehensive .dockerignore file
I use an appropriate base image
I decoupled the dependency installation step to improve caching
I decoupled the resulting built application from the build step
I purged the node_modules from unnecessary files
Time to flex! üí™ Show me your before and after Docker image sizes in the comments below!*
#### [TypeScript Tidbit: How to Overload an Imported Function](https:&#x2F;&#x2F;www.robincussol.com&#x2F;typescript-tidbit-how-to-overload-an-imported-function&#x2F;) 
*There are times when the type definitions shipped on DefinitelyTyped are not enough and this results in making the TypeScript compiler unhappy. Oh noes! üò≠
Functions Overloading Be Like, Photo by Luis Villasmil) on Unsplash.



Overload an imported function in TypeScript
But fear not! It is possible to overload a function imported from a different module (which could even be a local module&#x2F;file, not necessarily a node module) without ‚Äúpatching‚Äù the corresponding @types&#x2F;&lt;package&gt; type definitions.
import { someFunction } from &#39;module&#39;

&#x2F;&#x2F; the function overloading
declare module &#39;module&#39; {
  function someFunction() &#x2F;&#x2F; the overload you need
}

someFunction() &#x2F;&#x2F; with the overloaded version ‚úîÔ∏è
Example: overload Ramda‚Äôs compose function
A practical example is Ramda‚Äôs compose function. If you pass more than 7 functions to the function, you need to overload Ramda‚Äôs type definitions coming from @types&#x2F;ramda as the TypeScript compiler will report an error otherwise (TypeScript Playground Error Example).

DefinitelyTyped obviously cannot provide the type definitions for any number of arguments as compose accepts as many arguments as you want. So it‚Äôs up to you to inform the TypeScript compiler that this usage is actually okay. üòå
This can be done like in the example below (TypeScript Playground Working Example):
import * as R from &#39;ramda&#39;

&#x2F;&#x2F; overloading compose because &#x60;@types&#x2F;ramda&#x60; exposes types for up to 6 functions
declare module &#39;ramda&#39; {
  function compose&lt;V0, T1, T2, T3, T4, T5, T6, T7&gt;(
    fn6: (x: T6) &#x3D;&gt; T7,
    fn5: (x: T5) &#x3D;&gt; T6,
    fn4: (x: T4) &#x3D;&gt; T5,
    fn3: (x: T3) &#x3D;&gt; T4,
    fn2: (x: T2) &#x3D;&gt; T3,
    fn1: (x: T1) &#x3D;&gt; T2,
    fn0: (x0: V0) &#x3D;&gt; T1
  ): (x0: V0) &#x3D;&gt; T7
}

&#x2F;&#x2F; and now, we can use:
const someComplicatedResult &#x3D; R.compose&lt;V0, T1, T2, T3, T4, T5, T6, T7&gt;(
  fn6,
  fn5,
  fn4,
  fn3,
  fn2,
  fn1,
  fn0
)(&#39;üòÖ&#39;)
We can see from the screenshot below that the overload was correctly taken into consideration. üéâ

Caveat
I can imagine that if this is overused, things can become quickly intractable. So use it sparingly and always with a good reason why. Your future self will be happy to find an explanation in a comment above the overloading as it is kind of unusual. üòâ
I discovered this while refactoring @kiwicom&#x2F;splitster to TS (link to commit) and thought it might be useful to share. Hope it helped you!*
#### [Wax on, Wax off](https:&#x2F;&#x2F;www.robincussol.com&#x2F;wax-on-wax-off&#x2F;) 
*The reason I got into web development in the first place was the magical ‚ú® feeling you get when you see your code manifest in the browser.
In my current role at work, I don‚Äôt do much of that anymore. And I guess I kind of miss it. Especially the part when I am given a clearly defined outcome, with clear guidelines. Perks of being labelled a senior, I guess. üòú But I digress.
Since I started with React, a lot of things have happened in web development. At the moment, I‚Äôm especially interested in Svelte and TailwindCSS and after watching Rich Harris‚Äôs latest talk ‚ÄúFuturistic Web Development‚Äù, I needed an excuse to try Svelte ASAP.
Staying sharp with deliberate practice
To ensure my frontend skills don‚Äôt wither, I would like to spend dedicated time each week to practice on a set of frontend challenges and reflect on what I learnt from them.
Fortunately, I recently discovered FrontendMentor.io and this website offers quite the list of frontend challenges, ranging in difficulty and consistently with nice designs.
Improve your front-end coding skills by building real projects
Solve real-world HTML, CSS and JavaScript challenges whilst working to professional designs.
‚Äî FrontendMentor.io
And to practice with new frontend technologies, it‚Äôs good to find nice designs. But it‚Äôs even better when they come with a style guide and assets like pictures and icons. üòç
Here‚Äôs how it works:
You choose a challenge and download the files.
You attempt the challenge with the stack of your choice. Because the challenge files come with a style guide, the necessary pictures and icons, etc. it‚Äôs really easy to get started! (Unless you spend hours deciding which stack to use, of course üòÇ)
You upload it to GitHub and deploy your attempt on Vercel or Netlify.
Finally, you submit your solution through your challenges dashboard on the platform.
You can then get feedback on your submissions and provide reviews for other people‚Äôs submissions too, which I find really cool. I remember how difficult it was to get feedback when I was first learning web development.
Learnings
The last challenge I attempted looked pleasing on my eyes and I honestly did not expect I would learn so much from it. That makes me want to practice even more!
Check out the live deployment!


I encountered the following problems to complete the ‚ÄúSocial media dashboard with theme switcher‚Äù challenge:
setting up Svelte with TailwindCSS (thank you Swyx and Chris Dhanaraj)
implementing a toggle component from scratch
without accessibility in mind (where I started: W3Schools üòÖ)
with accessibility in mind (where I ended up: Smashing Magazine, though I‚Äôm not sure how to test if my current solution is the most accessible)
implementing a theme switcher in Svelte (inspiration from this Svelte REPL)
adding a border with a gradient to a block element (this requires using a CSS trick from nowhere else but CSS Tricks of course)
pulling my hair for not realising that you need the group class for group-hover: modifiers to apply in the children with Tailwind (thank you Estevan Maito)
how to extract the imported Svelte components‚Äô props‚Äô TypeScript types (that‚Äôs a mouthful!), instead of exporting and importing the types directly (TL;DR: use $props_def from the component)
&lt;script lang&#x3D;&quot;ts&quot;&gt;
  import MyComponent from &#39;.&#x2F;MyComponent.svelte&#39;;

  const data: MyComponent[&#39;$props_def&#39;][&#39;data&#39;] &#x3D; ...
&lt;&#x2F;script&gt;

&lt;MyComponent {data} &#x2F;&gt;

...
deploying a ‚Äúmonorepo‚Äù on Vercel without redeploying all the folders all the time by specifying the ‚ÄúIgnored Build Step‚Äù with something like git diff --quiet HEAD^ HEAD -- subfolder-in-monorepo to only rebuild the site if changes were made in subfolder-in-monorepo.
Here‚Äôs the GitHub repository where I will learn in public and add future challenges I will attempt. (Though I might need to rename this repository in the future as I just found this really nice list of project ideas to build with other platforms than FrontendMentor.io üòâ)
Let me know in the comments what your current deliberate practice is!*
#### [A Successful Side-Project: Lessons from Swyx](https:&#x2F;&#x2F;www.robincussol.com&#x2F;a-successful-side-project-lessons-from-swyx&#x2F;) 
*If you are on Twitter, chances are you came across this tweet by Daniel Vassallo
If you‚Äôre tempted by this, my advice to first-time creators is to start with a very small product: Something you can finish in 2 weeks and charge #### [Build Standalone Expo .apk and .ipa with Turtle CLI [deprecated]](https:&#x2F;&#x2F;www.robincussol.com&#x2F;build-standalone-expo-apk-ipa-with-turtle-cli&#x2F;) 
*This article was updated on February 7, 2023.
NOTE: As of Expo SDK 47, the following method does not work any more.
With the release of EAS builds, it is necessary to have Internet access to create standalone Expo apps locally; see Running builds on your own infrastructure on Expo docs.
You can still use the React Native way to build applications locally after generating necessary files with expo prebuild (see this GitHub comment on expo&#x2F;eas-cli).
This post will not receive further updates.
A great way to start writing React Native applications is to use Expo. You don‚Äôt even need to setup a development environment to get started thanks to Snack, an online React Native application editor. Your application is public by default. Sharing has never been that easy.

Brown turtle swimming underwater, Photo by Wexor Tmg on Unsplash
However, you would like to share an application exclusively with some people, not through an app store or any public channel. One possibility is to share the built application file, e.g. an .apk file for Android and an .ipa file for iOS.
Expo is so great a service (oh, and did I mention free?) that they offer you to publish your app on their servers and if you wanted to build these .apk and .ipa files, you could do so on their servers.
The flow looks like:
$ expo publish
$ expo build:&lt;PLATFORM&gt;
and you obtain a nice URL to the artifact created for you when the build finishes.
But, again, this is public. On a server you don‚Äôt control. (Although, if you made the same mistake as I did, a ticket to their support can delete any files you had wished to keep private. ü•á)
Luckily for you, Expo provide the tools they are using on their servers for free (did I mention they‚Äôre great!?). The build process relies on a CLI tool called turtle-cli. It is open-source and available on GitHub.
Let us go through an example of how to create your application file without resorting to Expo servers. That means you can keep an application private and also build your application while being offline.
The following instructions assume you have bash and Node.js available. In my experience, using the current LTS version of Node.js (version 16.13.2) works best.
Caveat: I could not complete the iOS instructions to the end since I do not have an Apple Developer paid account.
We will go through the following steps:
1. Turtle CLI
2. Create a dummy application
3. Publish Expo app on local server
4. Create APK file ‚Äì Android

4.1. Prerequisites
4.2. Create Keystore
4.3. Build APK
5. Create IPA file ‚Äì iOS

5.1. Prerequisites
5.2. Create Signing keys
5.3. Build IPA
6. Distribute and install

6.1. on Android
6.2. on iOS
Resources
A condensed version of these steps without much explanation or context is available on the accompanying GitHub repository.
1. Turtle CLI
To install Turtle CLI, run
$ npm install -g turtle-cli
This will make command turtle globally available on your system. To verify it was correctly installed, let‚Äôs print the version:
$ turtle -V
0.24.3
2. Create a dummy application
Let‚Äôs create a dummy application using Expo CLI. In your terminal, run
$ npx expo init ExampleApplication
It will ask you a few questions:
# Expo version 5.0.3
npx expo init ExampleApplication
? Choose a template: ‚Ä∫ - Use arrow-keys. Return to submit.
    ----- Managed workflow -----
‚ùØ   blank               a minimal app as clean as an empty canvas
    blank (TypeScript)  same as blank but with TypeScript configuration
    tabs (TypeScript)   several example screens and tabs using react-navigation and TypeScript
    ----- Bare workflow -----
    minimal             bare and minimal, just the essentials to get you started
The blank template is enough for us.
If you have yarn installed, Expo will use it by default to install dependencies. You can use the --npm flag in the init command if you‚Äôd prefer to use npm instead.
Once it‚Äôs done setting up your project, you should see the following output in the terminal:
‚úÖ Your project is ready!

To run your project, navigate to the directory and run one of the following yarn commands.

- cd ExampleApplication
- yarn start
Run the commands and let‚Äôs verify the generated boilerplate works in our emulators:


To finish setting up the dummy application, you need to configure the app.json file because some configuration keys must be specified to build a standalone app.
If you would like to know more about these standalone app specific configurations, check Expo‚Äôs documentation for iOS and for Android.
For this tutorial, it is only necessary to specify the keys &quot;bundleIdentifier&quot; under &quot;ios&quot;, and &quot;package&quot; under &quot;android&quot; in your app.json file:
...
    &quot;ios&quot;: {
      ...
      &quot;bundleIdentifier&quot;: &quot;com.example.exampleApplication&quot;,
      ...
    },
    &quot;android&quot;: {
      ...
      &quot;package&quot;: &quot;com.example.example_application&quot;,
      ...
    }
...
3. Publish Expo app on local server
Expo has this notion of app publishing: it allows you to share a link or QR code to Expo‚Äôs website and anyone can run your app through the Expo app on their devices.
Having your app published is also necessary for over-the-air (OTA) updates, allowing seamless updates to your application, and to publish your application (i.e. building your application files on Expo servers).
You would typically run
$ expo login -u $EXPO_USERNAME -p $EXPO_PASSWORD
$ expo publish
and your app would then be available at https:&#x2F;&#x2F;expo.dev&#x2F;&lt;EXPO_USERNAME&gt;&#x2F;&lt;APP_NAME&gt;.
To have your Expo app ‚Äúpublished‚Äù on your local server (and avoid public publishing on Expo servers), you will use a different command:
$ expo export --dev --public-url &lt;your-url-here&gt;
The --dev flag is necessary because you will use a non-https server to publish your Expo app. Note that this prevents you from using OTA updates.
Your server does not need to be running for this step, but you do need to know which local URL you are going to use in advance. This tuorial assumes you will run a local server at http:&#x2F;&#x2F;127.0.0.1:8000.
You can now export the app:
$ expo export --dev --public-url http:&#x2F;&#x2F;127.0.0.1:8000
...
Export was successful. Your exported files can be found in dist
This command will create a dist directory containing the iOS and Android JavaScript bundles and the different assets you are using.
dist
‚îú‚îÄ‚îÄ android-index.json
‚îú‚îÄ‚îÄ assets
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ 13685372945d816a2b474fc082fd9aaa
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ 140c53a7643ea949007aa9a282153849
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ ...
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ fdbedb7e67aa7c0ecad83d9c2fa4dfba
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ fdc01171a7a7ea76b187afcd162dee7d
‚îú‚îÄ‚îÄ bundles
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ android-a9defc54fb2ffdb7e6fdaf5b8d0be751.js
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ ios-a29c3e4ac97a2abdc5208fd4f06e7708.js
‚îî‚îÄ‚îÄ ios-index.json
You can now serve the dist directory on your web server, e.g.
$ npx http-server -p 8000 dist
Note: if for some reason you need to re-export your application (because you modified your app.json file since the last export, for instance), you must first remove the dist directory:
# assuming you are at the root of the project
$ rm -rf dist
$ expo export --dev --public-url http:&#x2F;&#x2F;127.0.0.1:8000
4. Create APK file ‚Äì Android
First, verify that your local server is running. For example, you should see a similar output:
$ curl http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;android-index.json
{&quot;name&quot;:&quot;ExampleApplication&quot;,&quot;slug&quot;:&quot;ExampleApplication&quot;,&quot;version&quot;:&quot;1.0.0&quot;,&quot;orientation&quot;:&quot;portrait&quot;,&quot;icon&quot;:&quot;.&#x2F;assets&#x2F;icon.png&quot;,&quot;splash&quot;:{&quot;image&quot;:&quot;.&#x2F;assets&#x2F;splash.png&quot;,&quot;resizeMode&quot;:&quot;contain&quot;,&quot;backgroundColor&quot;:&quot;#ffffff&quot;,&quot;imageUrl&quot;:&quot;http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;assets&#x2F;201a91bd1740bb1d6a1dbad049310724&quot;}...
4.1. Prerequisites
For Turtle CLI to work correctly to create an .apk file for Android, you need to make sure the following dependency is installed: Java Development Kit (version 8).
If you know which Expo SDK version you are going to use, you can run
$ turtle setup:android --sdk-version &lt;SDK-VERSION&gt;
This will take some time:
$ turtle setup:android --sdk-version 44.0.5
Jan 20 20:22:45 turtle[61127] INFO:  Downloading Android SDK
  platform: &quot;android&quot;
  buildPhase: &quot;setting up environment&quot;
downloading [&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;] 98% 0.2s
...
Jan 20 20:26:56 turtle[61127] INFO:  shell app for SDK 44.0.5 doesn&#39;t exist, downloading...
  platform: &quot;android&quot;
  buildPhase: &quot;setting up environment&quot;
downloading [&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; ] 95% 0.5sJan 20 20:27:08 turtle[61127] INFO:  shell app has been downloaded
  platform: &quot;android&quot;
  buildPhase: &quot;setting up environment&quot;
...
Jan 20 20:29:51 turtle[61127] INFO:  dependencies installed!
  platform: &quot;android&quot;
  buildPhase: &quot;setting up environment&quot;
Jan 20 20:29:51 turtle[61127] INFO:  it&#39;s all set!
  platform: &quot;android&quot;
  buildPhase: &quot;setting up environment&quot;
In the meantime, you can move on to the next section.
4.2. Create Keystore
Just like any other Android app, this app must be signed with some security certificates. In Android-land, as far as I understand, it‚Äôs called a keystore. The instructions to create such a keystore file are available on the Android Developers documentation.
Basically, just create a dummy Android project with Android Studio, and then go to Build &gt; Generate Signed Bundle &#x2F; APK.... Choose APK and press Next. The UI will ask you which app you want to sign, and your dummy app should be pre-selected. On the same screen, press on the button Create new...; just fill the form and you‚Äôre good to go.
Alternatively, if you have keytool CLI utility available on your system (you can check that by trying keytool --help in your terminal), you can generate a keystore file with the following command
$ keytool -genkeypair -v -keystore keystore.jks -alias keyalias -keyalg RSA -keysize 2048 -validity 9125
Enter keystore password:
Re-enter new password:
What is your first and last name?
  [Unknown]:
What is the name of your organizational unit?
  [Unknown]:
What is the name of your organization?
  [Unknown]:
What is the name of your City or Locality?
  [Unknown]:
What is the name of your State or Province?
  [Unknown]:
What is the two-letter country code for this unit?
  [Unknown]:
Is CN&#x3D;Unknown, OU&#x3D;Unknown, O&#x3D;Unknown, L&#x3D;Unknown, ST&#x3D;Unknown, C&#x3D;Unknown correct?
  [no]:  yes

Generating 2,048 bit RSA key pair and self-signed certificate (SHA256withRSA) with a validity of 9,125 days
	for: CN&#x3D;Unknown, OU&#x3D;Unknown, O&#x3D;Unknown, L&#x3D;Unknown, ST&#x3D;Unknown, C&#x3D;Unknown
Enter key password for &lt;keyalias&gt;
	(RETURN if same as keystore password):
Re-enter new password:
[Storing keystore.jks]

Warning:
The JKS keystore uses a proprietary format. It is recommended to migrate to PKCS12 which is an industry standard format using &quot;keytool -importkeystore -srckeystore keystore.jks -destkeystore keystore.jks -deststoretype pkcs12&quot;.
As a TL;DR, you can just download a dummy certificate on the accompanying repository under should-be-private&#x2F;keystore.jks, for testing purposes only. The keystore file is hugely important if you ever plan to submit your app to Google Play store: it‚Äôs the only way to assert you‚Äôre the rightful owner to provide new updates to your app.
File: keystore.jks
keystorepassword
keyalias
keypassword
4.3. Build APK
Make sure that you are serving the dist directory on http:&#x2F;&#x2F;127.0.0.1:8000 as explained above in Run a local server. Assuming you are using bash as your shell, from the root of your project, run:
EXPO_ANDROID_KEYSTORE_PASSWORD&#x3D;&quot;keystorepassword&quot; \
EXPO_ANDROID_KEY_PASSWORD&#x3D;&quot;keypassword&quot; \
turtle build:android \
  --type apk \
  --keystore-path .&#x2F;should-be-private&#x2F;keystore.jks \
  --keystore-alias &quot;keyalias&quot; \
  --allow-non-https-public-url \
  --public-url http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;android-index.json
Note that you need the flag --public-url to point to http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;android-index.json. In addition, it is also necessary to use the --type apk flag to produce an APK file since version 0.8.0 of turtle-cli.
The build may take some time:
Jan 20 20:38:17 turtle[61719] INFO:  Using manifest: {
  &quot;name&quot;: &quot;ExampleApplication&quot;,
  &quot;slug&quot;: &quot;ExampleApplication&quot;,
  &quot;version&quot;: &quot;1.0.0&quot;,
  &quot;orientation&quot;: &quot;portrait&quot;,
  &quot;icon&quot;: &quot;.&#x2F;assets&#x2F;icon.png&quot;,
...
Jan 20 20:38:51 turtle[61719] INFO:  Starting a Gradle Daemon (subsequent builds will be faster)
  platform: &quot;android&quot;
  buildPhase: &quot;running gradle&quot;
  source: &quot;stdout&quot;
...
Once it finishes, you should see this output in your terminal:
Jan 20 20:43:19 turtle[61719] INFO:  copied build to ~&#x2F;expo-apps&#x2F;@anonymous__ExampleApplication-7f15208a56304617a200538cacd2e50e-signed.apk
  platform: &quot;android&quot;
  buildPhase: &quot;copying build artifact&quot;
This message gives you the location of your built .apk file. You can now move on to the Distribute and install section below if you are not interested in creating an .ipa file for iOS.
Note: if the build fails because of some Gradle error, like Could not resolve com.theartofdev.edmodo:android-image-cropper:2.8.0, make sure to open Android Studio and update the Android SDK and SDK Build-Tools. This should fix it.
5. Create IPA file ‚Äì iOS
First, verify that your local server is running, e.g.
$ curl http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;ios-index.json
{&quot;name&quot;:&quot;ExampleApplication&quot;,&quot;slug&quot;:&quot;ExampleApplication&quot;,&quot;version&quot;:&quot;1.0.0&quot;,&quot;orientation&quot;:&quot;portrait&quot;,&quot;icon&quot;:&quot;.&#x2F;assets&#x2F;icon.png&quot;,&quot;splash&quot;:{&quot;image&quot;:&quot;.&#x2F;assets&#x2F;splash.png&quot;,&quot;resizeMode&quot;:&quot;contain&quot;,&quot;backgroundColor&quot;:&quot;#ffffff&quot;,&quot;imageUrl&quot;:&quot;http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;assets&#x2F;201a91bd1740bb1d6a1dbad049310724&quot;...
5.1. Prerequisites
For Turtle CLI to work correctly to create an .ipa file for iOS, you need to make sure your system is macOS and that the following dependencies are installed:
Xcode (version 13.2.1 or newer)
fastlane
Note: make sure that you have run Xcode at least once and that you have agreed to the license agreements.
For more details, see Expo‚Äôs documentation.
If you know which Expo SDK version you are going to use, you can run
$ turtle setup:ios --sdk-version &lt;SDK-VERSION&gt;
If it errors out, saying that you don‚Äôt have the right version of fastlane, try re-installing fastlane (guide). The version used in this article is fastlane 2.200.0.
This will take some time:
$ turtle setup:ios --sdk-version 44.0.5
Jan 20 21:18:03 turtle[48488] INFO:  shell app for SDK 44.0.5 doesn&#39;t exist, downloading...
  platform: &quot;ios&quot;
  buildPhase: &quot;setting up environment&quot;
downloading [                    ] 1% 8514.8s
...
...
Jan 20 21:24:58 turtle[48488] INFO:  it&#39;s all set!
  platform: &quot;ios&quot;
  buildPhase: &quot;setting up environment&quot;
In the meantime, you can move on to the next section.
5.2. Create Signing keys
This assumes you have an Apple Developer Account, which is a paid account.
To create your distribution certificate file, or .p12 file, you can follow this guide.
You will also need your Apple Team ID and a Provisioning Profile that you can generate through Xcode as well. This other guide covers in greater lengths what all these cerficates are for and how to obtain them.

Note that the provisioning profile expires in 6 days in my case, since I do not have an Apple Developer paid account.
Sadly, it is not possible to share example files.
5.3. Build IPA
Make sure that you are serving the dist directory on http:&#x2F;&#x2F;127.0.0.1:8000 as explained Run a local server. Assuming you are using bash as your shell, from the root of your project, run:
EXPO_IOS_DIST_P12_PASSWORD&#x3D;&quot;&lt;PASSWORD HERE&gt;&quot; \
turtle build:ios \
  --team-id YOUR_TEAM_ID \
  --dist-p12-path &#x2F;path&#x2F;to&#x2F;your&#x2F;dist&#x2F;cert.p12 \
  --provisioning-profile-path &#x2F;path&#x2F;to&#x2F;your&#x2F;provisioning&#x2F;profile.mobileprovision \
  --allow-non-https-public-url \
  --public-url http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;ios-index.json
Note that you need the flag --public-url to point to http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;ios-index.json.
Once the build finishes successfully, you should get the path to your .ipa file.
6. Distribute and install
6.1. on Android
Take your .apk and share it through some Google Drive link or other medium of your choice.
If you download this .apk file through an Android device, it should offer you to install the application on the device.
Trick: if the URL is really not friendly to type, and for whatever reason you have to type it manually, use a QR Code generator (e.g. http:&#x2F;&#x2F;www.barcode-generator.org&#x2F;) and your device‚Äôs camera to simplify your life!
Alternatively, if you connect an Android device to your computer, you should be able to run:
$ adb devices
emulator-5554	device
to list all your connected Android devices and emulators. (In my case, only the emulator is ‚Äúconnected‚Äù.)
It is then possible to install the .apk file by running:
$ adb -s emulator-5554 install ~&#x2F;expo-apps&#x2F;@anonymous__ExampleApplication-7f15208a56304617a200538cacd2e50e-signed.apk
Performing Streamed Install
Success

6.2. on iOS
Caveat: I could not fully test this section, so my apologies if this does not work as intended.
Since you should have Xcode, the most promising solution is in this guide. It also mentions other ways to install the .ipa file.
That‚Äôs it for now, thank you for reading this far. You will find below the resources mentioned in this article.
If you have any questions or comments, please drop me a line on Twitter. I shall reply as soon as possible.
Stay tuned for more.
Resources
Expo: https:&#x2F;&#x2F;expo.dev
Turtle CLI: https:&#x2F;&#x2F;github.com&#x2F;expo&#x2F;turtle#readme
Expo‚Äôs guide to Building Standalone apps: https:&#x2F;&#x2F;docs.expo.dev&#x2F;classic&#x2F;building-standalone-apps&#x2F;
Configuring app.json: https:&#x2F;&#x2F;docs.expo.dev&#x2F;workflow&#x2F;configuration&#x2F;
Expo docs to configure CI with Turtle CLI: https:&#x2F;&#x2F;docs.expo.dev&#x2F;classic&#x2F;turtle-cli&#x2F;
Expo docs to host application on your own servers: https:&#x2F;&#x2F;docs.expo.dev&#x2F;distribution&#x2F;hosting-your-app&#x2F;
How to create a keystore for Android: https:&#x2F;&#x2F;developer.android.com&#x2F;studio&#x2F;publish&#x2F;app-signing#generate-key
Supporting GitHub repository: https:&#x2F;&#x2F;github.com&#x2F;RobinCsl&#x2F;build-standalone-expo-app&#x2F;*
#### [Optimize your img tags with Eleventy Image and WebC](https:&#x2F;&#x2F;www.robincussol.com&#x2F;optimize-your-img-tags-with-eleventy-image-and-webc&#x2F;) 
*I am very excited about WebC and couldn‚Äôt wait to try out the corresponding Eleventy plugin.
The first use-case I had in mind was to use Eleventy Image for the native HTML img tag, that can be generated from Markdown and without shortcode. I had done this before, for my unpublished blog rewrite that‚Äôs been waiting to be released for ever now, through hooking up Eleventy Image into a markdown-it plugin. It wasn‚Äôt pretty as markdown-it plugins are pretty alien to me.
But now, this can be done ‚Äúnatively‚Äù, √†-la-Cloudflare Workers for your native HTML elements!
UPDATE (04&#x2F;11&#x2F;2022): After sharing this article on Twitter, Zach Leatherman pointed out there should be an easier solution. It didn‚Äôt work as expected at first, which put me on a journey to fix the underlying issue in @11ty&#x2F;webc. I‚Äôm very pleased to share that my first contribution to the project was accepted and landed in v0.6.0. As a result, the content of the last section was updated to remove the dirty data file hack with _data&#x2F;Image.js: your image optimization logic can now truly live in a single file.
The documentation for WebC mentioned this use-case exactly, in the shape of this innocent puzzle:

‚ÄúFree idea: use the Eleventy Image plugin to return optimized markup‚Äù
So it should be easy, right?
Remember this lad?
I have discovered a truly remarkable proof of this theorem which this margin is too small to contain.
Pierre de Fermat, cca. 1637
No need to wait 3 centuries for the answer this time, because it was ultimately not so hard‚Ä¶ But I did struggle and wrestle with it for a few hours :D
Anyway, hope that can be useful to someone.
If you want to see the finished implementation, you can get it on GitHub: RobinCsl&#x2F;11ty-webc-img-demo.
Set up a WebC-powered Eleventy project
or take a shortcut by cloning this repo and going to the 01-initial folder.
Initialise the project
Let‚Äôs start with an empty folder and add a basic package.json file:
mkdir 11ty-webc-img
cd 11ty-webc-img
npm init -y
We need to install the latest canary release (2.0.0-canary.16 at the time of writing) of Eleventy as well as the WebC plugin:
 npm install @11ty&#x2F;eleventy@2.0.0-canary.16 @11ty&#x2F;eleventy-plugin-webc
Configure Eleventy
We will now configure Eleventy to use the WebC plugin by creating a .eleventy.js file with the following content:
const webc &#x3D; require(&quot;@11ty&#x2F;eleventy-plugin-webc&quot;);

module.exports &#x3D; function(eleventyConfig) {
	eleventyConfig.addPlugin(webc, {
		components: &quot;_includes&#x2F;webc&#x2F;*.webc&quot;
	});
}

In particular, components in the _includes&#x2F;webc folder will be available in the global scope, no need to import them explicitly!
Scaffold a minimal project
To finish our setup, we create a layout file and a simple WebC component which we will use in a basic page, to make sure our setup is working correctly.
We create the layout file under _includes&#x2F;layouts&#x2F;base.webc. It is a simple HTML template with the @html&#x3D;&quot;content&quot;  WebC directive set on the body tag. (See my-layout.webc in the docs)
&lt;!doctype html&gt;
&lt;html lang&#x3D;&quot;en&quot;&gt;
	&lt;head&gt;
		&lt;meta charset&#x3D;&quot;utf-8&quot;&gt;
		&lt;title&gt;Eleventy Images + WebC rocks!&lt;&#x2F;title&gt;
	&lt;&#x2F;head&gt;
	&lt;body @html&#x3D;&quot;content&quot;&gt;&lt;&#x2F;body&gt;
&lt;&#x2F;html&gt;
We now create a simple WebC component and write the following content, taken from the promising website 11ty.webc.fun, in _includes&#x2F;webc&#x2F;site-footer.webc :
&lt;footer&gt;
  &lt;p&gt;&amp;copy; 2022 Yours Truly.&lt;&#x2F;p&gt;
&lt;&#x2F;footer&gt;
Finally, we create our basic page at the root of the project in index.webc:
---
layout: layouts&#x2F;base.webc
---

Fun with WebC

&lt;site-footer&gt;&lt;&#x2F;site-footer&gt;
If all went according to plan, we should now be able to run
npx @11ty&#x2F;eleventy --serve
in the terminal and see the following output in our browser at http:&#x2F;&#x2F;localhost:8080:

Create an img.webc component
or check the code on GitHub in the 02-img folder if you want to see the code right away.
In this section, we will create our img.webc override for the native img HTML tag and use Eleventy Image within it.
As a starting point, we will use the example from the documentation from which the screenshot at the start of this post is taken. In a new file _includes&#x2F;webc&#x2F;img.webc, add the following:
&lt;script webc:type&#x3D;&quot;render&quot; webc:is&#x3D;&quot;template&quot;&gt;
function() {
	if(!this.alt) {
		throw new Error(&quot;[img.webc] the alt text is missing, no fun&quot;);
	}
	return &#x60;&lt;img src&#x3D;&quot;${this.src}&quot; alt&#x3D;&quot;${this.alt}&quot;&gt;&#x60;;
}
&lt;&#x2F;script&gt;
This essentially verifies at build-time that all your images have a non-empty alt text, neat!
Let‚Äôs add a ‚Äúbroken‚Äù image to our index page, in index.webc, to verify that this works correctly:
---
layout: layouts&#x2F;base.webc
---

Fun with WebC

&lt;img src&#x3D;&quot;https:&#x2F;&#x2F;images.unsplash.com&#x2F;photo-1627224286457-923944e5b159?auto&#x3D;format&amp;fit&#x3D;crop&amp;w&#x3D;387&amp;q&#x3D;80&quot;&gt;

&lt;site-footer&gt;&lt;&#x2F;site-footer&gt;
And indeed, running npx @11ty&#x2F;eleventy --serve yields an expected error:
$ npx @11ty&#x2F;eleventy --serve
[11ty] Problem writing Eleventy templates: (more in DEBUG output)
[11ty] 1. Having trouble rendering webc template .&#x2F;index.webc (via TemplateContentRenderError)
[11ty] 2. [img.webc] the alt text is missing, no fun (via Error)
Add an alt text (‚Äúpossum hanging from a palm leaf‚Äù should work) and try again. Oh no! Another error:
$ npx @11ty&#x2F;eleventy --serve  
[11ty] Problem writing Eleventy templates: (more in DEBUG output)
[11ty] 1. Having trouble rendering webc template .&#x2F;index.webc (via TemplateContentRenderError)
[11ty] 2. Circular dependency error: You cannot use &lt;img&gt; inside the definition for .&#x2F;_includes&#x2F;webc&#x2F;img.webc (via Error)
That makes sense, when you think about it! All our .webc files are processed by WebC, so if we return an img tag in a img.webc component, the compiler would work indefinitely to get to the bottom of it, because it‚Äôs turtles img all the way down!
Luckily for us, we can let WebC know when its job is done through the webc:raw attribute:
Use webc:raw to opt-out of WebC template processing for all child content of the current node. Notably, attributes on the current node will be processed.
Let‚Äôs fix it in _includes&#x2F;webc&#x2F;img.webc:
  &lt;script webc:type&#x3D;&quot;render&quot; webc:is&#x3D;&quot;template&quot;&gt;
  function() {
	  if(!this.alt) {
	  	throw new Error(&quot;[img.webc] the alt text is missing, no fun&quot;);
	  }
-	  return &#x60;&lt;img src&#x3D;&quot;${this.src}&quot; alt&#x3D;&quot;${this.alt}&quot;&gt;&#x60;;
+	  return &#x60;&lt;img webc:raw src&#x3D;&quot;${this.src}&quot; alt&#x3D;&quot;${this.alt}&quot;&gt;&#x60;;
  }
  &lt;&#x2F;script&gt;
It compiles now! üéâ
Here‚Äôs the expected output:

We have effectively augmented our img tag to verify at build time that alt text is present.
Let‚Äôs now add Eleventy Image to the party!
Optimize your HTML img with Eleventy Image
or check the code on GitHub in the 03-final folder if you want to see my solution.
Let‚Äôs first install Eleventy Image in our project:
npm install @11ty&#x2F;eleventy-img
We will more or less copy the example from the Eleventy Image docs in the Asynchronous Shortcode section, because our JavaScript render function can be async!
In the file _includes&#x2F;webc&#x2F;img.webc, let‚Äôs add the following:
  &lt;script webc:type&#x3D;&quot;render&quot; webc:is&#x3D;&quot;template&quot;&gt;
-   function() {
-      if(!this.alt) {
-          throw new Error(&quot;[img.webc] the alt text is missing, no fun&quot;);
-      }
-      return &#x60;&lt;img webc:raw src&#x3D;&quot;${this.src}&quot; alt&#x3D;&quot;${this.alt}&quot;&gt;&#x60;;
+    const Image &#x3D; require(&quot;@11ty&#x2F;eleventy-img&quot;);
+    module.exports &#x3D; async function() {
+      let metadata &#x3D; await Image(this.src, {
+        widths: [300],
+        formats: [&quot;avif&quot;, &quot;jpeg&quot;],
+        outputDir: &quot;_site&#x2F;img&#x2F;&quot;,
+      });

+      let imageAttributes &#x3D; {
+        alt: this.alt,
+        sizes: &quot;100vw&quot;,
+        loading: &quot;lazy&quot;,
+        decoding: &quot;async&quot;,
+      };

+      &#x2F;&#x2F; You bet we throw an error on missing alt in &#x60;imageAttributes&#x60; (alt&#x3D;&quot;&quot; works okay)
+      return Image.generateHTML(metadata, imageAttributes);
  }
  &lt;&#x2F;script&gt;

Note that we harcoded the value for  sizes in the imageAttributes object, and prepended both src and alt by this to wire things up correctly. We also instruct the Image plugin to output optimized images in our _site&#x2F;img&#x2F; folder directly for them to be available when using the following markup:
&lt;img alt&#x3D;&quot;a lovely image&quot; src&#x3D;&quot;&#x2F;img&#x2F;hash-width.jpeg&quot;&gt;
Let‚Äôs run npx @11ty&#x2F;eleventy --serve once more:
$  npx @11ty&#x2F;eleventy --serve
[11ty] Problem writing Eleventy templates: (more in DEBUG output)
[11ty] 1. Having trouble rendering webc template .&#x2F;index.webc (via TemplateContentRenderError)
[11ty] 2. Circular dependency error: You cannot use &lt;img&gt; inside the definition for .&#x2F;_includes&#x2F;webc&#x2F;img.webc (via Error)
That error sounds familiar, right?
We need to tell WebC to ignore img tags generated by Eleventy Image, and it‚Äôs as simple as adding &quot;webc:raw&quot;: true to the imageAttributes object:
  &lt;script webc:type&#x3D;&quot;render&quot; webc:is&#x3D;&quot;template&quot;&gt;
  const Image &#x3D; require(&quot;@11ty&#x2F;eleventy-img&quot;);
  module.exports &#x3D; async function() {
    let metadata &#x3D; await Image(this.src, {
      widths: [300],
      formats: [&quot;avif&quot;, &quot;jpeg&quot;],
      outputDir: &quot;_site&#x2F;img&#x2F;&quot;,
    });
  
    let imageAttributes &#x3D; {
      alt: this.alt,
      sizes: &quot;100vw&quot;,
      loading: &quot;lazy&quot;,
      decoding: &quot;async&quot;,
+     &quot;webc:raw&quot;: true,
    };
  
    &#x2F;&#x2F; You bet we throw an error on missing alt in &#x60;imageAttributes&#x60; (alt&#x3D;&quot;&quot; works okay)
    return Image.generateHTML(metadata, imageAttributes);
  }
  &lt;&#x2F;script&gt;
And we‚Äôre done!! (Note how the image now aligns perfectly with localhost:8080 #IncontestableTruth)

with corresponding markup:
&lt;!doctype html&gt;
&lt;html lang&#x3D;&quot;en&quot;&gt;
&lt;head&gt;
        &lt;meta charset&#x3D;&quot;utf-8&quot;&gt;
        &lt;title&gt;Eleventy Images + WebC rocks!&lt;&#x2F;title&gt;
    &lt;&#x2F;head&gt;
    &lt;body&gt;Fun with WebC

&lt;picture&gt;&lt;source type&#x3D;&quot;image&#x2F;avif&quot; srcset&#x3D;&quot;&#x2F;img&#x2F;SwdsuTpRbT-300.avif 300w&quot;&gt;&lt;img alt&#x3D;&quot;possum hanging from a palm leaf&quot; loading&#x3D;&quot;lazy&quot; decoding&#x3D;&quot;async&quot; src&#x3D;&quot;&#x2F;img&#x2F;SwdsuTpRbT-300.jpeg&quot; width&#x3D;&quot;300&quot; height&#x3D;&quot;450&quot;&gt;&lt;&#x2F;picture&gt;


&lt;footer&gt;
  &lt;p&gt;¬© 2022 Yours Truly.&lt;&#x2F;p&gt;
&lt;&#x2F;footer&gt;

&lt;&#x2F;body&gt;
&lt;&#x2F;html&gt;
Parting words
I am so excited to explore further the possibilities of using WebC to augment other native HTML elements.
This article only scratches the surface when it comes to the img tag. You could pass props down from the markup to Eleventy Image and control the behaviour of the image optimization. But we can now augment our native img tag without much hassle as it‚Äôs all in one file.
It even works with Markdown images (and yields the cutest webpage ever):
  ---
  layout: layouts&#x2F;base.webc
  ---
  
  Fun with WebC
  
  &lt;img alt&#x3D;&quot;possum hanging from a palm leaf&quot; src&#x3D;&quot;https:&#x2F;&#x2F;images.unsplash.com&#x2F;photo-1627224286457-923944e5b159?auto&#x3D;format&amp;fit&#x3D;crop&amp;w&#x3D;387&amp;q&#x3D;80&quot;&gt;
  
+  &lt;template webc:type&#x3D;&quot;11ty&quot; 11ty:type&#x3D;&quot;md&quot;&gt;
+  
+   ![&#39;close-up of a baby possum among ferns&#39;](https:&#x2F;&#x2F;images.pexels.com&#x2F;photos&#x2F;13960994&#x2F;pexels-photo-13960994.jpeg)
+  
+  &lt;&#x2F;template&gt;
  
  &lt;site-footer&gt;&lt;&#x2F;site-footer&gt;
  

All the more reasons to optimize your images now!
Find the code supporting this article on the RobinCsl&#x2F;11ty-webc-img-demo repository.*
#### [Year in Review: 2021](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2021&#x2F;) 
*We‚Äôre already at the start of February 2022, but who says retrospectives need to be done on January 1st?! A lot of things happened in 2021, both personally and professionally. Time to reflect and remember.
Personal üë∂üíçüìÑüìÉüìëüìú
This first part is the personal stuff, so if you don‚Äôt care about it, you can skip to the professional stuff instead. And if you don‚Äôt care about that too, why are you here? üòÇ
Welcome, L√©onard!
In January of 2021 came the great news that we were expecting a baby and a few months later, my son L√©onard came to this world! It‚Äôs been a few months now and it‚Äôs insane how much this event changed our lives.
It‚Äôs quite amazing to witness a human being‚Äôs awakening to the world, I do feel privileged.
Of course, it‚Äôs not just rainbows and unicorns.
Sleeping as much as I want is now a distant memory&#x2F;dream, though I‚Äôve been surprised that it‚Äôs actually quite possible to operate without the amount of sleep I used to get.
Having free time for side projects and writing almost vanished (and usually eats up time when I should sleep instead, while it‚Äôs allowed by baby-boss). I don‚Äôt know how other parents manage but time just flies by.
One thing‚Äôs for sure, L√©onard makes sure I keep fit and exercise regularly (a promise I made myself at the beginning of last year, right):
it‚Äôs quite a normal day when I need to go up and down the 4 floors of the block of flats we live in (and when it‚Äôs at night, I have this game where I switch the lights on and go up and down within the 3 minutes they‚Äôre programmed to stay on; naturally, after my 4th round trip, I usually do the last flight of stairs in the dark üòÖüòÆ‚Äçüí®).
it‚Äôs also quite a normal day when I need to carry him in my arms for 10- to 20-minute stretches, while doing squats, at least 2 or 3 times.
Coach L√©onard can ask for these drills at any time of the day (and night‚Ä¶), he says it‚Äôs for my own good. My knees and hips and back and arms tend to disagree.
Paperwork, paperwork, paperwork
In 2021, I‚Äôve had time to think so many times if the amount of paperwork we‚Äôre doomed to go through is some sort of devilish scheme to keep people busy on the boring stuff. It definitely does not help when you‚Äôre an expat.
If you had told me having a baby would generate so much paperwork chores, I probably would not have believed you. The story goes that we wanted to do an early recognition of fatherhood for me to be officially recognised as the father of my child to be.
In France, as a French person, this is a 5-minute visit to my local townhall, easy-peasy.
In Czechia, as a foreigner, this would have required tons of documents that also needed translating by a certified translator (aka costs some money).
Since we were engaged, and you‚Äôre officially recognised as the father when having a baby as a married couple, we thought we might as well go through paperwork hell to get married.
It did not disappoint.
Our child was due some time in the middle of September, so we had almost the entire year to get married, should be easy, right.
Being so diligent, we got in touch with the French embassy to understand what we need to do to get married in April:
weddings at the embassy are quite a rare thing, you should get married through the local authorities
getting married in Prague is like getting married in Las Vegas (say what?)
Only to realise at the end of June that:
babies aren‚Äôt always born around the due date
it‚Äôs already the end of June
Let‚Äôs just say that we managed to be on time paperwork-wise for our wedding at the beginning of August (ever heard of the necessary 2-week public display of your intent on getting married, during which somebody has the right to oppose it, to get the paper allowing a French person to marry‚Ä¶?), but the ‚Äúgetting married like in Las Vegas‚Äù was lost on us.
Professionally
Promo
In January last year, I got promoted to Staff Engineer at Kiwi.com. Pretty crazy to me to think that I started working in the industry in September 2017. Even though titles only mean so much, it‚Äôs still a nice recognition that I bring value to the company.
Pair Documenting
I definitely learnt a lot about infrastructure and Kubernetes, which might seem overkill for a frontend platformer, but there was a void to fill when my ex-colleague Adam Jani≈° left, so I put on my newbie hat and pair-documented Adam‚Äôs knowledge throughout his notice period. I still refer or point people to that document quite regularly, it‚Äôs an investment that keeps on giving after all these months!
This was also the first time I tried to add original schematics&#x2F;pictures and Excalidraw made it super fun and easy!
Robin‚Äôs Gazette
My newsletter, Robin‚Äôs Gazette, kept going quite well! It turned one year old on December, 9th! üéÇ
In 2021, I published 25 issues (784 emails in total!), and went from 9 subscribers to 49 at the end of the year!
Given the quite low volume of subscribers, my average open rate and click rate are pretty okay (though they are ‚Äúall-time‚Äù performance metrics):
70.35% open rate,
24.38% click rate.
Even though it‚Äôs always some amount of work, I deem it worthy of my time as I get to practice writing and I always learn something slightly more deeply than if I just scrolled Twitter or Hacker News. This continues my efforts from ‚Äúarchivist to creator‚Äù that I mentioned in my last retro.
Special mention to Shawn @swyx Wang for being so encouraging along the way!
My goal for this year is to continue on that path, though I do need to put some effort into advertising it better:
the subscribe form is hard to find on my website,
the content is short-lived and behind closed doors ‚Äì so I should repurpose it to an extent,
start marketing it more (instead of the infrequent tweets I‚Äôve tried at some point).
One small change for this year: I now send the Gazette every other Friday instead of every other Wednesday.
Some of the feedback I received üòä
‚ÄúSuch a great newsletter this week Robin, amazing job!‚Äù
‚ÄúStill enjoying the newsletter!‚Äù
Blog
The blog was a bit quiet last year, I only published 3 posts and refreshed my most read article about building APK files locally for Expo projects (it recently crossed 20K views in its lifetime! üéâ).
They were:
Python Dependencies for JavaScript Developers
How to Download a Brain with Pair Documenting (already mentioned above)
Year in Review: 2020
I really hope to start writing more again on the blog because the SEO game takes a long time for Google to start recommending your stuff: I saw more traffic to my How to Test Your ESLint Config and Get your Own Sentry Playground articles, and they were written in September 2020!
Started working on a course
In the last retro, I announced that I planned to write a book. That did not happen‚Ä¶ üòÖ
Instead, I started working on a video course which essentially replicates the now defunct Margarita project from scratch (which was the subject of this article on my blog), showcasing how to build cross-platform web and native mobile apps through React Native and React Native Web.
This was the occasion to spend some time weeks watching all the microphone reviews on YouTube, all the Audacity and Obs Studio tutorials for sound production, to ultimately produce a half-finished tutorial on YouTube (the best 33 seconds of your life, trust me).
Source



Ever since my son was born, I‚Äôve had little time to focus for longer than 5-minute stretches outside of work, so this project has lost steam right now. I hope I‚Äôll manage to finish it in the first semester!
A look back and forward
Revisiting some of my plans for 2021 and making some for 2022.
Family
As much as I would love to work on side-projects and such, my family comes first, and I want to keep it that way. I‚Äôm excited to continue discovering what my next workouts will be, courtesy of Coach L√©onard! (Seriously, I‚Äôve got some arms now! üí™)
I cannot wait for my son to meet all his grand-parents, aunts and uncles in France later this year!
Nehovor√≠m pliynule po slovensky
aka I don‚Äôt speak Slovak fluently.
One of my goals was to make sure I would be able to speak to all my wedding guests in their preferred language (amongst French, English and Slovak). Because of the above (and COVID not helping‚Ä¶), the guest list was actually pretty small and my mastery of Slovak would not be entirely necessary to do well on my goal. So I guess I will learn better alongside my son this year whilst we wait for the big party?
Almost no SAD this past year
Come December, I usually feel pretty burnt out and in dire need of vacation to recharge. Somehow, in December 2021, I did not feel like that at all.
My new family life provided some amount of distractions from work. Even though that increased my context switching throughout the days and the nights were not as restful, it somehow created some distance between work and me. Or maybe because living with a newborn forces you to live in the moment, one day at a time‚Ä¶ üòÖ
Writing
Less paperwork, more blog posts. ü§û
Keep the newsletter going, and make it better, faster, stronger!
Improve my note taking system, which is a bit chaotic and not really systematic at the moment.
Learning Rust
In 2021, I started dabbling with Rust, mostly through the really great WIP book from Luca Palmieri, Zero To Production In Rust. It assumed some knowledge so I sometimes struggled had fun filling in the gaps.
Given where the JS ecosystem is going in terms of tooling (oh yeah, in 2021 I started this Awesome List of JavaScript Tooling Not Written In JavaScript on GitHub ‚Äì 667 stars so far!), I think it‚Äôs important to explore beyond the confines of JavaScript&#x2F;TypeScript. So I‚Äôd like to spend more time with Rust this coming year!
Lots of things to be grateful for last year and lots to look forward to this year. C‚Äôest parti !*
#### [Python Dependencies for JavaScript Developers](https:&#x2F;&#x2F;www.robincussol.com&#x2F;python-dependencies-for-javascript-developers&#x2F;) 
*Recently, I needed to update an old Python codebase which had not been touched in 3 years! Of course, the dependencies were so outdated that the Dockerfile of the project wouldn‚Äôt build. My JavaScript knowledge did not help me much:
how could I do a yarn upgrade-interactive --latest to update dependencies?
where‚Äôs the dependency lockfile?
why do we need to compile C-libraries for Python dependencies?
Luckily for me, my colleague Ondrej patiently explained how to approach these questions.
Using a virtual environment
TL;DR: pip installs packages globally unless we activate a virtual environment.
In Python, the default package manager is call pip and it installs packages from the Python Package Index, shortened to Pypi. The equivalent in JavaScript land would be npm and npmjs.com.
By default, pip installs packages system-wide. This contrasts with the need to pass a --global flag to npm.
To remedy that, we can use a local Python environment (a bit like having our node_modules folder in a JavaScript project). The following command will create a virtual environment in a venv folder in our current directory:
# Create the venv folder container the virtual environment
$ python3 -m venv venv
To make sure pip knows it should install packages in this virtual environment, we must activate it. Depending on your shell, you should source the appropriate activate file in venv&#x2F;bin:
activate, for Bash and ZSH,
activate.fish, for Fish Shell,
activate.csh, for csh
Activate.ps1, for PowerShell.
In my case, I will source the one for ZSH:
$ source venv&#x2F;bin&#x2F;activate
Now, pip install will install packages in the local folder instead of targeting the global scope. My ‚ÄúPython node_modules folder‚Äù is venv&#x2F;lib&#x2F;python3.8&#x2F;site-packages&#x2F;.
Dependencies in Python
TL;DR: use pip-compile to generate a lockfile and pip-sync to install dependencies from that lockfile
To deal with dependencies, we must install the pip-tools package in our virtual environment:
pip install pip-tools
This will allow us to use pip-compile and pip-sync later on.
Once that‚Äôs done, we could for example decide to start a Django project, ‚Äúthe web framework for perfectionists with deadlines‚Äù. The latest version of the package at the time of writing is 3.2.5. Let‚Äôs create our Python equivalent of a package.json file to express our project needs the Django package pinned to version 3.2.5:
# requirements.in
django&#x3D;&#x3D;3.2.5
Note: the better equivalent to a package.json would be a setup.py file, since it contains additional fields like the name of the local package, its version, etc. but we just want to write down the dependencies.
EDIT #1: it‚Äôs apparently not common practice to pin dependency versions in requirements.in, just in case you really need to (if there are breaking changes for example). Thanks for pointing it out, Ondrej.
To generate a corresponding lockfile of the transitive dependencies of Django, we can run the following command:
pip-compile --output-file requirements.txt requirements.in
This will create the following requirements.txt file:
#
# This file is autogenerated by pip-compile with python 3.8
# To update, run:
#
#    pip-compile --output-file&#x3D;requirements.txt requirements.in
#
asgiref&#x3D;&#x3D;3.4.1
    # via django
django&#x3D;&#x3D;3.2.5
    # via -r requirements.in
pytz&#x3D;&#x3D;2021.1
    # via django
sqlparse&#x3D;&#x3D;0.4.1
    # via django

Now that we have this file, we can finally retrieve and install the packages with the following command:
pip-sync
Note: if you try to run pip-sync without a requirements.txt, you will get the following error:
No requirement files given and no requirements.txt found in the current directory
It is indeed necessary to run pip-compile before.
Updating dependencies
Similar to npm oudated, we can list the outdated Python dependencies with
$ pip list --outdated
For example, after downgrading Django to 3.2.3 in my requirements.in, regenerating the lockfile with pip-compile, re-installing the dependencies with pip-sync, the command above will show:
Package    Version Latest Type
---------- ------- ------ -----
Django     3.2.3   3.2.5  wheel
setuptools 44.0.0  57.4.0 wheel
To update the dependency, I can change the version back to 3.2.5 in the requirements.in and go through the same dance:
$ pip-compile --output-file requirements.txt requirements.in
$ pip-sync
$ pip list --outdated
Package    Version Latest Type
---------- ------- ------ -----
setuptools 44.0.0  57.4.0 wheel
EDIT #2: a batteries-included equivalent to Yarn is called Poetry. Thanks for sharing, D√°niel!
Wheels and Eggs
You might wonder what this ‚Äúwheel‚Äù type is for the Django and setuptools packages.
They are still mysterious to me, but here‚Äôs my current understanding: in Python, some dependencies need to be built for specific architectures, as they might be written in Cython, ‚Äúa superset of the Python language that additionally supports calling C functions and declaring C types on variables and class attributes‚Äù. Wheels and Eggs are packaging formats for these.
In particular, it is not a good idea to use Alpine Docker images for Python projects as a lot of packages don‚Äôt have pre-built wheels for that architecture: your Docker build step will need to compile the packages from source, slowing down your entire process (and requiring you to install the necessary build tools for this compilation to happen!).
I don‚Äôt think there is a similar ‚Äúpackaging format‚Äù concept in JavaScript land. But we do have packages shipping prebuilt binaries for specific architectures, for example Sharp, the Node.js image processing package. (And we probably have enough issues with CommonJS vs ES Modules as it is‚Ä¶ :smile:)
Conclusions
All in all, a project needs to:
specify external dependencies and their desired version with semantic ranges
have a way to retrieve said dependencies
keep track of which versions were effectively installed to improve reproducibility.
Despite all these measures, the Docker file of an unmaintained 3-year old project could not build. Software rots!*
#### [How to Download a Brain with Pair Documenting](https:&#x2F;&#x2F;www.robincussol.com&#x2F;download-a-brain-with-pair-documenting&#x2F;) 
*When people leave the company, a lot of specific and ad hoc knowledge goes away with them. Unless there is already a strong documentation culture, there‚Äôs only so much that can be said and done during exit interviews to make up for it.
But this doesn‚Äôt have to be left to fate.
Throughout the month of January, my now ex-colleague Adam Jani≈° and I pair documented all his knowledge about the frontend infrastructure at Kiwi.com. We produced a 24 page document, fixed a few bugs and addressed some tech debt. More importantly, we had fun doing it!
Here‚Äôs how we approached it.
How to pair document
This is an attempt at formalising what we‚Äôve done, feel free to s&#x2F;Newbie&#x2F;Robin&#x2F;g and s&#x2F;Expert&#x2F;Adam&#x2F;g.
The Protagonists
You will need two proactive people: an Expert on the subject to document and a Newbie who is not too cursed with knowledge yet. Bonus points if they have not really worked together but always had good chemistry in their interactions.

The Newbie makes it easy on the Expert for this documentation effort to be a no-brainer:
they organize the pair documenting sessions;
they manage the agenda of the sessions;
they do most of the note-taking;
they digest the notes into documentation drafts in between sessions;
they stay curious and eager to learn more about the subjects, with questions always at the ready (this is hard to fake, so find an adequate Newbie for the task).

The Expert shows up at the sessions and generously shares their knowledge with the Newbie, answering patiently every question they may have. They review the documentation drafts to ensure the prose does not betray the original intent of the notes. Bonus points if they include the Newbie in solving similar problems described in the nascent documentation as they arise in the support channels of the company‚Äôs Slack: learning by doing is a great way to drive home the material and expose remaining ambiguities.

The First Session
The Newbie is in charge and explains how it‚Äôs going to work in the first pair-documenting session. That means going through what‚Äôs expected of each participant in this documentation effort as well as giving an overview of the actual process.
The objective of the first session is crucial: go as broad as possible and capture as many ideas of what needs documenting to form a backlog of topics to go over in the next sessions.
This can be achieved through asking questions like (more examples in this template):
what are things that you know about that very few people know?
what are the things that people always ping you about on Slack?
what tasks pile up when you‚Äôre on vacation?
Once the amount of things to document gets a bit clearer, see how many days are left before they leave and agree on a schedule to leave enough time for this task.
In Between Sessions
The Newbie transforms the raw notes into documentation drafts and gets the Expert to review them.
As more people in the company are aware of this documentation effort, they might have questions of their own; the Newbie adds these points to the agenda for the next session.
The Expert includes the Newbie in all discussions on Slack touching on the subject to maximize the learning opportunities and give the docs a trial by fire.
A Normal Session
In the first 5-10 minutes, the Newbie and the Expert go over unresolved comments in the doc draft, they review the agenda from the previous session and see if anything pops up to be further discussed or explained, and finally, they review the agenda for the current session and decide what to prioritize.
They then go over each point in the agenda: the Expert does most of the talking while the Newbie does most of the note-taking. The Newbie shares their screen for the document to be visible by both pair documentors. The Newbie may interrupt the Expert at any point with questions or with attempts at paraphrasing what the Expert just described. The Expert glances at the notes being taken once in a while to ensure they don‚Äôt contain mistakes from the get-go.
When the time is up, the Newbie and the Expert look at how much they covered from the agenda, move what hasn‚Äôt been covered to the next session, and agree on a date and time for that next session (if it‚Äôs not already regular).
Tools we used
A Calendar: to plan the sessions, to have automatic reminders for them, and to share the visio-conference link.


Custom recurrence with expiry date, Hangouts link, Notification not to miss it, Allow guests to modify event for better collaboration

A Google Document: to store the agenda, the notes and the first documentation drafts. Do make use of the outline on the left-hand side to navigate more easily once the document gets to a certain size. Do make use of comments to discuss and improve the notes and the draft. This is also a good place to involve other people from the company asynchronously. Make sure to put this document in a shared team drive for it to have the right permissions set by default.


Use the ‚ÄúStyles‚Äù dropdown to get this hierarchy

Here‚Äôs a free template Google document to get you started. Feel free to make a copy.
LucidChart: to draw a few diagrams because pictures are great (though you may want to check out Draw.io for a great free alternative).
Why Pair Documenting Works
What usually happens
Unless there is a strong documenting culture, (1) people never prioritize documentation over almost any other task, because it‚Äôs just not as fun as coding or as urgent as the next fire you need to put out. That means that when someone is about to leave, (2) there is an impossible amount of things to document that they don‚Äôt even know where to start. Because they are short on time, they end up drafting a lil‚Äô something and call it a day. (3) Anyway, we never needed that, why are they asking me to document that stuff, who‚Äôs gonna read it anyway?! (Note the use of two ‚Äúanyway‚Äù).
Clear intention through planning
Through planning the pair documenting sessions, we make sure documentation does get prioritized and give it the importance it deserves. If the Expert‚Äôs knowledge is that important and they by happenstance siloed it, it becomes urgent to share this knowledge more widely to deal with that critical bus factor. (Whether they leave or not is almost irrelevant in this case.)
Because we know when the Expert‚Äôs last working day is, it is easier to retro-plan the right number of sessions to cover the entire backlog established in the first session. This of course might need adjusting throughout the pair documentation effort.
More fun and better quality through collaboration
Planning is not enough if the Expert is still lost about what needs documenting and in which level of details. The nagging ‚Äúare they even gonna read it?‚Äù-type questions could well be the end of the documentation effort already: a well-crafted plan not well-executed.
With an accountability buddy, things turn around entirely.
It becomes really difficult to bail out of the plan because you know the other person is expecting you to show up at the session.
Because the Newbie is enthusiastic about the topic, the Expert is more generous in their contribution.
Because the Newbie asks questions and cares about details, the pair documentors tailor the documentation to the level of knowledge on the receiving end. The Expert knows this documentation will be useful. üòå
Aligned incentives
The Expert also knows that what they know should be documented somewhere, and because they like their colleagues, they don‚Äôt want their departure to create a mess. (Right?!)
The Newbie knows this knowledge is valuable, and about to disappear if they don‚Äôt take action. Besides, it‚Äôs something they‚Äôre curious and wanted to learn more about anyway.
The Expert gets to share their knowledge and teach what they know to someone who‚Äôs enthusiastic and interested in the topic; the Newbie gets time with the Expert to learn as much as possible from them.
Parting thoughts
I really enjoyed the pair documenting sessions with Adam and I think they should be made a regular practice, just like pair programming. It‚Äôs a great way to level up people while producing value beyond the scope of that collaboration.
At the same time, documentation is only valuable if it gets read and updated continuously. I‚Äôve been thinking about how to bring it closer to where people are already consuming content. For example, this could take the form of digests of parts of the documentation in the company‚Äôs Slack.
I‚Äôm not super familiar with mob programming, but I do wonder if mob documenting could be a thing to try too.

Acknowledgements:
Adam Jani≈° (@adam_janis) for trying out this pair-documenting idea before his departure :)
Emilia Vidal for her review and suggestions,
Shawn Wang (@swyx) for his review and ideas for the title and Open-Graph image,
Ron Au (@ronvoluted) for providing the font to go ahead with Shawn‚Äôs ideas,
Excalidraw to produce the visuals.*
#### [Year in Review: 2020](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2020&#x2F;) 
*2020, what a ride!
I cannot believe 2020 has already finally come to an end: with the lockdowns and quarantines, time simultaneously flew by and dragged on. A lot of my life was lived through a computer and the Internet. Time to reflect and remember.
Let‚Äôs start with some remarkable facts and events:
personally: - turned 30 in April, without even a beer to celebrate! (hint: the last bit is what‚Äôs remarkable) ‚ùåüç∫ - traveled only once to see my family in France üò¢ - got engaged in August üíç - spent the Christmas holidays alone, for the first time (I feel you, Kevin McCallister) üö∞
at work: - got a raise and earned a promotion üìà - wrote 3 posts on the Frontend Platform‚Äôs internal blog ‚úç
on my blog: - published 8 new posts üöÄ - updated 1 article ‚ôªÔ∏è - started a newsletter (already wrote 2 issues) üóû - broke the 10k unique visitor mark for Build Standalone Expo .apk and .ipa with Turtle CLI üéâ
miscellaneous: - joined 2 great online communities (Coding Career and Blogging For Devs) üôå - revamped a handful of desktop PCs and laptops (cannot believe I was about to get rid of my older laptop when it‚Äôs so smooth now!): most low-end&#x2F;mid computers are slow because of their stock hard drives (and limited RAM), a nice SSD and some RAM extension will do wonders! üíæ - jumped on the sourdough bread baking train (and learnt recently how sourdough baguettes are a lazy baker‚Äôs dream!) üá´üá∑ ü•ñ
Despite everyone calling 2020 their worst year ever, it did not seem so bad personally. Of course, I missed social life and being able to do ‚Äúnormal‚Äù things, but all things considered, I still learnt a lot this year.
Consumer to archivist
Spending so much time online means I absorbed vast amounts of data and after a while, it did not sit so well with me. I believed that I learn best by immersing myself in a continuous flow of information surrounding one topic. Of course, it‚Äôs worked for me so far, but the cost is that I get overwhelmed and it‚Äôs difficult to know when it‚Äôs enough.
Trying to change that brute-force approach to learning, I read here and there that taking notes would force me to slow down and choose what I consume more wisely. I obviously bought ‚ÄúHow to Take Smart Notes‚Äù by S√∂nke Ahrens (and only half-read it), came across the German word Zettlekasten and went on a wild goose chase for the best Personal Knowledge Management system, and read all the articles and watched all the YouTube videos about the subject. Old habits die hard. üòÖ
After using a few of them, I ended up settling with Joplin (which I had of course already set up prior to any of this) and have not looked back. It does not have backlinks so I‚Äôm deeply missing out on interconnected notes, as the hype goes, but it‚Äôs okay. My FOMO is in check for now. Joplin is an active open source project which is available on desktop as well as mobile devices. I retain full ownership (and responsibility) over my notes as Joplin integrates with different storage backends: I chose to use my self-hosted NextCloud instance.
In short:
just-in-case knowledge is expensive; prefer just-in-time knowledge
it‚Äôs easy to go on a wild goose chase only to realise you had everything already
note-taking does force me to slow down and helps to remember better
Archivist to creator
This story does not end here, dear reader. Accumulating notes about topics I‚Äôm interested in helps to slow down and be more intentional with what I consume. But it turns out knowledge without action is mostly useless.
Luckily, Daniel Vassalo wrote this influential tweet:
If you‚Äôre tempted by this, my advice to first-time creators is to start with a very small product: Something you can finish in 2 weeks and charge #### [Build Standalone Expo .apk and .ipa with Turtle CLI [deprecated]](https:&#x2F;&#x2F;www.robincussol.com&#x2F;build-standalone-expo-apk-ipa-with-turtle-cli&#x2F;) 
*This article was updated on February 7, 2023. NOTE: As of Expo SDK 47, the following method does not work any more. With the release of EAS‚Ä¶*
#### [Optimize your img tags with Eleventy Image and WebC](https:&#x2F;&#x2F;www.robincussol.com&#x2F;optimize-your-img-tags-with-eleventy-image-and-webc&#x2F;) 
*I am very excited about WebC and couldn‚Äôt wait to try out the corresponding Eleventy plugin. The first use-case I had in mind was to use‚Ä¶*
#### [Year in Review: 2021](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2021&#x2F;) 
*We‚Äôre already at the start of February 2022, but who says retrospectives need to be done on January 1st?! A lot of things happened in 202‚Ä¶*
#### [Python Dependencies for JavaScript Developers](https:&#x2F;&#x2F;www.robincussol.com&#x2F;python-dependencies-for-javascript-developers&#x2F;) 
*Recently, I needed to update an old Python codebase which had not been touched in 3 years! Of course, the dependencies were so outdated that‚Ä¶*
#### [How to Download a Brain with Pair Documenting](https:&#x2F;&#x2F;www.robincussol.com&#x2F;download-a-brain-with-pair-documenting&#x2F;) 
*When people leave the company, a lot of specific and ad hoc knowledge goes away with them. Unless there is already a strong documentation‚Ä¶*
#### [Year in Review: 2020](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2020&#x2F;) 
*2020, what a ride! I cannot believe 2020 has already finally come to an end: with the lockdowns and quarantines, time simultaneously flew by‚Ä¶*
#### [Docker for JavaScript Devs: How to Containerise Node.js Apps Efficiently](https:&#x2F;&#x2F;www.robincussol.com&#x2F;docker-for-js-devs-how-to-containerise-nodejs-apps-efficiently&#x2F;) 
*Docker is a really cool technology to have applications run the in the same, predictable context, ensuring the ‚Äúbut it works on my machine‚Ä¶*
#### [TypeScript Tidbit: How to Overload an Imported Function](https:&#x2F;&#x2F;www.robincussol.com&#x2F;typescript-tidbit-how-to-overload-an-imported-function&#x2F;) 
*There are times when the type definitions shipped on DefinitelyTyped are not enough and this results in making the TypeScript compiler‚Ä¶*
#### [Wax on, Wax off](https:&#x2F;&#x2F;www.robincussol.com&#x2F;wax-on-wax-off&#x2F;) 
*The reason I got into web development in the first place was the magical ‚ú® feeling you get when you see your code manifest in the browser‚Ä¶*
#### [A Successful Side-Project: Lessons from Swyx](https:&#x2F;&#x2F;www.robincussol.com&#x2F;a-successful-side-project-lessons-from-swyx&#x2F;) 
*If you are on Twitter, chances are you came across this tweet by Daniel Vassallo and it now seems everyone is writing a book! üòÑ Shawn Wang‚Ä¶*0 for it. The experience of getting paid for something you created, directly by consumers, will change you forever. https:&#x2F;&#x2F;t.co&#x2F;UbUD9ch4xQ
‚Äî Daniel Vassallo (@dvassallo) April 10, 2020
 
and Shawn Wang (@swyx) acted on it almost immediately to produce the Coding Career Handbook a few months later. I had followed him for some time on Twitter. His posts, conference talks and online presence in general always brought me value so I wanted to support his work. I was also really glad that half the proceeds would go to FreeCodeCamp. I got the Creators package, not entirely sure what to expect.
This was one of the best decisions of 2020.
As part of the Creators package, there have been regular workshops and they definitely spurred me further to action. After he invited Monica Lent to give a workshop about blogging for developers, I formed a resolve to try and publish a post every 2 weeks, as a way to transform my note-taking game into something more valuable. That‚Äôs when I resurrected my blog with 5 Tips to Start Blogging (for Devs).
A lot of my posts were shared at work and in the company‚Äôs external newsletter (thank you üôÇ) and for the most part, this resurection was successful, even though December was a bit of a hiatus in my blog publishing, as I started my newsletter, Robin‚Äôs Gazette.
I still have a lot to learn when it comes to creating online content and I am looking forward to continuing with this momentum. Whenever I need a reality check of what it takes to embark on this creator journey, I would have a read through Alex West‚Äôs story, as it‚Äôs so real, inspiring and humbling!
Joining online communities
The Coding Career Handbook is an amazing resource and I would like to write a proper review of the book some day; it contains so much valuable information that it would be hard to do it justice here.
What‚Äôs even more awesome about it is that it came with access to a community through Discord and Circle that Shawn manages really well as it keeps delivering value and furthers the book‚Äôs teachings and principles. And if that wasn‚Äôt enough, I met a few interesting people there who I‚Äôm looking forward to getting to know more in 2021.
Judging by how much the Coding Career community helped me to get real with my volitions, I also decided to join Monica Lent‚Äôs Blogging For Devs community because I‚Äôd like to take my blogging further. For example, my article about [Building] Standalone Expo .apk and .ipa with Turtle CLI broke the 10k unique visitor mark in December, through accidental SEO mostly. üéâ I‚Äôm hoping to get a little bit more intentional with SEO as it‚Äôs a great way to magnify the reach of your content. There are so many interesting and inspiring people in Monica‚Äôs community, as well as discussions and workshops about SEO, newsletters, monetization, and of course blogging‚Äîtopics I definitely want to dive deeper in in the new year!
Writing, writing, writing
If you have read this far, it has become pretty apparent that writing is now more than ever my main focus. I think it has been a tremendous source of clarity and success in the last year for me.
The resource that influenced my writing the most this year was this lecture by Larry McEnerney about the Craft of Writing Effectively (here‚Äôs a summary). Having done a PhD, I practiced the ‚Äúwrong‚Äù way of writing for a very long time. Focusing on what‚Äôs valuable for your intended readership makes so much sense.
As I mentioned in my first newsletter issue (let me know if you want a copy of it üòâ), design documents have been crazy useful at work. I must thank my colleage Tobi√°≈° Potoƒçek for bringing about this revolution. In this remote-only work environment, they were a great tool to discuss, make decisions and document them in a searchable manner. Every shortcut needed to be reckoned with and set against the bigger picture. Every quirk or contextual piece of information (which are critically important to understand past decisions or make new ones) are now recorded in writing.
Being a member of the Frontend Platform team, communicating as effectively as possible with the teams we serve was critically important too‚Äîespecially in such challenging times for a travel company in 2020. Most of that communication was done in writing through Slack and Google Documents. (Not to say it was always a smooth ride‚Ä¶)
A look ahead
In 2021, I will focus on staying in shape, physically and mentally. We will go for walks in nature more regularly with Emilia (we agreed at least once a month and have a list of places in Czechia!) I will cycle to work as much as possible, get back into the nice workout rhythm we had during the first lockdown and take care of my sleeping patterns (it‚Äôs all great to wake up earlier to write, but that means going to bed earlier too, Robin ;-)) I will take breaks when I‚Äôm getting overwhelmed, instead of resorting to my usual ‚Äústrategy‚Äù of pushing through until I‚Äôm burnt out.
In 2021, I will focus on maintaining the shift from content consumption to content creation. I want to continue publishing on my blog every 2 weeks as well as send my Gazette every 2 weeks. I will write a book to help PhD graduates transition to web development: I‚Äôm now further along the path (and my work seems to be appreciated :)), so it‚Äôs time to try and lift others as I climb.
In 2021, I will finally speak Slovak fluently to be able to speak to all our wedding guests (still to be planned‚Ä¶ so I got time, I guess :P) in their preferred language. (Robin of January 2022, you‚Äôre welcome!)
C‚Äôest parti!*
#### [Docker for JavaScript Devs: How to Containerise Node.js Apps Efficiently](https:&#x2F;&#x2F;www.robincussol.com&#x2F;docker-for-js-devs-how-to-containerise-nodejs-apps-efficiently&#x2F;) 
*Docker is a really cool technology to have applications run the in the same, predictable context, ensuring the ‚Äúbut it works on my machine‚Äù comments are a thing of the past. Not to mention how Docker integrates with Docker Compose and Kubernetes for larger-scale applications! But that‚Äôs for another day.
In this article, you will learn about some good principles to containerise Node.js apps efficiently. These principles are probably quite general and well-known, but they‚Äôre easy to overlook for beginners to Docker and Dockerfiles.
You will need to have Docker and Node.js installed locally to follow along comfortably.
Docker wants to make you happy, 
Photo by cottonbro from Pexels



Table of contents
Containerising a Next.js app (naive approach)

Docker Glossary
Optimising a Node.js app‚Äôs Docker image

Create a comprehensive .dockerignore file
Use an appropriate base image
Decouple the dependency installation step from application code
Decouple the build from the resulting built application
(Optional) Purge node_modules from unnecessary files
Docker build checklist for JavaScript Devs
Containerising a Next.js app (naive approach)
Let‚Äôs start with a simple Next.js application:
$ npm create next-app --use-npm
and let‚Äôs write the following into a file called Dockerfile at the root of the project:
FROM node:14.15.0

WORKDIR &#x2F;app

COPY . .
RUN npm ci
RUN npm run build

EXPOSE 3000

USER node

CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
Okay, what just happened? üòÑ
Docker Glossary
FROM &lt;image&gt;
WORKDIR &lt;some-path-in-the-container&gt;
COPY &lt;from-context&gt; &lt;to-container&gt;
WORKDIR directory
RUN &lt;command&gt;
docker build process only
EXPOSE &lt;port&gt;
documenting which port the app uses
USER &lt;user&gt;
root with superuser privileges); it‚Äôs good practice to use a different user to run the app.
CMD &lt;command&gt;
docker run &lt;image-tag&gt;, it is not executed during the build process.
Assuming we have Docker installed, we could now run
$ docker build --tag my-containerised-nextjs-app .
This command kindly asks the Docker daemon running on our machine to build the Dockerfile we just wrote with the files present in the current directry (the .) and to call that image my-containerised-nextjs-app (with the --tag flag).
After the build completed, run
$ docker run --rm -p 3000:3000 my-containerised-nextjs-app
and we should have our app running at http:&#x2F;&#x2F;localhost:3000.
This second command orders the Docker daemon to run the image named my-containerised-nextjs-app with port 3000 on my machine to correspond to port 3000 inside the container so that we can interact with our Next.js app. This port mapping is done through the -p hostPort:containerPort flag. Go ahead and change the port mapping and see if you can still access the app.
The --rm flag indicates that we do not want the Docker daemon to keep the container when we stop its execution (with CTRL+C); this is useful not to clog our machines with useless logs while developing.
Voil√†, we have containerised our Next.js app. The End. üéâ
Wait! Don‚Äôt leave, there‚Äôs more! üëá
Optimising a Node.js app‚Äôs Docker image
The section above does the job, but it‚Äôs not optimal. If we only have so few pipeline minutes and we don‚Äôt like wasting resources ‚ôªÔ∏è, this setup will eat more than is necessary. There are a few strategies to optimise a Dockerfile:
Create a comprehensive .dockerignore file
Use an appropriate base image
Decouple the dependency installation step from application code
Decouple the build from the resulting built application
(Optional) Purge node_modules from unnecessary files
Create a comprehensive .dockerignore file
If we look at the logs from building the Docker image, we could read:
Step 4&#x2F;8 : RUN npm ci
 ---&gt; Running in 559b499f0e2c
npm WARN prepare removing existing node_modules&#x2F; before installation
That means we copied the node_modules folder from our local context over to the Docker image being built. What‚Äôs more, npm ci removes them to make sure it works consistently. That is an indication that we should not copy the node_modules in the first place.
To let Docker know some files and folders should be ignored, we can list them in a .dockerignore file. For example, add the following to a file named .dockerignore:
node_modules
Run the build again and the warning disappeared.
What‚Äôs more, we can see how much less was sent to the Docker build context:
# BEFORE
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  101.8MB

# AFTER
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  400.4kB
In practice, we would want to add as many files as possible to our .dockerignore to ensure we‚Äôre not wasting time and energy on files which won‚Äôt be necessary for the build. This can include documentation files (e.g. *.md), configuration files which are only necessary when developing (e.g. .eslint*, .prettier*) as well as our Git history (e.g. .git).
With the following .dockerignore file:
node_modules
*.md
.git
we end up sending the bare minimum to the Docker daemon:
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  248.3kB
Use an appropriate base image
Docker images come in all shapes and sizes. When it comes to building or deploying our app, the smaller the size, the better. For our Next.js app, we don‚Äôt need all that‚Äôs available in node:14.15.0. For example, we don‚Äôt need git or curl. We can instead use the alpine flavour of that image, namely node:14.15.0-alpine.
The difference in size between node:14.15.0 and node:14.15.0-alpine is enormous!
REPOSITORY                    TAG                 SIZE
node                          14.15.0             943MB
node                          14.15.0-alpine      117MB
Our final containerised Next.js app will hence be much smaller thanks to this teeny-tiny modification of our Dockerfile:
- FROM node:14.15.0
+ FROM node:14.15.0-alpine

WORKDIR &#x2F;app

COPY . .
RUN npm ci
RUN npm run build

EXPOSE 3000

USER node

CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
For reference, if we want to inspect the size of the Docker images we have available locally, we can run docker image ls --all.
Our Docker image has size 1.05GB if we use node:14.15.0,
REPOSITORY                    TAG                 IMAGE ID            CREATED             SIZE
my-containerised-nextjs-app   latest              c78d43a2c5bc        15 seconds ago      1.05GB
and it drops to 229MB if we use node:14.15.0-alpine instead!
REPOSITORY                    TAG                 IMAGE ID            CREATED             SIZE
my-containerised-nextjs-app   latest              d0746ef6e8a4        21 seconds ago      229MB
Decouple the dependency installation step from application code
Our setup is already much better with a suitable .dockerignore file and with a much leaner base image. However, we haven‚Äôt made any changes to our package.json and the npm ci step always needs to run if make any changes to our application code.
This is because Docker caches each step as an intermediate Docker container. For example, if we were to run the build again (docker build --tag my-containerised-nextjs-app .), we would see that the cache is used for all steps, resulting in a nearly instant build (because nothing happened, really üòÑ):
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  248.3kB
Step 1&#x2F;8 : FROM node:14.15.0-alpine
 ---&gt; 9db54a688554
Step 2&#x2F;8 : WORKDIR &#x2F;app
 ---&gt; Using cache
 ---&gt; d5d4291dc699
Step 3&#x2F;8 : COPY . .
 ---&gt; Using cache
 ---&gt; b56455e98a93
Step 4&#x2F;8 : RUN npm ci
 ---&gt; Using cache
 ---&gt; ba4ab784f27e
Step 5&#x2F;8 : RUN npm run build
 ---&gt; Using cache
 ---&gt; a51c18594a20
Step 6&#x2F;8 : EXPOSE 3000
 ---&gt; Using cache
 ---&gt; 806dc06cbb6c
Step 7&#x2F;8 : USER node
 ---&gt; Using cache
 ---&gt; b86db08de717
Step 8&#x2F;8 : CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
 ---&gt; Using cache
 ---&gt; d0746ef6e8a4
Successfully built d0746ef6e8a4
Successfully tagged my-containerised-nextjs-app:latest
If we now modify anything in the folder that is not ignored thanks to our .dockerignore file, Docker will have to bust the cache from Step 3 onwards (the ‚ÄúUsing cache‚Äù expression is not printed any more). Let‚Äôs create an empty file and run the build again:
# create an empty file
$ touch file
# build again
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  248.8kB
Step 1&#x2F;8 : FROM node:14.15.0-alpine
 ---&gt; 9db54a688554
Step 2&#x2F;8 : WORKDIR &#x2F;app
 ---&gt; Using cache
 ---&gt; d5d4291dc699
Step 3&#x2F;8 : COPY . .
 ---&gt; e2b761bb08a6         # The cache is not used anymore
Step 4&#x2F;8 : RUN npm ci
 ---&gt; Running in b36f2511e117
...
To remedy this and ensure that npm ci runs only when necessary, we can first copy package.json and package-lock.json files, run npm ci, and then bring in the rest of the files to build the project:
FROM node:14.15.0-alpine

WORKDIR &#x2F;app

- COPY . .
+ COPY package.json .
+ COPY package-lock.json .
RUN npm ci
+ COPY . .
RUN npm run build

EXPOSE 3000

USER node

CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
After we modified the Dockerfile by applying the diff above, we see that Docker does not leverage the cache at all because the steps are different. This always happens when we modify the layers and&#x2F;or their order.
However, after running this build for a first time, subsequent builds will be much faster as the npm ci step will use the cache unless we modify package.json or package-lock.json:
# create another file to see when Docker stops using the cache
$ touch another-file
# run the build again
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  249.3kB
Step 1&#x2F;10 : FROM node:14.15.0-alpine
 ---&gt; 9db54a688554
Step 2&#x2F;10 : WORKDIR &#x2F;app
 ---&gt; Using cache
 ---&gt; d5d4291dc699
Step 3&#x2F;10 : COPY package.json .
 ---&gt; Using cache
 ---&gt; 139b5a611c0b
Step 4&#x2F;10 : COPY package-lock.json .
 ---&gt; Using cache
 ---&gt; 5bc380de1397
Step 5&#x2F;10 : RUN npm ci
 ---&gt; Using cache
 ---&gt; dff6b2da4bdc
Step 6&#x2F;10 : COPY . .
 ---&gt; 08911c09b40f
Step 7&#x2F;10 : RUN npm run build
 ---&gt; Running in f5374a54d9ad

&gt; my-app@0.1.0 build &#x2F;app
&gt; next build
...
Decouple the build from the resulting built application
For this section to make more sense, we will create another Next.js app that uses some dev dependencies which are necessary only when building the app but not when running it in production.
$ npm create next-app --use-npm --example with-tailwindcss with-tailwindcss-app
Copy the Dockerfile and .dockerignore files created in the other example into with-tailwindcss-app. Build the Docker image and run it to make sure it‚Äôs working well before continuing:
$ docker build --tag with-tailwindcss-app .
$ docker run --rm -p 3000:3000 with-tailwindcss-app
As we can see in the package.json file, we have a few dependencies which are only ever going to be used when building our app. We won‚Äôt need them in the final Docker image. So let‚Äôs get rid of them!
We are going to leverage multi-stage Docker builds. They sound more complicated than they are :)
Here‚Äôs a multi-stage build Dockerfile: in the builder container, we install dependencies and build our app, and in the second stage, we copy relevant files from the builder to our final image and install only production dependencies.
FROM node:14.15.0-alpine as builder

WORKDIR &#x2F;app

COPY package.json .
COPY package-lock.json .
RUN npm ci
COPY . .
RUN npm run build

FROM node:14.15.0-alpine

WORKDIR &#x2F;app

COPY --from&#x3D;builder &#x2F;app&#x2F;package.json .
COPY --from&#x3D;builder &#x2F;app&#x2F;package-lock.json .
RUN npm ci --production
COPY --from&#x3D;builder &#x2F;app&#x2F;.next .next

EXPOSE 3000

USER node

CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
If our app also contained a Next.js config file and a public folder, we would also need to copy them from the builder stage:
...
COPY --from&#x3D;builder &#x2F;app&#x2F;.next .
+ COPY --from&#x3D;builder &#x2F;app&#x2F;next.config.js .
+ COPY --from&#x3D;builder &#x2F;app&#x2F;public public
...
Comparing the sizes, we see that we removed 39MB of dev dependencies, not bad.
without multi-stage build
REPOSITORY                    TAG                 IMAGE ID            CREATED              SIZE
with-tailwindcss-app          latest              88089e6f965d        18 minutes ago      269MB
with multi-stage build
REPOSITORY                    TAG                 IMAGE ID            CREATED              SIZE
with-tailwindcss-app          latest              ba7307736fb0        25 seconds ago       230MB
(Optional) Purge node_modules from unnecessary files
Finally, to make our Docker image the leanest, we will purge our node modules from all the files which were included by the library authors and aren‚Äôt directly useful to our Docker image. For example, documentation files and READMEs, config files for Prettier and such, etc.
Note that this is not without risk as we could be removing files that we actually need to run the application correctly (we had a file named test.js that contained important code and it was mercilessly removed by the tool, which broke the application üòÖ).
We will add another stage called production-deps to make our node modules go through a diet with node-prune (GitHub repo). The list of files and folders that node-prune will remove is largely inspired by Yarn‚Äôs default list (generated through yarn autoclean --init).
To install node-prune, we need curl to be a locally available executable, so we can either choose a base image that contains it out of the box, or we can add it to node:14.15.0-alpine. Because we won‚Äôt need anything else, we will choose the latter.
FROM node:14.15.0-alpine as builder

WORKDIR &#x2F;app

COPY package.json .
COPY package-lock.json .
RUN npm ci
COPY . .
RUN npm run build

+ FROM node:14.15.0-alpine as production-deps

+ WORKDIR &#x2F;app

COPY --from&#x3D;builder &#x2F;app&#x2F;package.json .
COPY --from&#x3D;builder &#x2F;app&#x2F;package-lock.json .
RUN npm ci --production
+ # Add curl
+ RUN apk --no-cache add curl
+ # Install node-prune https:&#x2F;&#x2F;github.com&#x2F;tj&#x2F;node-prune
+ RUN curl -sf https:&#x2F;&#x2F;gobinaries.com&#x2F;tj&#x2F;node-prune | sh
+ RUN node-prune &#x2F;app

FROM node:14.15.0-alpine

WORKDIR &#x2F;app

+ COPY --from&#x3D;production-deps &#x2F;app&#x2F;package.json .
+ COPY --from&#x3D;production-deps &#x2F;app&#x2F;package-lock.json .
+ COPY --from&#x3D;production-deps &#x2F;app&#x2F;node_modules node_modules

COPY --from&#x3D;builder &#x2F;app&#x2F;.next .next

EXPOSE 3000

USER node

CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
Try it by building the image once more.
When node-prune ran, it printed out in the console that it removed 12MB:
...
Step 15&#x2F;24 : RUN node-prune &#x2F;app
 ---&gt; Running in 69e030ab8b70


         files total 14,269
       files removed 3,722
        size removed 12 MB
            duration 216ms
...
However, suprinsingly, a whopping 32MB were removed in comparison to our previous Dockerfile. (It seems node-prune‚Äôs tallying is not totally accurate when I tested locally as it removed 20.7 MB instead ‚Äî though it still doesn‚Äôt explain the other 11.3 MB ü§∑‚Äç‚ôÇÔ∏è)
$ docker image ls with-tailwindcss-app
REPOSITORY                    TAG                 IMAGE ID            CREATED              SIZE
with-tailwindcss-app          latest              c5e2081dba30        9 seconds ago        198MB
Let‚Äôs ensure our app is running well without the files node-prune removed and we can be on our merry way! üê≥ üéâ
Docker build checklist for JavaScript Devs
To summarise what we‚Äôve learnt so far, here‚Äôs a small checklist to review our own Docker build setups:
I have a comprehensive .dockerignore file
I use an appropriate base image
I decoupled the dependency installation step to improve caching
I decoupled the resulting built application from the build step
I purged the node_modules from unnecessary files
Time to flex! üí™ Show me your before and after Docker image sizes in the comments below!*
#### [TypeScript Tidbit: How to Overload an Imported Function](https:&#x2F;&#x2F;www.robincussol.com&#x2F;typescript-tidbit-how-to-overload-an-imported-function&#x2F;) 
*There are times when the type definitions shipped on DefinitelyTyped are not enough and this results in making the TypeScript compiler unhappy. Oh noes! üò≠
Functions Overloading Be Like, Photo by Luis Villasmil) on Unsplash.



Overload an imported function in TypeScript
But fear not! It is possible to overload a function imported from a different module (which could even be a local module&#x2F;file, not necessarily a node module) without ‚Äúpatching‚Äù the corresponding @types&#x2F;&lt;package&gt; type definitions.
import { someFunction } from &#39;module&#39;

&#x2F;&#x2F; the function overloading
declare module &#39;module&#39; {
  function someFunction() &#x2F;&#x2F; the overload you need
}

someFunction() &#x2F;&#x2F; with the overloaded version ‚úîÔ∏è
Example: overload Ramda‚Äôs compose function
A practical example is Ramda‚Äôs compose function. If you pass more than 7 functions to the function, you need to overload Ramda‚Äôs type definitions coming from @types&#x2F;ramda as the TypeScript compiler will report an error otherwise (TypeScript Playground Error Example).

DefinitelyTyped obviously cannot provide the type definitions for any number of arguments as compose accepts as many arguments as you want. So it‚Äôs up to you to inform the TypeScript compiler that this usage is actually okay. üòå
This can be done like in the example below (TypeScript Playground Working Example):
import * as R from &#39;ramda&#39;

&#x2F;&#x2F; overloading compose because &#x60;@types&#x2F;ramda&#x60; exposes types for up to 6 functions
declare module &#39;ramda&#39; {
  function compose&lt;V0, T1, T2, T3, T4, T5, T6, T7&gt;(
    fn6: (x: T6) &#x3D;&gt; T7,
    fn5: (x: T5) &#x3D;&gt; T6,
    fn4: (x: T4) &#x3D;&gt; T5,
    fn3: (x: T3) &#x3D;&gt; T4,
    fn2: (x: T2) &#x3D;&gt; T3,
    fn1: (x: T1) &#x3D;&gt; T2,
    fn0: (x0: V0) &#x3D;&gt; T1
  ): (x0: V0) &#x3D;&gt; T7
}

&#x2F;&#x2F; and now, we can use:
const someComplicatedResult &#x3D; R.compose&lt;V0, T1, T2, T3, T4, T5, T6, T7&gt;(
  fn6,
  fn5,
  fn4,
  fn3,
  fn2,
  fn1,
  fn0
)(&#39;üòÖ&#39;)
We can see from the screenshot below that the overload was correctly taken into consideration. üéâ

Caveat
I can imagine that if this is overused, things can become quickly intractable. So use it sparingly and always with a good reason why. Your future self will be happy to find an explanation in a comment above the overloading as it is kind of unusual. üòâ
I discovered this while refactoring @kiwicom&#x2F;splitster to TS (link to commit) and thought it might be useful to share. Hope it helped you!*
#### [Wax on, Wax off](https:&#x2F;&#x2F;www.robincussol.com&#x2F;wax-on-wax-off&#x2F;) 
*The reason I got into web development in the first place was the magical ‚ú® feeling you get when you see your code manifest in the browser.
In my current role at work, I don‚Äôt do much of that anymore. And I guess I kind of miss it. Especially the part when I am given a clearly defined outcome, with clear guidelines. Perks of being labelled a senior, I guess. üòú But I digress.
Since I started with React, a lot of things have happened in web development. At the moment, I‚Äôm especially interested in Svelte and TailwindCSS and after watching Rich Harris‚Äôs latest talk ‚ÄúFuturistic Web Development‚Äù, I needed an excuse to try Svelte ASAP.
Staying sharp with deliberate practice
To ensure my frontend skills don‚Äôt wither, I would like to spend dedicated time each week to practice on a set of frontend challenges and reflect on what I learnt from them.
Fortunately, I recently discovered FrontendMentor.io and this website offers quite the list of frontend challenges, ranging in difficulty and consistently with nice designs.
Improve your front-end coding skills by building real projects
Solve real-world HTML, CSS and JavaScript challenges whilst working to professional designs.
‚Äî FrontendMentor.io
And to practice with new frontend technologies, it‚Äôs good to find nice designs. But it‚Äôs even better when they come with a style guide and assets like pictures and icons. üòç
Here‚Äôs how it works:
You choose a challenge and download the files.
You attempt the challenge with the stack of your choice. Because the challenge files come with a style guide, the necessary pictures and icons, etc. it‚Äôs really easy to get started! (Unless you spend hours deciding which stack to use, of course üòÇ)
You upload it to GitHub and deploy your attempt on Vercel or Netlify.
Finally, you submit your solution through your challenges dashboard on the platform.
You can then get feedback on your submissions and provide reviews for other people‚Äôs submissions too, which I find really cool. I remember how difficult it was to get feedback when I was first learning web development.
Learnings
The last challenge I attempted looked pleasing on my eyes and I honestly did not expect I would learn so much from it. That makes me want to practice even more!
Check out the live deployment!


I encountered the following problems to complete the ‚ÄúSocial media dashboard with theme switcher‚Äù challenge:
setting up Svelte with TailwindCSS (thank you Swyx and Chris Dhanaraj)
implementing a toggle component from scratch
without accessibility in mind (where I started: W3Schools üòÖ)
with accessibility in mind (where I ended up: Smashing Magazine, though I‚Äôm not sure how to test if my current solution is the most accessible)
implementing a theme switcher in Svelte (inspiration from this Svelte REPL)
adding a border with a gradient to a block element (this requires using a CSS trick from nowhere else but CSS Tricks of course)
pulling my hair for not realising that you need the group class for group-hover: modifiers to apply in the children with Tailwind (thank you Estevan Maito)
how to extract the imported Svelte components‚Äô props‚Äô TypeScript types (that‚Äôs a mouthful!), instead of exporting and importing the types directly (TL;DR: use $props_def from the component)
&lt;script lang&#x3D;&quot;ts&quot;&gt;
  import MyComponent from &#39;.&#x2F;MyComponent.svelte&#39;;

  const data: MyComponent[&#39;$props_def&#39;][&#39;data&#39;] &#x3D; ...
&lt;&#x2F;script&gt;

&lt;MyComponent {data} &#x2F;&gt;

...
deploying a ‚Äúmonorepo‚Äù on Vercel without redeploying all the folders all the time by specifying the ‚ÄúIgnored Build Step‚Äù with something like git diff --quiet HEAD^ HEAD -- subfolder-in-monorepo to only rebuild the site if changes were made in subfolder-in-monorepo.
Here‚Äôs the GitHub repository where I will learn in public and add future challenges I will attempt. (Though I might need to rename this repository in the future as I just found this really nice list of project ideas to build with other platforms than FrontendMentor.io üòâ)
Let me know in the comments what your current deliberate practice is!*
#### [A Successful Side-Project: Lessons from Swyx](https:&#x2F;&#x2F;www.robincussol.com&#x2F;a-successful-side-project-lessons-from-swyx&#x2F;) 
*If you are on Twitter, chances are you came across this tweet by Daniel Vassallo
If you‚Äôre tempted by this, my advice to first-time creators is to start with a very small product: Something you can finish in 2 weeks and charge #### [Build Standalone Expo .apk and .ipa with Turtle CLI [deprecated]](https:&#x2F;&#x2F;www.robincussol.com&#x2F;build-standalone-expo-apk-ipa-with-turtle-cli&#x2F;) 
*This article was updated on February 7, 2023. NOTE: As of Expo SDK 47, the following method does not work any more. With the release of EAS‚Ä¶*
#### [Optimize your img tags with Eleventy Image and WebC](https:&#x2F;&#x2F;www.robincussol.com&#x2F;optimize-your-img-tags-with-eleventy-image-and-webc&#x2F;) 
*I am very excited about WebC and couldn‚Äôt wait to try out the corresponding Eleventy plugin. The first use-case I had in mind was to use‚Ä¶*
#### [Year in Review: 2021](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2021&#x2F;) 
*We‚Äôre already at the start of February 2022, but who says retrospectives need to be done on January 1st?! A lot of things happened in 202‚Ä¶*
#### [Python Dependencies for JavaScript Developers](https:&#x2F;&#x2F;www.robincussol.com&#x2F;python-dependencies-for-javascript-developers&#x2F;) 
*Recently, I needed to update an old Python codebase which had not been touched in 3 years! Of course, the dependencies were so outdated that‚Ä¶*
#### [How to Download a Brain with Pair Documenting](https:&#x2F;&#x2F;www.robincussol.com&#x2F;download-a-brain-with-pair-documenting&#x2F;) 
*When people leave the company, a lot of specific and ad hoc knowledge goes away with them. Unless there is already a strong documentation‚Ä¶*
#### [Year in Review: 2020](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2020&#x2F;) 
*2020, what a ride! I cannot believe 2020 has already finally come to an end: with the lockdowns and quarantines, time simultaneously flew by‚Ä¶*
#### [Docker for JavaScript Devs: How to Containerise Node.js Apps Efficiently](https:&#x2F;&#x2F;www.robincussol.com&#x2F;docker-for-js-devs-how-to-containerise-nodejs-apps-efficiently&#x2F;) 
*Docker is a really cool technology to have applications run the in the same, predictable context, ensuring the ‚Äúbut it works on my machine‚Ä¶*
#### [TypeScript Tidbit: How to Overload an Imported Function](https:&#x2F;&#x2F;www.robincussol.com&#x2F;typescript-tidbit-how-to-overload-an-imported-function&#x2F;) 
*There are times when the type definitions shipped on DefinitelyTyped are not enough and this results in making the TypeScript compiler‚Ä¶*
#### [Wax on, Wax off](https:&#x2F;&#x2F;www.robincussol.com&#x2F;wax-on-wax-off&#x2F;) 
*The reason I got into web development in the first place was the magical ‚ú® feeling you get when you see your code manifest in the browser‚Ä¶*
#### [A Successful Side-Project: Lessons from Swyx](https:&#x2F;&#x2F;www.robincussol.com&#x2F;a-successful-side-project-lessons-from-swyx&#x2F;) 
*If you are on Twitter, chances are you came across this tweet by Daniel Vassallo and it now seems everyone is writing a book! üòÑ Shawn Wang‚Ä¶*0 for it. The experience of getting paid for something you created, directly by consumers, will change you forever. https:&#x2F;&#x2F;t.co&#x2F;UbUD9ch4xQ
‚Äî Daniel Vassallo (@dvassallo) April 10, 2020
 
and it now seems everyone is writing a book! üòÑ
Shawn Wang took this advice and decided to go forth with his Coding Career Handbook (for which I‚Äôm grateful! It‚Äôs such a great book!). He shares his lessons and regrets in this talk at js.la üìΩÔ∏è, and here are my notes for my future self when I want to ship a side project (for money or not).
The How
There are 4 aspects:
Pre-selling
Delivering
Launching
Keeping going
Pre-selling - or your own Kickstarter
On the first day of this endeavour, take the time to find a topic, a name and put up a landing page with good marketing copy.
Pre-sell to your friends and close network: they are more likely to ask you about the state of the project and you would hate to disappoint. What‚Äôs more, you‚Äôve got their money which you would awkwardly need to return otherwise.
This is probably a good moment to decide which platform(s) you want to use to support the sale of your book. Gumroad and Podia seem to be fairly big players in that space.
If it is your first side project that you would like to ship for money, don‚Äôt fret too much over the pricing strategy; it is more of a distraction from writing and completing the project. Sticking to Daniel Vassallo‚Äôs recommendation of #### [Build Standalone Expo .apk and .ipa with Turtle CLI [deprecated]](https:&#x2F;&#x2F;www.robincussol.com&#x2F;build-standalone-expo-apk-ipa-with-turtle-cli&#x2F;) 
*This article was updated on February 7, 2023. NOTE: As of Expo SDK 47, the following method does not work any more. With the release of EAS‚Ä¶*
#### [Optimize your img tags with Eleventy Image and WebC](https:&#x2F;&#x2F;www.robincussol.com&#x2F;optimize-your-img-tags-with-eleventy-image-and-webc&#x2F;) 
*I am very excited about WebC and couldn‚Äôt wait to try out the corresponding Eleventy plugin. The first use-case I had in mind was to use‚Ä¶*
#### [Year in Review: 2021](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2021&#x2F;) 
*We‚Äôre already at the start of February 2022, but who says retrospectives need to be done on January 1st?! A lot of things happened in 202‚Ä¶*
#### [Python Dependencies for JavaScript Developers](https:&#x2F;&#x2F;www.robincussol.com&#x2F;python-dependencies-for-javascript-developers&#x2F;) 
*Recently, I needed to update an old Python codebase which had not been touched in 3 years! Of course, the dependencies were so outdated that‚Ä¶*
#### [How to Download a Brain with Pair Documenting](https:&#x2F;&#x2F;www.robincussol.com&#x2F;download-a-brain-with-pair-documenting&#x2F;) 
*When people leave the company, a lot of specific and ad hoc knowledge goes away with them. Unless there is already a strong documentation‚Ä¶*
#### [Year in Review: 2020](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2020&#x2F;) 
*2020, what a ride! I cannot believe 2020 has already finally come to an end: with the lockdowns and quarantines, time simultaneously flew by‚Ä¶*
#### [Docker for JavaScript Devs: How to Containerise Node.js Apps Efficiently](https:&#x2F;&#x2F;www.robincussol.com&#x2F;docker-for-js-devs-how-to-containerise-nodejs-apps-efficiently&#x2F;) 
*Docker is a really cool technology to have applications run the in the same, predictable context, ensuring the ‚Äúbut it works on my machine‚Ä¶*
#### [TypeScript Tidbit: How to Overload an Imported Function](https:&#x2F;&#x2F;www.robincussol.com&#x2F;typescript-tidbit-how-to-overload-an-imported-function&#x2F;) 
*There are times when the type definitions shipped on DefinitelyTyped are not enough and this results in making the TypeScript compiler‚Ä¶*
#### [Wax on, Wax off](https:&#x2F;&#x2F;www.robincussol.com&#x2F;wax-on-wax-off&#x2F;) 
*The reason I got into web development in the first place was the magical ‚ú® feeling you get when you see your code manifest in the browser‚Ä¶*
#### [A Successful Side-Project: Lessons from Swyx](https:&#x2F;&#x2F;www.robincussol.com&#x2F;a-successful-side-project-lessons-from-swyx&#x2F;) 
*If you are on Twitter, chances are you came across this tweet by Daniel Vassallo and it now seems everyone is writing a book! üòÑ Shawn Wang‚Ä¶*0 is probably enough.
Delivering
Thanks to your pre-writing, e.g. gathering notes, writing blog posts, etc., you already have some amount of the material you would like to include in the finished product. If it‚Äôs 25%, that means you still need to actually write the other 75%.
If possible, you should continue your ‚Äúnormal‚Äù activities, like shipping blog posts about other topics, appearing on podcasts, etc.
As you are writing, document your journey and give away one or two chapters for free as teasers. They‚Äôre a showcase for what you‚Äôre producing and could lead to podcast interviews for further exposure.
I was sharing my personal journey, lessons and milestones.
The best marketing is no marketing. No one wants to be sold anything.
‚Äî Alex West, in Two and a half years of building products
Daniel Vassallo‚Äôs advice to time box the project to 2 weeks is a very important idea: it is so easy to fall prey to scope creep by adding more and more topics to cover, especially when you are knowledgeable and excited about it! But this may well mean that you will never actually ship it. So harness your enthusiasm to provide an advantage.
Of course, you have the goal to ship that product, but what parts of your day actively contribute to that goal? If you‚Äôd like to get anything done, adopting a system to support your goals will go a long way.

Systems &gt; Goals, Source: https:&#x2F;&#x2F;jamesclear.com&#x2F;goals-systems
Launching
All your efforts are coming to an end‚Ä¶ or so you thought. Now is the time to launch your product! This phase requires an entirely different skill set so it‚Äôs good to have practice.
Having a great landing page is a must. A good resource on the subject is Rob Hope‚Äôs book Landing Page Hot Tips, and you can read Shawn‚Äôs review of it too.
Make sure to know the rules of the platforms you‚Äôre using to launch: Shawn‚Äôs Show HN post was doing very well and directing a lot of traffic to his landing page, but it was sadly taken down as no free sample of the book was available there (despite the blog posts).
If people leave out a negative comment, take this as an opportunity to turn their opinions around.
Shawn recommends watching Adam Wathan‚Äôs talk Nailing Your First Launch.
Keeping going
This is still not the end. What comes tomorrow? Next week, next month, next year?
You can ‚Äúlaunch‚Äù your product multiple times.
You can start a community around your book or product.
One of the biggest mistakes I see founders make is abandoning what already works and trying to take on a bigger challenge before they‚Äôre making enough money to develop products full-time.
Instead, focus on replicating the same type of product with another angle or in another market, maybe more than once.
‚Äî Rob Walling, in The Stairstep Approach to Bootstrapping
The Why
If you want to go from employee to entrepreneur, it is good to learn without too much risk how to do ‚Äúbusiness‚Äù without all the supports from other departments. For example, as a Software Engineer, you would not be focusing much on attracting leads for your company; there would be a design team and product managers making decisions about the product, etc.
When you‚Äôre launching a product on your own, you need to perform in all the roles and learn as you go. Especially when it comes to side-projects, developing a system to support your goals, and improving your discipline and focus.
You will get acquainted with the valley of despair and go through the emotional journey it describes; this is inevitable, and maybe even necessary, to create anything great.

 Source: https:&#x2F;&#x2F;john.do&#x2F;emotional-journey-creating&#x2F; 
This can be daunting but it will most likely be a rewarding experience, at least in terms of skills acquisition if not financially.
Make sure to define in advance your idea of success for this project: is it for the learning experience and to have a published book to your name, is it solely about making X amount of money?
Resources
üìΩÔ∏è Shawn‚Äôs talk, Lessons and Regrets From Shipping My $50000 Coronavirus Side Project
üìΩÔ∏è Adam Wathan‚Äôs talk, Nailing Your First Launch
üìì Rob Walling, The Stairstep Approach to Bootstrapping
üìì James Clear, Forget About Setting Goals. Focus on This Instead
üìì Alex West, Two and a half years of building products*0 for it. The experience of getting paid for something you created, directly by consumers, will change you forever. https:&#x2F;&#x2F;t.co&#x2F;UbUD9ch4xQ
‚Äî Daniel Vassallo (@dvassallo) April 10, 2020
 
and it now seems everyone is writing a book! üòÑ
Shawn Wang took this advice and decided to go forth with his Coding Career Handbook (for which I‚Äôm grateful! It‚Äôs such a great book!). He shares his lessons and regrets in this talk at js.la üìΩÔ∏è, and here are my notes for my future self when I want to ship a side project (for money or not).
The How
There are 4 aspects:
Pre-selling
Delivering
Launching
Keeping going
Pre-selling - or your own Kickstarter
On the first day of this endeavour, take the time to find a topic, a name and put up a landing page with good marketing copy.
Pre-sell to your friends and close network: they are more likely to ask you about the state of the project and you would hate to disappoint. What‚Äôs more, you‚Äôve got their money which you would awkwardly need to return otherwise.
This is probably a good moment to decide which platform(s) you want to use to support the sale of your book. Gumroad and Podia seem to be fairly big players in that space.
If it is your first side project that you would like to ship for money, don‚Äôt fret too much over the pricing strategy; it is more of a distraction from writing and completing the project. Sticking to Daniel Vassallo‚Äôs recommendation of #### [Build Standalone Expo .apk and .ipa with Turtle CLI [deprecated]](https:&#x2F;&#x2F;www.robincussol.com&#x2F;build-standalone-expo-apk-ipa-with-turtle-cli&#x2F;) 
*This article was updated on February 7, 2023.
NOTE: As of Expo SDK 47, the following method does not work any more.
With the release of EAS builds, it is necessary to have Internet access to create standalone Expo apps locally; see Running builds on your own infrastructure on Expo docs.
You can still use the React Native way to build applications locally after generating necessary files with expo prebuild (see this GitHub comment on expo&#x2F;eas-cli).
This post will not receive further updates.
A great way to start writing React Native applications is to use Expo. You don‚Äôt even need to setup a development environment to get started thanks to Snack, an online React Native application editor. Your application is public by default. Sharing has never been that easy.

Brown turtle swimming underwater, Photo by Wexor Tmg on Unsplash
However, you would like to share an application exclusively with some people, not through an app store or any public channel. One possibility is to share the built application file, e.g. an .apk file for Android and an .ipa file for iOS.
Expo is so great a service (oh, and did I mention free?) that they offer you to publish your app on their servers and if you wanted to build these .apk and .ipa files, you could do so on their servers.
The flow looks like:
$ expo publish
$ expo build:&lt;PLATFORM&gt;
and you obtain a nice URL to the artifact created for you when the build finishes.
But, again, this is public. On a server you don‚Äôt control. (Although, if you made the same mistake as I did, a ticket to their support can delete any files you had wished to keep private. ü•á)
Luckily for you, Expo provide the tools they are using on their servers for free (did I mention they‚Äôre great!?). The build process relies on a CLI tool called turtle-cli. It is open-source and available on GitHub.
Let us go through an example of how to create your application file without resorting to Expo servers. That means you can keep an application private and also build your application while being offline.
The following instructions assume you have bash and Node.js available. In my experience, using the current LTS version of Node.js (version 16.13.2) works best.
Caveat: I could not complete the iOS instructions to the end since I do not have an Apple Developer paid account.
We will go through the following steps:
1. Turtle CLI
2. Create a dummy application
3. Publish Expo app on local server
4. Create APK file ‚Äì Android

4.1. Prerequisites
4.2. Create Keystore
4.3. Build APK
5. Create IPA file ‚Äì iOS

5.1. Prerequisites
5.2. Create Signing keys
5.3. Build IPA
6. Distribute and install

6.1. on Android
6.2. on iOS
Resources
A condensed version of these steps without much explanation or context is available on the accompanying GitHub repository.
1. Turtle CLI
To install Turtle CLI, run
$ npm install -g turtle-cli
This will make command turtle globally available on your system. To verify it was correctly installed, let‚Äôs print the version:
$ turtle -V
0.24.3
2. Create a dummy application
Let‚Äôs create a dummy application using Expo CLI. In your terminal, run
$ npx expo init ExampleApplication
It will ask you a few questions:
# Expo version 5.0.3
npx expo init ExampleApplication
? Choose a template: ‚Ä∫ - Use arrow-keys. Return to submit.
    ----- Managed workflow -----
‚ùØ   blank               a minimal app as clean as an empty canvas
    blank (TypeScript)  same as blank but with TypeScript configuration
    tabs (TypeScript)   several example screens and tabs using react-navigation and TypeScript
    ----- Bare workflow -----
    minimal             bare and minimal, just the essentials to get you started
The blank template is enough for us.
If you have yarn installed, Expo will use it by default to install dependencies. You can use the --npm flag in the init command if you‚Äôd prefer to use npm instead.
Once it‚Äôs done setting up your project, you should see the following output in the terminal:
‚úÖ Your project is ready!

To run your project, navigate to the directory and run one of the following yarn commands.

- cd ExampleApplication
- yarn start
Run the commands and let‚Äôs verify the generated boilerplate works in our emulators:


To finish setting up the dummy application, you need to configure the app.json file because some configuration keys must be specified to build a standalone app.
If you would like to know more about these standalone app specific configurations, check Expo‚Äôs documentation for iOS and for Android.
For this tutorial, it is only necessary to specify the keys &quot;bundleIdentifier&quot; under &quot;ios&quot;, and &quot;package&quot; under &quot;android&quot; in your app.json file:
...
    &quot;ios&quot;: {
      ...
      &quot;bundleIdentifier&quot;: &quot;com.example.exampleApplication&quot;,
      ...
    },
    &quot;android&quot;: {
      ...
      &quot;package&quot;: &quot;com.example.example_application&quot;,
      ...
    }
...
3. Publish Expo app on local server
Expo has this notion of app publishing: it allows you to share a link or QR code to Expo‚Äôs website and anyone can run your app through the Expo app on their devices.
Having your app published is also necessary for over-the-air (OTA) updates, allowing seamless updates to your application, and to publish your application (i.e. building your application files on Expo servers).
You would typically run
$ expo login -u $EXPO_USERNAME -p $EXPO_PASSWORD
$ expo publish
and your app would then be available at https:&#x2F;&#x2F;expo.dev&#x2F;&lt;EXPO_USERNAME&gt;&#x2F;&lt;APP_NAME&gt;.
To have your Expo app ‚Äúpublished‚Äù on your local server (and avoid public publishing on Expo servers), you will use a different command:
$ expo export --dev --public-url &lt;your-url-here&gt;
The --dev flag is necessary because you will use a non-https server to publish your Expo app. Note that this prevents you from using OTA updates.
Your server does not need to be running for this step, but you do need to know which local URL you are going to use in advance. This tuorial assumes you will run a local server at http:&#x2F;&#x2F;127.0.0.1:8000.
You can now export the app:
$ expo export --dev --public-url http:&#x2F;&#x2F;127.0.0.1:8000
...
Export was successful. Your exported files can be found in dist
This command will create a dist directory containing the iOS and Android JavaScript bundles and the different assets you are using.
dist
‚îú‚îÄ‚îÄ android-index.json
‚îú‚îÄ‚îÄ assets
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ 13685372945d816a2b474fc082fd9aaa
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ 140c53a7643ea949007aa9a282153849
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ ...
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ fdbedb7e67aa7c0ecad83d9c2fa4dfba
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ fdc01171a7a7ea76b187afcd162dee7d
‚îú‚îÄ‚îÄ bundles
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ android-a9defc54fb2ffdb7e6fdaf5b8d0be751.js
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ ios-a29c3e4ac97a2abdc5208fd4f06e7708.js
‚îî‚îÄ‚îÄ ios-index.json
You can now serve the dist directory on your web server, e.g.
$ npx http-server -p 8000 dist
Note: if for some reason you need to re-export your application (because you modified your app.json file since the last export, for instance), you must first remove the dist directory:
# assuming you are at the root of the project
$ rm -rf dist
$ expo export --dev --public-url http:&#x2F;&#x2F;127.0.0.1:8000
4. Create APK file ‚Äì Android
First, verify that your local server is running. For example, you should see a similar output:
$ curl http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;android-index.json
{&quot;name&quot;:&quot;ExampleApplication&quot;,&quot;slug&quot;:&quot;ExampleApplication&quot;,&quot;version&quot;:&quot;1.0.0&quot;,&quot;orientation&quot;:&quot;portrait&quot;,&quot;icon&quot;:&quot;.&#x2F;assets&#x2F;icon.png&quot;,&quot;splash&quot;:{&quot;image&quot;:&quot;.&#x2F;assets&#x2F;splash.png&quot;,&quot;resizeMode&quot;:&quot;contain&quot;,&quot;backgroundColor&quot;:&quot;#ffffff&quot;,&quot;imageUrl&quot;:&quot;http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;assets&#x2F;201a91bd1740bb1d6a1dbad049310724&quot;}...
4.1. Prerequisites
For Turtle CLI to work correctly to create an .apk file for Android, you need to make sure the following dependency is installed: Java Development Kit (version 8).
If you know which Expo SDK version you are going to use, you can run
$ turtle setup:android --sdk-version &lt;SDK-VERSION&gt;
This will take some time:
$ turtle setup:android --sdk-version 44.0.5
Jan 20 20:22:45 turtle[61127] INFO:  Downloading Android SDK
  platform: &quot;android&quot;
  buildPhase: &quot;setting up environment&quot;
downloading [&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;] 98% 0.2s
...
Jan 20 20:26:56 turtle[61127] INFO:  shell app for SDK 44.0.5 doesn&#39;t exist, downloading...
  platform: &quot;android&quot;
  buildPhase: &quot;setting up environment&quot;
downloading [&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; ] 95% 0.5sJan 20 20:27:08 turtle[61127] INFO:  shell app has been downloaded
  platform: &quot;android&quot;
  buildPhase: &quot;setting up environment&quot;
...
Jan 20 20:29:51 turtle[61127] INFO:  dependencies installed!
  platform: &quot;android&quot;
  buildPhase: &quot;setting up environment&quot;
Jan 20 20:29:51 turtle[61127] INFO:  it&#39;s all set!
  platform: &quot;android&quot;
  buildPhase: &quot;setting up environment&quot;
In the meantime, you can move on to the next section.
4.2. Create Keystore
Just like any other Android app, this app must be signed with some security certificates. In Android-land, as far as I understand, it‚Äôs called a keystore. The instructions to create such a keystore file are available on the Android Developers documentation.
Basically, just create a dummy Android project with Android Studio, and then go to Build &gt; Generate Signed Bundle &#x2F; APK.... Choose APK and press Next. The UI will ask you which app you want to sign, and your dummy app should be pre-selected. On the same screen, press on the button Create new...; just fill the form and you‚Äôre good to go.
Alternatively, if you have keytool CLI utility available on your system (you can check that by trying keytool --help in your terminal), you can generate a keystore file with the following command
$ keytool -genkeypair -v -keystore keystore.jks -alias keyalias -keyalg RSA -keysize 2048 -validity 9125
Enter keystore password:
Re-enter new password:
What is your first and last name?
  [Unknown]:
What is the name of your organizational unit?
  [Unknown]:
What is the name of your organization?
  [Unknown]:
What is the name of your City or Locality?
  [Unknown]:
What is the name of your State or Province?
  [Unknown]:
What is the two-letter country code for this unit?
  [Unknown]:
Is CN&#x3D;Unknown, OU&#x3D;Unknown, O&#x3D;Unknown, L&#x3D;Unknown, ST&#x3D;Unknown, C&#x3D;Unknown correct?
  [no]:  yes

Generating 2,048 bit RSA key pair and self-signed certificate (SHA256withRSA) with a validity of 9,125 days
	for: CN&#x3D;Unknown, OU&#x3D;Unknown, O&#x3D;Unknown, L&#x3D;Unknown, ST&#x3D;Unknown, C&#x3D;Unknown
Enter key password for &lt;keyalias&gt;
	(RETURN if same as keystore password):
Re-enter new password:
[Storing keystore.jks]

Warning:
The JKS keystore uses a proprietary format. It is recommended to migrate to PKCS12 which is an industry standard format using &quot;keytool -importkeystore -srckeystore keystore.jks -destkeystore keystore.jks -deststoretype pkcs12&quot;.
As a TL;DR, you can just download a dummy certificate on the accompanying repository under should-be-private&#x2F;keystore.jks, for testing purposes only. The keystore file is hugely important if you ever plan to submit your app to Google Play store: it‚Äôs the only way to assert you‚Äôre the rightful owner to provide new updates to your app.
File: keystore.jks
keystorepassword
keyalias
keypassword
4.3. Build APK
Make sure that you are serving the dist directory on http:&#x2F;&#x2F;127.0.0.1:8000 as explained above in Run a local server. Assuming you are using bash as your shell, from the root of your project, run:
EXPO_ANDROID_KEYSTORE_PASSWORD&#x3D;&quot;keystorepassword&quot; \
EXPO_ANDROID_KEY_PASSWORD&#x3D;&quot;keypassword&quot; \
turtle build:android \
  --type apk \
  --keystore-path .&#x2F;should-be-private&#x2F;keystore.jks \
  --keystore-alias &quot;keyalias&quot; \
  --allow-non-https-public-url \
  --public-url http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;android-index.json
Note that you need the flag --public-url to point to http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;android-index.json. In addition, it is also necessary to use the --type apk flag to produce an APK file since version 0.8.0 of turtle-cli.
The build may take some time:
Jan 20 20:38:17 turtle[61719] INFO:  Using manifest: {
  &quot;name&quot;: &quot;ExampleApplication&quot;,
  &quot;slug&quot;: &quot;ExampleApplication&quot;,
  &quot;version&quot;: &quot;1.0.0&quot;,
  &quot;orientation&quot;: &quot;portrait&quot;,
  &quot;icon&quot;: &quot;.&#x2F;assets&#x2F;icon.png&quot;,
...
Jan 20 20:38:51 turtle[61719] INFO:  Starting a Gradle Daemon (subsequent builds will be faster)
  platform: &quot;android&quot;
  buildPhase: &quot;running gradle&quot;
  source: &quot;stdout&quot;
...
Once it finishes, you should see this output in your terminal:
Jan 20 20:43:19 turtle[61719] INFO:  copied build to ~&#x2F;expo-apps&#x2F;@anonymous__ExampleApplication-7f15208a56304617a200538cacd2e50e-signed.apk
  platform: &quot;android&quot;
  buildPhase: &quot;copying build artifact&quot;
This message gives you the location of your built .apk file. You can now move on to the Distribute and install section below if you are not interested in creating an .ipa file for iOS.
Note: if the build fails because of some Gradle error, like Could not resolve com.theartofdev.edmodo:android-image-cropper:2.8.0, make sure to open Android Studio and update the Android SDK and SDK Build-Tools. This should fix it.
5. Create IPA file ‚Äì iOS
First, verify that your local server is running, e.g.
$ curl http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;ios-index.json
{&quot;name&quot;:&quot;ExampleApplication&quot;,&quot;slug&quot;:&quot;ExampleApplication&quot;,&quot;version&quot;:&quot;1.0.0&quot;,&quot;orientation&quot;:&quot;portrait&quot;,&quot;icon&quot;:&quot;.&#x2F;assets&#x2F;icon.png&quot;,&quot;splash&quot;:{&quot;image&quot;:&quot;.&#x2F;assets&#x2F;splash.png&quot;,&quot;resizeMode&quot;:&quot;contain&quot;,&quot;backgroundColor&quot;:&quot;#ffffff&quot;,&quot;imageUrl&quot;:&quot;http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;assets&#x2F;201a91bd1740bb1d6a1dbad049310724&quot;...
5.1. Prerequisites
For Turtle CLI to work correctly to create an .ipa file for iOS, you need to make sure your system is macOS and that the following dependencies are installed:
Xcode (version 13.2.1 or newer)
fastlane
Note: make sure that you have run Xcode at least once and that you have agreed to the license agreements.
For more details, see Expo‚Äôs documentation.
If you know which Expo SDK version you are going to use, you can run
$ turtle setup:ios --sdk-version &lt;SDK-VERSION&gt;
If it errors out, saying that you don‚Äôt have the right version of fastlane, try re-installing fastlane (guide). The version used in this article is fastlane 2.200.0.
This will take some time:
$ turtle setup:ios --sdk-version 44.0.5
Jan 20 21:18:03 turtle[48488] INFO:  shell app for SDK 44.0.5 doesn&#39;t exist, downloading...
  platform: &quot;ios&quot;
  buildPhase: &quot;setting up environment&quot;
downloading [                    ] 1% 8514.8s
...
...
Jan 20 21:24:58 turtle[48488] INFO:  it&#39;s all set!
  platform: &quot;ios&quot;
  buildPhase: &quot;setting up environment&quot;
In the meantime, you can move on to the next section.
5.2. Create Signing keys
This assumes you have an Apple Developer Account, which is a paid account.
To create your distribution certificate file, or .p12 file, you can follow this guide.
You will also need your Apple Team ID and a Provisioning Profile that you can generate through Xcode as well. This other guide covers in greater lengths what all these cerficates are for and how to obtain them.

Note that the provisioning profile expires in 6 days in my case, since I do not have an Apple Developer paid account.
Sadly, it is not possible to share example files.
5.3. Build IPA
Make sure that you are serving the dist directory on http:&#x2F;&#x2F;127.0.0.1:8000 as explained Run a local server. Assuming you are using bash as your shell, from the root of your project, run:
EXPO_IOS_DIST_P12_PASSWORD&#x3D;&quot;&lt;PASSWORD HERE&gt;&quot; \
turtle build:ios \
  --team-id YOUR_TEAM_ID \
  --dist-p12-path &#x2F;path&#x2F;to&#x2F;your&#x2F;dist&#x2F;cert.p12 \
  --provisioning-profile-path &#x2F;path&#x2F;to&#x2F;your&#x2F;provisioning&#x2F;profile.mobileprovision \
  --allow-non-https-public-url \
  --public-url http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;ios-index.json
Note that you need the flag --public-url to point to http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;ios-index.json.
Once the build finishes successfully, you should get the path to your .ipa file.
6. Distribute and install
6.1. on Android
Take your .apk and share it through some Google Drive link or other medium of your choice.
If you download this .apk file through an Android device, it should offer you to install the application on the device.
Trick: if the URL is really not friendly to type, and for whatever reason you have to type it manually, use a QR Code generator (e.g. http:&#x2F;&#x2F;www.barcode-generator.org&#x2F;) and your device‚Äôs camera to simplify your life!
Alternatively, if you connect an Android device to your computer, you should be able to run:
$ adb devices
emulator-5554	device
to list all your connected Android devices and emulators. (In my case, only the emulator is ‚Äúconnected‚Äù.)
It is then possible to install the .apk file by running:
$ adb -s emulator-5554 install ~&#x2F;expo-apps&#x2F;@anonymous__ExampleApplication-7f15208a56304617a200538cacd2e50e-signed.apk
Performing Streamed Install
Success

6.2. on iOS
Caveat: I could not fully test this section, so my apologies if this does not work as intended.
Since you should have Xcode, the most promising solution is in this guide. It also mentions other ways to install the .ipa file.
That‚Äôs it for now, thank you for reading this far. You will find below the resources mentioned in this article.
If you have any questions or comments, please drop me a line on Twitter. I shall reply as soon as possible.
Stay tuned for more.
Resources
Expo: https:&#x2F;&#x2F;expo.dev
Turtle CLI: https:&#x2F;&#x2F;github.com&#x2F;expo&#x2F;turtle#readme
Expo‚Äôs guide to Building Standalone apps: https:&#x2F;&#x2F;docs.expo.dev&#x2F;classic&#x2F;building-standalone-apps&#x2F;
Configuring app.json: https:&#x2F;&#x2F;docs.expo.dev&#x2F;workflow&#x2F;configuration&#x2F;
Expo docs to configure CI with Turtle CLI: https:&#x2F;&#x2F;docs.expo.dev&#x2F;classic&#x2F;turtle-cli&#x2F;
Expo docs to host application on your own servers: https:&#x2F;&#x2F;docs.expo.dev&#x2F;distribution&#x2F;hosting-your-app&#x2F;
How to create a keystore for Android: https:&#x2F;&#x2F;developer.android.com&#x2F;studio&#x2F;publish&#x2F;app-signing#generate-key
Supporting GitHub repository: https:&#x2F;&#x2F;github.com&#x2F;RobinCsl&#x2F;build-standalone-expo-app&#x2F;*
#### [Optimize your img tags with Eleventy Image and WebC](https:&#x2F;&#x2F;www.robincussol.com&#x2F;optimize-your-img-tags-with-eleventy-image-and-webc&#x2F;) 
*I am very excited about WebC and couldn‚Äôt wait to try out the corresponding Eleventy plugin.
The first use-case I had in mind was to use Eleventy Image for the native HTML img tag, that can be generated from Markdown and without shortcode. I had done this before, for my unpublished blog rewrite that‚Äôs been waiting to be released for ever now, through hooking up Eleventy Image into a markdown-it plugin. It wasn‚Äôt pretty as markdown-it plugins are pretty alien to me.
But now, this can be done ‚Äúnatively‚Äù, √†-la-Cloudflare Workers for your native HTML elements!
UPDATE (04&#x2F;11&#x2F;2022): After sharing this article on Twitter, Zach Leatherman pointed out there should be an easier solution. It didn‚Äôt work as expected at first, which put me on a journey to fix the underlying issue in @11ty&#x2F;webc. I‚Äôm very pleased to share that my first contribution to the project was accepted and landed in v0.6.0. As a result, the content of the last section was updated to remove the dirty data file hack with _data&#x2F;Image.js: your image optimization logic can now truly live in a single file.
The documentation for WebC mentioned this use-case exactly, in the shape of this innocent puzzle:

‚ÄúFree idea: use the Eleventy Image plugin to return optimized markup‚Äù
So it should be easy, right?
Remember this lad?
I have discovered a truly remarkable proof of this theorem which this margin is too small to contain.
Pierre de Fermat, cca. 1637
No need to wait 3 centuries for the answer this time, because it was ultimately not so hard‚Ä¶ But I did struggle and wrestle with it for a few hours :D
Anyway, hope that can be useful to someone.
If you want to see the finished implementation, you can get it on GitHub: RobinCsl&#x2F;11ty-webc-img-demo.
Set up a WebC-powered Eleventy project
or take a shortcut by cloning this repo and going to the 01-initial folder.
Initialise the project
Let‚Äôs start with an empty folder and add a basic package.json file:
mkdir 11ty-webc-img
cd 11ty-webc-img
npm init -y
We need to install the latest canary release (2.0.0-canary.16 at the time of writing) of Eleventy as well as the WebC plugin:
 npm install @11ty&#x2F;eleventy@2.0.0-canary.16 @11ty&#x2F;eleventy-plugin-webc
Configure Eleventy
We will now configure Eleventy to use the WebC plugin by creating a .eleventy.js file with the following content:
const webc &#x3D; require(&quot;@11ty&#x2F;eleventy-plugin-webc&quot;);

module.exports &#x3D; function(eleventyConfig) {
	eleventyConfig.addPlugin(webc, {
		components: &quot;_includes&#x2F;webc&#x2F;*.webc&quot;
	});
}

In particular, components in the _includes&#x2F;webc folder will be available in the global scope, no need to import them explicitly!
Scaffold a minimal project
To finish our setup, we create a layout file and a simple WebC component which we will use in a basic page, to make sure our setup is working correctly.
We create the layout file under _includes&#x2F;layouts&#x2F;base.webc. It is a simple HTML template with the @html&#x3D;&quot;content&quot;  WebC directive set on the body tag. (See my-layout.webc in the docs)
&lt;!doctype html&gt;
&lt;html lang&#x3D;&quot;en&quot;&gt;
	&lt;head&gt;
		&lt;meta charset&#x3D;&quot;utf-8&quot;&gt;
		&lt;title&gt;Eleventy Images + WebC rocks!&lt;&#x2F;title&gt;
	&lt;&#x2F;head&gt;
	&lt;body @html&#x3D;&quot;content&quot;&gt;&lt;&#x2F;body&gt;
&lt;&#x2F;html&gt;
We now create a simple WebC component and write the following content, taken from the promising website 11ty.webc.fun, in _includes&#x2F;webc&#x2F;site-footer.webc :
&lt;footer&gt;
  &lt;p&gt;&amp;copy; 2022 Yours Truly.&lt;&#x2F;p&gt;
&lt;&#x2F;footer&gt;
Finally, we create our basic page at the root of the project in index.webc:
---
layout: layouts&#x2F;base.webc
---

Fun with WebC

&lt;site-footer&gt;&lt;&#x2F;site-footer&gt;
If all went according to plan, we should now be able to run
npx @11ty&#x2F;eleventy --serve
in the terminal and see the following output in our browser at http:&#x2F;&#x2F;localhost:8080:

Create an img.webc component
or check the code on GitHub in the 02-img folder if you want to see the code right away.
In this section, we will create our img.webc override for the native img HTML tag and use Eleventy Image within it.
As a starting point, we will use the example from the documentation from which the screenshot at the start of this post is taken. In a new file _includes&#x2F;webc&#x2F;img.webc, add the following:
&lt;script webc:type&#x3D;&quot;render&quot; webc:is&#x3D;&quot;template&quot;&gt;
function() {
	if(!this.alt) {
		throw new Error(&quot;[img.webc] the alt text is missing, no fun&quot;);
	}
	return &#x60;&lt;img src&#x3D;&quot;${this.src}&quot; alt&#x3D;&quot;${this.alt}&quot;&gt;&#x60;;
}
&lt;&#x2F;script&gt;
This essentially verifies at build-time that all your images have a non-empty alt text, neat!
Let‚Äôs add a ‚Äúbroken‚Äù image to our index page, in index.webc, to verify that this works correctly:
---
layout: layouts&#x2F;base.webc
---

Fun with WebC

&lt;img src&#x3D;&quot;https:&#x2F;&#x2F;images.unsplash.com&#x2F;photo-1627224286457-923944e5b159?auto&#x3D;format&amp;fit&#x3D;crop&amp;w&#x3D;387&amp;q&#x3D;80&quot;&gt;

&lt;site-footer&gt;&lt;&#x2F;site-footer&gt;
And indeed, running npx @11ty&#x2F;eleventy --serve yields an expected error:
$ npx @11ty&#x2F;eleventy --serve
[11ty] Problem writing Eleventy templates: (more in DEBUG output)
[11ty] 1. Having trouble rendering webc template .&#x2F;index.webc (via TemplateContentRenderError)
[11ty] 2. [img.webc] the alt text is missing, no fun (via Error)
Add an alt text (‚Äúpossum hanging from a palm leaf‚Äù should work) and try again. Oh no! Another error:
$ npx @11ty&#x2F;eleventy --serve  
[11ty] Problem writing Eleventy templates: (more in DEBUG output)
[11ty] 1. Having trouble rendering webc template .&#x2F;index.webc (via TemplateContentRenderError)
[11ty] 2. Circular dependency error: You cannot use &lt;img&gt; inside the definition for .&#x2F;_includes&#x2F;webc&#x2F;img.webc (via Error)
That makes sense, when you think about it! All our .webc files are processed by WebC, so if we return an img tag in a img.webc component, the compiler would work indefinitely to get to the bottom of it, because it‚Äôs turtles img all the way down!
Luckily for us, we can let WebC know when its job is done through the webc:raw attribute:
Use webc:raw to opt-out of WebC template processing for all child content of the current node. Notably, attributes on the current node will be processed.
Let‚Äôs fix it in _includes&#x2F;webc&#x2F;img.webc:
  &lt;script webc:type&#x3D;&quot;render&quot; webc:is&#x3D;&quot;template&quot;&gt;
  function() {
	  if(!this.alt) {
	  	throw new Error(&quot;[img.webc] the alt text is missing, no fun&quot;);
	  }
-	  return &#x60;&lt;img src&#x3D;&quot;${this.src}&quot; alt&#x3D;&quot;${this.alt}&quot;&gt;&#x60;;
+	  return &#x60;&lt;img webc:raw src&#x3D;&quot;${this.src}&quot; alt&#x3D;&quot;${this.alt}&quot;&gt;&#x60;;
  }
  &lt;&#x2F;script&gt;
It compiles now! üéâ
Here‚Äôs the expected output:

We have effectively augmented our img tag to verify at build time that alt text is present.
Let‚Äôs now add Eleventy Image to the party!
Optimize your HTML img with Eleventy Image
or check the code on GitHub in the 03-final folder if you want to see my solution.
Let‚Äôs first install Eleventy Image in our project:
npm install @11ty&#x2F;eleventy-img
We will more or less copy the example from the Eleventy Image docs in the Asynchronous Shortcode section, because our JavaScript render function can be async!
In the file _includes&#x2F;webc&#x2F;img.webc, let‚Äôs add the following:
  &lt;script webc:type&#x3D;&quot;render&quot; webc:is&#x3D;&quot;template&quot;&gt;
-   function() {
-      if(!this.alt) {
-          throw new Error(&quot;[img.webc] the alt text is missing, no fun&quot;);
-      }
-      return &#x60;&lt;img webc:raw src&#x3D;&quot;${this.src}&quot; alt&#x3D;&quot;${this.alt}&quot;&gt;&#x60;;
+    const Image &#x3D; require(&quot;@11ty&#x2F;eleventy-img&quot;);
+    module.exports &#x3D; async function() {
+      let metadata &#x3D; await Image(this.src, {
+        widths: [300],
+        formats: [&quot;avif&quot;, &quot;jpeg&quot;],
+        outputDir: &quot;_site&#x2F;img&#x2F;&quot;,
+      });

+      let imageAttributes &#x3D; {
+        alt: this.alt,
+        sizes: &quot;100vw&quot;,
+        loading: &quot;lazy&quot;,
+        decoding: &quot;async&quot;,
+      };

+      &#x2F;&#x2F; You bet we throw an error on missing alt in &#x60;imageAttributes&#x60; (alt&#x3D;&quot;&quot; works okay)
+      return Image.generateHTML(metadata, imageAttributes);
  }
  &lt;&#x2F;script&gt;

Note that we harcoded the value for  sizes in the imageAttributes object, and prepended both src and alt by this to wire things up correctly. We also instruct the Image plugin to output optimized images in our _site&#x2F;img&#x2F; folder directly for them to be available when using the following markup:
&lt;img alt&#x3D;&quot;a lovely image&quot; src&#x3D;&quot;&#x2F;img&#x2F;hash-width.jpeg&quot;&gt;
Let‚Äôs run npx @11ty&#x2F;eleventy --serve once more:
$  npx @11ty&#x2F;eleventy --serve
[11ty] Problem writing Eleventy templates: (more in DEBUG output)
[11ty] 1. Having trouble rendering webc template .&#x2F;index.webc (via TemplateContentRenderError)
[11ty] 2. Circular dependency error: You cannot use &lt;img&gt; inside the definition for .&#x2F;_includes&#x2F;webc&#x2F;img.webc (via Error)
That error sounds familiar, right?
We need to tell WebC to ignore img tags generated by Eleventy Image, and it‚Äôs as simple as adding &quot;webc:raw&quot;: true to the imageAttributes object:
  &lt;script webc:type&#x3D;&quot;render&quot; webc:is&#x3D;&quot;template&quot;&gt;
  const Image &#x3D; require(&quot;@11ty&#x2F;eleventy-img&quot;);
  module.exports &#x3D; async function() {
    let metadata &#x3D; await Image(this.src, {
      widths: [300],
      formats: [&quot;avif&quot;, &quot;jpeg&quot;],
      outputDir: &quot;_site&#x2F;img&#x2F;&quot;,
    });
  
    let imageAttributes &#x3D; {
      alt: this.alt,
      sizes: &quot;100vw&quot;,
      loading: &quot;lazy&quot;,
      decoding: &quot;async&quot;,
+     &quot;webc:raw&quot;: true,
    };
  
    &#x2F;&#x2F; You bet we throw an error on missing alt in &#x60;imageAttributes&#x60; (alt&#x3D;&quot;&quot; works okay)
    return Image.generateHTML(metadata, imageAttributes);
  }
  &lt;&#x2F;script&gt;
And we‚Äôre done!! (Note how the image now aligns perfectly with localhost:8080 #IncontestableTruth)

with corresponding markup:
&lt;!doctype html&gt;
&lt;html lang&#x3D;&quot;en&quot;&gt;
&lt;head&gt;
        &lt;meta charset&#x3D;&quot;utf-8&quot;&gt;
        &lt;title&gt;Eleventy Images + WebC rocks!&lt;&#x2F;title&gt;
    &lt;&#x2F;head&gt;
    &lt;body&gt;Fun with WebC

&lt;picture&gt;&lt;source type&#x3D;&quot;image&#x2F;avif&quot; srcset&#x3D;&quot;&#x2F;img&#x2F;SwdsuTpRbT-300.avif 300w&quot;&gt;&lt;img alt&#x3D;&quot;possum hanging from a palm leaf&quot; loading&#x3D;&quot;lazy&quot; decoding&#x3D;&quot;async&quot; src&#x3D;&quot;&#x2F;img&#x2F;SwdsuTpRbT-300.jpeg&quot; width&#x3D;&quot;300&quot; height&#x3D;&quot;450&quot;&gt;&lt;&#x2F;picture&gt;


&lt;footer&gt;
  &lt;p&gt;¬© 2022 Yours Truly.&lt;&#x2F;p&gt;
&lt;&#x2F;footer&gt;

&lt;&#x2F;body&gt;
&lt;&#x2F;html&gt;
Parting words
I am so excited to explore further the possibilities of using WebC to augment other native HTML elements.
This article only scratches the surface when it comes to the img tag. You could pass props down from the markup to Eleventy Image and control the behaviour of the image optimization. But we can now augment our native img tag without much hassle as it‚Äôs all in one file.
It even works with Markdown images (and yields the cutest webpage ever):
  ---
  layout: layouts&#x2F;base.webc
  ---
  
  Fun with WebC
  
  &lt;img alt&#x3D;&quot;possum hanging from a palm leaf&quot; src&#x3D;&quot;https:&#x2F;&#x2F;images.unsplash.com&#x2F;photo-1627224286457-923944e5b159?auto&#x3D;format&amp;fit&#x3D;crop&amp;w&#x3D;387&amp;q&#x3D;80&quot;&gt;
  
+  &lt;template webc:type&#x3D;&quot;11ty&quot; 11ty:type&#x3D;&quot;md&quot;&gt;
+  
+   ![&#39;close-up of a baby possum among ferns&#39;](https:&#x2F;&#x2F;images.pexels.com&#x2F;photos&#x2F;13960994&#x2F;pexels-photo-13960994.jpeg)
+  
+  &lt;&#x2F;template&gt;
  
  &lt;site-footer&gt;&lt;&#x2F;site-footer&gt;
  

All the more reasons to optimize your images now!
Find the code supporting this article on the RobinCsl&#x2F;11ty-webc-img-demo repository.*
#### [Year in Review: 2021](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2021&#x2F;) 
*We‚Äôre already at the start of February 2022, but who says retrospectives need to be done on January 1st?! A lot of things happened in 2021, both personally and professionally. Time to reflect and remember.
Personal üë∂üíçüìÑüìÉüìëüìú
This first part is the personal stuff, so if you don‚Äôt care about it, you can skip to the professional stuff instead. And if you don‚Äôt care about that too, why are you here? üòÇ
Welcome, L√©onard!
In January of 2021 came the great news that we were expecting a baby and a few months later, my son L√©onard came to this world! It‚Äôs been a few months now and it‚Äôs insane how much this event changed our lives.
It‚Äôs quite amazing to witness a human being‚Äôs awakening to the world, I do feel privileged.
Of course, it‚Äôs not just rainbows and unicorns.
Sleeping as much as I want is now a distant memory&#x2F;dream, though I‚Äôve been surprised that it‚Äôs actually quite possible to operate without the amount of sleep I used to get.
Having free time for side projects and writing almost vanished (and usually eats up time when I should sleep instead, while it‚Äôs allowed by baby-boss). I don‚Äôt know how other parents manage but time just flies by.
One thing‚Äôs for sure, L√©onard makes sure I keep fit and exercise regularly (a promise I made myself at the beginning of last year, right):
it‚Äôs quite a normal day when I need to go up and down the 4 floors of the block of flats we live in (and when it‚Äôs at night, I have this game where I switch the lights on and go up and down within the 3 minutes they‚Äôre programmed to stay on; naturally, after my 4th round trip, I usually do the last flight of stairs in the dark üòÖüòÆ‚Äçüí®).
it‚Äôs also quite a normal day when I need to carry him in my arms for 10- to 20-minute stretches, while doing squats, at least 2 or 3 times.
Coach L√©onard can ask for these drills at any time of the day (and night‚Ä¶), he says it‚Äôs for my own good. My knees and hips and back and arms tend to disagree.
Paperwork, paperwork, paperwork
In 2021, I‚Äôve had time to think so many times if the amount of paperwork we‚Äôre doomed to go through is some sort of devilish scheme to keep people busy on the boring stuff. It definitely does not help when you‚Äôre an expat.
If you had told me having a baby would generate so much paperwork chores, I probably would not have believed you. The story goes that we wanted to do an early recognition of fatherhood for me to be officially recognised as the father of my child to be.
In France, as a French person, this is a 5-minute visit to my local townhall, easy-peasy.
In Czechia, as a foreigner, this would have required tons of documents that also needed translating by a certified translator (aka costs some money).
Since we were engaged, and you‚Äôre officially recognised as the father when having a baby as a married couple, we thought we might as well go through paperwork hell to get married.
It did not disappoint.
Our child was due some time in the middle of September, so we had almost the entire year to get married, should be easy, right.
Being so diligent, we got in touch with the French embassy to understand what we need to do to get married in April:
weddings at the embassy are quite a rare thing, you should get married through the local authorities
getting married in Prague is like getting married in Las Vegas (say what?)
Only to realise at the end of June that:
babies aren‚Äôt always born around the due date
it‚Äôs already the end of June
Let‚Äôs just say that we managed to be on time paperwork-wise for our wedding at the beginning of August (ever heard of the necessary 2-week public display of your intent on getting married, during which somebody has the right to oppose it, to get the paper allowing a French person to marry‚Ä¶?), but the ‚Äúgetting married like in Las Vegas‚Äù was lost on us.
Professionally
Promo
In January last year, I got promoted to Staff Engineer at Kiwi.com. Pretty crazy to me to think that I started working in the industry in September 2017. Even though titles only mean so much, it‚Äôs still a nice recognition that I bring value to the company.
Pair Documenting
I definitely learnt a lot about infrastructure and Kubernetes, which might seem overkill for a frontend platformer, but there was a void to fill when my ex-colleague Adam Jani≈° left, so I put on my newbie hat and pair-documented Adam‚Äôs knowledge throughout his notice period. I still refer or point people to that document quite regularly, it‚Äôs an investment that keeps on giving after all these months!
This was also the first time I tried to add original schematics&#x2F;pictures and Excalidraw made it super fun and easy!
Robin‚Äôs Gazette
My newsletter, Robin‚Äôs Gazette, kept going quite well! It turned one year old on December, 9th! üéÇ
In 2021, I published 25 issues (784 emails in total!), and went from 9 subscribers to 49 at the end of the year!
Given the quite low volume of subscribers, my average open rate and click rate are pretty okay (though they are ‚Äúall-time‚Äù performance metrics):
70.35% open rate,
24.38% click rate.
Even though it‚Äôs always some amount of work, I deem it worthy of my time as I get to practice writing and I always learn something slightly more deeply than if I just scrolled Twitter or Hacker News. This continues my efforts from ‚Äúarchivist to creator‚Äù that I mentioned in my last retro.
Special mention to Shawn @swyx Wang for being so encouraging along the way!
My goal for this year is to continue on that path, though I do need to put some effort into advertising it better:
the subscribe form is hard to find on my website,
the content is short-lived and behind closed doors ‚Äì so I should repurpose it to an extent,
start marketing it more (instead of the infrequent tweets I‚Äôve tried at some point).
One small change for this year: I now send the Gazette every other Friday instead of every other Wednesday.
Some of the feedback I received üòä
‚ÄúSuch a great newsletter this week Robin, amazing job!‚Äù
‚ÄúStill enjoying the newsletter!‚Äù
Blog
The blog was a bit quiet last year, I only published 3 posts and refreshed my most read article about building APK files locally for Expo projects (it recently crossed 20K views in its lifetime! üéâ).
They were:
Python Dependencies for JavaScript Developers
How to Download a Brain with Pair Documenting (already mentioned above)
Year in Review: 2020
I really hope to start writing more again on the blog because the SEO game takes a long time for Google to start recommending your stuff: I saw more traffic to my How to Test Your ESLint Config and Get your Own Sentry Playground articles, and they were written in September 2020!
Started working on a course
In the last retro, I announced that I planned to write a book. That did not happen‚Ä¶ üòÖ
Instead, I started working on a video course which essentially replicates the now defunct Margarita project from scratch (which was the subject of this article on my blog), showcasing how to build cross-platform web and native mobile apps through React Native and React Native Web.
This was the occasion to spend some time weeks watching all the microphone reviews on YouTube, all the Audacity and Obs Studio tutorials for sound production, to ultimately produce a half-finished tutorial on YouTube (the best 33 seconds of your life, trust me).
Source



Ever since my son was born, I‚Äôve had little time to focus for longer than 5-minute stretches outside of work, so this project has lost steam right now. I hope I‚Äôll manage to finish it in the first semester!
A look back and forward
Revisiting some of my plans for 2021 and making some for 2022.
Family
As much as I would love to work on side-projects and such, my family comes first, and I want to keep it that way. I‚Äôm excited to continue discovering what my next workouts will be, courtesy of Coach L√©onard! (Seriously, I‚Äôve got some arms now! üí™)
I cannot wait for my son to meet all his grand-parents, aunts and uncles in France later this year!
Nehovor√≠m pliynule po slovensky
aka I don‚Äôt speak Slovak fluently.
One of my goals was to make sure I would be able to speak to all my wedding guests in their preferred language (amongst French, English and Slovak). Because of the above (and COVID not helping‚Ä¶), the guest list was actually pretty small and my mastery of Slovak would not be entirely necessary to do well on my goal. So I guess I will learn better alongside my son this year whilst we wait for the big party?
Almost no SAD this past year
Come December, I usually feel pretty burnt out and in dire need of vacation to recharge. Somehow, in December 2021, I did not feel like that at all.
My new family life provided some amount of distractions from work. Even though that increased my context switching throughout the days and the nights were not as restful, it somehow created some distance between work and me. Or maybe because living with a newborn forces you to live in the moment, one day at a time‚Ä¶ üòÖ
Writing
Less paperwork, more blog posts. ü§û
Keep the newsletter going, and make it better, faster, stronger!
Improve my note taking system, which is a bit chaotic and not really systematic at the moment.
Learning Rust
In 2021, I started dabbling with Rust, mostly through the really great WIP book from Luca Palmieri, Zero To Production In Rust. It assumed some knowledge so I sometimes struggled had fun filling in the gaps.
Given where the JS ecosystem is going in terms of tooling (oh yeah, in 2021 I started this Awesome List of JavaScript Tooling Not Written In JavaScript on GitHub ‚Äì 667 stars so far!), I think it‚Äôs important to explore beyond the confines of JavaScript&#x2F;TypeScript. So I‚Äôd like to spend more time with Rust this coming year!
Lots of things to be grateful for last year and lots to look forward to this year. C‚Äôest parti !*
#### [Python Dependencies for JavaScript Developers](https:&#x2F;&#x2F;www.robincussol.com&#x2F;python-dependencies-for-javascript-developers&#x2F;) 
*Recently, I needed to update an old Python codebase which had not been touched in 3 years! Of course, the dependencies were so outdated that the Dockerfile of the project wouldn‚Äôt build. My JavaScript knowledge did not help me much:
how could I do a yarn upgrade-interactive --latest to update dependencies?
where‚Äôs the dependency lockfile?
why do we need to compile C-libraries for Python dependencies?
Luckily for me, my colleague Ondrej patiently explained how to approach these questions.
Using a virtual environment
TL;DR: pip installs packages globally unless we activate a virtual environment.
In Python, the default package manager is call pip and it installs packages from the Python Package Index, shortened to Pypi. The equivalent in JavaScript land would be npm and npmjs.com.
By default, pip installs packages system-wide. This contrasts with the need to pass a --global flag to npm.
To remedy that, we can use a local Python environment (a bit like having our node_modules folder in a JavaScript project). The following command will create a virtual environment in a venv folder in our current directory:
# Create the venv folder container the virtual environment
$ python3 -m venv venv
To make sure pip knows it should install packages in this virtual environment, we must activate it. Depending on your shell, you should source the appropriate activate file in venv&#x2F;bin:
activate, for Bash and ZSH,
activate.fish, for Fish Shell,
activate.csh, for csh
Activate.ps1, for PowerShell.
In my case, I will source the one for ZSH:
$ source venv&#x2F;bin&#x2F;activate
Now, pip install will install packages in the local folder instead of targeting the global scope. My ‚ÄúPython node_modules folder‚Äù is venv&#x2F;lib&#x2F;python3.8&#x2F;site-packages&#x2F;.
Dependencies in Python
TL;DR: use pip-compile to generate a lockfile and pip-sync to install dependencies from that lockfile
To deal with dependencies, we must install the pip-tools package in our virtual environment:
pip install pip-tools
This will allow us to use pip-compile and pip-sync later on.
Once that‚Äôs done, we could for example decide to start a Django project, ‚Äúthe web framework for perfectionists with deadlines‚Äù. The latest version of the package at the time of writing is 3.2.5. Let‚Äôs create our Python equivalent of a package.json file to express our project needs the Django package pinned to version 3.2.5:
# requirements.in
django&#x3D;&#x3D;3.2.5
Note: the better equivalent to a package.json would be a setup.py file, since it contains additional fields like the name of the local package, its version, etc. but we just want to write down the dependencies.
EDIT #1: it‚Äôs apparently not common practice to pin dependency versions in requirements.in, just in case you really need to (if there are breaking changes for example). Thanks for pointing it out, Ondrej.
To generate a corresponding lockfile of the transitive dependencies of Django, we can run the following command:
pip-compile --output-file requirements.txt requirements.in
This will create the following requirements.txt file:
#
# This file is autogenerated by pip-compile with python 3.8
# To update, run:
#
#    pip-compile --output-file&#x3D;requirements.txt requirements.in
#
asgiref&#x3D;&#x3D;3.4.1
    # via django
django&#x3D;&#x3D;3.2.5
    # via -r requirements.in
pytz&#x3D;&#x3D;2021.1
    # via django
sqlparse&#x3D;&#x3D;0.4.1
    # via django

Now that we have this file, we can finally retrieve and install the packages with the following command:
pip-sync
Note: if you try to run pip-sync without a requirements.txt, you will get the following error:
No requirement files given and no requirements.txt found in the current directory
It is indeed necessary to run pip-compile before.
Updating dependencies
Similar to npm oudated, we can list the outdated Python dependencies with
$ pip list --outdated
For example, after downgrading Django to 3.2.3 in my requirements.in, regenerating the lockfile with pip-compile, re-installing the dependencies with pip-sync, the command above will show:
Package    Version Latest Type
---------- ------- ------ -----
Django     3.2.3   3.2.5  wheel
setuptools 44.0.0  57.4.0 wheel
To update the dependency, I can change the version back to 3.2.5 in the requirements.in and go through the same dance:
$ pip-compile --output-file requirements.txt requirements.in
$ pip-sync
$ pip list --outdated
Package    Version Latest Type
---------- ------- ------ -----
setuptools 44.0.0  57.4.0 wheel
EDIT #2: a batteries-included equivalent to Yarn is called Poetry. Thanks for sharing, D√°niel!
Wheels and Eggs
You might wonder what this ‚Äúwheel‚Äù type is for the Django and setuptools packages.
They are still mysterious to me, but here‚Äôs my current understanding: in Python, some dependencies need to be built for specific architectures, as they might be written in Cython, ‚Äúa superset of the Python language that additionally supports calling C functions and declaring C types on variables and class attributes‚Äù. Wheels and Eggs are packaging formats for these.
In particular, it is not a good idea to use Alpine Docker images for Python projects as a lot of packages don‚Äôt have pre-built wheels for that architecture: your Docker build step will need to compile the packages from source, slowing down your entire process (and requiring you to install the necessary build tools for this compilation to happen!).
I don‚Äôt think there is a similar ‚Äúpackaging format‚Äù concept in JavaScript land. But we do have packages shipping prebuilt binaries for specific architectures, for example Sharp, the Node.js image processing package. (And we probably have enough issues with CommonJS vs ES Modules as it is‚Ä¶ :smile:)
Conclusions
All in all, a project needs to:
specify external dependencies and their desired version with semantic ranges
have a way to retrieve said dependencies
keep track of which versions were effectively installed to improve reproducibility.
Despite all these measures, the Docker file of an unmaintained 3-year old project could not build. Software rots!*
#### [How to Download a Brain with Pair Documenting](https:&#x2F;&#x2F;www.robincussol.com&#x2F;download-a-brain-with-pair-documenting&#x2F;) 
*When people leave the company, a lot of specific and ad hoc knowledge goes away with them. Unless there is already a strong documentation culture, there‚Äôs only so much that can be said and done during exit interviews to make up for it.
But this doesn‚Äôt have to be left to fate.
Throughout the month of January, my now ex-colleague Adam Jani≈° and I pair documented all his knowledge about the frontend infrastructure at Kiwi.com. We produced a 24 page document, fixed a few bugs and addressed some tech debt. More importantly, we had fun doing it!
Here‚Äôs how we approached it.
How to pair document
This is an attempt at formalising what we‚Äôve done, feel free to s&#x2F;Newbie&#x2F;Robin&#x2F;g and s&#x2F;Expert&#x2F;Adam&#x2F;g.
The Protagonists
You will need two proactive people: an Expert on the subject to document and a Newbie who is not too cursed with knowledge yet. Bonus points if they have not really worked together but always had good chemistry in their interactions.

The Newbie makes it easy on the Expert for this documentation effort to be a no-brainer:
they organize the pair documenting sessions;
they manage the agenda of the sessions;
they do most of the note-taking;
they digest the notes into documentation drafts in between sessions;
they stay curious and eager to learn more about the subjects, with questions always at the ready (this is hard to fake, so find an adequate Newbie for the task).

The Expert shows up at the sessions and generously shares their knowledge with the Newbie, answering patiently every question they may have. They review the documentation drafts to ensure the prose does not betray the original intent of the notes. Bonus points if they include the Newbie in solving similar problems described in the nascent documentation as they arise in the support channels of the company‚Äôs Slack: learning by doing is a great way to drive home the material and expose remaining ambiguities.

The First Session
The Newbie is in charge and explains how it‚Äôs going to work in the first pair-documenting session. That means going through what‚Äôs expected of each participant in this documentation effort as well as giving an overview of the actual process.
The objective of the first session is crucial: go as broad as possible and capture as many ideas of what needs documenting to form a backlog of topics to go over in the next sessions.
This can be achieved through asking questions like (more examples in this template):
what are things that you know about that very few people know?
what are the things that people always ping you about on Slack?
what tasks pile up when you‚Äôre on vacation?
Once the amount of things to document gets a bit clearer, see how many days are left before they leave and agree on a schedule to leave enough time for this task.
In Between Sessions
The Newbie transforms the raw notes into documentation drafts and gets the Expert to review them.
As more people in the company are aware of this documentation effort, they might have questions of their own; the Newbie adds these points to the agenda for the next session.
The Expert includes the Newbie in all discussions on Slack touching on the subject to maximize the learning opportunities and give the docs a trial by fire.
A Normal Session
In the first 5-10 minutes, the Newbie and the Expert go over unresolved comments in the doc draft, they review the agenda from the previous session and see if anything pops up to be further discussed or explained, and finally, they review the agenda for the current session and decide what to prioritize.
They then go over each point in the agenda: the Expert does most of the talking while the Newbie does most of the note-taking. The Newbie shares their screen for the document to be visible by both pair documentors. The Newbie may interrupt the Expert at any point with questions or with attempts at paraphrasing what the Expert just described. The Expert glances at the notes being taken once in a while to ensure they don‚Äôt contain mistakes from the get-go.
When the time is up, the Newbie and the Expert look at how much they covered from the agenda, move what hasn‚Äôt been covered to the next session, and agree on a date and time for that next session (if it‚Äôs not already regular).
Tools we used
A Calendar: to plan the sessions, to have automatic reminders for them, and to share the visio-conference link.


Custom recurrence with expiry date, Hangouts link, Notification not to miss it, Allow guests to modify event for better collaboration

A Google Document: to store the agenda, the notes and the first documentation drafts. Do make use of the outline on the left-hand side to navigate more easily once the document gets to a certain size. Do make use of comments to discuss and improve the notes and the draft. This is also a good place to involve other people from the company asynchronously. Make sure to put this document in a shared team drive for it to have the right permissions set by default.


Use the ‚ÄúStyles‚Äù dropdown to get this hierarchy

Here‚Äôs a free template Google document to get you started. Feel free to make a copy.
LucidChart: to draw a few diagrams because pictures are great (though you may want to check out Draw.io for a great free alternative).
Why Pair Documenting Works
What usually happens
Unless there is a strong documenting culture, (1) people never prioritize documentation over almost any other task, because it‚Äôs just not as fun as coding or as urgent as the next fire you need to put out. That means that when someone is about to leave, (2) there is an impossible amount of things to document that they don‚Äôt even know where to start. Because they are short on time, they end up drafting a lil‚Äô something and call it a day. (3) Anyway, we never needed that, why are they asking me to document that stuff, who‚Äôs gonna read it anyway?! (Note the use of two ‚Äúanyway‚Äù).
Clear intention through planning
Through planning the pair documenting sessions, we make sure documentation does get prioritized and give it the importance it deserves. If the Expert‚Äôs knowledge is that important and they by happenstance siloed it, it becomes urgent to share this knowledge more widely to deal with that critical bus factor. (Whether they leave or not is almost irrelevant in this case.)
Because we know when the Expert‚Äôs last working day is, it is easier to retro-plan the right number of sessions to cover the entire backlog established in the first session. This of course might need adjusting throughout the pair documentation effort.
More fun and better quality through collaboration
Planning is not enough if the Expert is still lost about what needs documenting and in which level of details. The nagging ‚Äúare they even gonna read it?‚Äù-type questions could well be the end of the documentation effort already: a well-crafted plan not well-executed.
With an accountability buddy, things turn around entirely.
It becomes really difficult to bail out of the plan because you know the other person is expecting you to show up at the session.
Because the Newbie is enthusiastic about the topic, the Expert is more generous in their contribution.
Because the Newbie asks questions and cares about details, the pair documentors tailor the documentation to the level of knowledge on the receiving end. The Expert knows this documentation will be useful. üòå
Aligned incentives
The Expert also knows that what they know should be documented somewhere, and because they like their colleagues, they don‚Äôt want their departure to create a mess. (Right?!)
The Newbie knows this knowledge is valuable, and about to disappear if they don‚Äôt take action. Besides, it‚Äôs something they‚Äôre curious and wanted to learn more about anyway.
The Expert gets to share their knowledge and teach what they know to someone who‚Äôs enthusiastic and interested in the topic; the Newbie gets time with the Expert to learn as much as possible from them.
Parting thoughts
I really enjoyed the pair documenting sessions with Adam and I think they should be made a regular practice, just like pair programming. It‚Äôs a great way to level up people while producing value beyond the scope of that collaboration.
At the same time, documentation is only valuable if it gets read and updated continuously. I‚Äôve been thinking about how to bring it closer to where people are already consuming content. For example, this could take the form of digests of parts of the documentation in the company‚Äôs Slack.
I‚Äôm not super familiar with mob programming, but I do wonder if mob documenting could be a thing to try too.

Acknowledgements:
Adam Jani≈° (@adam_janis) for trying out this pair-documenting idea before his departure :)
Emilia Vidal for her review and suggestions,
Shawn Wang (@swyx) for his review and ideas for the title and Open-Graph image,
Ron Au (@ronvoluted) for providing the font to go ahead with Shawn‚Äôs ideas,
Excalidraw to produce the visuals.*
#### [Year in Review: 2020](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2020&#x2F;) 
*2020, what a ride!
I cannot believe 2020 has already finally come to an end: with the lockdowns and quarantines, time simultaneously flew by and dragged on. A lot of my life was lived through a computer and the Internet. Time to reflect and remember.
Let‚Äôs start with some remarkable facts and events:
personally: - turned 30 in April, without even a beer to celebrate! (hint: the last bit is what‚Äôs remarkable) ‚ùåüç∫ - traveled only once to see my family in France üò¢ - got engaged in August üíç - spent the Christmas holidays alone, for the first time (I feel you, Kevin McCallister) üö∞
at work: - got a raise and earned a promotion üìà - wrote 3 posts on the Frontend Platform‚Äôs internal blog ‚úç
on my blog: - published 8 new posts üöÄ - updated 1 article ‚ôªÔ∏è - started a newsletter (already wrote 2 issues) üóû - broke the 10k unique visitor mark for Build Standalone Expo .apk and .ipa with Turtle CLI üéâ
miscellaneous: - joined 2 great online communities (Coding Career and Blogging For Devs) üôå - revamped a handful of desktop PCs and laptops (cannot believe I was about to get rid of my older laptop when it‚Äôs so smooth now!): most low-end&#x2F;mid computers are slow because of their stock hard drives (and limited RAM), a nice SSD and some RAM extension will do wonders! üíæ - jumped on the sourdough bread baking train (and learnt recently how sourdough baguettes are a lazy baker‚Äôs dream!) üá´üá∑ ü•ñ
Despite everyone calling 2020 their worst year ever, it did not seem so bad personally. Of course, I missed social life and being able to do ‚Äúnormal‚Äù things, but all things considered, I still learnt a lot this year.
Consumer to archivist
Spending so much time online means I absorbed vast amounts of data and after a while, it did not sit so well with me. I believed that I learn best by immersing myself in a continuous flow of information surrounding one topic. Of course, it‚Äôs worked for me so far, but the cost is that I get overwhelmed and it‚Äôs difficult to know when it‚Äôs enough.
Trying to change that brute-force approach to learning, I read here and there that taking notes would force me to slow down and choose what I consume more wisely. I obviously bought ‚ÄúHow to Take Smart Notes‚Äù by S√∂nke Ahrens (and only half-read it), came across the German word Zettlekasten and went on a wild goose chase for the best Personal Knowledge Management system, and read all the articles and watched all the YouTube videos about the subject. Old habits die hard. üòÖ
After using a few of them, I ended up settling with Joplin (which I had of course already set up prior to any of this) and have not looked back. It does not have backlinks so I‚Äôm deeply missing out on interconnected notes, as the hype goes, but it‚Äôs okay. My FOMO is in check for now. Joplin is an active open source project which is available on desktop as well as mobile devices. I retain full ownership (and responsibility) over my notes as Joplin integrates with different storage backends: I chose to use my self-hosted NextCloud instance.
In short:
just-in-case knowledge is expensive; prefer just-in-time knowledge
it‚Äôs easy to go on a wild goose chase only to realise you had everything already
note-taking does force me to slow down and helps to remember better
Archivist to creator
This story does not end here, dear reader. Accumulating notes about topics I‚Äôm interested in helps to slow down and be more intentional with what I consume. But it turns out knowledge without action is mostly useless.
Luckily, Daniel Vassalo wrote this influential tweet:
If you‚Äôre tempted by this, my advice to first-time creators is to start with a very small product: Something you can finish in 2 weeks and charge #### [Build Standalone Expo .apk and .ipa with Turtle CLI [deprecated]](https:&#x2F;&#x2F;www.robincussol.com&#x2F;build-standalone-expo-apk-ipa-with-turtle-cli&#x2F;) 
*This article was updated on February 7, 2023. NOTE: As of Expo SDK 47, the following method does not work any more. With the release of EAS‚Ä¶*
#### [Optimize your img tags with Eleventy Image and WebC](https:&#x2F;&#x2F;www.robincussol.com&#x2F;optimize-your-img-tags-with-eleventy-image-and-webc&#x2F;) 
*I am very excited about WebC and couldn‚Äôt wait to try out the corresponding Eleventy plugin. The first use-case I had in mind was to use‚Ä¶*
#### [Year in Review: 2021](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2021&#x2F;) 
*We‚Äôre already at the start of February 2022, but who says retrospectives need to be done on January 1st?! A lot of things happened in 202‚Ä¶*
#### [Python Dependencies for JavaScript Developers](https:&#x2F;&#x2F;www.robincussol.com&#x2F;python-dependencies-for-javascript-developers&#x2F;) 
*Recently, I needed to update an old Python codebase which had not been touched in 3 years! Of course, the dependencies were so outdated that‚Ä¶*
#### [How to Download a Brain with Pair Documenting](https:&#x2F;&#x2F;www.robincussol.com&#x2F;download-a-brain-with-pair-documenting&#x2F;) 
*When people leave the company, a lot of specific and ad hoc knowledge goes away with them. Unless there is already a strong documentation‚Ä¶*
#### [Year in Review: 2020](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2020&#x2F;) 
*2020, what a ride! I cannot believe 2020 has already finally come to an end: with the lockdowns and quarantines, time simultaneously flew by‚Ä¶*
#### [Docker for JavaScript Devs: How to Containerise Node.js Apps Efficiently](https:&#x2F;&#x2F;www.robincussol.com&#x2F;docker-for-js-devs-how-to-containerise-nodejs-apps-efficiently&#x2F;) 
*Docker is a really cool technology to have applications run the in the same, predictable context, ensuring the ‚Äúbut it works on my machine‚Ä¶*
#### [TypeScript Tidbit: How to Overload an Imported Function](https:&#x2F;&#x2F;www.robincussol.com&#x2F;typescript-tidbit-how-to-overload-an-imported-function&#x2F;) 
*There are times when the type definitions shipped on DefinitelyTyped are not enough and this results in making the TypeScript compiler‚Ä¶*
#### [Wax on, Wax off](https:&#x2F;&#x2F;www.robincussol.com&#x2F;wax-on-wax-off&#x2F;) 
*The reason I got into web development in the first place was the magical ‚ú® feeling you get when you see your code manifest in the browser‚Ä¶*
#### [A Successful Side-Project: Lessons from Swyx](https:&#x2F;&#x2F;www.robincussol.com&#x2F;a-successful-side-project-lessons-from-swyx&#x2F;) 
*If you are on Twitter, chances are you came across this tweet by Daniel Vassallo and it now seems everyone is writing a book! üòÑ Shawn Wang‚Ä¶*0 for it. The experience of getting paid for something you created, directly by consumers, will change you forever. https:&#x2F;&#x2F;t.co&#x2F;UbUD9ch4xQ
‚Äî Daniel Vassallo (@dvassallo) April 10, 2020
 
and Shawn Wang (@swyx) acted on it almost immediately to produce the Coding Career Handbook a few months later. I had followed him for some time on Twitter. His posts, conference talks and online presence in general always brought me value so I wanted to support his work. I was also really glad that half the proceeds would go to FreeCodeCamp. I got the Creators package, not entirely sure what to expect.
This was one of the best decisions of 2020.
As part of the Creators package, there have been regular workshops and they definitely spurred me further to action. After he invited Monica Lent to give a workshop about blogging for developers, I formed a resolve to try and publish a post every 2 weeks, as a way to transform my note-taking game into something more valuable. That‚Äôs when I resurrected my blog with 5 Tips to Start Blogging (for Devs).
A lot of my posts were shared at work and in the company‚Äôs external newsletter (thank you üôÇ) and for the most part, this resurection was successful, even though December was a bit of a hiatus in my blog publishing, as I started my newsletter, Robin‚Äôs Gazette.
I still have a lot to learn when it comes to creating online content and I am looking forward to continuing with this momentum. Whenever I need a reality check of what it takes to embark on this creator journey, I would have a read through Alex West‚Äôs story, as it‚Äôs so real, inspiring and humbling!
Joining online communities
The Coding Career Handbook is an amazing resource and I would like to write a proper review of the book some day; it contains so much valuable information that it would be hard to do it justice here.
What‚Äôs even more awesome about it is that it came with access to a community through Discord and Circle that Shawn manages really well as it keeps delivering value and furthers the book‚Äôs teachings and principles. And if that wasn‚Äôt enough, I met a few interesting people there who I‚Äôm looking forward to getting to know more in 2021.
Judging by how much the Coding Career community helped me to get real with my volitions, I also decided to join Monica Lent‚Äôs Blogging For Devs community because I‚Äôd like to take my blogging further. For example, my article about [Building] Standalone Expo .apk and .ipa with Turtle CLI broke the 10k unique visitor mark in December, through accidental SEO mostly. üéâ I‚Äôm hoping to get a little bit more intentional with SEO as it‚Äôs a great way to magnify the reach of your content. There are so many interesting and inspiring people in Monica‚Äôs community, as well as discussions and workshops about SEO, newsletters, monetization, and of course blogging‚Äîtopics I definitely want to dive deeper in in the new year!
Writing, writing, writing
If you have read this far, it has become pretty apparent that writing is now more than ever my main focus. I think it has been a tremendous source of clarity and success in the last year for me.
The resource that influenced my writing the most this year was this lecture by Larry McEnerney about the Craft of Writing Effectively (here‚Äôs a summary). Having done a PhD, I practiced the ‚Äúwrong‚Äù way of writing for a very long time. Focusing on what‚Äôs valuable for your intended readership makes so much sense.
As I mentioned in my first newsletter issue (let me know if you want a copy of it üòâ), design documents have been crazy useful at work. I must thank my colleage Tobi√°≈° Potoƒçek for bringing about this revolution. In this remote-only work environment, they were a great tool to discuss, make decisions and document them in a searchable manner. Every shortcut needed to be reckoned with and set against the bigger picture. Every quirk or contextual piece of information (which are critically important to understand past decisions or make new ones) are now recorded in writing.
Being a member of the Frontend Platform team, communicating as effectively as possible with the teams we serve was critically important too‚Äîespecially in such challenging times for a travel company in 2020. Most of that communication was done in writing through Slack and Google Documents. (Not to say it was always a smooth ride‚Ä¶)
A look ahead
In 2021, I will focus on staying in shape, physically and mentally. We will go for walks in nature more regularly with Emilia (we agreed at least once a month and have a list of places in Czechia!) I will cycle to work as much as possible, get back into the nice workout rhythm we had during the first lockdown and take care of my sleeping patterns (it‚Äôs all great to wake up earlier to write, but that means going to bed earlier too, Robin ;-)) I will take breaks when I‚Äôm getting overwhelmed, instead of resorting to my usual ‚Äústrategy‚Äù of pushing through until I‚Äôm burnt out.
In 2021, I will focus on maintaining the shift from content consumption to content creation. I want to continue publishing on my blog every 2 weeks as well as send my Gazette every 2 weeks. I will write a book to help PhD graduates transition to web development: I‚Äôm now further along the path (and my work seems to be appreciated :)), so it‚Äôs time to try and lift others as I climb.
In 2021, I will finally speak Slovak fluently to be able to speak to all our wedding guests (still to be planned‚Ä¶ so I got time, I guess :P) in their preferred language. (Robin of January 2022, you‚Äôre welcome!)
C‚Äôest parti!*
#### [Docker for JavaScript Devs: How to Containerise Node.js Apps Efficiently](https:&#x2F;&#x2F;www.robincussol.com&#x2F;docker-for-js-devs-how-to-containerise-nodejs-apps-efficiently&#x2F;) 
*Docker is a really cool technology to have applications run the in the same, predictable context, ensuring the ‚Äúbut it works on my machine‚Äù comments are a thing of the past. Not to mention how Docker integrates with Docker Compose and Kubernetes for larger-scale applications! But that‚Äôs for another day.
In this article, you will learn about some good principles to containerise Node.js apps efficiently. These principles are probably quite general and well-known, but they‚Äôre easy to overlook for beginners to Docker and Dockerfiles.
You will need to have Docker and Node.js installed locally to follow along comfortably.
Docker wants to make you happy, 
Photo by cottonbro from Pexels



Table of contents
Containerising a Next.js app (naive approach)

Docker Glossary
Optimising a Node.js app‚Äôs Docker image

Create a comprehensive .dockerignore file
Use an appropriate base image
Decouple the dependency installation step from application code
Decouple the build from the resulting built application
(Optional) Purge node_modules from unnecessary files
Docker build checklist for JavaScript Devs
Containerising a Next.js app (naive approach)
Let‚Äôs start with a simple Next.js application:
$ npm create next-app --use-npm
and let‚Äôs write the following into a file called Dockerfile at the root of the project:
FROM node:14.15.0

WORKDIR &#x2F;app

COPY . .
RUN npm ci
RUN npm run build

EXPOSE 3000

USER node

CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
Okay, what just happened? üòÑ
Docker Glossary
FROM &lt;image&gt;
WORKDIR &lt;some-path-in-the-container&gt;
COPY &lt;from-context&gt; &lt;to-container&gt;
WORKDIR directory
RUN &lt;command&gt;
docker build process only
EXPOSE &lt;port&gt;
documenting which port the app uses
USER &lt;user&gt;
root with superuser privileges); it‚Äôs good practice to use a different user to run the app.
CMD &lt;command&gt;
docker run &lt;image-tag&gt;, it is not executed during the build process.
Assuming we have Docker installed, we could now run
$ docker build --tag my-containerised-nextjs-app .
This command kindly asks the Docker daemon running on our machine to build the Dockerfile we just wrote with the files present in the current directry (the .) and to call that image my-containerised-nextjs-app (with the --tag flag).
After the build completed, run
$ docker run --rm -p 3000:3000 my-containerised-nextjs-app
and we should have our app running at http:&#x2F;&#x2F;localhost:3000.
This second command orders the Docker daemon to run the image named my-containerised-nextjs-app with port 3000 on my machine to correspond to port 3000 inside the container so that we can interact with our Next.js app. This port mapping is done through the -p hostPort:containerPort flag. Go ahead and change the port mapping and see if you can still access the app.
The --rm flag indicates that we do not want the Docker daemon to keep the container when we stop its execution (with CTRL+C); this is useful not to clog our machines with useless logs while developing.
Voil√†, we have containerised our Next.js app. The End. üéâ
Wait! Don‚Äôt leave, there‚Äôs more! üëá
Optimising a Node.js app‚Äôs Docker image
The section above does the job, but it‚Äôs not optimal. If we only have so few pipeline minutes and we don‚Äôt like wasting resources ‚ôªÔ∏è, this setup will eat more than is necessary. There are a few strategies to optimise a Dockerfile:
Create a comprehensive .dockerignore file
Use an appropriate base image
Decouple the dependency installation step from application code
Decouple the build from the resulting built application
(Optional) Purge node_modules from unnecessary files
Create a comprehensive .dockerignore file
If we look at the logs from building the Docker image, we could read:
Step 4&#x2F;8 : RUN npm ci
 ---&gt; Running in 559b499f0e2c
npm WARN prepare removing existing node_modules&#x2F; before installation
That means we copied the node_modules folder from our local context over to the Docker image being built. What‚Äôs more, npm ci removes them to make sure it works consistently. That is an indication that we should not copy the node_modules in the first place.
To let Docker know some files and folders should be ignored, we can list them in a .dockerignore file. For example, add the following to a file named .dockerignore:
node_modules
Run the build again and the warning disappeared.
What‚Äôs more, we can see how much less was sent to the Docker build context:
# BEFORE
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  101.8MB

# AFTER
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  400.4kB
In practice, we would want to add as many files as possible to our .dockerignore to ensure we‚Äôre not wasting time and energy on files which won‚Äôt be necessary for the build. This can include documentation files (e.g. *.md), configuration files which are only necessary when developing (e.g. .eslint*, .prettier*) as well as our Git history (e.g. .git).
With the following .dockerignore file:
node_modules
*.md
.git
we end up sending the bare minimum to the Docker daemon:
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  248.3kB
Use an appropriate base image
Docker images come in all shapes and sizes. When it comes to building or deploying our app, the smaller the size, the better. For our Next.js app, we don‚Äôt need all that‚Äôs available in node:14.15.0. For example, we don‚Äôt need git or curl. We can instead use the alpine flavour of that image, namely node:14.15.0-alpine.
The difference in size between node:14.15.0 and node:14.15.0-alpine is enormous!
REPOSITORY                    TAG                 SIZE
node                          14.15.0             943MB
node                          14.15.0-alpine      117MB
Our final containerised Next.js app will hence be much smaller thanks to this teeny-tiny modification of our Dockerfile:
- FROM node:14.15.0
+ FROM node:14.15.0-alpine

WORKDIR &#x2F;app

COPY . .
RUN npm ci
RUN npm run build

EXPOSE 3000

USER node

CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
For reference, if we want to inspect the size of the Docker images we have available locally, we can run docker image ls --all.
Our Docker image has size 1.05GB if we use node:14.15.0,
REPOSITORY                    TAG                 IMAGE ID            CREATED             SIZE
my-containerised-nextjs-app   latest              c78d43a2c5bc        15 seconds ago      1.05GB
and it drops to 229MB if we use node:14.15.0-alpine instead!
REPOSITORY                    TAG                 IMAGE ID            CREATED             SIZE
my-containerised-nextjs-app   latest              d0746ef6e8a4        21 seconds ago      229MB
Decouple the dependency installation step from application code
Our setup is already much better with a suitable .dockerignore file and with a much leaner base image. However, we haven‚Äôt made any changes to our package.json and the npm ci step always needs to run if make any changes to our application code.
This is because Docker caches each step as an intermediate Docker container. For example, if we were to run the build again (docker build --tag my-containerised-nextjs-app .), we would see that the cache is used for all steps, resulting in a nearly instant build (because nothing happened, really üòÑ):
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  248.3kB
Step 1&#x2F;8 : FROM node:14.15.0-alpine
 ---&gt; 9db54a688554
Step 2&#x2F;8 : WORKDIR &#x2F;app
 ---&gt; Using cache
 ---&gt; d5d4291dc699
Step 3&#x2F;8 : COPY . .
 ---&gt; Using cache
 ---&gt; b56455e98a93
Step 4&#x2F;8 : RUN npm ci
 ---&gt; Using cache
 ---&gt; ba4ab784f27e
Step 5&#x2F;8 : RUN npm run build
 ---&gt; Using cache
 ---&gt; a51c18594a20
Step 6&#x2F;8 : EXPOSE 3000
 ---&gt; Using cache
 ---&gt; 806dc06cbb6c
Step 7&#x2F;8 : USER node
 ---&gt; Using cache
 ---&gt; b86db08de717
Step 8&#x2F;8 : CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
 ---&gt; Using cache
 ---&gt; d0746ef6e8a4
Successfully built d0746ef6e8a4
Successfully tagged my-containerised-nextjs-app:latest
If we now modify anything in the folder that is not ignored thanks to our .dockerignore file, Docker will have to bust the cache from Step 3 onwards (the ‚ÄúUsing cache‚Äù expression is not printed any more). Let‚Äôs create an empty file and run the build again:
# create an empty file
$ touch file
# build again
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  248.8kB
Step 1&#x2F;8 : FROM node:14.15.0-alpine
 ---&gt; 9db54a688554
Step 2&#x2F;8 : WORKDIR &#x2F;app
 ---&gt; Using cache
 ---&gt; d5d4291dc699
Step 3&#x2F;8 : COPY . .
 ---&gt; e2b761bb08a6         # The cache is not used anymore
Step 4&#x2F;8 : RUN npm ci
 ---&gt; Running in b36f2511e117
...
To remedy this and ensure that npm ci runs only when necessary, we can first copy package.json and package-lock.json files, run npm ci, and then bring in the rest of the files to build the project:
FROM node:14.15.0-alpine

WORKDIR &#x2F;app

- COPY . .
+ COPY package.json .
+ COPY package-lock.json .
RUN npm ci
+ COPY . .
RUN npm run build

EXPOSE 3000

USER node

CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
After we modified the Dockerfile by applying the diff above, we see that Docker does not leverage the cache at all because the steps are different. This always happens when we modify the layers and&#x2F;or their order.
However, after running this build for a first time, subsequent builds will be much faster as the npm ci step will use the cache unless we modify package.json or package-lock.json:
# create another file to see when Docker stops using the cache
$ touch another-file
# run the build again
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  249.3kB
Step 1&#x2F;10 : FROM node:14.15.0-alpine
 ---&gt; 9db54a688554
Step 2&#x2F;10 : WORKDIR &#x2F;app
 ---&gt; Using cache
 ---&gt; d5d4291dc699
Step 3&#x2F;10 : COPY package.json .
 ---&gt; Using cache
 ---&gt; 139b5a611c0b
Step 4&#x2F;10 : COPY package-lock.json .
 ---&gt; Using cache
 ---&gt; 5bc380de1397
Step 5&#x2F;10 : RUN npm ci
 ---&gt; Using cache
 ---&gt; dff6b2da4bdc
Step 6&#x2F;10 : COPY . .
 ---&gt; 08911c09b40f
Step 7&#x2F;10 : RUN npm run build
 ---&gt; Running in f5374a54d9ad

&gt; my-app@0.1.0 build &#x2F;app
&gt; next build
...
Decouple the build from the resulting built application
For this section to make more sense, we will create another Next.js app that uses some dev dependencies which are necessary only when building the app but not when running it in production.
$ npm create next-app --use-npm --example with-tailwindcss with-tailwindcss-app
Copy the Dockerfile and .dockerignore files created in the other example into with-tailwindcss-app. Build the Docker image and run it to make sure it‚Äôs working well before continuing:
$ docker build --tag with-tailwindcss-app .
$ docker run --rm -p 3000:3000 with-tailwindcss-app
As we can see in the package.json file, we have a few dependencies which are only ever going to be used when building our app. We won‚Äôt need them in the final Docker image. So let‚Äôs get rid of them!
We are going to leverage multi-stage Docker builds. They sound more complicated than they are :)
Here‚Äôs a multi-stage build Dockerfile: in the builder container, we install dependencies and build our app, and in the second stage, we copy relevant files from the builder to our final image and install only production dependencies.
FROM node:14.15.0-alpine as builder

WORKDIR &#x2F;app

COPY package.json .
COPY package-lock.json .
RUN npm ci
COPY . .
RUN npm run build

FROM node:14.15.0-alpine

WORKDIR &#x2F;app

COPY --from&#x3D;builder &#x2F;app&#x2F;package.json .
COPY --from&#x3D;builder &#x2F;app&#x2F;package-lock.json .
RUN npm ci --production
COPY --from&#x3D;builder &#x2F;app&#x2F;.next .next

EXPOSE 3000

USER node

CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
If our app also contained a Next.js config file and a public folder, we would also need to copy them from the builder stage:
...
COPY --from&#x3D;builder &#x2F;app&#x2F;.next .
+ COPY --from&#x3D;builder &#x2F;app&#x2F;next.config.js .
+ COPY --from&#x3D;builder &#x2F;app&#x2F;public public
...
Comparing the sizes, we see that we removed 39MB of dev dependencies, not bad.
without multi-stage build
REPOSITORY                    TAG                 IMAGE ID            CREATED              SIZE
with-tailwindcss-app          latest              88089e6f965d        18 minutes ago      269MB
with multi-stage build
REPOSITORY                    TAG                 IMAGE ID            CREATED              SIZE
with-tailwindcss-app          latest              ba7307736fb0        25 seconds ago       230MB
(Optional) Purge node_modules from unnecessary files
Finally, to make our Docker image the leanest, we will purge our node modules from all the files which were included by the library authors and aren‚Äôt directly useful to our Docker image. For example, documentation files and READMEs, config files for Prettier and such, etc.
Note that this is not without risk as we could be removing files that we actually need to run the application correctly (we had a file named test.js that contained important code and it was mercilessly removed by the tool, which broke the application üòÖ).
We will add another stage called production-deps to make our node modules go through a diet with node-prune (GitHub repo). The list of files and folders that node-prune will remove is largely inspired by Yarn‚Äôs default list (generated through yarn autoclean --init).
To install node-prune, we need curl to be a locally available executable, so we can either choose a base image that contains it out of the box, or we can add it to node:14.15.0-alpine. Because we won‚Äôt need anything else, we will choose the latter.
FROM node:14.15.0-alpine as builder

WORKDIR &#x2F;app

COPY package.json .
COPY package-lock.json .
RUN npm ci
COPY . .
RUN npm run build

+ FROM node:14.15.0-alpine as production-deps

+ WORKDIR &#x2F;app

COPY --from&#x3D;builder &#x2F;app&#x2F;package.json .
COPY --from&#x3D;builder &#x2F;app&#x2F;package-lock.json .
RUN npm ci --production
+ # Add curl
+ RUN apk --no-cache add curl
+ # Install node-prune https:&#x2F;&#x2F;github.com&#x2F;tj&#x2F;node-prune
+ RUN curl -sf https:&#x2F;&#x2F;gobinaries.com&#x2F;tj&#x2F;node-prune | sh
+ RUN node-prune &#x2F;app

FROM node:14.15.0-alpine

WORKDIR &#x2F;app

+ COPY --from&#x3D;production-deps &#x2F;app&#x2F;package.json .
+ COPY --from&#x3D;production-deps &#x2F;app&#x2F;package-lock.json .
+ COPY --from&#x3D;production-deps &#x2F;app&#x2F;node_modules node_modules

COPY --from&#x3D;builder &#x2F;app&#x2F;.next .next

EXPOSE 3000

USER node

CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
Try it by building the image once more.
When node-prune ran, it printed out in the console that it removed 12MB:
...
Step 15&#x2F;24 : RUN node-prune &#x2F;app
 ---&gt; Running in 69e030ab8b70


         files total 14,269
       files removed 3,722
        size removed 12 MB
            duration 216ms
...
However, suprinsingly, a whopping 32MB were removed in comparison to our previous Dockerfile. (It seems node-prune‚Äôs tallying is not totally accurate when I tested locally as it removed 20.7 MB instead ‚Äî though it still doesn‚Äôt explain the other 11.3 MB ü§∑‚Äç‚ôÇÔ∏è)
$ docker image ls with-tailwindcss-app
REPOSITORY                    TAG                 IMAGE ID            CREATED              SIZE
with-tailwindcss-app          latest              c5e2081dba30        9 seconds ago        198MB
Let‚Äôs ensure our app is running well without the files node-prune removed and we can be on our merry way! üê≥ üéâ
Docker build checklist for JavaScript Devs
To summarise what we‚Äôve learnt so far, here‚Äôs a small checklist to review our own Docker build setups:
I have a comprehensive .dockerignore file
I use an appropriate base image
I decoupled the dependency installation step to improve caching
I decoupled the resulting built application from the build step
I purged the node_modules from unnecessary files
Time to flex! üí™ Show me your before and after Docker image sizes in the comments below!*
#### [TypeScript Tidbit: How to Overload an Imported Function](https:&#x2F;&#x2F;www.robincussol.com&#x2F;typescript-tidbit-how-to-overload-an-imported-function&#x2F;) 
*There are times when the type definitions shipped on DefinitelyTyped are not enough and this results in making the TypeScript compiler unhappy. Oh noes! üò≠
Functions Overloading Be Like, Photo by Luis Villasmil) on Unsplash.



Overload an imported function in TypeScript
But fear not! It is possible to overload a function imported from a different module (which could even be a local module&#x2F;file, not necessarily a node module) without ‚Äúpatching‚Äù the corresponding @types&#x2F;&lt;package&gt; type definitions.
import { someFunction } from &#39;module&#39;

&#x2F;&#x2F; the function overloading
declare module &#39;module&#39; {
  function someFunction() &#x2F;&#x2F; the overload you need
}

someFunction() &#x2F;&#x2F; with the overloaded version ‚úîÔ∏è
Example: overload Ramda‚Äôs compose function
A practical example is Ramda‚Äôs compose function. If you pass more than 7 functions to the function, you need to overload Ramda‚Äôs type definitions coming from @types&#x2F;ramda as the TypeScript compiler will report an error otherwise (TypeScript Playground Error Example).

DefinitelyTyped obviously cannot provide the type definitions for any number of arguments as compose accepts as many arguments as you want. So it‚Äôs up to you to inform the TypeScript compiler that this usage is actually okay. üòå
This can be done like in the example below (TypeScript Playground Working Example):
import * as R from &#39;ramda&#39;

&#x2F;&#x2F; overloading compose because &#x60;@types&#x2F;ramda&#x60; exposes types for up to 6 functions
declare module &#39;ramda&#39; {
  function compose&lt;V0, T1, T2, T3, T4, T5, T6, T7&gt;(
    fn6: (x: T6) &#x3D;&gt; T7,
    fn5: (x: T5) &#x3D;&gt; T6,
    fn4: (x: T4) &#x3D;&gt; T5,
    fn3: (x: T3) &#x3D;&gt; T4,
    fn2: (x: T2) &#x3D;&gt; T3,
    fn1: (x: T1) &#x3D;&gt; T2,
    fn0: (x0: V0) &#x3D;&gt; T1
  ): (x0: V0) &#x3D;&gt; T7
}

&#x2F;&#x2F; and now, we can use:
const someComplicatedResult &#x3D; R.compose&lt;V0, T1, T2, T3, T4, T5, T6, T7&gt;(
  fn6,
  fn5,
  fn4,
  fn3,
  fn2,
  fn1,
  fn0
)(&#39;üòÖ&#39;)
We can see from the screenshot below that the overload was correctly taken into consideration. üéâ

Caveat
I can imagine that if this is overused, things can become quickly intractable. So use it sparingly and always with a good reason why. Your future self will be happy to find an explanation in a comment above the overloading as it is kind of unusual. üòâ
I discovered this while refactoring @kiwicom&#x2F;splitster to TS (link to commit) and thought it might be useful to share. Hope it helped you!*
#### [Wax on, Wax off](https:&#x2F;&#x2F;www.robincussol.com&#x2F;wax-on-wax-off&#x2F;) 
*The reason I got into web development in the first place was the magical ‚ú® feeling you get when you see your code manifest in the browser.
In my current role at work, I don‚Äôt do much of that anymore. And I guess I kind of miss it. Especially the part when I am given a clearly defined outcome, with clear guidelines. Perks of being labelled a senior, I guess. üòú But I digress.
Since I started with React, a lot of things have happened in web development. At the moment, I‚Äôm especially interested in Svelte and TailwindCSS and after watching Rich Harris‚Äôs latest talk ‚ÄúFuturistic Web Development‚Äù, I needed an excuse to try Svelte ASAP.
Staying sharp with deliberate practice
To ensure my frontend skills don‚Äôt wither, I would like to spend dedicated time each week to practice on a set of frontend challenges and reflect on what I learnt from them.
Fortunately, I recently discovered FrontendMentor.io and this website offers quite the list of frontend challenges, ranging in difficulty and consistently with nice designs.
Improve your front-end coding skills by building real projects
Solve real-world HTML, CSS and JavaScript challenges whilst working to professional designs.
‚Äî FrontendMentor.io
And to practice with new frontend technologies, it‚Äôs good to find nice designs. But it‚Äôs even better when they come with a style guide and assets like pictures and icons. üòç
Here‚Äôs how it works:
You choose a challenge and download the files.
You attempt the challenge with the stack of your choice. Because the challenge files come with a style guide, the necessary pictures and icons, etc. it‚Äôs really easy to get started! (Unless you spend hours deciding which stack to use, of course üòÇ)
You upload it to GitHub and deploy your attempt on Vercel or Netlify.
Finally, you submit your solution through your challenges dashboard on the platform.
You can then get feedback on your submissions and provide reviews for other people‚Äôs submissions too, which I find really cool. I remember how difficult it was to get feedback when I was first learning web development.
Learnings
The last challenge I attempted looked pleasing on my eyes and I honestly did not expect I would learn so much from it. That makes me want to practice even more!
Check out the live deployment!


I encountered the following problems to complete the ‚ÄúSocial media dashboard with theme switcher‚Äù challenge:
setting up Svelte with TailwindCSS (thank you Swyx and Chris Dhanaraj)
implementing a toggle component from scratch
without accessibility in mind (where I started: W3Schools üòÖ)
with accessibility in mind (where I ended up: Smashing Magazine, though I‚Äôm not sure how to test if my current solution is the most accessible)
implementing a theme switcher in Svelte (inspiration from this Svelte REPL)
adding a border with a gradient to a block element (this requires using a CSS trick from nowhere else but CSS Tricks of course)
pulling my hair for not realising that you need the group class for group-hover: modifiers to apply in the children with Tailwind (thank you Estevan Maito)
how to extract the imported Svelte components‚Äô props‚Äô TypeScript types (that‚Äôs a mouthful!), instead of exporting and importing the types directly (TL;DR: use $props_def from the component)
&lt;script lang&#x3D;&quot;ts&quot;&gt;
  import MyComponent from &#39;.&#x2F;MyComponent.svelte&#39;;

  const data: MyComponent[&#39;$props_def&#39;][&#39;data&#39;] &#x3D; ...
&lt;&#x2F;script&gt;

&lt;MyComponent {data} &#x2F;&gt;

...
deploying a ‚Äúmonorepo‚Äù on Vercel without redeploying all the folders all the time by specifying the ‚ÄúIgnored Build Step‚Äù with something like git diff --quiet HEAD^ HEAD -- subfolder-in-monorepo to only rebuild the site if changes were made in subfolder-in-monorepo.
Here‚Äôs the GitHub repository where I will learn in public and add future challenges I will attempt. (Though I might need to rename this repository in the future as I just found this really nice list of project ideas to build with other platforms than FrontendMentor.io üòâ)
Let me know in the comments what your current deliberate practice is!*
#### [A Successful Side-Project: Lessons from Swyx](https:&#x2F;&#x2F;www.robincussol.com&#x2F;a-successful-side-project-lessons-from-swyx&#x2F;) 
*If you are on Twitter, chances are you came across this tweet by Daniel Vassallo
If you‚Äôre tempted by this, my advice to first-time creators is to start with a very small product: Something you can finish in 2 weeks and charge #### [Build Standalone Expo .apk and .ipa with Turtle CLI [deprecated]](https:&#x2F;&#x2F;www.robincussol.com&#x2F;build-standalone-expo-apk-ipa-with-turtle-cli&#x2F;) 
*This article was updated on February 7, 2023. NOTE: As of Expo SDK 47, the following method does not work any more. With the release of EAS‚Ä¶*
#### [Optimize your img tags with Eleventy Image and WebC](https:&#x2F;&#x2F;www.robincussol.com&#x2F;optimize-your-img-tags-with-eleventy-image-and-webc&#x2F;) 
*I am very excited about WebC and couldn‚Äôt wait to try out the corresponding Eleventy plugin. The first use-case I had in mind was to use‚Ä¶*
#### [Year in Review: 2021](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2021&#x2F;) 
*We‚Äôre already at the start of February 2022, but who says retrospectives need to be done on January 1st?! A lot of things happened in 202‚Ä¶*
#### [Python Dependencies for JavaScript Developers](https:&#x2F;&#x2F;www.robincussol.com&#x2F;python-dependencies-for-javascript-developers&#x2F;) 
*Recently, I needed to update an old Python codebase which had not been touched in 3 years! Of course, the dependencies were so outdated that‚Ä¶*
#### [How to Download a Brain with Pair Documenting](https:&#x2F;&#x2F;www.robincussol.com&#x2F;download-a-brain-with-pair-documenting&#x2F;) 
*When people leave the company, a lot of specific and ad hoc knowledge goes away with them. Unless there is already a strong documentation‚Ä¶*
#### [Year in Review: 2020](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2020&#x2F;) 
*2020, what a ride! I cannot believe 2020 has already finally come to an end: with the lockdowns and quarantines, time simultaneously flew by‚Ä¶*
#### [Docker for JavaScript Devs: How to Containerise Node.js Apps Efficiently](https:&#x2F;&#x2F;www.robincussol.com&#x2F;docker-for-js-devs-how-to-containerise-nodejs-apps-efficiently&#x2F;) 
*Docker is a really cool technology to have applications run the in the same, predictable context, ensuring the ‚Äúbut it works on my machine‚Ä¶*
#### [TypeScript Tidbit: How to Overload an Imported Function](https:&#x2F;&#x2F;www.robincussol.com&#x2F;typescript-tidbit-how-to-overload-an-imported-function&#x2F;) 
*There are times when the type definitions shipped on DefinitelyTyped are not enough and this results in making the TypeScript compiler‚Ä¶*
#### [Wax on, Wax off](https:&#x2F;&#x2F;www.robincussol.com&#x2F;wax-on-wax-off&#x2F;) 
*The reason I got into web development in the first place was the magical ‚ú® feeling you get when you see your code manifest in the browser‚Ä¶*
#### [A Successful Side-Project: Lessons from Swyx](https:&#x2F;&#x2F;www.robincussol.com&#x2F;a-successful-side-project-lessons-from-swyx&#x2F;) 
*If you are on Twitter, chances are you came across this tweet by Daniel Vassallo and it now seems everyone is writing a book! üòÑ Shawn Wang‚Ä¶*0 for it. The experience of getting paid for something you created, directly by consumers, will change you forever. https:&#x2F;&#x2F;t.co&#x2F;UbUD9ch4xQ
‚Äî Daniel Vassallo (@dvassallo) April 10, 2020
 
and it now seems everyone is writing a book! üòÑ
Shawn Wang took this advice and decided to go forth with his Coding Career Handbook (for which I‚Äôm grateful! It‚Äôs such a great book!). He shares his lessons and regrets in this talk at js.la üìΩÔ∏è, and here are my notes for my future self when I want to ship a side project (for money or not).
The How
There are 4 aspects:
Pre-selling
Delivering
Launching
Keeping going
Pre-selling - or your own Kickstarter
On the first day of this endeavour, take the time to find a topic, a name and put up a landing page with good marketing copy.
Pre-sell to your friends and close network: they are more likely to ask you about the state of the project and you would hate to disappoint. What‚Äôs more, you‚Äôve got their money which you would awkwardly need to return otherwise.
This is probably a good moment to decide which platform(s) you want to use to support the sale of your book. Gumroad and Podia seem to be fairly big players in that space.
If it is your first side project that you would like to ship for money, don‚Äôt fret too much over the pricing strategy; it is more of a distraction from writing and completing the project. Sticking to Daniel Vassallo‚Äôs recommendation of #### [Build Standalone Expo .apk and .ipa with Turtle CLI [deprecated]](https:&#x2F;&#x2F;www.robincussol.com&#x2F;build-standalone-expo-apk-ipa-with-turtle-cli&#x2F;) 
*This article was updated on February 7, 2023. NOTE: As of Expo SDK 47, the following method does not work any more. With the release of EAS‚Ä¶*
#### [Optimize your img tags with Eleventy Image and WebC](https:&#x2F;&#x2F;www.robincussol.com&#x2F;optimize-your-img-tags-with-eleventy-image-and-webc&#x2F;) 
*I am very excited about WebC and couldn‚Äôt wait to try out the corresponding Eleventy plugin. The first use-case I had in mind was to use‚Ä¶*
#### [Year in Review: 2021](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2021&#x2F;) 
*We‚Äôre already at the start of February 2022, but who says retrospectives need to be done on January 1st?! A lot of things happened in 202‚Ä¶*
#### [Python Dependencies for JavaScript Developers](https:&#x2F;&#x2F;www.robincussol.com&#x2F;python-dependencies-for-javascript-developers&#x2F;) 
*Recently, I needed to update an old Python codebase which had not been touched in 3 years! Of course, the dependencies were so outdated that‚Ä¶*
#### [How to Download a Brain with Pair Documenting](https:&#x2F;&#x2F;www.robincussol.com&#x2F;download-a-brain-with-pair-documenting&#x2F;) 
*When people leave the company, a lot of specific and ad hoc knowledge goes away with them. Unless there is already a strong documentation‚Ä¶*
#### [Year in Review: 2020](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2020&#x2F;) 
*2020, what a ride! I cannot believe 2020 has already finally come to an end: with the lockdowns and quarantines, time simultaneously flew by‚Ä¶*
#### [Docker for JavaScript Devs: How to Containerise Node.js Apps Efficiently](https:&#x2F;&#x2F;www.robincussol.com&#x2F;docker-for-js-devs-how-to-containerise-nodejs-apps-efficiently&#x2F;) 
*Docker is a really cool technology to have applications run the in the same, predictable context, ensuring the ‚Äúbut it works on my machine‚Ä¶*
#### [TypeScript Tidbit: How to Overload an Imported Function](https:&#x2F;&#x2F;www.robincussol.com&#x2F;typescript-tidbit-how-to-overload-an-imported-function&#x2F;) 
*There are times when the type definitions shipped on DefinitelyTyped are not enough and this results in making the TypeScript compiler‚Ä¶*
#### [Wax on, Wax off](https:&#x2F;&#x2F;www.robincussol.com&#x2F;wax-on-wax-off&#x2F;) 
*The reason I got into web development in the first place was the magical ‚ú® feeling you get when you see your code manifest in the browser‚Ä¶*
#### [A Successful Side-Project: Lessons from Swyx](https:&#x2F;&#x2F;www.robincussol.com&#x2F;a-successful-side-project-lessons-from-swyx&#x2F;) 
*If you are on Twitter, chances are you came across this tweet by Daniel Vassallo and it now seems everyone is writing a book! üòÑ Shawn Wang‚Ä¶*0 is probably enough.
Delivering
Thanks to your pre-writing, e.g. gathering notes, writing blog posts, etc., you already have some amount of the material you would like to include in the finished product. If it‚Äôs 25%, that means you still need to actually write the other 75%.
If possible, you should continue your ‚Äúnormal‚Äù activities, like shipping blog posts about other topics, appearing on podcasts, etc.
As you are writing, document your journey and give away one or two chapters for free as teasers. They‚Äôre a showcase for what you‚Äôre producing and could lead to podcast interviews for further exposure.
I was sharing my personal journey, lessons and milestones.
The best marketing is no marketing. No one wants to be sold anything.
‚Äî Alex West, in Two and a half years of building products
Daniel Vassallo‚Äôs advice to time box the project to 2 weeks is a very important idea: it is so easy to fall prey to scope creep by adding more and more topics to cover, especially when you are knowledgeable and excited about it! But this may well mean that you will never actually ship it. So harness your enthusiasm to provide an advantage.
Of course, you have the goal to ship that product, but what parts of your day actively contribute to that goal? If you‚Äôd like to get anything done, adopting a system to support your goals will go a long way.

Systems &gt; Goals, Source: https:&#x2F;&#x2F;jamesclear.com&#x2F;goals-systems
Launching
All your efforts are coming to an end‚Ä¶ or so you thought. Now is the time to launch your product! This phase requires an entirely different skill set so it‚Äôs good to have practice.
Having a great landing page is a must. A good resource on the subject is Rob Hope‚Äôs book Landing Page Hot Tips, and you can read Shawn‚Äôs review of it too.
Make sure to know the rules of the platforms you‚Äôre using to launch: Shawn‚Äôs Show HN post was doing very well and directing a lot of traffic to his landing page, but it was sadly taken down as no free sample of the book was available there (despite the blog posts).
If people leave out a negative comment, take this as an opportunity to turn their opinions around.
Shawn recommends watching Adam Wathan‚Äôs talk Nailing Your First Launch.
Keeping going
This is still not the end. What comes tomorrow? Next week, next month, next year?
You can ‚Äúlaunch‚Äù your product multiple times.
You can start a community around your book or product.
One of the biggest mistakes I see founders make is abandoning what already works and trying to take on a bigger challenge before they‚Äôre making enough money to develop products full-time.
Instead, focus on replicating the same type of product with another angle or in another market, maybe more than once.
‚Äî Rob Walling, in The Stairstep Approach to Bootstrapping
The Why
If you want to go from employee to entrepreneur, it is good to learn without too much risk how to do ‚Äúbusiness‚Äù without all the supports from other departments. For example, as a Software Engineer, you would not be focusing much on attracting leads for your company; there would be a design team and product managers making decisions about the product, etc.
When you‚Äôre launching a product on your own, you need to perform in all the roles and learn as you go. Especially when it comes to side-projects, developing a system to support your goals, and improving your discipline and focus.
You will get acquainted with the valley of despair and go through the emotional journey it describes; this is inevitable, and maybe even necessary, to create anything great.

 Source: https:&#x2F;&#x2F;john.do&#x2F;emotional-journey-creating&#x2F; 
This can be daunting but it will most likely be a rewarding experience, at least in terms of skills acquisition if not financially.
Make sure to define in advance your idea of success for this project: is it for the learning experience and to have a published book to your name, is it solely about making X amount of money?
Resources
üìΩÔ∏è Shawn‚Äôs talk, Lessons and Regrets From Shipping My $50000 Coronavirus Side Project
üìΩÔ∏è Adam Wathan‚Äôs talk, Nailing Your First Launch
üìì Rob Walling, The Stairstep Approach to Bootstrapping
üìì James Clear, Forget About Setting Goals. Focus on This Instead
üìì Alex West, Two and a half years of building products*0 is probably enough.
Delivering
Thanks to your pre-writing, e.g. gathering notes, writing blog posts, etc., you already have some amount of the material you would like to include in the finished product. If it‚Äôs 25%, that means you still need to actually write the other 75%.
If possible, you should continue your ‚Äúnormal‚Äù activities, like shipping blog posts about other topics, appearing on podcasts, etc.
As you are writing, document your journey and give away one or two chapters for free as teasers. They‚Äôre a showcase for what you‚Äôre producing and could lead to podcast interviews for further exposure.
I was sharing my personal journey, lessons and milestones.
The best marketing is no marketing. No one wants to be sold anything.
‚Äî Alex West, in Two and a half years of building products
Daniel Vassallo‚Äôs advice to time box the project to 2 weeks is a very important idea: it is so easy to fall prey to scope creep by adding more and more topics to cover, especially when you are knowledgeable and excited about it! But this may well mean that you will never actually ship it. So harness your enthusiasm to provide an advantage.
Of course, you have the goal to ship that product, but what parts of your day actively contribute to that goal? If you‚Äôd like to get anything done, adopting a system to support your goals will go a long way.

Systems &gt; Goals, Source: https:&#x2F;&#x2F;jamesclear.com&#x2F;goals-systems
Launching
All your efforts are coming to an end‚Ä¶ or so you thought. Now is the time to launch your product! This phase requires an entirely different skill set so it‚Äôs good to have practice.
Having a great landing page is a must. A good resource on the subject is Rob Hope‚Äôs book Landing Page Hot Tips, and you can read Shawn‚Äôs review of it too.
Make sure to know the rules of the platforms you‚Äôre using to launch: Shawn‚Äôs Show HN post was doing very well and directing a lot of traffic to his landing page, but it was sadly taken down as no free sample of the book was available there (despite the blog posts).
If people leave out a negative comment, take this as an opportunity to turn their opinions around.
Shawn recommends watching Adam Wathan‚Äôs talk Nailing Your First Launch.
Keeping going
This is still not the end. What comes tomorrow? Next week, next month, next year?
You can ‚Äúlaunch‚Äù your product multiple times.
You can start a community around your book or product.
One of the biggest mistakes I see founders make is abandoning what already works and trying to take on a bigger challenge before they‚Äôre making enough money to develop products full-time.
Instead, focus on replicating the same type of product with another angle or in another market, maybe more than once.
‚Äî Rob Walling, in The Stairstep Approach to Bootstrapping
The Why
If you want to go from employee to entrepreneur, it is good to learn without too much risk how to do ‚Äúbusiness‚Äù without all the supports from other departments. For example, as a Software Engineer, you would not be focusing much on attracting leads for your company; there would be a design team and product managers making decisions about the product, etc.
When you‚Äôre launching a product on your own, you need to perform in all the roles and learn as you go. Especially when it comes to side-projects, developing a system to support your goals, and improving your discipline and focus.
You will get acquainted with the valley of despair and go through the emotional journey it describes; this is inevitable, and maybe even necessary, to create anything great.

 Source: https:&#x2F;&#x2F;john.do&#x2F;emotional-journey-creating&#x2F; 
This can be daunting but it will most likely be a rewarding experience, at least in terms of skills acquisition if not financially.
Make sure to define in advance your idea of success for this project: is it for the learning experience and to have a published book to your name, is it solely about making X amount of money?
Resources
üìΩÔ∏è Shawn‚Äôs talk, Lessons and Regrets From Shipping My $50000 Coronavirus Side Project
üìΩÔ∏è Adam Wathan‚Äôs talk, Nailing Your First Launch
üìì Rob Walling, The Stairstep Approach to Bootstrapping
üìì James Clear, Forget About Setting Goals. Focus on This Instead
üìì Alex West, Two and a half years of building products*0 for it. The experience of getting paid for something you created, directly by consumers, will change you forever. https:&#x2F;&#x2F;t.co&#x2F;UbUD9ch4xQ
‚Äî Daniel Vassallo (@dvassallo) April 10, 2020
 
and it now seems everyone is writing a book! üòÑ
Shawn Wang took this advice and decided to go forth with his Coding Career Handbook (for which I‚Äôm grateful! It‚Äôs such a great book!). He shares his lessons and regrets in this talk at js.la üìΩÔ∏è, and here are my notes for my future self when I want to ship a side project (for money or not).
The How
There are 4 aspects:
Pre-selling
Delivering
Launching
Keeping going
Pre-selling - or your own Kickstarter
On the first day of this endeavour, take the time to find a topic, a name and put up a landing page with good marketing copy.
Pre-sell to your friends and close network: they are more likely to ask you about the state of the project and you would hate to disappoint. What‚Äôs more, you‚Äôve got their money which you would awkwardly need to return otherwise.
This is probably a good moment to decide which platform(s) you want to use to support the sale of your book. Gumroad and Podia seem to be fairly big players in that space.
If it is your first side project that you would like to ship for money, don‚Äôt fret too much over the pricing strategy; it is more of a distraction from writing and completing the project. Sticking to Daniel Vassallo‚Äôs recommendation of #### [Build Standalone Expo .apk and .ipa with Turtle CLI [deprecated]](https:&#x2F;&#x2F;www.robincussol.com&#x2F;build-standalone-expo-apk-ipa-with-turtle-cli&#x2F;) 
*This article was updated on February 7, 2023.
NOTE: As of Expo SDK 47, the following method does not work any more.
With the release of EAS builds, it is necessary to have Internet access to create standalone Expo apps locally; see Running builds on your own infrastructure on Expo docs.
You can still use the React Native way to build applications locally after generating necessary files with expo prebuild (see this GitHub comment on expo&#x2F;eas-cli).
This post will not receive further updates.
A great way to start writing React Native applications is to use Expo. You don‚Äôt even need to setup a development environment to get started thanks to Snack, an online React Native application editor. Your application is public by default. Sharing has never been that easy.

Brown turtle swimming underwater, Photo by Wexor Tmg on Unsplash
However, you would like to share an application exclusively with some people, not through an app store or any public channel. One possibility is to share the built application file, e.g. an .apk file for Android and an .ipa file for iOS.
Expo is so great a service (oh, and did I mention free?) that they offer you to publish your app on their servers and if you wanted to build these .apk and .ipa files, you could do so on their servers.
The flow looks like:
$ expo publish
$ expo build:&lt;PLATFORM&gt;
and you obtain a nice URL to the artifact created for you when the build finishes.
But, again, this is public. On a server you don‚Äôt control. (Although, if you made the same mistake as I did, a ticket to their support can delete any files you had wished to keep private. ü•á)
Luckily for you, Expo provide the tools they are using on their servers for free (did I mention they‚Äôre great!?). The build process relies on a CLI tool called turtle-cli. It is open-source and available on GitHub.
Let us go through an example of how to create your application file without resorting to Expo servers. That means you can keep an application private and also build your application while being offline.
The following instructions assume you have bash and Node.js available. In my experience, using the current LTS version of Node.js (version 16.13.2) works best.
Caveat: I could not complete the iOS instructions to the end since I do not have an Apple Developer paid account.
We will go through the following steps:
1. Turtle CLI
2. Create a dummy application
3. Publish Expo app on local server
4. Create APK file ‚Äì Android

4.1. Prerequisites
4.2. Create Keystore
4.3. Build APK
5. Create IPA file ‚Äì iOS

5.1. Prerequisites
5.2. Create Signing keys
5.3. Build IPA
6. Distribute and install

6.1. on Android
6.2. on iOS
Resources
A condensed version of these steps without much explanation or context is available on the accompanying GitHub repository.
1. Turtle CLI
To install Turtle CLI, run
$ npm install -g turtle-cli
This will make command turtle globally available on your system. To verify it was correctly installed, let‚Äôs print the version:
$ turtle -V
0.24.3
2. Create a dummy application
Let‚Äôs create a dummy application using Expo CLI. In your terminal, run
$ npx expo init ExampleApplication
It will ask you a few questions:
# Expo version 5.0.3
npx expo init ExampleApplication
? Choose a template: ‚Ä∫ - Use arrow-keys. Return to submit.
    ----- Managed workflow -----
‚ùØ   blank               a minimal app as clean as an empty canvas
    blank (TypeScript)  same as blank but with TypeScript configuration
    tabs (TypeScript)   several example screens and tabs using react-navigation and TypeScript
    ----- Bare workflow -----
    minimal             bare and minimal, just the essentials to get you started
The blank template is enough for us.
If you have yarn installed, Expo will use it by default to install dependencies. You can use the --npm flag in the init command if you‚Äôd prefer to use npm instead.
Once it‚Äôs done setting up your project, you should see the following output in the terminal:
‚úÖ Your project is ready!

To run your project, navigate to the directory and run one of the following yarn commands.

- cd ExampleApplication
- yarn start
Run the commands and let‚Äôs verify the generated boilerplate works in our emulators:


To finish setting up the dummy application, you need to configure the app.json file because some configuration keys must be specified to build a standalone app.
If you would like to know more about these standalone app specific configurations, check Expo‚Äôs documentation for iOS and for Android.
For this tutorial, it is only necessary to specify the keys &quot;bundleIdentifier&quot; under &quot;ios&quot;, and &quot;package&quot; under &quot;android&quot; in your app.json file:
...
    &quot;ios&quot;: {
      ...
      &quot;bundleIdentifier&quot;: &quot;com.example.exampleApplication&quot;,
      ...
    },
    &quot;android&quot;: {
      ...
      &quot;package&quot;: &quot;com.example.example_application&quot;,
      ...
    }
...
3. Publish Expo app on local server
Expo has this notion of app publishing: it allows you to share a link or QR code to Expo‚Äôs website and anyone can run your app through the Expo app on their devices.
Having your app published is also necessary for over-the-air (OTA) updates, allowing seamless updates to your application, and to publish your application (i.e. building your application files on Expo servers).
You would typically run
$ expo login -u $EXPO_USERNAME -p $EXPO_PASSWORD
$ expo publish
and your app would then be available at https:&#x2F;&#x2F;expo.dev&#x2F;&lt;EXPO_USERNAME&gt;&#x2F;&lt;APP_NAME&gt;.
To have your Expo app ‚Äúpublished‚Äù on your local server (and avoid public publishing on Expo servers), you will use a different command:
$ expo export --dev --public-url &lt;your-url-here&gt;
The --dev flag is necessary because you will use a non-https server to publish your Expo app. Note that this prevents you from using OTA updates.
Your server does not need to be running for this step, but you do need to know which local URL you are going to use in advance. This tuorial assumes you will run a local server at http:&#x2F;&#x2F;127.0.0.1:8000.
You can now export the app:
$ expo export --dev --public-url http:&#x2F;&#x2F;127.0.0.1:8000
...
Export was successful. Your exported files can be found in dist
This command will create a dist directory containing the iOS and Android JavaScript bundles and the different assets you are using.
dist
‚îú‚îÄ‚îÄ android-index.json
‚îú‚îÄ‚îÄ assets
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ 13685372945d816a2b474fc082fd9aaa
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ 140c53a7643ea949007aa9a282153849
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ ...
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ fdbedb7e67aa7c0ecad83d9c2fa4dfba
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ fdc01171a7a7ea76b187afcd162dee7d
‚îú‚îÄ‚îÄ bundles
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ android-a9defc54fb2ffdb7e6fdaf5b8d0be751.js
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ ios-a29c3e4ac97a2abdc5208fd4f06e7708.js
‚îî‚îÄ‚îÄ ios-index.json
You can now serve the dist directory on your web server, e.g.
$ npx http-server -p 8000 dist
Note: if for some reason you need to re-export your application (because you modified your app.json file since the last export, for instance), you must first remove the dist directory:
# assuming you are at the root of the project
$ rm -rf dist
$ expo export --dev --public-url http:&#x2F;&#x2F;127.0.0.1:8000
4. Create APK file ‚Äì Android
First, verify that your local server is running. For example, you should see a similar output:
$ curl http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;android-index.json
{&quot;name&quot;:&quot;ExampleApplication&quot;,&quot;slug&quot;:&quot;ExampleApplication&quot;,&quot;version&quot;:&quot;1.0.0&quot;,&quot;orientation&quot;:&quot;portrait&quot;,&quot;icon&quot;:&quot;.&#x2F;assets&#x2F;icon.png&quot;,&quot;splash&quot;:{&quot;image&quot;:&quot;.&#x2F;assets&#x2F;splash.png&quot;,&quot;resizeMode&quot;:&quot;contain&quot;,&quot;backgroundColor&quot;:&quot;#ffffff&quot;,&quot;imageUrl&quot;:&quot;http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;assets&#x2F;201a91bd1740bb1d6a1dbad049310724&quot;}...
4.1. Prerequisites
For Turtle CLI to work correctly to create an .apk file for Android, you need to make sure the following dependency is installed: Java Development Kit (version 8).
If you know which Expo SDK version you are going to use, you can run
$ turtle setup:android --sdk-version &lt;SDK-VERSION&gt;
This will take some time:
$ turtle setup:android --sdk-version 44.0.5
Jan 20 20:22:45 turtle[61127] INFO:  Downloading Android SDK
  platform: &quot;android&quot;
  buildPhase: &quot;setting up environment&quot;
downloading [&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;] 98% 0.2s
...
Jan 20 20:26:56 turtle[61127] INFO:  shell app for SDK 44.0.5 doesn&#39;t exist, downloading...
  platform: &quot;android&quot;
  buildPhase: &quot;setting up environment&quot;
downloading [&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; ] 95% 0.5sJan 20 20:27:08 turtle[61127] INFO:  shell app has been downloaded
  platform: &quot;android&quot;
  buildPhase: &quot;setting up environment&quot;
...
Jan 20 20:29:51 turtle[61127] INFO:  dependencies installed!
  platform: &quot;android&quot;
  buildPhase: &quot;setting up environment&quot;
Jan 20 20:29:51 turtle[61127] INFO:  it&#39;s all set!
  platform: &quot;android&quot;
  buildPhase: &quot;setting up environment&quot;
In the meantime, you can move on to the next section.
4.2. Create Keystore
Just like any other Android app, this app must be signed with some security certificates. In Android-land, as far as I understand, it‚Äôs called a keystore. The instructions to create such a keystore file are available on the Android Developers documentation.
Basically, just create a dummy Android project with Android Studio, and then go to Build &gt; Generate Signed Bundle &#x2F; APK.... Choose APK and press Next. The UI will ask you which app you want to sign, and your dummy app should be pre-selected. On the same screen, press on the button Create new...; just fill the form and you‚Äôre good to go.
Alternatively, if you have keytool CLI utility available on your system (you can check that by trying keytool --help in your terminal), you can generate a keystore file with the following command
$ keytool -genkeypair -v -keystore keystore.jks -alias keyalias -keyalg RSA -keysize 2048 -validity 9125
Enter keystore password:
Re-enter new password:
What is your first and last name?
  [Unknown]:
What is the name of your organizational unit?
  [Unknown]:
What is the name of your organization?
  [Unknown]:
What is the name of your City or Locality?
  [Unknown]:
What is the name of your State or Province?
  [Unknown]:
What is the two-letter country code for this unit?
  [Unknown]:
Is CN&#x3D;Unknown, OU&#x3D;Unknown, O&#x3D;Unknown, L&#x3D;Unknown, ST&#x3D;Unknown, C&#x3D;Unknown correct?
  [no]:  yes

Generating 2,048 bit RSA key pair and self-signed certificate (SHA256withRSA) with a validity of 9,125 days
	for: CN&#x3D;Unknown, OU&#x3D;Unknown, O&#x3D;Unknown, L&#x3D;Unknown, ST&#x3D;Unknown, C&#x3D;Unknown
Enter key password for &lt;keyalias&gt;
	(RETURN if same as keystore password):
Re-enter new password:
[Storing keystore.jks]

Warning:
The JKS keystore uses a proprietary format. It is recommended to migrate to PKCS12 which is an industry standard format using &quot;keytool -importkeystore -srckeystore keystore.jks -destkeystore keystore.jks -deststoretype pkcs12&quot;.
As a TL;DR, you can just download a dummy certificate on the accompanying repository under should-be-private&#x2F;keystore.jks, for testing purposes only. The keystore file is hugely important if you ever plan to submit your app to Google Play store: it‚Äôs the only way to assert you‚Äôre the rightful owner to provide new updates to your app.
File: keystore.jks
keystorepassword
keyalias
keypassword
4.3. Build APK
Make sure that you are serving the dist directory on http:&#x2F;&#x2F;127.0.0.1:8000 as explained above in Run a local server. Assuming you are using bash as your shell, from the root of your project, run:
EXPO_ANDROID_KEYSTORE_PASSWORD&#x3D;&quot;keystorepassword&quot; \
EXPO_ANDROID_KEY_PASSWORD&#x3D;&quot;keypassword&quot; \
turtle build:android \
  --type apk \
  --keystore-path .&#x2F;should-be-private&#x2F;keystore.jks \
  --keystore-alias &quot;keyalias&quot; \
  --allow-non-https-public-url \
  --public-url http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;android-index.json
Note that you need the flag --public-url to point to http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;android-index.json. In addition, it is also necessary to use the --type apk flag to produce an APK file since version 0.8.0 of turtle-cli.
The build may take some time:
Jan 20 20:38:17 turtle[61719] INFO:  Using manifest: {
  &quot;name&quot;: &quot;ExampleApplication&quot;,
  &quot;slug&quot;: &quot;ExampleApplication&quot;,
  &quot;version&quot;: &quot;1.0.0&quot;,
  &quot;orientation&quot;: &quot;portrait&quot;,
  &quot;icon&quot;: &quot;.&#x2F;assets&#x2F;icon.png&quot;,
...
Jan 20 20:38:51 turtle[61719] INFO:  Starting a Gradle Daemon (subsequent builds will be faster)
  platform: &quot;android&quot;
  buildPhase: &quot;running gradle&quot;
  source: &quot;stdout&quot;
...
Once it finishes, you should see this output in your terminal:
Jan 20 20:43:19 turtle[61719] INFO:  copied build to ~&#x2F;expo-apps&#x2F;@anonymous__ExampleApplication-7f15208a56304617a200538cacd2e50e-signed.apk
  platform: &quot;android&quot;
  buildPhase: &quot;copying build artifact&quot;
This message gives you the location of your built .apk file. You can now move on to the Distribute and install section below if you are not interested in creating an .ipa file for iOS.
Note: if the build fails because of some Gradle error, like Could not resolve com.theartofdev.edmodo:android-image-cropper:2.8.0, make sure to open Android Studio and update the Android SDK and SDK Build-Tools. This should fix it.
5. Create IPA file ‚Äì iOS
First, verify that your local server is running, e.g.
$ curl http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;ios-index.json
{&quot;name&quot;:&quot;ExampleApplication&quot;,&quot;slug&quot;:&quot;ExampleApplication&quot;,&quot;version&quot;:&quot;1.0.0&quot;,&quot;orientation&quot;:&quot;portrait&quot;,&quot;icon&quot;:&quot;.&#x2F;assets&#x2F;icon.png&quot;,&quot;splash&quot;:{&quot;image&quot;:&quot;.&#x2F;assets&#x2F;splash.png&quot;,&quot;resizeMode&quot;:&quot;contain&quot;,&quot;backgroundColor&quot;:&quot;#ffffff&quot;,&quot;imageUrl&quot;:&quot;http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;assets&#x2F;201a91bd1740bb1d6a1dbad049310724&quot;...
5.1. Prerequisites
For Turtle CLI to work correctly to create an .ipa file for iOS, you need to make sure your system is macOS and that the following dependencies are installed:
Xcode (version 13.2.1 or newer)
fastlane
Note: make sure that you have run Xcode at least once and that you have agreed to the license agreements.
For more details, see Expo‚Äôs documentation.
If you know which Expo SDK version you are going to use, you can run
$ turtle setup:ios --sdk-version &lt;SDK-VERSION&gt;
If it errors out, saying that you don‚Äôt have the right version of fastlane, try re-installing fastlane (guide). The version used in this article is fastlane 2.200.0.
This will take some time:
$ turtle setup:ios --sdk-version 44.0.5
Jan 20 21:18:03 turtle[48488] INFO:  shell app for SDK 44.0.5 doesn&#39;t exist, downloading...
  platform: &quot;ios&quot;
  buildPhase: &quot;setting up environment&quot;
downloading [                    ] 1% 8514.8s
...
...
Jan 20 21:24:58 turtle[48488] INFO:  it&#39;s all set!
  platform: &quot;ios&quot;
  buildPhase: &quot;setting up environment&quot;
In the meantime, you can move on to the next section.
5.2. Create Signing keys
This assumes you have an Apple Developer Account, which is a paid account.
To create your distribution certificate file, or .p12 file, you can follow this guide.
You will also need your Apple Team ID and a Provisioning Profile that you can generate through Xcode as well. This other guide covers in greater lengths what all these cerficates are for and how to obtain them.

Note that the provisioning profile expires in 6 days in my case, since I do not have an Apple Developer paid account.
Sadly, it is not possible to share example files.
5.3. Build IPA
Make sure that you are serving the dist directory on http:&#x2F;&#x2F;127.0.0.1:8000 as explained Run a local server. Assuming you are using bash as your shell, from the root of your project, run:
EXPO_IOS_DIST_P12_PASSWORD&#x3D;&quot;&lt;PASSWORD HERE&gt;&quot; \
turtle build:ios \
  --team-id YOUR_TEAM_ID \
  --dist-p12-path &#x2F;path&#x2F;to&#x2F;your&#x2F;dist&#x2F;cert.p12 \
  --provisioning-profile-path &#x2F;path&#x2F;to&#x2F;your&#x2F;provisioning&#x2F;profile.mobileprovision \
  --allow-non-https-public-url \
  --public-url http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;ios-index.json
Note that you need the flag --public-url to point to http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;ios-index.json.
Once the build finishes successfully, you should get the path to your .ipa file.
6. Distribute and install
6.1. on Android
Take your .apk and share it through some Google Drive link or other medium of your choice.
If you download this .apk file through an Android device, it should offer you to install the application on the device.
Trick: if the URL is really not friendly to type, and for whatever reason you have to type it manually, use a QR Code generator (e.g. http:&#x2F;&#x2F;www.barcode-generator.org&#x2F;) and your device‚Äôs camera to simplify your life!
Alternatively, if you connect an Android device to your computer, you should be able to run:
$ adb devices
emulator-5554	device
to list all your connected Android devices and emulators. (In my case, only the emulator is ‚Äúconnected‚Äù.)
It is then possible to install the .apk file by running:
$ adb -s emulator-5554 install ~&#x2F;expo-apps&#x2F;@anonymous__ExampleApplication-7f15208a56304617a200538cacd2e50e-signed.apk
Performing Streamed Install
Success

6.2. on iOS
Caveat: I could not fully test this section, so my apologies if this does not work as intended.
Since you should have Xcode, the most promising solution is in this guide. It also mentions other ways to install the .ipa file.
That‚Äôs it for now, thank you for reading this far. You will find below the resources mentioned in this article.
If you have any questions or comments, please drop me a line on Twitter. I shall reply as soon as possible.
Stay tuned for more.
Resources
Expo: https:&#x2F;&#x2F;expo.dev
Turtle CLI: https:&#x2F;&#x2F;github.com&#x2F;expo&#x2F;turtle#readme
Expo‚Äôs guide to Building Standalone apps: https:&#x2F;&#x2F;docs.expo.dev&#x2F;classic&#x2F;building-standalone-apps&#x2F;
Configuring app.json: https:&#x2F;&#x2F;docs.expo.dev&#x2F;workflow&#x2F;configuration&#x2F;
Expo docs to configure CI with Turtle CLI: https:&#x2F;&#x2F;docs.expo.dev&#x2F;classic&#x2F;turtle-cli&#x2F;
Expo docs to host application on your own servers: https:&#x2F;&#x2F;docs.expo.dev&#x2F;distribution&#x2F;hosting-your-app&#x2F;
How to create a keystore for Android: https:&#x2F;&#x2F;developer.android.com&#x2F;studio&#x2F;publish&#x2F;app-signing#generate-key
Supporting GitHub repository: https:&#x2F;&#x2F;github.com&#x2F;RobinCsl&#x2F;build-standalone-expo-app&#x2F;*
#### [Optimize your img tags with Eleventy Image and WebC](https:&#x2F;&#x2F;www.robincussol.com&#x2F;optimize-your-img-tags-with-eleventy-image-and-webc&#x2F;) 
*I am very excited about WebC and couldn‚Äôt wait to try out the corresponding Eleventy plugin.
The first use-case I had in mind was to use Eleventy Image for the native HTML img tag, that can be generated from Markdown and without shortcode. I had done this before, for my unpublished blog rewrite that‚Äôs been waiting to be released for ever now, through hooking up Eleventy Image into a markdown-it plugin. It wasn‚Äôt pretty as markdown-it plugins are pretty alien to me.
But now, this can be done ‚Äúnatively‚Äù, √†-la-Cloudflare Workers for your native HTML elements!
UPDATE (04&#x2F;11&#x2F;2022): After sharing this article on Twitter, Zach Leatherman pointed out there should be an easier solution. It didn‚Äôt work as expected at first, which put me on a journey to fix the underlying issue in @11ty&#x2F;webc. I‚Äôm very pleased to share that my first contribution to the project was accepted and landed in v0.6.0. As a result, the content of the last section was updated to remove the dirty data file hack with _data&#x2F;Image.js: your image optimization logic can now truly live in a single file.
The documentation for WebC mentioned this use-case exactly, in the shape of this innocent puzzle:

‚ÄúFree idea: use the Eleventy Image plugin to return optimized markup‚Äù
So it should be easy, right?
Remember this lad?
I have discovered a truly remarkable proof of this theorem which this margin is too small to contain.
Pierre de Fermat, cca. 1637
No need to wait 3 centuries for the answer this time, because it was ultimately not so hard‚Ä¶ But I did struggle and wrestle with it for a few hours :D
Anyway, hope that can be useful to someone.
If you want to see the finished implementation, you can get it on GitHub: RobinCsl&#x2F;11ty-webc-img-demo.
Set up a WebC-powered Eleventy project
or take a shortcut by cloning this repo and going to the 01-initial folder.
Initialise the project
Let‚Äôs start with an empty folder and add a basic package.json file:
mkdir 11ty-webc-img
cd 11ty-webc-img
npm init -y
We need to install the latest canary release (2.0.0-canary.16 at the time of writing) of Eleventy as well as the WebC plugin:
 npm install @11ty&#x2F;eleventy@2.0.0-canary.16 @11ty&#x2F;eleventy-plugin-webc
Configure Eleventy
We will now configure Eleventy to use the WebC plugin by creating a .eleventy.js file with the following content:
const webc &#x3D; require(&quot;@11ty&#x2F;eleventy-plugin-webc&quot;);

module.exports &#x3D; function(eleventyConfig) {
	eleventyConfig.addPlugin(webc, {
		components: &quot;_includes&#x2F;webc&#x2F;*.webc&quot;
	});
}

In particular, components in the _includes&#x2F;webc folder will be available in the global scope, no need to import them explicitly!
Scaffold a minimal project
To finish our setup, we create a layout file and a simple WebC component which we will use in a basic page, to make sure our setup is working correctly.
We create the layout file under _includes&#x2F;layouts&#x2F;base.webc. It is a simple HTML template with the @html&#x3D;&quot;content&quot;  WebC directive set on the body tag. (See my-layout.webc in the docs)
&lt;!doctype html&gt;
&lt;html lang&#x3D;&quot;en&quot;&gt;
	&lt;head&gt;
		&lt;meta charset&#x3D;&quot;utf-8&quot;&gt;
		&lt;title&gt;Eleventy Images + WebC rocks!&lt;&#x2F;title&gt;
	&lt;&#x2F;head&gt;
	&lt;body @html&#x3D;&quot;content&quot;&gt;&lt;&#x2F;body&gt;
&lt;&#x2F;html&gt;
We now create a simple WebC component and write the following content, taken from the promising website 11ty.webc.fun, in _includes&#x2F;webc&#x2F;site-footer.webc :
&lt;footer&gt;
  &lt;p&gt;&amp;copy; 2022 Yours Truly.&lt;&#x2F;p&gt;
&lt;&#x2F;footer&gt;
Finally, we create our basic page at the root of the project in index.webc:
---
layout: layouts&#x2F;base.webc
---

Fun with WebC

&lt;site-footer&gt;&lt;&#x2F;site-footer&gt;
If all went according to plan, we should now be able to run
npx @11ty&#x2F;eleventy --serve
in the terminal and see the following output in our browser at http:&#x2F;&#x2F;localhost:8080:

Create an img.webc component
or check the code on GitHub in the 02-img folder if you want to see the code right away.
In this section, we will create our img.webc override for the native img HTML tag and use Eleventy Image within it.
As a starting point, we will use the example from the documentation from which the screenshot at the start of this post is taken. In a new file _includes&#x2F;webc&#x2F;img.webc, add the following:
&lt;script webc:type&#x3D;&quot;render&quot; webc:is&#x3D;&quot;template&quot;&gt;
function() {
	if(!this.alt) {
		throw new Error(&quot;[img.webc] the alt text is missing, no fun&quot;);
	}
	return &#x60;&lt;img src&#x3D;&quot;${this.src}&quot; alt&#x3D;&quot;${this.alt}&quot;&gt;&#x60;;
}
&lt;&#x2F;script&gt;
This essentially verifies at build-time that all your images have a non-empty alt text, neat!
Let‚Äôs add a ‚Äúbroken‚Äù image to our index page, in index.webc, to verify that this works correctly:
---
layout: layouts&#x2F;base.webc
---

Fun with WebC

&lt;img src&#x3D;&quot;https:&#x2F;&#x2F;images.unsplash.com&#x2F;photo-1627224286457-923944e5b159?auto&#x3D;format&amp;fit&#x3D;crop&amp;w&#x3D;387&amp;q&#x3D;80&quot;&gt;

&lt;site-footer&gt;&lt;&#x2F;site-footer&gt;
And indeed, running npx @11ty&#x2F;eleventy --serve yields an expected error:
$ npx @11ty&#x2F;eleventy --serve
[11ty] Problem writing Eleventy templates: (more in DEBUG output)
[11ty] 1. Having trouble rendering webc template .&#x2F;index.webc (via TemplateContentRenderError)
[11ty] 2. [img.webc] the alt text is missing, no fun (via Error)
Add an alt text (‚Äúpossum hanging from a palm leaf‚Äù should work) and try again. Oh no! Another error:
$ npx @11ty&#x2F;eleventy --serve  
[11ty] Problem writing Eleventy templates: (more in DEBUG output)
[11ty] 1. Having trouble rendering webc template .&#x2F;index.webc (via TemplateContentRenderError)
[11ty] 2. Circular dependency error: You cannot use &lt;img&gt; inside the definition for .&#x2F;_includes&#x2F;webc&#x2F;img.webc (via Error)
That makes sense, when you think about it! All our .webc files are processed by WebC, so if we return an img tag in a img.webc component, the compiler would work indefinitely to get to the bottom of it, because it‚Äôs turtles img all the way down!
Luckily for us, we can let WebC know when its job is done through the webc:raw attribute:
Use webc:raw to opt-out of WebC template processing for all child content of the current node. Notably, attributes on the current node will be processed.
Let‚Äôs fix it in _includes&#x2F;webc&#x2F;img.webc:
  &lt;script webc:type&#x3D;&quot;render&quot; webc:is&#x3D;&quot;template&quot;&gt;
  function() {
	  if(!this.alt) {
	  	throw new Error(&quot;[img.webc] the alt text is missing, no fun&quot;);
	  }
-	  return &#x60;&lt;img src&#x3D;&quot;${this.src}&quot; alt&#x3D;&quot;${this.alt}&quot;&gt;&#x60;;
+	  return &#x60;&lt;img webc:raw src&#x3D;&quot;${this.src}&quot; alt&#x3D;&quot;${this.alt}&quot;&gt;&#x60;;
  }
  &lt;&#x2F;script&gt;
It compiles now! üéâ
Here‚Äôs the expected output:

We have effectively augmented our img tag to verify at build time that alt text is present.
Let‚Äôs now add Eleventy Image to the party!
Optimize your HTML img with Eleventy Image
or check the code on GitHub in the 03-final folder if you want to see my solution.
Let‚Äôs first install Eleventy Image in our project:
npm install @11ty&#x2F;eleventy-img
We will more or less copy the example from the Eleventy Image docs in the Asynchronous Shortcode section, because our JavaScript render function can be async!
In the file _includes&#x2F;webc&#x2F;img.webc, let‚Äôs add the following:
  &lt;script webc:type&#x3D;&quot;render&quot; webc:is&#x3D;&quot;template&quot;&gt;
-   function() {
-      if(!this.alt) {
-          throw new Error(&quot;[img.webc] the alt text is missing, no fun&quot;);
-      }
-      return &#x60;&lt;img webc:raw src&#x3D;&quot;${this.src}&quot; alt&#x3D;&quot;${this.alt}&quot;&gt;&#x60;;
+    const Image &#x3D; require(&quot;@11ty&#x2F;eleventy-img&quot;);
+    module.exports &#x3D; async function() {
+      let metadata &#x3D; await Image(this.src, {
+        widths: [300],
+        formats: [&quot;avif&quot;, &quot;jpeg&quot;],
+        outputDir: &quot;_site&#x2F;img&#x2F;&quot;,
+      });

+      let imageAttributes &#x3D; {
+        alt: this.alt,
+        sizes: &quot;100vw&quot;,
+        loading: &quot;lazy&quot;,
+        decoding: &quot;async&quot;,
+      };

+      &#x2F;&#x2F; You bet we throw an error on missing alt in &#x60;imageAttributes&#x60; (alt&#x3D;&quot;&quot; works okay)
+      return Image.generateHTML(metadata, imageAttributes);
  }
  &lt;&#x2F;script&gt;

Note that we harcoded the value for  sizes in the imageAttributes object, and prepended both src and alt by this to wire things up correctly. We also instruct the Image plugin to output optimized images in our _site&#x2F;img&#x2F; folder directly for them to be available when using the following markup:
&lt;img alt&#x3D;&quot;a lovely image&quot; src&#x3D;&quot;&#x2F;img&#x2F;hash-width.jpeg&quot;&gt;
Let‚Äôs run npx @11ty&#x2F;eleventy --serve once more:
$  npx @11ty&#x2F;eleventy --serve
[11ty] Problem writing Eleventy templates: (more in DEBUG output)
[11ty] 1. Having trouble rendering webc template .&#x2F;index.webc (via TemplateContentRenderError)
[11ty] 2. Circular dependency error: You cannot use &lt;img&gt; inside the definition for .&#x2F;_includes&#x2F;webc&#x2F;img.webc (via Error)
That error sounds familiar, right?
We need to tell WebC to ignore img tags generated by Eleventy Image, and it‚Äôs as simple as adding &quot;webc:raw&quot;: true to the imageAttributes object:
  &lt;script webc:type&#x3D;&quot;render&quot; webc:is&#x3D;&quot;template&quot;&gt;
  const Image &#x3D; require(&quot;@11ty&#x2F;eleventy-img&quot;);
  module.exports &#x3D; async function() {
    let metadata &#x3D; await Image(this.src, {
      widths: [300],
      formats: [&quot;avif&quot;, &quot;jpeg&quot;],
      outputDir: &quot;_site&#x2F;img&#x2F;&quot;,
    });
  
    let imageAttributes &#x3D; {
      alt: this.alt,
      sizes: &quot;100vw&quot;,
      loading: &quot;lazy&quot;,
      decoding: &quot;async&quot;,
+     &quot;webc:raw&quot;: true,
    };
  
    &#x2F;&#x2F; You bet we throw an error on missing alt in &#x60;imageAttributes&#x60; (alt&#x3D;&quot;&quot; works okay)
    return Image.generateHTML(metadata, imageAttributes);
  }
  &lt;&#x2F;script&gt;
And we‚Äôre done!! (Note how the image now aligns perfectly with localhost:8080 #IncontestableTruth)

with corresponding markup:
&lt;!doctype html&gt;
&lt;html lang&#x3D;&quot;en&quot;&gt;
&lt;head&gt;
        &lt;meta charset&#x3D;&quot;utf-8&quot;&gt;
        &lt;title&gt;Eleventy Images + WebC rocks!&lt;&#x2F;title&gt;
    &lt;&#x2F;head&gt;
    &lt;body&gt;Fun with WebC

&lt;picture&gt;&lt;source type&#x3D;&quot;image&#x2F;avif&quot; srcset&#x3D;&quot;&#x2F;img&#x2F;SwdsuTpRbT-300.avif 300w&quot;&gt;&lt;img alt&#x3D;&quot;possum hanging from a palm leaf&quot; loading&#x3D;&quot;lazy&quot; decoding&#x3D;&quot;async&quot; src&#x3D;&quot;&#x2F;img&#x2F;SwdsuTpRbT-300.jpeg&quot; width&#x3D;&quot;300&quot; height&#x3D;&quot;450&quot;&gt;&lt;&#x2F;picture&gt;


&lt;footer&gt;
  &lt;p&gt;¬© 2022 Yours Truly.&lt;&#x2F;p&gt;
&lt;&#x2F;footer&gt;

&lt;&#x2F;body&gt;
&lt;&#x2F;html&gt;
Parting words
I am so excited to explore further the possibilities of using WebC to augment other native HTML elements.
This article only scratches the surface when it comes to the img tag. You could pass props down from the markup to Eleventy Image and control the behaviour of the image optimization. But we can now augment our native img tag without much hassle as it‚Äôs all in one file.
It even works with Markdown images (and yields the cutest webpage ever):
  ---
  layout: layouts&#x2F;base.webc
  ---
  
  Fun with WebC
  
  &lt;img alt&#x3D;&quot;possum hanging from a palm leaf&quot; src&#x3D;&quot;https:&#x2F;&#x2F;images.unsplash.com&#x2F;photo-1627224286457-923944e5b159?auto&#x3D;format&amp;fit&#x3D;crop&amp;w&#x3D;387&amp;q&#x3D;80&quot;&gt;
  
+  &lt;template webc:type&#x3D;&quot;11ty&quot; 11ty:type&#x3D;&quot;md&quot;&gt;
+  
+   ![&#39;close-up of a baby possum among ferns&#39;](https:&#x2F;&#x2F;images.pexels.com&#x2F;photos&#x2F;13960994&#x2F;pexels-photo-13960994.jpeg)
+  
+  &lt;&#x2F;template&gt;
  
  &lt;site-footer&gt;&lt;&#x2F;site-footer&gt;
  

All the more reasons to optimize your images now!
Find the code supporting this article on the RobinCsl&#x2F;11ty-webc-img-demo repository.*
#### [Year in Review: 2021](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2021&#x2F;) 
*We‚Äôre already at the start of February 2022, but who says retrospectives need to be done on January 1st?! A lot of things happened in 2021, both personally and professionally. Time to reflect and remember.
Personal üë∂üíçüìÑüìÉüìëüìú
This first part is the personal stuff, so if you don‚Äôt care about it, you can skip to the professional stuff instead. And if you don‚Äôt care about that too, why are you here? üòÇ
Welcome, L√©onard!
In January of 2021 came the great news that we were expecting a baby and a few months later, my son L√©onard came to this world! It‚Äôs been a few months now and it‚Äôs insane how much this event changed our lives.
It‚Äôs quite amazing to witness a human being‚Äôs awakening to the world, I do feel privileged.
Of course, it‚Äôs not just rainbows and unicorns.
Sleeping as much as I want is now a distant memory&#x2F;dream, though I‚Äôve been surprised that it‚Äôs actually quite possible to operate without the amount of sleep I used to get.
Having free time for side projects and writing almost vanished (and usually eats up time when I should sleep instead, while it‚Äôs allowed by baby-boss). I don‚Äôt know how other parents manage but time just flies by.
One thing‚Äôs for sure, L√©onard makes sure I keep fit and exercise regularly (a promise I made myself at the beginning of last year, right):
it‚Äôs quite a normal day when I need to go up and down the 4 floors of the block of flats we live in (and when it‚Äôs at night, I have this game where I switch the lights on and go up and down within the 3 minutes they‚Äôre programmed to stay on; naturally, after my 4th round trip, I usually do the last flight of stairs in the dark üòÖüòÆ‚Äçüí®).
it‚Äôs also quite a normal day when I need to carry him in my arms for 10- to 20-minute stretches, while doing squats, at least 2 or 3 times.
Coach L√©onard can ask for these drills at any time of the day (and night‚Ä¶), he says it‚Äôs for my own good. My knees and hips and back and arms tend to disagree.
Paperwork, paperwork, paperwork
In 2021, I‚Äôve had time to think so many times if the amount of paperwork we‚Äôre doomed to go through is some sort of devilish scheme to keep people busy on the boring stuff. It definitely does not help when you‚Äôre an expat.
If you had told me having a baby would generate so much paperwork chores, I probably would not have believed you. The story goes that we wanted to do an early recognition of fatherhood for me to be officially recognised as the father of my child to be.
In France, as a French person, this is a 5-minute visit to my local townhall, easy-peasy.
In Czechia, as a foreigner, this would have required tons of documents that also needed translating by a certified translator (aka costs some money).
Since we were engaged, and you‚Äôre officially recognised as the father when having a baby as a married couple, we thought we might as well go through paperwork hell to get married.
It did not disappoint.
Our child was due some time in the middle of September, so we had almost the entire year to get married, should be easy, right.
Being so diligent, we got in touch with the French embassy to understand what we need to do to get married in April:
weddings at the embassy are quite a rare thing, you should get married through the local authorities
getting married in Prague is like getting married in Las Vegas (say what?)
Only to realise at the end of June that:
babies aren‚Äôt always born around the due date
it‚Äôs already the end of June
Let‚Äôs just say that we managed to be on time paperwork-wise for our wedding at the beginning of August (ever heard of the necessary 2-week public display of your intent on getting married, during which somebody has the right to oppose it, to get the paper allowing a French person to marry‚Ä¶?), but the ‚Äúgetting married like in Las Vegas‚Äù was lost on us.
Professionally
Promo
In January last year, I got promoted to Staff Engineer at Kiwi.com. Pretty crazy to me to think that I started working in the industry in September 2017. Even though titles only mean so much, it‚Äôs still a nice recognition that I bring value to the company.
Pair Documenting
I definitely learnt a lot about infrastructure and Kubernetes, which might seem overkill for a frontend platformer, but there was a void to fill when my ex-colleague Adam Jani≈° left, so I put on my newbie hat and pair-documented Adam‚Äôs knowledge throughout his notice period. I still refer or point people to that document quite regularly, it‚Äôs an investment that keeps on giving after all these months!
This was also the first time I tried to add original schematics&#x2F;pictures and Excalidraw made it super fun and easy!
Robin‚Äôs Gazette
My newsletter, Robin‚Äôs Gazette, kept going quite well! It turned one year old on December, 9th! üéÇ
In 2021, I published 25 issues (784 emails in total!), and went from 9 subscribers to 49 at the end of the year!
Given the quite low volume of subscribers, my average open rate and click rate are pretty okay (though they are ‚Äúall-time‚Äù performance metrics):
70.35% open rate,
24.38% click rate.
Even though it‚Äôs always some amount of work, I deem it worthy of my time as I get to practice writing and I always learn something slightly more deeply than if I just scrolled Twitter or Hacker News. This continues my efforts from ‚Äúarchivist to creator‚Äù that I mentioned in my last retro.
Special mention to Shawn @swyx Wang for being so encouraging along the way!
My goal for this year is to continue on that path, though I do need to put some effort into advertising it better:
the subscribe form is hard to find on my website,
the content is short-lived and behind closed doors ‚Äì so I should repurpose it to an extent,
start marketing it more (instead of the infrequent tweets I‚Äôve tried at some point).
One small change for this year: I now send the Gazette every other Friday instead of every other Wednesday.
Some of the feedback I received üòä
‚ÄúSuch a great newsletter this week Robin, amazing job!‚Äù
‚ÄúStill enjoying the newsletter!‚Äù
Blog
The blog was a bit quiet last year, I only published 3 posts and refreshed my most read article about building APK files locally for Expo projects (it recently crossed 20K views in its lifetime! üéâ).
They were:
Python Dependencies for JavaScript Developers
How to Download a Brain with Pair Documenting (already mentioned above)
Year in Review: 2020
I really hope to start writing more again on the blog because the SEO game takes a long time for Google to start recommending your stuff: I saw more traffic to my How to Test Your ESLint Config and Get your Own Sentry Playground articles, and they were written in September 2020!
Started working on a course
In the last retro, I announced that I planned to write a book. That did not happen‚Ä¶ üòÖ
Instead, I started working on a video course which essentially replicates the now defunct Margarita project from scratch (which was the subject of this article on my blog), showcasing how to build cross-platform web and native mobile apps through React Native and React Native Web.
This was the occasion to spend some time weeks watching all the microphone reviews on YouTube, all the Audacity and Obs Studio tutorials for sound production, to ultimately produce a half-finished tutorial on YouTube (the best 33 seconds of your life, trust me).
Source



Ever since my son was born, I‚Äôve had little time to focus for longer than 5-minute stretches outside of work, so this project has lost steam right now. I hope I‚Äôll manage to finish it in the first semester!
A look back and forward
Revisiting some of my plans for 2021 and making some for 2022.
Family
As much as I would love to work on side-projects and such, my family comes first, and I want to keep it that way. I‚Äôm excited to continue discovering what my next workouts will be, courtesy of Coach L√©onard! (Seriously, I‚Äôve got some arms now! üí™)
I cannot wait for my son to meet all his grand-parents, aunts and uncles in France later this year!
Nehovor√≠m pliynule po slovensky
aka I don‚Äôt speak Slovak fluently.
One of my goals was to make sure I would be able to speak to all my wedding guests in their preferred language (amongst French, English and Slovak). Because of the above (and COVID not helping‚Ä¶), the guest list was actually pretty small and my mastery of Slovak would not be entirely necessary to do well on my goal. So I guess I will learn better alongside my son this year whilst we wait for the big party?
Almost no SAD this past year
Come December, I usually feel pretty burnt out and in dire need of vacation to recharge. Somehow, in December 2021, I did not feel like that at all.
My new family life provided some amount of distractions from work. Even though that increased my context switching throughout the days and the nights were not as restful, it somehow created some distance between work and me. Or maybe because living with a newborn forces you to live in the moment, one day at a time‚Ä¶ üòÖ
Writing
Less paperwork, more blog posts. ü§û
Keep the newsletter going, and make it better, faster, stronger!
Improve my note taking system, which is a bit chaotic and not really systematic at the moment.
Learning Rust
In 2021, I started dabbling with Rust, mostly through the really great WIP book from Luca Palmieri, Zero To Production In Rust. It assumed some knowledge so I sometimes struggled had fun filling in the gaps.
Given where the JS ecosystem is going in terms of tooling (oh yeah, in 2021 I started this Awesome List of JavaScript Tooling Not Written In JavaScript on GitHub ‚Äì 667 stars so far!), I think it‚Äôs important to explore beyond the confines of JavaScript&#x2F;TypeScript. So I‚Äôd like to spend more time with Rust this coming year!
Lots of things to be grateful for last year and lots to look forward to this year. C‚Äôest parti !*
#### [Python Dependencies for JavaScript Developers](https:&#x2F;&#x2F;www.robincussol.com&#x2F;python-dependencies-for-javascript-developers&#x2F;) 
*Recently, I needed to update an old Python codebase which had not been touched in 3 years! Of course, the dependencies were so outdated that the Dockerfile of the project wouldn‚Äôt build. My JavaScript knowledge did not help me much:
how could I do a yarn upgrade-interactive --latest to update dependencies?
where‚Äôs the dependency lockfile?
why do we need to compile C-libraries for Python dependencies?
Luckily for me, my colleague Ondrej patiently explained how to approach these questions.
Using a virtual environment
TL;DR: pip installs packages globally unless we activate a virtual environment.
In Python, the default package manager is call pip and it installs packages from the Python Package Index, shortened to Pypi. The equivalent in JavaScript land would be npm and npmjs.com.
By default, pip installs packages system-wide. This contrasts with the need to pass a --global flag to npm.
To remedy that, we can use a local Python environment (a bit like having our node_modules folder in a JavaScript project). The following command will create a virtual environment in a venv folder in our current directory:
# Create the venv folder container the virtual environment
$ python3 -m venv venv
To make sure pip knows it should install packages in this virtual environment, we must activate it. Depending on your shell, you should source the appropriate activate file in venv&#x2F;bin:
activate, for Bash and ZSH,
activate.fish, for Fish Shell,
activate.csh, for csh
Activate.ps1, for PowerShell.
In my case, I will source the one for ZSH:
$ source venv&#x2F;bin&#x2F;activate
Now, pip install will install packages in the local folder instead of targeting the global scope. My ‚ÄúPython node_modules folder‚Äù is venv&#x2F;lib&#x2F;python3.8&#x2F;site-packages&#x2F;.
Dependencies in Python
TL;DR: use pip-compile to generate a lockfile and pip-sync to install dependencies from that lockfile
To deal with dependencies, we must install the pip-tools package in our virtual environment:
pip install pip-tools
This will allow us to use pip-compile and pip-sync later on.
Once that‚Äôs done, we could for example decide to start a Django project, ‚Äúthe web framework for perfectionists with deadlines‚Äù. The latest version of the package at the time of writing is 3.2.5. Let‚Äôs create our Python equivalent of a package.json file to express our project needs the Django package pinned to version 3.2.5:
# requirements.in
django&#x3D;&#x3D;3.2.5
Note: the better equivalent to a package.json would be a setup.py file, since it contains additional fields like the name of the local package, its version, etc. but we just want to write down the dependencies.
EDIT #1: it‚Äôs apparently not common practice to pin dependency versions in requirements.in, just in case you really need to (if there are breaking changes for example). Thanks for pointing it out, Ondrej.
To generate a corresponding lockfile of the transitive dependencies of Django, we can run the following command:
pip-compile --output-file requirements.txt requirements.in
This will create the following requirements.txt file:
#
# This file is autogenerated by pip-compile with python 3.8
# To update, run:
#
#    pip-compile --output-file&#x3D;requirements.txt requirements.in
#
asgiref&#x3D;&#x3D;3.4.1
    # via django
django&#x3D;&#x3D;3.2.5
    # via -r requirements.in
pytz&#x3D;&#x3D;2021.1
    # via django
sqlparse&#x3D;&#x3D;0.4.1
    # via django

Now that we have this file, we can finally retrieve and install the packages with the following command:
pip-sync
Note: if you try to run pip-sync without a requirements.txt, you will get the following error:
No requirement files given and no requirements.txt found in the current directory
It is indeed necessary to run pip-compile before.
Updating dependencies
Similar to npm oudated, we can list the outdated Python dependencies with
$ pip list --outdated
For example, after downgrading Django to 3.2.3 in my requirements.in, regenerating the lockfile with pip-compile, re-installing the dependencies with pip-sync, the command above will show:
Package    Version Latest Type
---------- ------- ------ -----
Django     3.2.3   3.2.5  wheel
setuptools 44.0.0  57.4.0 wheel
To update the dependency, I can change the version back to 3.2.5 in the requirements.in and go through the same dance:
$ pip-compile --output-file requirements.txt requirements.in
$ pip-sync
$ pip list --outdated
Package    Version Latest Type
---------- ------- ------ -----
setuptools 44.0.0  57.4.0 wheel
EDIT #2: a batteries-included equivalent to Yarn is called Poetry. Thanks for sharing, D√°niel!
Wheels and Eggs
You might wonder what this ‚Äúwheel‚Äù type is for the Django and setuptools packages.
They are still mysterious to me, but here‚Äôs my current understanding: in Python, some dependencies need to be built for specific architectures, as they might be written in Cython, ‚Äúa superset of the Python language that additionally supports calling C functions and declaring C types on variables and class attributes‚Äù. Wheels and Eggs are packaging formats for these.
In particular, it is not a good idea to use Alpine Docker images for Python projects as a lot of packages don‚Äôt have pre-built wheels for that architecture: your Docker build step will need to compile the packages from source, slowing down your entire process (and requiring you to install the necessary build tools for this compilation to happen!).
I don‚Äôt think there is a similar ‚Äúpackaging format‚Äù concept in JavaScript land. But we do have packages shipping prebuilt binaries for specific architectures, for example Sharp, the Node.js image processing package. (And we probably have enough issues with CommonJS vs ES Modules as it is‚Ä¶ :smile:)
Conclusions
All in all, a project needs to:
specify external dependencies and their desired version with semantic ranges
have a way to retrieve said dependencies
keep track of which versions were effectively installed to improve reproducibility.
Despite all these measures, the Docker file of an unmaintained 3-year old project could not build. Software rots!*
#### [How to Download a Brain with Pair Documenting](https:&#x2F;&#x2F;www.robincussol.com&#x2F;download-a-brain-with-pair-documenting&#x2F;) 
*When people leave the company, a lot of specific and ad hoc knowledge goes away with them. Unless there is already a strong documentation culture, there‚Äôs only so much that can be said and done during exit interviews to make up for it.
But this doesn‚Äôt have to be left to fate.
Throughout the month of January, my now ex-colleague Adam Jani≈° and I pair documented all his knowledge about the frontend infrastructure at Kiwi.com. We produced a 24 page document, fixed a few bugs and addressed some tech debt. More importantly, we had fun doing it!
Here‚Äôs how we approached it.
How to pair document
This is an attempt at formalising what we‚Äôve done, feel free to s&#x2F;Newbie&#x2F;Robin&#x2F;g and s&#x2F;Expert&#x2F;Adam&#x2F;g.
The Protagonists
You will need two proactive people: an Expert on the subject to document and a Newbie who is not too cursed with knowledge yet. Bonus points if they have not really worked together but always had good chemistry in their interactions.

The Newbie makes it easy on the Expert for this documentation effort to be a no-brainer:
they organize the pair documenting sessions;
they manage the agenda of the sessions;
they do most of the note-taking;
they digest the notes into documentation drafts in between sessions;
they stay curious and eager to learn more about the subjects, with questions always at the ready (this is hard to fake, so find an adequate Newbie for the task).

The Expert shows up at the sessions and generously shares their knowledge with the Newbie, answering patiently every question they may have. They review the documentation drafts to ensure the prose does not betray the original intent of the notes. Bonus points if they include the Newbie in solving similar problems described in the nascent documentation as they arise in the support channels of the company‚Äôs Slack: learning by doing is a great way to drive home the material and expose remaining ambiguities.

The First Session
The Newbie is in charge and explains how it‚Äôs going to work in the first pair-documenting session. That means going through what‚Äôs expected of each participant in this documentation effort as well as giving an overview of the actual process.
The objective of the first session is crucial: go as broad as possible and capture as many ideas of what needs documenting to form a backlog of topics to go over in the next sessions.
This can be achieved through asking questions like (more examples in this template):
what are things that you know about that very few people know?
what are the things that people always ping you about on Slack?
what tasks pile up when you‚Äôre on vacation?
Once the amount of things to document gets a bit clearer, see how many days are left before they leave and agree on a schedule to leave enough time for this task.
In Between Sessions
The Newbie transforms the raw notes into documentation drafts and gets the Expert to review them.
As more people in the company are aware of this documentation effort, they might have questions of their own; the Newbie adds these points to the agenda for the next session.
The Expert includes the Newbie in all discussions on Slack touching on the subject to maximize the learning opportunities and give the docs a trial by fire.
A Normal Session
In the first 5-10 minutes, the Newbie and the Expert go over unresolved comments in the doc draft, they review the agenda from the previous session and see if anything pops up to be further discussed or explained, and finally, they review the agenda for the current session and decide what to prioritize.
They then go over each point in the agenda: the Expert does most of the talking while the Newbie does most of the note-taking. The Newbie shares their screen for the document to be visible by both pair documentors. The Newbie may interrupt the Expert at any point with questions or with attempts at paraphrasing what the Expert just described. The Expert glances at the notes being taken once in a while to ensure they don‚Äôt contain mistakes from the get-go.
When the time is up, the Newbie and the Expert look at how much they covered from the agenda, move what hasn‚Äôt been covered to the next session, and agree on a date and time for that next session (if it‚Äôs not already regular).
Tools we used
A Calendar: to plan the sessions, to have automatic reminders for them, and to share the visio-conference link.


Custom recurrence with expiry date, Hangouts link, Notification not to miss it, Allow guests to modify event for better collaboration

A Google Document: to store the agenda, the notes and the first documentation drafts. Do make use of the outline on the left-hand side to navigate more easily once the document gets to a certain size. Do make use of comments to discuss and improve the notes and the draft. This is also a good place to involve other people from the company asynchronously. Make sure to put this document in a shared team drive for it to have the right permissions set by default.


Use the ‚ÄúStyles‚Äù dropdown to get this hierarchy

Here‚Äôs a free template Google document to get you started. Feel free to make a copy.
LucidChart: to draw a few diagrams because pictures are great (though you may want to check out Draw.io for a great free alternative).
Why Pair Documenting Works
What usually happens
Unless there is a strong documenting culture, (1) people never prioritize documentation over almost any other task, because it‚Äôs just not as fun as coding or as urgent as the next fire you need to put out. That means that when someone is about to leave, (2) there is an impossible amount of things to document that they don‚Äôt even know where to start. Because they are short on time, they end up drafting a lil‚Äô something and call it a day. (3) Anyway, we never needed that, why are they asking me to document that stuff, who‚Äôs gonna read it anyway?! (Note the use of two ‚Äúanyway‚Äù).
Clear intention through planning
Through planning the pair documenting sessions, we make sure documentation does get prioritized and give it the importance it deserves. If the Expert‚Äôs knowledge is that important and they by happenstance siloed it, it becomes urgent to share this knowledge more widely to deal with that critical bus factor. (Whether they leave or not is almost irrelevant in this case.)
Because we know when the Expert‚Äôs last working day is, it is easier to retro-plan the right number of sessions to cover the entire backlog established in the first session. This of course might need adjusting throughout the pair documentation effort.
More fun and better quality through collaboration
Planning is not enough if the Expert is still lost about what needs documenting and in which level of details. The nagging ‚Äúare they even gonna read it?‚Äù-type questions could well be the end of the documentation effort already: a well-crafted plan not well-executed.
With an accountability buddy, things turn around entirely.
It becomes really difficult to bail out of the plan because you know the other person is expecting you to show up at the session.
Because the Newbie is enthusiastic about the topic, the Expert is more generous in their contribution.
Because the Newbie asks questions and cares about details, the pair documentors tailor the documentation to the level of knowledge on the receiving end. The Expert knows this documentation will be useful. üòå
Aligned incentives
The Expert also knows that what they know should be documented somewhere, and because they like their colleagues, they don‚Äôt want their departure to create a mess. (Right?!)
The Newbie knows this knowledge is valuable, and about to disappear if they don‚Äôt take action. Besides, it‚Äôs something they‚Äôre curious and wanted to learn more about anyway.
The Expert gets to share their knowledge and teach what they know to someone who‚Äôs enthusiastic and interested in the topic; the Newbie gets time with the Expert to learn as much as possible from them.
Parting thoughts
I really enjoyed the pair documenting sessions with Adam and I think they should be made a regular practice, just like pair programming. It‚Äôs a great way to level up people while producing value beyond the scope of that collaboration.
At the same time, documentation is only valuable if it gets read and updated continuously. I‚Äôve been thinking about how to bring it closer to where people are already consuming content. For example, this could take the form of digests of parts of the documentation in the company‚Äôs Slack.
I‚Äôm not super familiar with mob programming, but I do wonder if mob documenting could be a thing to try too.

Acknowledgements:
Adam Jani≈° (@adam_janis) for trying out this pair-documenting idea before his departure :)
Emilia Vidal for her review and suggestions,
Shawn Wang (@swyx) for his review and ideas for the title and Open-Graph image,
Ron Au (@ronvoluted) for providing the font to go ahead with Shawn‚Äôs ideas,
Excalidraw to produce the visuals.*
#### [Year in Review: 2020](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2020&#x2F;) 
*2020, what a ride!
I cannot believe 2020 has already finally come to an end: with the lockdowns and quarantines, time simultaneously flew by and dragged on. A lot of my life was lived through a computer and the Internet. Time to reflect and remember.
Let‚Äôs start with some remarkable facts and events:
personally: - turned 30 in April, without even a beer to celebrate! (hint: the last bit is what‚Äôs remarkable) ‚ùåüç∫ - traveled only once to see my family in France üò¢ - got engaged in August üíç - spent the Christmas holidays alone, for the first time (I feel you, Kevin McCallister) üö∞
at work: - got a raise and earned a promotion üìà - wrote 3 posts on the Frontend Platform‚Äôs internal blog ‚úç
on my blog: - published 8 new posts üöÄ - updated 1 article ‚ôªÔ∏è - started a newsletter (already wrote 2 issues) üóû - broke the 10k unique visitor mark for Build Standalone Expo .apk and .ipa with Turtle CLI üéâ
miscellaneous: - joined 2 great online communities (Coding Career and Blogging For Devs) üôå - revamped a handful of desktop PCs and laptops (cannot believe I was about to get rid of my older laptop when it‚Äôs so smooth now!): most low-end&#x2F;mid computers are slow because of their stock hard drives (and limited RAM), a nice SSD and some RAM extension will do wonders! üíæ - jumped on the sourdough bread baking train (and learnt recently how sourdough baguettes are a lazy baker‚Äôs dream!) üá´üá∑ ü•ñ
Despite everyone calling 2020 their worst year ever, it did not seem so bad personally. Of course, I missed social life and being able to do ‚Äúnormal‚Äù things, but all things considered, I still learnt a lot this year.
Consumer to archivist
Spending so much time online means I absorbed vast amounts of data and after a while, it did not sit so well with me. I believed that I learn best by immersing myself in a continuous flow of information surrounding one topic. Of course, it‚Äôs worked for me so far, but the cost is that I get overwhelmed and it‚Äôs difficult to know when it‚Äôs enough.
Trying to change that brute-force approach to learning, I read here and there that taking notes would force me to slow down and choose what I consume more wisely. I obviously bought ‚ÄúHow to Take Smart Notes‚Äù by S√∂nke Ahrens (and only half-read it), came across the German word Zettlekasten and went on a wild goose chase for the best Personal Knowledge Management system, and read all the articles and watched all the YouTube videos about the subject. Old habits die hard. üòÖ
After using a few of them, I ended up settling with Joplin (which I had of course already set up prior to any of this) and have not looked back. It does not have backlinks so I‚Äôm deeply missing out on interconnected notes, as the hype goes, but it‚Äôs okay. My FOMO is in check for now. Joplin is an active open source project which is available on desktop as well as mobile devices. I retain full ownership (and responsibility) over my notes as Joplin integrates with different storage backends: I chose to use my self-hosted NextCloud instance.
In short:
just-in-case knowledge is expensive; prefer just-in-time knowledge
it‚Äôs easy to go on a wild goose chase only to realise you had everything already
note-taking does force me to slow down and helps to remember better
Archivist to creator
This story does not end here, dear reader. Accumulating notes about topics I‚Äôm interested in helps to slow down and be more intentional with what I consume. But it turns out knowledge without action is mostly useless.
Luckily, Daniel Vassalo wrote this influential tweet:
If you‚Äôre tempted by this, my advice to first-time creators is to start with a very small product: Something you can finish in 2 weeks and charge #### [Build Standalone Expo .apk and .ipa with Turtle CLI [deprecated]](https:&#x2F;&#x2F;www.robincussol.com&#x2F;build-standalone-expo-apk-ipa-with-turtle-cli&#x2F;) 
*This article was updated on February 7, 2023.
NOTE: As of Expo SDK 47, the following method does not work any more.
With the release of EAS builds, it is necessary to have Internet access to create standalone Expo apps locally; see Running builds on your own infrastructure on Expo docs.
You can still use the React Native way to build applications locally after generating necessary files with expo prebuild (see this GitHub comment on expo&#x2F;eas-cli).
This post will not receive further updates.
A great way to start writing React Native applications is to use Expo. You don‚Äôt even need to setup a development environment to get started thanks to Snack, an online React Native application editor. Your application is public by default. Sharing has never been that easy.

Brown turtle swimming underwater, Photo by Wexor Tmg on Unsplash
However, you would like to share an application exclusively with some people, not through an app store or any public channel. One possibility is to share the built application file, e.g. an .apk file for Android and an .ipa file for iOS.
Expo is so great a service (oh, and did I mention free?) that they offer you to publish your app on their servers and if you wanted to build these .apk and .ipa files, you could do so on their servers.
The flow looks like:
$ expo publish
$ expo build:&lt;PLATFORM&gt;
and you obtain a nice URL to the artifact created for you when the build finishes.
But, again, this is public. On a server you don‚Äôt control. (Although, if you made the same mistake as I did, a ticket to their support can delete any files you had wished to keep private. ü•á)
Luckily for you, Expo provide the tools they are using on their servers for free (did I mention they‚Äôre great!?). The build process relies on a CLI tool called turtle-cli. It is open-source and available on GitHub.
Let us go through an example of how to create your application file without resorting to Expo servers. That means you can keep an application private and also build your application while being offline.
The following instructions assume you have bash and Node.js available. In my experience, using the current LTS version of Node.js (version 16.13.2) works best.
Caveat: I could not complete the iOS instructions to the end since I do not have an Apple Developer paid account.
We will go through the following steps:
1. Turtle CLI
2. Create a dummy application
3. Publish Expo app on local server
4. Create APK file ‚Äì Android

4.1. Prerequisites
4.2. Create Keystore
4.3. Build APK
5. Create IPA file ‚Äì iOS

5.1. Prerequisites
5.2. Create Signing keys
5.3. Build IPA
6. Distribute and install

6.1. on Android
6.2. on iOS
Resources
A condensed version of these steps without much explanation or context is available on the accompanying GitHub repository.
1. Turtle CLI
To install Turtle CLI, run
$ npm install -g turtle-cli
This will make command turtle globally available on your system. To verify it was correctly installed, let‚Äôs print the version:
$ turtle -V
0.24.3
2. Create a dummy application
Let‚Äôs create a dummy application using Expo CLI. In your terminal, run
$ npx expo init ExampleApplication
It will ask you a few questions:
# Expo version 5.0.3
npx expo init ExampleApplication
? Choose a template: ‚Ä∫ - Use arrow-keys. Return to submit.
    ----- Managed workflow -----
‚ùØ   blank               a minimal app as clean as an empty canvas
    blank (TypeScript)  same as blank but with TypeScript configuration
    tabs (TypeScript)   several example screens and tabs using react-navigation and TypeScript
    ----- Bare workflow -----
    minimal             bare and minimal, just the essentials to get you started
The blank template is enough for us.
If you have yarn installed, Expo will use it by default to install dependencies. You can use the --npm flag in the init command if you‚Äôd prefer to use npm instead.
Once it‚Äôs done setting up your project, you should see the following output in the terminal:
‚úÖ Your project is ready!

To run your project, navigate to the directory and run one of the following yarn commands.

- cd ExampleApplication
- yarn start
Run the commands and let‚Äôs verify the generated boilerplate works in our emulators:


To finish setting up the dummy application, you need to configure the app.json file because some configuration keys must be specified to build a standalone app.
If you would like to know more about these standalone app specific configurations, check Expo‚Äôs documentation for iOS and for Android.
For this tutorial, it is only necessary to specify the keys &quot;bundleIdentifier&quot; under &quot;ios&quot;, and &quot;package&quot; under &quot;android&quot; in your app.json file:
...
    &quot;ios&quot;: {
      ...
      &quot;bundleIdentifier&quot;: &quot;com.example.exampleApplication&quot;,
      ...
    },
    &quot;android&quot;: {
      ...
      &quot;package&quot;: &quot;com.example.example_application&quot;,
      ...
    }
...
3. Publish Expo app on local server
Expo has this notion of app publishing: it allows you to share a link or QR code to Expo‚Äôs website and anyone can run your app through the Expo app on their devices.
Having your app published is also necessary for over-the-air (OTA) updates, allowing seamless updates to your application, and to publish your application (i.e. building your application files on Expo servers).
You would typically run
$ expo login -u $EXPO_USERNAME -p $EXPO_PASSWORD
$ expo publish
and your app would then be available at https:&#x2F;&#x2F;expo.dev&#x2F;&lt;EXPO_USERNAME&gt;&#x2F;&lt;APP_NAME&gt;.
To have your Expo app ‚Äúpublished‚Äù on your local server (and avoid public publishing on Expo servers), you will use a different command:
$ expo export --dev --public-url &lt;your-url-here&gt;
The --dev flag is necessary because you will use a non-https server to publish your Expo app. Note that this prevents you from using OTA updates.
Your server does not need to be running for this step, but you do need to know which local URL you are going to use in advance. This tuorial assumes you will run a local server at http:&#x2F;&#x2F;127.0.0.1:8000.
You can now export the app:
$ expo export --dev --public-url http:&#x2F;&#x2F;127.0.0.1:8000
...
Export was successful. Your exported files can be found in dist
This command will create a dist directory containing the iOS and Android JavaScript bundles and the different assets you are using.
dist
‚îú‚îÄ‚îÄ android-index.json
‚îú‚îÄ‚îÄ assets
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ 13685372945d816a2b474fc082fd9aaa
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ 140c53a7643ea949007aa9a282153849
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ ...
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ fdbedb7e67aa7c0ecad83d9c2fa4dfba
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ fdc01171a7a7ea76b187afcd162dee7d
‚îú‚îÄ‚îÄ bundles
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ android-a9defc54fb2ffdb7e6fdaf5b8d0be751.js
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ ios-a29c3e4ac97a2abdc5208fd4f06e7708.js
‚îî‚îÄ‚îÄ ios-index.json
You can now serve the dist directory on your web server, e.g.
$ npx http-server -p 8000 dist
Note: if for some reason you need to re-export your application (because you modified your app.json file since the last export, for instance), you must first remove the dist directory:
# assuming you are at the root of the project
$ rm -rf dist
$ expo export --dev --public-url http:&#x2F;&#x2F;127.0.0.1:8000
4. Create APK file ‚Äì Android
First, verify that your local server is running. For example, you should see a similar output:
$ curl http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;android-index.json
{&quot;name&quot;:&quot;ExampleApplication&quot;,&quot;slug&quot;:&quot;ExampleApplication&quot;,&quot;version&quot;:&quot;1.0.0&quot;,&quot;orientation&quot;:&quot;portrait&quot;,&quot;icon&quot;:&quot;.&#x2F;assets&#x2F;icon.png&quot;,&quot;splash&quot;:{&quot;image&quot;:&quot;.&#x2F;assets&#x2F;splash.png&quot;,&quot;resizeMode&quot;:&quot;contain&quot;,&quot;backgroundColor&quot;:&quot;#ffffff&quot;,&quot;imageUrl&quot;:&quot;http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;assets&#x2F;201a91bd1740bb1d6a1dbad049310724&quot;}...
4.1. Prerequisites
For Turtle CLI to work correctly to create an .apk file for Android, you need to make sure the following dependency is installed: Java Development Kit (version 8).
If you know which Expo SDK version you are going to use, you can run
$ turtle setup:android --sdk-version &lt;SDK-VERSION&gt;
This will take some time:
$ turtle setup:android --sdk-version 44.0.5
Jan 20 20:22:45 turtle[61127] INFO:  Downloading Android SDK
  platform: &quot;android&quot;
  buildPhase: &quot;setting up environment&quot;
downloading [&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;] 98% 0.2s
...
Jan 20 20:26:56 turtle[61127] INFO:  shell app for SDK 44.0.5 doesn&#39;t exist, downloading...
  platform: &quot;android&quot;
  buildPhase: &quot;setting up environment&quot;
downloading [&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; ] 95% 0.5sJan 20 20:27:08 turtle[61127] INFO:  shell app has been downloaded
  platform: &quot;android&quot;
  buildPhase: &quot;setting up environment&quot;
...
Jan 20 20:29:51 turtle[61127] INFO:  dependencies installed!
  platform: &quot;android&quot;
  buildPhase: &quot;setting up environment&quot;
Jan 20 20:29:51 turtle[61127] INFO:  it&#39;s all set!
  platform: &quot;android&quot;
  buildPhase: &quot;setting up environment&quot;
In the meantime, you can move on to the next section.
4.2. Create Keystore
Just like any other Android app, this app must be signed with some security certificates. In Android-land, as far as I understand, it‚Äôs called a keystore. The instructions to create such a keystore file are available on the Android Developers documentation.
Basically, just create a dummy Android project with Android Studio, and then go to Build &gt; Generate Signed Bundle &#x2F; APK.... Choose APK and press Next. The UI will ask you which app you want to sign, and your dummy app should be pre-selected. On the same screen, press on the button Create new...; just fill the form and you‚Äôre good to go.
Alternatively, if you have keytool CLI utility available on your system (you can check that by trying keytool --help in your terminal), you can generate a keystore file with the following command
$ keytool -genkeypair -v -keystore keystore.jks -alias keyalias -keyalg RSA -keysize 2048 -validity 9125
Enter keystore password:
Re-enter new password:
What is your first and last name?
  [Unknown]:
What is the name of your organizational unit?
  [Unknown]:
What is the name of your organization?
  [Unknown]:
What is the name of your City or Locality?
  [Unknown]:
What is the name of your State or Province?
  [Unknown]:
What is the two-letter country code for this unit?
  [Unknown]:
Is CN&#x3D;Unknown, OU&#x3D;Unknown, O&#x3D;Unknown, L&#x3D;Unknown, ST&#x3D;Unknown, C&#x3D;Unknown correct?
  [no]:  yes

Generating 2,048 bit RSA key pair and self-signed certificate (SHA256withRSA) with a validity of 9,125 days
	for: CN&#x3D;Unknown, OU&#x3D;Unknown, O&#x3D;Unknown, L&#x3D;Unknown, ST&#x3D;Unknown, C&#x3D;Unknown
Enter key password for &lt;keyalias&gt;
	(RETURN if same as keystore password):
Re-enter new password:
[Storing keystore.jks]

Warning:
The JKS keystore uses a proprietary format. It is recommended to migrate to PKCS12 which is an industry standard format using &quot;keytool -importkeystore -srckeystore keystore.jks -destkeystore keystore.jks -deststoretype pkcs12&quot;.
As a TL;DR, you can just download a dummy certificate on the accompanying repository under should-be-private&#x2F;keystore.jks, for testing purposes only. The keystore file is hugely important if you ever plan to submit your app to Google Play store: it‚Äôs the only way to assert you‚Äôre the rightful owner to provide new updates to your app.
File: keystore.jks
keystorepassword
keyalias
keypassword
4.3. Build APK
Make sure that you are serving the dist directory on http:&#x2F;&#x2F;127.0.0.1:8000 as explained above in Run a local server. Assuming you are using bash as your shell, from the root of your project, run:
EXPO_ANDROID_KEYSTORE_PASSWORD&#x3D;&quot;keystorepassword&quot; \
EXPO_ANDROID_KEY_PASSWORD&#x3D;&quot;keypassword&quot; \
turtle build:android \
  --type apk \
  --keystore-path .&#x2F;should-be-private&#x2F;keystore.jks \
  --keystore-alias &quot;keyalias&quot; \
  --allow-non-https-public-url \
  --public-url http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;android-index.json
Note that you need the flag --public-url to point to http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;android-index.json. In addition, it is also necessary to use the --type apk flag to produce an APK file since version 0.8.0 of turtle-cli.
The build may take some time:
Jan 20 20:38:17 turtle[61719] INFO:  Using manifest: {
  &quot;name&quot;: &quot;ExampleApplication&quot;,
  &quot;slug&quot;: &quot;ExampleApplication&quot;,
  &quot;version&quot;: &quot;1.0.0&quot;,
  &quot;orientation&quot;: &quot;portrait&quot;,
  &quot;icon&quot;: &quot;.&#x2F;assets&#x2F;icon.png&quot;,
...
Jan 20 20:38:51 turtle[61719] INFO:  Starting a Gradle Daemon (subsequent builds will be faster)
  platform: &quot;android&quot;
  buildPhase: &quot;running gradle&quot;
  source: &quot;stdout&quot;
...
Once it finishes, you should see this output in your terminal:
Jan 20 20:43:19 turtle[61719] INFO:  copied build to ~&#x2F;expo-apps&#x2F;@anonymous__ExampleApplication-7f15208a56304617a200538cacd2e50e-signed.apk
  platform: &quot;android&quot;
  buildPhase: &quot;copying build artifact&quot;
This message gives you the location of your built .apk file. You can now move on to the Distribute and install section below if you are not interested in creating an .ipa file for iOS.
Note: if the build fails because of some Gradle error, like Could not resolve com.theartofdev.edmodo:android-image-cropper:2.8.0, make sure to open Android Studio and update the Android SDK and SDK Build-Tools. This should fix it.
5. Create IPA file ‚Äì iOS
First, verify that your local server is running, e.g.
$ curl http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;ios-index.json
{&quot;name&quot;:&quot;ExampleApplication&quot;,&quot;slug&quot;:&quot;ExampleApplication&quot;,&quot;version&quot;:&quot;1.0.0&quot;,&quot;orientation&quot;:&quot;portrait&quot;,&quot;icon&quot;:&quot;.&#x2F;assets&#x2F;icon.png&quot;,&quot;splash&quot;:{&quot;image&quot;:&quot;.&#x2F;assets&#x2F;splash.png&quot;,&quot;resizeMode&quot;:&quot;contain&quot;,&quot;backgroundColor&quot;:&quot;#ffffff&quot;,&quot;imageUrl&quot;:&quot;http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;assets&#x2F;201a91bd1740bb1d6a1dbad049310724&quot;...
5.1. Prerequisites
For Turtle CLI to work correctly to create an .ipa file for iOS, you need to make sure your system is macOS and that the following dependencies are installed:
Xcode (version 13.2.1 or newer)
fastlane
Note: make sure that you have run Xcode at least once and that you have agreed to the license agreements.
For more details, see Expo‚Äôs documentation.
If you know which Expo SDK version you are going to use, you can run
$ turtle setup:ios --sdk-version &lt;SDK-VERSION&gt;
If it errors out, saying that you don‚Äôt have the right version of fastlane, try re-installing fastlane (guide). The version used in this article is fastlane 2.200.0.
This will take some time:
$ turtle setup:ios --sdk-version 44.0.5
Jan 20 21:18:03 turtle[48488] INFO:  shell app for SDK 44.0.5 doesn&#39;t exist, downloading...
  platform: &quot;ios&quot;
  buildPhase: &quot;setting up environment&quot;
downloading [                    ] 1% 8514.8s
...
...
Jan 20 21:24:58 turtle[48488] INFO:  it&#39;s all set!
  platform: &quot;ios&quot;
  buildPhase: &quot;setting up environment&quot;
In the meantime, you can move on to the next section.
5.2. Create Signing keys
This assumes you have an Apple Developer Account, which is a paid account.
To create your distribution certificate file, or .p12 file, you can follow this guide.
You will also need your Apple Team ID and a Provisioning Profile that you can generate through Xcode as well. This other guide covers in greater lengths what all these cerficates are for and how to obtain them.

Note that the provisioning profile expires in 6 days in my case, since I do not have an Apple Developer paid account.
Sadly, it is not possible to share example files.
5.3. Build IPA
Make sure that you are serving the dist directory on http:&#x2F;&#x2F;127.0.0.1:8000 as explained Run a local server. Assuming you are using bash as your shell, from the root of your project, run:
EXPO_IOS_DIST_P12_PASSWORD&#x3D;&quot;&lt;PASSWORD HERE&gt;&quot; \
turtle build:ios \
  --team-id YOUR_TEAM_ID \
  --dist-p12-path &#x2F;path&#x2F;to&#x2F;your&#x2F;dist&#x2F;cert.p12 \
  --provisioning-profile-path &#x2F;path&#x2F;to&#x2F;your&#x2F;provisioning&#x2F;profile.mobileprovision \
  --allow-non-https-public-url \
  --public-url http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;ios-index.json
Note that you need the flag --public-url to point to http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;ios-index.json.
Once the build finishes successfully, you should get the path to your .ipa file.
6. Distribute and install
6.1. on Android
Take your .apk and share it through some Google Drive link or other medium of your choice.
If you download this .apk file through an Android device, it should offer you to install the application on the device.
Trick: if the URL is really not friendly to type, and for whatever reason you have to type it manually, use a QR Code generator (e.g. http:&#x2F;&#x2F;www.barcode-generator.org&#x2F;) and your device‚Äôs camera to simplify your life!
Alternatively, if you connect an Android device to your computer, you should be able to run:
$ adb devices
emulator-5554	device
to list all your connected Android devices and emulators. (In my case, only the emulator is ‚Äúconnected‚Äù.)
It is then possible to install the .apk file by running:
$ adb -s emulator-5554 install ~&#x2F;expo-apps&#x2F;@anonymous__ExampleApplication-7f15208a56304617a200538cacd2e50e-signed.apk
Performing Streamed Install
Success

6.2. on iOS
Caveat: I could not fully test this section, so my apologies if this does not work as intended.
Since you should have Xcode, the most promising solution is in this guide. It also mentions other ways to install the .ipa file.
That‚Äôs it for now, thank you for reading this far. You will find below the resources mentioned in this article.
If you have any questions or comments, please drop me a line on Twitter. I shall reply as soon as possible.
Stay tuned for more.
Resources
Expo: https:&#x2F;&#x2F;expo.dev
Turtle CLI: https:&#x2F;&#x2F;github.com&#x2F;expo&#x2F;turtle#readme
Expo‚Äôs guide to Building Standalone apps: https:&#x2F;&#x2F;docs.expo.dev&#x2F;classic&#x2F;building-standalone-apps&#x2F;
Configuring app.json: https:&#x2F;&#x2F;docs.expo.dev&#x2F;workflow&#x2F;configuration&#x2F;
Expo docs to configure CI with Turtle CLI: https:&#x2F;&#x2F;docs.expo.dev&#x2F;classic&#x2F;turtle-cli&#x2F;
Expo docs to host application on your own servers: https:&#x2F;&#x2F;docs.expo.dev&#x2F;distribution&#x2F;hosting-your-app&#x2F;
How to create a keystore for Android: https:&#x2F;&#x2F;developer.android.com&#x2F;studio&#x2F;publish&#x2F;app-signing#generate-key
Supporting GitHub repository: https:&#x2F;&#x2F;github.com&#x2F;RobinCsl&#x2F;build-standalone-expo-app&#x2F;*
#### [Optimize your img tags with Eleventy Image and WebC](https:&#x2F;&#x2F;www.robincussol.com&#x2F;optimize-your-img-tags-with-eleventy-image-and-webc&#x2F;) 
*I am very excited about WebC and couldn‚Äôt wait to try out the corresponding Eleventy plugin.
The first use-case I had in mind was to use Eleventy Image for the native HTML img tag, that can be generated from Markdown and without shortcode. I had done this before, for my unpublished blog rewrite that‚Äôs been waiting to be released for ever now, through hooking up Eleventy Image into a markdown-it plugin. It wasn‚Äôt pretty as markdown-it plugins are pretty alien to me.
But now, this can be done ‚Äúnatively‚Äù, √†-la-Cloudflare Workers for your native HTML elements!
UPDATE (04&#x2F;11&#x2F;2022): After sharing this article on Twitter, Zach Leatherman pointed out there should be an easier solution. It didn‚Äôt work as expected at first, which put me on a journey to fix the underlying issue in @11ty&#x2F;webc. I‚Äôm very pleased to share that my first contribution to the project was accepted and landed in v0.6.0. As a result, the content of the last section was updated to remove the dirty data file hack with _data&#x2F;Image.js: your image optimization logic can now truly live in a single file.
The documentation for WebC mentioned this use-case exactly, in the shape of this innocent puzzle:

‚ÄúFree idea: use the Eleventy Image plugin to return optimized markup‚Äù
So it should be easy, right?
Remember this lad?
I have discovered a truly remarkable proof of this theorem which this margin is too small to contain.
Pierre de Fermat, cca. 1637
No need to wait 3 centuries for the answer this time, because it was ultimately not so hard‚Ä¶ But I did struggle and wrestle with it for a few hours :D
Anyway, hope that can be useful to someone.
If you want to see the finished implementation, you can get it on GitHub: RobinCsl&#x2F;11ty-webc-img-demo.
Set up a WebC-powered Eleventy project
or take a shortcut by cloning this repo and going to the 01-initial folder.
Initialise the project
Let‚Äôs start with an empty folder and add a basic package.json file:
mkdir 11ty-webc-img
cd 11ty-webc-img
npm init -y
We need to install the latest canary release (2.0.0-canary.16 at the time of writing) of Eleventy as well as the WebC plugin:
 npm install @11ty&#x2F;eleventy@2.0.0-canary.16 @11ty&#x2F;eleventy-plugin-webc
Configure Eleventy
We will now configure Eleventy to use the WebC plugin by creating a .eleventy.js file with the following content:
const webc &#x3D; require(&quot;@11ty&#x2F;eleventy-plugin-webc&quot;);

module.exports &#x3D; function(eleventyConfig) {
	eleventyConfig.addPlugin(webc, {
		components: &quot;_includes&#x2F;webc&#x2F;*.webc&quot;
	});
}

In particular, components in the _includes&#x2F;webc folder will be available in the global scope, no need to import them explicitly!
Scaffold a minimal project
To finish our setup, we create a layout file and a simple WebC component which we will use in a basic page, to make sure our setup is working correctly.
We create the layout file under _includes&#x2F;layouts&#x2F;base.webc. It is a simple HTML template with the @html&#x3D;&quot;content&quot;  WebC directive set on the body tag. (See my-layout.webc in the docs)
&lt;!doctype html&gt;
&lt;html lang&#x3D;&quot;en&quot;&gt;
	&lt;head&gt;
		&lt;meta charset&#x3D;&quot;utf-8&quot;&gt;
		&lt;title&gt;Eleventy Images + WebC rocks!&lt;&#x2F;title&gt;
	&lt;&#x2F;head&gt;
	&lt;body @html&#x3D;&quot;content&quot;&gt;&lt;&#x2F;body&gt;
&lt;&#x2F;html&gt;
We now create a simple WebC component and write the following content, taken from the promising website 11ty.webc.fun, in _includes&#x2F;webc&#x2F;site-footer.webc :
&lt;footer&gt;
  &lt;p&gt;&amp;copy; 2022 Yours Truly.&lt;&#x2F;p&gt;
&lt;&#x2F;footer&gt;
Finally, we create our basic page at the root of the project in index.webc:
---
layout: layouts&#x2F;base.webc
---

Fun with WebC

&lt;site-footer&gt;&lt;&#x2F;site-footer&gt;
If all went according to plan, we should now be able to run
npx @11ty&#x2F;eleventy --serve
in the terminal and see the following output in our browser at http:&#x2F;&#x2F;localhost:8080:

Create an img.webc component
or check the code on GitHub in the 02-img folder if you want to see the code right away.
In this section, we will create our img.webc override for the native img HTML tag and use Eleventy Image within it.
As a starting point, we will use the example from the documentation from which the screenshot at the start of this post is taken. In a new file _includes&#x2F;webc&#x2F;img.webc, add the following:
&lt;script webc:type&#x3D;&quot;render&quot; webc:is&#x3D;&quot;template&quot;&gt;
function() {
	if(!this.alt) {
		throw new Error(&quot;[img.webc] the alt text is missing, no fun&quot;);
	}
	return &#x60;&lt;img src&#x3D;&quot;${this.src}&quot; alt&#x3D;&quot;${this.alt}&quot;&gt;&#x60;;
}
&lt;&#x2F;script&gt;
This essentially verifies at build-time that all your images have a non-empty alt text, neat!
Let‚Äôs add a ‚Äúbroken‚Äù image to our index page, in index.webc, to verify that this works correctly:
---
layout: layouts&#x2F;base.webc
---

Fun with WebC

&lt;img src&#x3D;&quot;https:&#x2F;&#x2F;images.unsplash.com&#x2F;photo-1627224286457-923944e5b159?auto&#x3D;format&amp;fit&#x3D;crop&amp;w&#x3D;387&amp;q&#x3D;80&quot;&gt;

&lt;site-footer&gt;&lt;&#x2F;site-footer&gt;
And indeed, running npx @11ty&#x2F;eleventy --serve yields an expected error:
$ npx @11ty&#x2F;eleventy --serve
[11ty] Problem writing Eleventy templates: (more in DEBUG output)
[11ty] 1. Having trouble rendering webc template .&#x2F;index.webc (via TemplateContentRenderError)
[11ty] 2. [img.webc] the alt text is missing, no fun (via Error)
Add an alt text (‚Äúpossum hanging from a palm leaf‚Äù should work) and try again. Oh no! Another error:
$ npx @11ty&#x2F;eleventy --serve  
[11ty] Problem writing Eleventy templates: (more in DEBUG output)
[11ty] 1. Having trouble rendering webc template .&#x2F;index.webc (via TemplateContentRenderError)
[11ty] 2. Circular dependency error: You cannot use &lt;img&gt; inside the definition for .&#x2F;_includes&#x2F;webc&#x2F;img.webc (via Error)
That makes sense, when you think about it! All our .webc files are processed by WebC, so if we return an img tag in a img.webc component, the compiler would work indefinitely to get to the bottom of it, because it‚Äôs turtles img all the way down!
Luckily for us, we can let WebC know when its job is done through the webc:raw attribute:
Use webc:raw to opt-out of WebC template processing for all child content of the current node. Notably, attributes on the current node will be processed.
Let‚Äôs fix it in _includes&#x2F;webc&#x2F;img.webc:
  &lt;script webc:type&#x3D;&quot;render&quot; webc:is&#x3D;&quot;template&quot;&gt;
  function() {
	  if(!this.alt) {
	  	throw new Error(&quot;[img.webc] the alt text is missing, no fun&quot;);
	  }
-	  return &#x60;&lt;img src&#x3D;&quot;${this.src}&quot; alt&#x3D;&quot;${this.alt}&quot;&gt;&#x60;;
+	  return &#x60;&lt;img webc:raw src&#x3D;&quot;${this.src}&quot; alt&#x3D;&quot;${this.alt}&quot;&gt;&#x60;;
  }
  &lt;&#x2F;script&gt;
It compiles now! üéâ
Here‚Äôs the expected output:

We have effectively augmented our img tag to verify at build time that alt text is present.
Let‚Äôs now add Eleventy Image to the party!
Optimize your HTML img with Eleventy Image
or check the code on GitHub in the 03-final folder if you want to see my solution.
Let‚Äôs first install Eleventy Image in our project:
npm install @11ty&#x2F;eleventy-img
We will more or less copy the example from the Eleventy Image docs in the Asynchronous Shortcode section, because our JavaScript render function can be async!
In the file _includes&#x2F;webc&#x2F;img.webc, let‚Äôs add the following:
  &lt;script webc:type&#x3D;&quot;render&quot; webc:is&#x3D;&quot;template&quot;&gt;
-   function() {
-      if(!this.alt) {
-          throw new Error(&quot;[img.webc] the alt text is missing, no fun&quot;);
-      }
-      return &#x60;&lt;img webc:raw src&#x3D;&quot;${this.src}&quot; alt&#x3D;&quot;${this.alt}&quot;&gt;&#x60;;
+    const Image &#x3D; require(&quot;@11ty&#x2F;eleventy-img&quot;);
+    module.exports &#x3D; async function() {
+      let metadata &#x3D; await Image(this.src, {
+        widths: [300],
+        formats: [&quot;avif&quot;, &quot;jpeg&quot;],
+        outputDir: &quot;_site&#x2F;img&#x2F;&quot;,
+      });

+      let imageAttributes &#x3D; {
+        alt: this.alt,
+        sizes: &quot;100vw&quot;,
+        loading: &quot;lazy&quot;,
+        decoding: &quot;async&quot;,
+      };

+      &#x2F;&#x2F; You bet we throw an error on missing alt in &#x60;imageAttributes&#x60; (alt&#x3D;&quot;&quot; works okay)
+      return Image.generateHTML(metadata, imageAttributes);
  }
  &lt;&#x2F;script&gt;

Note that we harcoded the value for  sizes in the imageAttributes object, and prepended both src and alt by this to wire things up correctly. We also instruct the Image plugin to output optimized images in our _site&#x2F;img&#x2F; folder directly for them to be available when using the following markup:
&lt;img alt&#x3D;&quot;a lovely image&quot; src&#x3D;&quot;&#x2F;img&#x2F;hash-width.jpeg&quot;&gt;
Let‚Äôs run npx @11ty&#x2F;eleventy --serve once more:
$  npx @11ty&#x2F;eleventy --serve
[11ty] Problem writing Eleventy templates: (more in DEBUG output)
[11ty] 1. Having trouble rendering webc template .&#x2F;index.webc (via TemplateContentRenderError)
[11ty] 2. Circular dependency error: You cannot use &lt;img&gt; inside the definition for .&#x2F;_includes&#x2F;webc&#x2F;img.webc (via Error)
That error sounds familiar, right?
We need to tell WebC to ignore img tags generated by Eleventy Image, and it‚Äôs as simple as adding &quot;webc:raw&quot;: true to the imageAttributes object:
  &lt;script webc:type&#x3D;&quot;render&quot; webc:is&#x3D;&quot;template&quot;&gt;
  const Image &#x3D; require(&quot;@11ty&#x2F;eleventy-img&quot;);
  module.exports &#x3D; async function() {
    let metadata &#x3D; await Image(this.src, {
      widths: [300],
      formats: [&quot;avif&quot;, &quot;jpeg&quot;],
      outputDir: &quot;_site&#x2F;img&#x2F;&quot;,
    });
  
    let imageAttributes &#x3D; {
      alt: this.alt,
      sizes: &quot;100vw&quot;,
      loading: &quot;lazy&quot;,
      decoding: &quot;async&quot;,
+     &quot;webc:raw&quot;: true,
    };
  
    &#x2F;&#x2F; You bet we throw an error on missing alt in &#x60;imageAttributes&#x60; (alt&#x3D;&quot;&quot; works okay)
    return Image.generateHTML(metadata, imageAttributes);
  }
  &lt;&#x2F;script&gt;
And we‚Äôre done!! (Note how the image now aligns perfectly with localhost:8080 #IncontestableTruth)

with corresponding markup:
&lt;!doctype html&gt;
&lt;html lang&#x3D;&quot;en&quot;&gt;
&lt;head&gt;
        &lt;meta charset&#x3D;&quot;utf-8&quot;&gt;
        &lt;title&gt;Eleventy Images + WebC rocks!&lt;&#x2F;title&gt;
    &lt;&#x2F;head&gt;
    &lt;body&gt;Fun with WebC

&lt;picture&gt;&lt;source type&#x3D;&quot;image&#x2F;avif&quot; srcset&#x3D;&quot;&#x2F;img&#x2F;SwdsuTpRbT-300.avif 300w&quot;&gt;&lt;img alt&#x3D;&quot;possum hanging from a palm leaf&quot; loading&#x3D;&quot;lazy&quot; decoding&#x3D;&quot;async&quot; src&#x3D;&quot;&#x2F;img&#x2F;SwdsuTpRbT-300.jpeg&quot; width&#x3D;&quot;300&quot; height&#x3D;&quot;450&quot;&gt;&lt;&#x2F;picture&gt;


&lt;footer&gt;
  &lt;p&gt;¬© 2022 Yours Truly.&lt;&#x2F;p&gt;
&lt;&#x2F;footer&gt;

&lt;&#x2F;body&gt;
&lt;&#x2F;html&gt;
Parting words
I am so excited to explore further the possibilities of using WebC to augment other native HTML elements.
This article only scratches the surface when it comes to the img tag. You could pass props down from the markup to Eleventy Image and control the behaviour of the image optimization. But we can now augment our native img tag without much hassle as it‚Äôs all in one file.
It even works with Markdown images (and yields the cutest webpage ever):
  ---
  layout: layouts&#x2F;base.webc
  ---
  
  Fun with WebC
  
  &lt;img alt&#x3D;&quot;possum hanging from a palm leaf&quot; src&#x3D;&quot;https:&#x2F;&#x2F;images.unsplash.com&#x2F;photo-1627224286457-923944e5b159?auto&#x3D;format&amp;fit&#x3D;crop&amp;w&#x3D;387&amp;q&#x3D;80&quot;&gt;
  
+  &lt;template webc:type&#x3D;&quot;11ty&quot; 11ty:type&#x3D;&quot;md&quot;&gt;
+  
+   ![&#39;close-up of a baby possum among ferns&#39;](https:&#x2F;&#x2F;images.pexels.com&#x2F;photos&#x2F;13960994&#x2F;pexels-photo-13960994.jpeg)
+  
+  &lt;&#x2F;template&gt;
  
  &lt;site-footer&gt;&lt;&#x2F;site-footer&gt;
  

All the more reasons to optimize your images now!
Find the code supporting this article on the RobinCsl&#x2F;11ty-webc-img-demo repository.*
#### [Year in Review: 2021](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2021&#x2F;) 
*We‚Äôre already at the start of February 2022, but who says retrospectives need to be done on January 1st?! A lot of things happened in 2021, both personally and professionally. Time to reflect and remember.
Personal üë∂üíçüìÑüìÉüìëüìú
This first part is the personal stuff, so if you don‚Äôt care about it, you can skip to the professional stuff instead. And if you don‚Äôt care about that too, why are you here? üòÇ
Welcome, L√©onard!
In January of 2021 came the great news that we were expecting a baby and a few months later, my son L√©onard came to this world! It‚Äôs been a few months now and it‚Äôs insane how much this event changed our lives.
It‚Äôs quite amazing to witness a human being‚Äôs awakening to the world, I do feel privileged.
Of course, it‚Äôs not just rainbows and unicorns.
Sleeping as much as I want is now a distant memory&#x2F;dream, though I‚Äôve been surprised that it‚Äôs actually quite possible to operate without the amount of sleep I used to get.
Having free time for side projects and writing almost vanished (and usually eats up time when I should sleep instead, while it‚Äôs allowed by baby-boss). I don‚Äôt know how other parents manage but time just flies by.
One thing‚Äôs for sure, L√©onard makes sure I keep fit and exercise regularly (a promise I made myself at the beginning of last year, right):
it‚Äôs quite a normal day when I need to go up and down the 4 floors of the block of flats we live in (and when it‚Äôs at night, I have this game where I switch the lights on and go up and down within the 3 minutes they‚Äôre programmed to stay on; naturally, after my 4th round trip, I usually do the last flight of stairs in the dark üòÖüòÆ‚Äçüí®).
it‚Äôs also quite a normal day when I need to carry him in my arms for 10- to 20-minute stretches, while doing squats, at least 2 or 3 times.
Coach L√©onard can ask for these drills at any time of the day (and night‚Ä¶), he says it‚Äôs for my own good. My knees and hips and back and arms tend to disagree.
Paperwork, paperwork, paperwork
In 2021, I‚Äôve had time to think so many times if the amount of paperwork we‚Äôre doomed to go through is some sort of devilish scheme to keep people busy on the boring stuff. It definitely does not help when you‚Äôre an expat.
If you had told me having a baby would generate so much paperwork chores, I probably would not have believed you. The story goes that we wanted to do an early recognition of fatherhood for me to be officially recognised as the father of my child to be.
In France, as a French person, this is a 5-minute visit to my local townhall, easy-peasy.
In Czechia, as a foreigner, this would have required tons of documents that also needed translating by a certified translator (aka costs some money).
Since we were engaged, and you‚Äôre officially recognised as the father when having a baby as a married couple, we thought we might as well go through paperwork hell to get married.
It did not disappoint.
Our child was due some time in the middle of September, so we had almost the entire year to get married, should be easy, right.
Being so diligent, we got in touch with the French embassy to understand what we need to do to get married in April:
weddings at the embassy are quite a rare thing, you should get married through the local authorities
getting married in Prague is like getting married in Las Vegas (say what?)
Only to realise at the end of June that:
babies aren‚Äôt always born around the due date
it‚Äôs already the end of June
Let‚Äôs just say that we managed to be on time paperwork-wise for our wedding at the beginning of August (ever heard of the necessary 2-week public display of your intent on getting married, during which somebody has the right to oppose it, to get the paper allowing a French person to marry‚Ä¶?), but the ‚Äúgetting married like in Las Vegas‚Äù was lost on us.
Professionally
Promo
In January last year, I got promoted to Staff Engineer at Kiwi.com. Pretty crazy to me to think that I started working in the industry in September 2017. Even though titles only mean so much, it‚Äôs still a nice recognition that I bring value to the company.
Pair Documenting
I definitely learnt a lot about infrastructure and Kubernetes, which might seem overkill for a frontend platformer, but there was a void to fill when my ex-colleague Adam Jani≈° left, so I put on my newbie hat and pair-documented Adam‚Äôs knowledge throughout his notice period. I still refer or point people to that document quite regularly, it‚Äôs an investment that keeps on giving after all these months!
This was also the first time I tried to add original schematics&#x2F;pictures and Excalidraw made it super fun and easy!
Robin‚Äôs Gazette
My newsletter, Robin‚Äôs Gazette, kept going quite well! It turned one year old on December, 9th! üéÇ
In 2021, I published 25 issues (784 emails in total!), and went from 9 subscribers to 49 at the end of the year!
Given the quite low volume of subscribers, my average open rate and click rate are pretty okay (though they are ‚Äúall-time‚Äù performance metrics):
70.35% open rate,
24.38% click rate.
Even though it‚Äôs always some amount of work, I deem it worthy of my time as I get to practice writing and I always learn something slightly more deeply than if I just scrolled Twitter or Hacker News. This continues my efforts from ‚Äúarchivist to creator‚Äù that I mentioned in my last retro.
Special mention to Shawn @swyx Wang for being so encouraging along the way!
My goal for this year is to continue on that path, though I do need to put some effort into advertising it better:
the subscribe form is hard to find on my website,
the content is short-lived and behind closed doors ‚Äì so I should repurpose it to an extent,
start marketing it more (instead of the infrequent tweets I‚Äôve tried at some point).
One small change for this year: I now send the Gazette every other Friday instead of every other Wednesday.
Some of the feedback I received üòä
‚ÄúSuch a great newsletter this week Robin, amazing job!‚Äù
‚ÄúStill enjoying the newsletter!‚Äù
Blog
The blog was a bit quiet last year, I only published 3 posts and refreshed my most read article about building APK files locally for Expo projects (it recently crossed 20K views in its lifetime! üéâ).
They were:
Python Dependencies for JavaScript Developers
How to Download a Brain with Pair Documenting (already mentioned above)
Year in Review: 2020
I really hope to start writing more again on the blog because the SEO game takes a long time for Google to start recommending your stuff: I saw more traffic to my How to Test Your ESLint Config and Get your Own Sentry Playground articles, and they were written in September 2020!
Started working on a course
In the last retro, I announced that I planned to write a book. That did not happen‚Ä¶ üòÖ
Instead, I started working on a video course which essentially replicates the now defunct Margarita project from scratch (which was the subject of this article on my blog), showcasing how to build cross-platform web and native mobile apps through React Native and React Native Web.
This was the occasion to spend some time weeks watching all the microphone reviews on YouTube, all the Audacity and Obs Studio tutorials for sound production, to ultimately produce a half-finished tutorial on YouTube (the best 33 seconds of your life, trust me).
Source



Ever since my son was born, I‚Äôve had little time to focus for longer than 5-minute stretches outside of work, so this project has lost steam right now. I hope I‚Äôll manage to finish it in the first semester!
A look back and forward
Revisiting some of my plans for 2021 and making some for 2022.
Family
As much as I would love to work on side-projects and such, my family comes first, and I want to keep it that way. I‚Äôm excited to continue discovering what my next workouts will be, courtesy of Coach L√©onard! (Seriously, I‚Äôve got some arms now! üí™)
I cannot wait for my son to meet all his grand-parents, aunts and uncles in France later this year!
Nehovor√≠m pliynule po slovensky
aka I don‚Äôt speak Slovak fluently.
One of my goals was to make sure I would be able to speak to all my wedding guests in their preferred language (amongst French, English and Slovak). Because of the above (and COVID not helping‚Ä¶), the guest list was actually pretty small and my mastery of Slovak would not be entirely necessary to do well on my goal. So I guess I will learn better alongside my son this year whilst we wait for the big party?
Almost no SAD this past year
Come December, I usually feel pretty burnt out and in dire need of vacation to recharge. Somehow, in December 2021, I did not feel like that at all.
My new family life provided some amount of distractions from work. Even though that increased my context switching throughout the days and the nights were not as restful, it somehow created some distance between work and me. Or maybe because living with a newborn forces you to live in the moment, one day at a time‚Ä¶ üòÖ
Writing
Less paperwork, more blog posts. ü§û
Keep the newsletter going, and make it better, faster, stronger!
Improve my note taking system, which is a bit chaotic and not really systematic at the moment.
Learning Rust
In 2021, I started dabbling with Rust, mostly through the really great WIP book from Luca Palmieri, Zero To Production In Rust. It assumed some knowledge so I sometimes struggled had fun filling in the gaps.
Given where the JS ecosystem is going in terms of tooling (oh yeah, in 2021 I started this Awesome List of JavaScript Tooling Not Written In JavaScript on GitHub ‚Äì 667 stars so far!), I think it‚Äôs important to explore beyond the confines of JavaScript&#x2F;TypeScript. So I‚Äôd like to spend more time with Rust this coming year!
Lots of things to be grateful for last year and lots to look forward to this year. C‚Äôest parti !*
#### [Python Dependencies for JavaScript Developers](https:&#x2F;&#x2F;www.robincussol.com&#x2F;python-dependencies-for-javascript-developers&#x2F;) 
*Recently, I needed to update an old Python codebase which had not been touched in 3 years! Of course, the dependencies were so outdated that the Dockerfile of the project wouldn‚Äôt build. My JavaScript knowledge did not help me much:
how could I do a yarn upgrade-interactive --latest to update dependencies?
where‚Äôs the dependency lockfile?
why do we need to compile C-libraries for Python dependencies?
Luckily for me, my colleague Ondrej patiently explained how to approach these questions.
Using a virtual environment
TL;DR: pip installs packages globally unless we activate a virtual environment.
In Python, the default package manager is call pip and it installs packages from the Python Package Index, shortened to Pypi. The equivalent in JavaScript land would be npm and npmjs.com.
By default, pip installs packages system-wide. This contrasts with the need to pass a --global flag to npm.
To remedy that, we can use a local Python environment (a bit like having our node_modules folder in a JavaScript project). The following command will create a virtual environment in a venv folder in our current directory:
# Create the venv folder container the virtual environment
$ python3 -m venv venv
To make sure pip knows it should install packages in this virtual environment, we must activate it. Depending on your shell, you should source the appropriate activate file in venv&#x2F;bin:
activate, for Bash and ZSH,
activate.fish, for Fish Shell,
activate.csh, for csh
Activate.ps1, for PowerShell.
In my case, I will source the one for ZSH:
$ source venv&#x2F;bin&#x2F;activate
Now, pip install will install packages in the local folder instead of targeting the global scope. My ‚ÄúPython node_modules folder‚Äù is venv&#x2F;lib&#x2F;python3.8&#x2F;site-packages&#x2F;.
Dependencies in Python
TL;DR: use pip-compile to generate a lockfile and pip-sync to install dependencies from that lockfile
To deal with dependencies, we must install the pip-tools package in our virtual environment:
pip install pip-tools
This will allow us to use pip-compile and pip-sync later on.
Once that‚Äôs done, we could for example decide to start a Django project, ‚Äúthe web framework for perfectionists with deadlines‚Äù. The latest version of the package at the time of writing is 3.2.5. Let‚Äôs create our Python equivalent of a package.json file to express our project needs the Django package pinned to version 3.2.5:
# requirements.in
django&#x3D;&#x3D;3.2.5
Note: the better equivalent to a package.json would be a setup.py file, since it contains additional fields like the name of the local package, its version, etc. but we just want to write down the dependencies.
EDIT #1: it‚Äôs apparently not common practice to pin dependency versions in requirements.in, just in case you really need to (if there are breaking changes for example). Thanks for pointing it out, Ondrej.
To generate a corresponding lockfile of the transitive dependencies of Django, we can run the following command:
pip-compile --output-file requirements.txt requirements.in
This will create the following requirements.txt file:
#
# This file is autogenerated by pip-compile with python 3.8
# To update, run:
#
#    pip-compile --output-file&#x3D;requirements.txt requirements.in
#
asgiref&#x3D;&#x3D;3.4.1
    # via django
django&#x3D;&#x3D;3.2.5
    # via -r requirements.in
pytz&#x3D;&#x3D;2021.1
    # via django
sqlparse&#x3D;&#x3D;0.4.1
    # via django

Now that we have this file, we can finally retrieve and install the packages with the following command:
pip-sync
Note: if you try to run pip-sync without a requirements.txt, you will get the following error:
No requirement files given and no requirements.txt found in the current directory
It is indeed necessary to run pip-compile before.
Updating dependencies
Similar to npm oudated, we can list the outdated Python dependencies with
$ pip list --outdated
For example, after downgrading Django to 3.2.3 in my requirements.in, regenerating the lockfile with pip-compile, re-installing the dependencies with pip-sync, the command above will show:
Package    Version Latest Type
---------- ------- ------ -----
Django     3.2.3   3.2.5  wheel
setuptools 44.0.0  57.4.0 wheel
To update the dependency, I can change the version back to 3.2.5 in the requirements.in and go through the same dance:
$ pip-compile --output-file requirements.txt requirements.in
$ pip-sync
$ pip list --outdated
Package    Version Latest Type
---------- ------- ------ -----
setuptools 44.0.0  57.4.0 wheel
EDIT #2: a batteries-included equivalent to Yarn is called Poetry. Thanks for sharing, D√°niel!
Wheels and Eggs
You might wonder what this ‚Äúwheel‚Äù type is for the Django and setuptools packages.
They are still mysterious to me, but here‚Äôs my current understanding: in Python, some dependencies need to be built for specific architectures, as they might be written in Cython, ‚Äúa superset of the Python language that additionally supports calling C functions and declaring C types on variables and class attributes‚Äù. Wheels and Eggs are packaging formats for these.
In particular, it is not a good idea to use Alpine Docker images for Python projects as a lot of packages don‚Äôt have pre-built wheels for that architecture: your Docker build step will need to compile the packages from source, slowing down your entire process (and requiring you to install the necessary build tools for this compilation to happen!).
I don‚Äôt think there is a similar ‚Äúpackaging format‚Äù concept in JavaScript land. But we do have packages shipping prebuilt binaries for specific architectures, for example Sharp, the Node.js image processing package. (And we probably have enough issues with CommonJS vs ES Modules as it is‚Ä¶ :smile:)
Conclusions
All in all, a project needs to:
specify external dependencies and their desired version with semantic ranges
have a way to retrieve said dependencies
keep track of which versions were effectively installed to improve reproducibility.
Despite all these measures, the Docker file of an unmaintained 3-year old project could not build. Software rots!*
#### [How to Download a Brain with Pair Documenting](https:&#x2F;&#x2F;www.robincussol.com&#x2F;download-a-brain-with-pair-documenting&#x2F;) 
*When people leave the company, a lot of specific and ad hoc knowledge goes away with them. Unless there is already a strong documentation culture, there‚Äôs only so much that can be said and done during exit interviews to make up for it.
But this doesn‚Äôt have to be left to fate.
Throughout the month of January, my now ex-colleague Adam Jani≈° and I pair documented all his knowledge about the frontend infrastructure at Kiwi.com. We produced a 24 page document, fixed a few bugs and addressed some tech debt. More importantly, we had fun doing it!
Here‚Äôs how we approached it.
How to pair document
This is an attempt at formalising what we‚Äôve done, feel free to s&#x2F;Newbie&#x2F;Robin&#x2F;g and s&#x2F;Expert&#x2F;Adam&#x2F;g.
The Protagonists
You will need two proactive people: an Expert on the subject to document and a Newbie who is not too cursed with knowledge yet. Bonus points if they have not really worked together but always had good chemistry in their interactions.

The Newbie makes it easy on the Expert for this documentation effort to be a no-brainer:
they organize the pair documenting sessions;
they manage the agenda of the sessions;
they do most of the note-taking;
they digest the notes into documentation drafts in between sessions;
they stay curious and eager to learn more about the subjects, with questions always at the ready (this is hard to fake, so find an adequate Newbie for the task).

The Expert shows up at the sessions and generously shares their knowledge with the Newbie, answering patiently every question they may have. They review the documentation drafts to ensure the prose does not betray the original intent of the notes. Bonus points if they include the Newbie in solving similar problems described in the nascent documentation as they arise in the support channels of the company‚Äôs Slack: learning by doing is a great way to drive home the material and expose remaining ambiguities.

The First Session
The Newbie is in charge and explains how it‚Äôs going to work in the first pair-documenting session. That means going through what‚Äôs expected of each participant in this documentation effort as well as giving an overview of the actual process.
The objective of the first session is crucial: go as broad as possible and capture as many ideas of what needs documenting to form a backlog of topics to go over in the next sessions.
This can be achieved through asking questions like (more examples in this template):
what are things that you know about that very few people know?
what are the things that people always ping you about on Slack?
what tasks pile up when you‚Äôre on vacation?
Once the amount of things to document gets a bit clearer, see how many days are left before they leave and agree on a schedule to leave enough time for this task.
In Between Sessions
The Newbie transforms the raw notes into documentation drafts and gets the Expert to review them.
As more people in the company are aware of this documentation effort, they might have questions of their own; the Newbie adds these points to the agenda for the next session.
The Expert includes the Newbie in all discussions on Slack touching on the subject to maximize the learning opportunities and give the docs a trial by fire.
A Normal Session
In the first 5-10 minutes, the Newbie and the Expert go over unresolved comments in the doc draft, they review the agenda from the previous session and see if anything pops up to be further discussed or explained, and finally, they review the agenda for the current session and decide what to prioritize.
They then go over each point in the agenda: the Expert does most of the talking while the Newbie does most of the note-taking. The Newbie shares their screen for the document to be visible by both pair documentors. The Newbie may interrupt the Expert at any point with questions or with attempts at paraphrasing what the Expert just described. The Expert glances at the notes being taken once in a while to ensure they don‚Äôt contain mistakes from the get-go.
When the time is up, the Newbie and the Expert look at how much they covered from the agenda, move what hasn‚Äôt been covered to the next session, and agree on a date and time for that next session (if it‚Äôs not already regular).
Tools we used
A Calendar: to plan the sessions, to have automatic reminders for them, and to share the visio-conference link.


Custom recurrence with expiry date, Hangouts link, Notification not to miss it, Allow guests to modify event for better collaboration

A Google Document: to store the agenda, the notes and the first documentation drafts. Do make use of the outline on the left-hand side to navigate more easily once the document gets to a certain size. Do make use of comments to discuss and improve the notes and the draft. This is also a good place to involve other people from the company asynchronously. Make sure to put this document in a shared team drive for it to have the right permissions set by default.


Use the ‚ÄúStyles‚Äù dropdown to get this hierarchy

Here‚Äôs a free template Google document to get you started. Feel free to make a copy.
LucidChart: to draw a few diagrams because pictures are great (though you may want to check out Draw.io for a great free alternative).
Why Pair Documenting Works
What usually happens
Unless there is a strong documenting culture, (1) people never prioritize documentation over almost any other task, because it‚Äôs just not as fun as coding or as urgent as the next fire you need to put out. That means that when someone is about to leave, (2) there is an impossible amount of things to document that they don‚Äôt even know where to start. Because they are short on time, they end up drafting a lil‚Äô something and call it a day. (3) Anyway, we never needed that, why are they asking me to document that stuff, who‚Äôs gonna read it anyway?! (Note the use of two ‚Äúanyway‚Äù).
Clear intention through planning
Through planning the pair documenting sessions, we make sure documentation does get prioritized and give it the importance it deserves. If the Expert‚Äôs knowledge is that important and they by happenstance siloed it, it becomes urgent to share this knowledge more widely to deal with that critical bus factor. (Whether they leave or not is almost irrelevant in this case.)
Because we know when the Expert‚Äôs last working day is, it is easier to retro-plan the right number of sessions to cover the entire backlog established in the first session. This of course might need adjusting throughout the pair documentation effort.
More fun and better quality through collaboration
Planning is not enough if the Expert is still lost about what needs documenting and in which level of details. The nagging ‚Äúare they even gonna read it?‚Äù-type questions could well be the end of the documentation effort already: a well-crafted plan not well-executed.
With an accountability buddy, things turn around entirely.
It becomes really difficult to bail out of the plan because you know the other person is expecting you to show up at the session.
Because the Newbie is enthusiastic about the topic, the Expert is more generous in their contribution.
Because the Newbie asks questions and cares about details, the pair documentors tailor the documentation to the level of knowledge on the receiving end. The Expert knows this documentation will be useful. üòå
Aligned incentives
The Expert also knows that what they know should be documented somewhere, and because they like their colleagues, they don‚Äôt want their departure to create a mess. (Right?!)
The Newbie knows this knowledge is valuable, and about to disappear if they don‚Äôt take action. Besides, it‚Äôs something they‚Äôre curious and wanted to learn more about anyway.
The Expert gets to share their knowledge and teach what they know to someone who‚Äôs enthusiastic and interested in the topic; the Newbie gets time with the Expert to learn as much as possible from them.
Parting thoughts
I really enjoyed the pair documenting sessions with Adam and I think they should be made a regular practice, just like pair programming. It‚Äôs a great way to level up people while producing value beyond the scope of that collaboration.
At the same time, documentation is only valuable if it gets read and updated continuously. I‚Äôve been thinking about how to bring it closer to where people are already consuming content. For example, this could take the form of digests of parts of the documentation in the company‚Äôs Slack.
I‚Äôm not super familiar with mob programming, but I do wonder if mob documenting could be a thing to try too.

Acknowledgements:
Adam Jani≈° (@adam_janis) for trying out this pair-documenting idea before his departure :)
Emilia Vidal for her review and suggestions,
Shawn Wang (@swyx) for his review and ideas for the title and Open-Graph image,
Ron Au (@ronvoluted) for providing the font to go ahead with Shawn‚Äôs ideas,
Excalidraw to produce the visuals.*
#### [Year in Review: 2020](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2020&#x2F;) 
*2020, what a ride!
I cannot believe 2020 has already finally come to an end: with the lockdowns and quarantines, time simultaneously flew by and dragged on. A lot of my life was lived through a computer and the Internet. Time to reflect and remember.
Let‚Äôs start with some remarkable facts and events:
personally: - turned 30 in April, without even a beer to celebrate! (hint: the last bit is what‚Äôs remarkable) ‚ùåüç∫ - traveled only once to see my family in France üò¢ - got engaged in August üíç - spent the Christmas holidays alone, for the first time (I feel you, Kevin McCallister) üö∞
at work: - got a raise and earned a promotion üìà - wrote 3 posts on the Frontend Platform‚Äôs internal blog ‚úç
on my blog: - published 8 new posts üöÄ - updated 1 article ‚ôªÔ∏è - started a newsletter (already wrote 2 issues) üóû - broke the 10k unique visitor mark for Build Standalone Expo .apk and .ipa with Turtle CLI üéâ
miscellaneous: - joined 2 great online communities (Coding Career and Blogging For Devs) üôå - revamped a handful of desktop PCs and laptops (cannot believe I was about to get rid of my older laptop when it‚Äôs so smooth now!): most low-end&#x2F;mid computers are slow because of their stock hard drives (and limited RAM), a nice SSD and some RAM extension will do wonders! üíæ - jumped on the sourdough bread baking train (and learnt recently how sourdough baguettes are a lazy baker‚Äôs dream!) üá´üá∑ ü•ñ
Despite everyone calling 2020 their worst year ever, it did not seem so bad personally. Of course, I missed social life and being able to do ‚Äúnormal‚Äù things, but all things considered, I still learnt a lot this year.
Consumer to archivist
Spending so much time online means I absorbed vast amounts of data and after a while, it did not sit so well with me. I believed that I learn best by immersing myself in a continuous flow of information surrounding one topic. Of course, it‚Äôs worked for me so far, but the cost is that I get overwhelmed and it‚Äôs difficult to know when it‚Äôs enough.
Trying to change that brute-force approach to learning, I read here and there that taking notes would force me to slow down and choose what I consume more wisely. I obviously bought ‚ÄúHow to Take Smart Notes‚Äù by S√∂nke Ahrens (and only half-read it), came across the German word Zettlekasten and went on a wild goose chase for the best Personal Knowledge Management system, and read all the articles and watched all the YouTube videos about the subject. Old habits die hard. üòÖ
After using a few of them, I ended up settling with Joplin (which I had of course already set up prior to any of this) and have not looked back. It does not have backlinks so I‚Äôm deeply missing out on interconnected notes, as the hype goes, but it‚Äôs okay. My FOMO is in check for now. Joplin is an active open source project which is available on desktop as well as mobile devices. I retain full ownership (and responsibility) over my notes as Joplin integrates with different storage backends: I chose to use my self-hosted NextCloud instance.
In short:
just-in-case knowledge is expensive; prefer just-in-time knowledge
it‚Äôs easy to go on a wild goose chase only to realise you had everything already
note-taking does force me to slow down and helps to remember better
Archivist to creator
This story does not end here, dear reader. Accumulating notes about topics I‚Äôm interested in helps to slow down and be more intentional with what I consume. But it turns out knowledge without action is mostly useless.
Luckily, Daniel Vassalo wrote this influential tweet:
If you‚Äôre tempted by this, my advice to first-time creators is to start with a very small product: Something you can finish in 2 weeks and charge #### [Build Standalone Expo .apk and .ipa with Turtle CLI [deprecated]](https:&#x2F;&#x2F;www.robincussol.com&#x2F;build-standalone-expo-apk-ipa-with-turtle-cli&#x2F;) 
*This article was updated on February 7, 2023. NOTE: As of Expo SDK 47, the following method does not work any more. With the release of EAS‚Ä¶*
#### [Optimize your img tags with Eleventy Image and WebC](https:&#x2F;&#x2F;www.robincussol.com&#x2F;optimize-your-img-tags-with-eleventy-image-and-webc&#x2F;) 
*I am very excited about WebC and couldn‚Äôt wait to try out the corresponding Eleventy plugin. The first use-case I had in mind was to use‚Ä¶*
#### [Year in Review: 2021](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2021&#x2F;) 
*We‚Äôre already at the start of February 2022, but who says retrospectives need to be done on January 1st?! A lot of things happened in 202‚Ä¶*
#### [Python Dependencies for JavaScript Developers](https:&#x2F;&#x2F;www.robincussol.com&#x2F;python-dependencies-for-javascript-developers&#x2F;) 
*Recently, I needed to update an old Python codebase which had not been touched in 3 years! Of course, the dependencies were so outdated that‚Ä¶*
#### [How to Download a Brain with Pair Documenting](https:&#x2F;&#x2F;www.robincussol.com&#x2F;download-a-brain-with-pair-documenting&#x2F;) 
*When people leave the company, a lot of specific and ad hoc knowledge goes away with them. Unless there is already a strong documentation‚Ä¶*
#### [Year in Review: 2020](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2020&#x2F;) 
*2020, what a ride! I cannot believe 2020 has already finally come to an end: with the lockdowns and quarantines, time simultaneously flew by‚Ä¶*
#### [Docker for JavaScript Devs: How to Containerise Node.js Apps Efficiently](https:&#x2F;&#x2F;www.robincussol.com&#x2F;docker-for-js-devs-how-to-containerise-nodejs-apps-efficiently&#x2F;) 
*Docker is a really cool technology to have applications run the in the same, predictable context, ensuring the ‚Äúbut it works on my machine‚Ä¶*
#### [TypeScript Tidbit: How to Overload an Imported Function](https:&#x2F;&#x2F;www.robincussol.com&#x2F;typescript-tidbit-how-to-overload-an-imported-function&#x2F;) 
*There are times when the type definitions shipped on DefinitelyTyped are not enough and this results in making the TypeScript compiler‚Ä¶*
#### [Wax on, Wax off](https:&#x2F;&#x2F;www.robincussol.com&#x2F;wax-on-wax-off&#x2F;) 
*The reason I got into web development in the first place was the magical ‚ú® feeling you get when you see your code manifest in the browser‚Ä¶*
#### [A Successful Side-Project: Lessons from Swyx](https:&#x2F;&#x2F;www.robincussol.com&#x2F;a-successful-side-project-lessons-from-swyx&#x2F;) 
*If you are on Twitter, chances are you came across this tweet by Daniel Vassallo and it now seems everyone is writing a book! üòÑ Shawn Wang‚Ä¶*0 for it. The experience of getting paid for something you created, directly by consumers, will change you forever. https:&#x2F;&#x2F;t.co&#x2F;UbUD9ch4xQ
‚Äî Daniel Vassallo (@dvassallo) April 10, 2020
 
and Shawn Wang (@swyx) acted on it almost immediately to produce the Coding Career Handbook a few months later. I had followed him for some time on Twitter. His posts, conference talks and online presence in general always brought me value so I wanted to support his work. I was also really glad that half the proceeds would go to FreeCodeCamp. I got the Creators package, not entirely sure what to expect.
This was one of the best decisions of 2020.
As part of the Creators package, there have been regular workshops and they definitely spurred me further to action. After he invited Monica Lent to give a workshop about blogging for developers, I formed a resolve to try and publish a post every 2 weeks, as a way to transform my note-taking game into something more valuable. That‚Äôs when I resurrected my blog with 5 Tips to Start Blogging (for Devs).
A lot of my posts were shared at work and in the company‚Äôs external newsletter (thank you üôÇ) and for the most part, this resurection was successful, even though December was a bit of a hiatus in my blog publishing, as I started my newsletter, Robin‚Äôs Gazette.
I still have a lot to learn when it comes to creating online content and I am looking forward to continuing with this momentum. Whenever I need a reality check of what it takes to embark on this creator journey, I would have a read through Alex West‚Äôs story, as it‚Äôs so real, inspiring and humbling!
Joining online communities
The Coding Career Handbook is an amazing resource and I would like to write a proper review of the book some day; it contains so much valuable information that it would be hard to do it justice here.
What‚Äôs even more awesome about it is that it came with access to a community through Discord and Circle that Shawn manages really well as it keeps delivering value and furthers the book‚Äôs teachings and principles. And if that wasn‚Äôt enough, I met a few interesting people there who I‚Äôm looking forward to getting to know more in 2021.
Judging by how much the Coding Career community helped me to get real with my volitions, I also decided to join Monica Lent‚Äôs Blogging For Devs community because I‚Äôd like to take my blogging further. For example, my article about [Building] Standalone Expo .apk and .ipa with Turtle CLI broke the 10k unique visitor mark in December, through accidental SEO mostly. üéâ I‚Äôm hoping to get a little bit more intentional with SEO as it‚Äôs a great way to magnify the reach of your content. There are so many interesting and inspiring people in Monica‚Äôs community, as well as discussions and workshops about SEO, newsletters, monetization, and of course blogging‚Äîtopics I definitely want to dive deeper in in the new year!
Writing, writing, writing
If you have read this far, it has become pretty apparent that writing is now more than ever my main focus. I think it has been a tremendous source of clarity and success in the last year for me.
The resource that influenced my writing the most this year was this lecture by Larry McEnerney about the Craft of Writing Effectively (here‚Äôs a summary). Having done a PhD, I practiced the ‚Äúwrong‚Äù way of writing for a very long time. Focusing on what‚Äôs valuable for your intended readership makes so much sense.
As I mentioned in my first newsletter issue (let me know if you want a copy of it üòâ), design documents have been crazy useful at work. I must thank my colleage Tobi√°≈° Potoƒçek for bringing about this revolution. In this remote-only work environment, they were a great tool to discuss, make decisions and document them in a searchable manner. Every shortcut needed to be reckoned with and set against the bigger picture. Every quirk or contextual piece of information (which are critically important to understand past decisions or make new ones) are now recorded in writing.
Being a member of the Frontend Platform team, communicating as effectively as possible with the teams we serve was critically important too‚Äîespecially in such challenging times for a travel company in 2020. Most of that communication was done in writing through Slack and Google Documents. (Not to say it was always a smooth ride‚Ä¶)
A look ahead
In 2021, I will focus on staying in shape, physically and mentally. We will go for walks in nature more regularly with Emilia (we agreed at least once a month and have a list of places in Czechia!) I will cycle to work as much as possible, get back into the nice workout rhythm we had during the first lockdown and take care of my sleeping patterns (it‚Äôs all great to wake up earlier to write, but that means going to bed earlier too, Robin ;-)) I will take breaks when I‚Äôm getting overwhelmed, instead of resorting to my usual ‚Äústrategy‚Äù of pushing through until I‚Äôm burnt out.
In 2021, I will focus on maintaining the shift from content consumption to content creation. I want to continue publishing on my blog every 2 weeks as well as send my Gazette every 2 weeks. I will write a book to help PhD graduates transition to web development: I‚Äôm now further along the path (and my work seems to be appreciated :)), so it‚Äôs time to try and lift others as I climb.
In 2021, I will finally speak Slovak fluently to be able to speak to all our wedding guests (still to be planned‚Ä¶ so I got time, I guess :P) in their preferred language. (Robin of January 2022, you‚Äôre welcome!)
C‚Äôest parti!*
#### [Docker for JavaScript Devs: How to Containerise Node.js Apps Efficiently](https:&#x2F;&#x2F;www.robincussol.com&#x2F;docker-for-js-devs-how-to-containerise-nodejs-apps-efficiently&#x2F;) 
*Docker is a really cool technology to have applications run the in the same, predictable context, ensuring the ‚Äúbut it works on my machine‚Äù comments are a thing of the past. Not to mention how Docker integrates with Docker Compose and Kubernetes for larger-scale applications! But that‚Äôs for another day.
In this article, you will learn about some good principles to containerise Node.js apps efficiently. These principles are probably quite general and well-known, but they‚Äôre easy to overlook for beginners to Docker and Dockerfiles.
You will need to have Docker and Node.js installed locally to follow along comfortably.
Docker wants to make you happy, 
Photo by cottonbro from Pexels



Table of contents
Containerising a Next.js app (naive approach)

Docker Glossary
Optimising a Node.js app‚Äôs Docker image

Create a comprehensive .dockerignore file
Use an appropriate base image
Decouple the dependency installation step from application code
Decouple the build from the resulting built application
(Optional) Purge node_modules from unnecessary files
Docker build checklist for JavaScript Devs
Containerising a Next.js app (naive approach)
Let‚Äôs start with a simple Next.js application:
$ npm create next-app --use-npm
and let‚Äôs write the following into a file called Dockerfile at the root of the project:
FROM node:14.15.0

WORKDIR &#x2F;app

COPY . .
RUN npm ci
RUN npm run build

EXPOSE 3000

USER node

CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
Okay, what just happened? üòÑ
Docker Glossary
FROM &lt;image&gt;
WORKDIR &lt;some-path-in-the-container&gt;
COPY &lt;from-context&gt; &lt;to-container&gt;
WORKDIR directory
RUN &lt;command&gt;
docker build process only
EXPOSE &lt;port&gt;
documenting which port the app uses
USER &lt;user&gt;
root with superuser privileges); it‚Äôs good practice to use a different user to run the app.
CMD &lt;command&gt;
docker run &lt;image-tag&gt;, it is not executed during the build process.
Assuming we have Docker installed, we could now run
$ docker build --tag my-containerised-nextjs-app .
This command kindly asks the Docker daemon running on our machine to build the Dockerfile we just wrote with the files present in the current directry (the .) and to call that image my-containerised-nextjs-app (with the --tag flag).
After the build completed, run
$ docker run --rm -p 3000:3000 my-containerised-nextjs-app
and we should have our app running at http:&#x2F;&#x2F;localhost:3000.
This second command orders the Docker daemon to run the image named my-containerised-nextjs-app with port 3000 on my machine to correspond to port 3000 inside the container so that we can interact with our Next.js app. This port mapping is done through the -p hostPort:containerPort flag. Go ahead and change the port mapping and see if you can still access the app.
The --rm flag indicates that we do not want the Docker daemon to keep the container when we stop its execution (with CTRL+C); this is useful not to clog our machines with useless logs while developing.
Voil√†, we have containerised our Next.js app. The End. üéâ
Wait! Don‚Äôt leave, there‚Äôs more! üëá
Optimising a Node.js app‚Äôs Docker image
The section above does the job, but it‚Äôs not optimal. If we only have so few pipeline minutes and we don‚Äôt like wasting resources ‚ôªÔ∏è, this setup will eat more than is necessary. There are a few strategies to optimise a Dockerfile:
Create a comprehensive .dockerignore file
Use an appropriate base image
Decouple the dependency installation step from application code
Decouple the build from the resulting built application
(Optional) Purge node_modules from unnecessary files
Create a comprehensive .dockerignore file
If we look at the logs from building the Docker image, we could read:
Step 4&#x2F;8 : RUN npm ci
 ---&gt; Running in 559b499f0e2c
npm WARN prepare removing existing node_modules&#x2F; before installation
That means we copied the node_modules folder from our local context over to the Docker image being built. What‚Äôs more, npm ci removes them to make sure it works consistently. That is an indication that we should not copy the node_modules in the first place.
To let Docker know some files and folders should be ignored, we can list them in a .dockerignore file. For example, add the following to a file named .dockerignore:
node_modules
Run the build again and the warning disappeared.
What‚Äôs more, we can see how much less was sent to the Docker build context:
# BEFORE
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  101.8MB

# AFTER
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  400.4kB
In practice, we would want to add as many files as possible to our .dockerignore to ensure we‚Äôre not wasting time and energy on files which won‚Äôt be necessary for the build. This can include documentation files (e.g. *.md), configuration files which are only necessary when developing (e.g. .eslint*, .prettier*) as well as our Git history (e.g. .git).
With the following .dockerignore file:
node_modules
*.md
.git
we end up sending the bare minimum to the Docker daemon:
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  248.3kB
Use an appropriate base image
Docker images come in all shapes and sizes. When it comes to building or deploying our app, the smaller the size, the better. For our Next.js app, we don‚Äôt need all that‚Äôs available in node:14.15.0. For example, we don‚Äôt need git or curl. We can instead use the alpine flavour of that image, namely node:14.15.0-alpine.
The difference in size between node:14.15.0 and node:14.15.0-alpine is enormous!
REPOSITORY                    TAG                 SIZE
node                          14.15.0             943MB
node                          14.15.0-alpine      117MB
Our final containerised Next.js app will hence be much smaller thanks to this teeny-tiny modification of our Dockerfile:
- FROM node:14.15.0
+ FROM node:14.15.0-alpine

WORKDIR &#x2F;app

COPY . .
RUN npm ci
RUN npm run build

EXPOSE 3000

USER node

CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
For reference, if we want to inspect the size of the Docker images we have available locally, we can run docker image ls --all.
Our Docker image has size 1.05GB if we use node:14.15.0,
REPOSITORY                    TAG                 IMAGE ID            CREATED             SIZE
my-containerised-nextjs-app   latest              c78d43a2c5bc        15 seconds ago      1.05GB
and it drops to 229MB if we use node:14.15.0-alpine instead!
REPOSITORY                    TAG                 IMAGE ID            CREATED             SIZE
my-containerised-nextjs-app   latest              d0746ef6e8a4        21 seconds ago      229MB
Decouple the dependency installation step from application code
Our setup is already much better with a suitable .dockerignore file and with a much leaner base image. However, we haven‚Äôt made any changes to our package.json and the npm ci step always needs to run if make any changes to our application code.
This is because Docker caches each step as an intermediate Docker container. For example, if we were to run the build again (docker build --tag my-containerised-nextjs-app .), we would see that the cache is used for all steps, resulting in a nearly instant build (because nothing happened, really üòÑ):
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  248.3kB
Step 1&#x2F;8 : FROM node:14.15.0-alpine
 ---&gt; 9db54a688554
Step 2&#x2F;8 : WORKDIR &#x2F;app
 ---&gt; Using cache
 ---&gt; d5d4291dc699
Step 3&#x2F;8 : COPY . .
 ---&gt; Using cache
 ---&gt; b56455e98a93
Step 4&#x2F;8 : RUN npm ci
 ---&gt; Using cache
 ---&gt; ba4ab784f27e
Step 5&#x2F;8 : RUN npm run build
 ---&gt; Using cache
 ---&gt; a51c18594a20
Step 6&#x2F;8 : EXPOSE 3000
 ---&gt; Using cache
 ---&gt; 806dc06cbb6c
Step 7&#x2F;8 : USER node
 ---&gt; Using cache
 ---&gt; b86db08de717
Step 8&#x2F;8 : CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
 ---&gt; Using cache
 ---&gt; d0746ef6e8a4
Successfully built d0746ef6e8a4
Successfully tagged my-containerised-nextjs-app:latest
If we now modify anything in the folder that is not ignored thanks to our .dockerignore file, Docker will have to bust the cache from Step 3 onwards (the ‚ÄúUsing cache‚Äù expression is not printed any more). Let‚Äôs create an empty file and run the build again:
# create an empty file
$ touch file
# build again
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  248.8kB
Step 1&#x2F;8 : FROM node:14.15.0-alpine
 ---&gt; 9db54a688554
Step 2&#x2F;8 : WORKDIR &#x2F;app
 ---&gt; Using cache
 ---&gt; d5d4291dc699
Step 3&#x2F;8 : COPY . .
 ---&gt; e2b761bb08a6         # The cache is not used anymore
Step 4&#x2F;8 : RUN npm ci
 ---&gt; Running in b36f2511e117
...
To remedy this and ensure that npm ci runs only when necessary, we can first copy package.json and package-lock.json files, run npm ci, and then bring in the rest of the files to build the project:
FROM node:14.15.0-alpine

WORKDIR &#x2F;app

- COPY . .
+ COPY package.json .
+ COPY package-lock.json .
RUN npm ci
+ COPY . .
RUN npm run build

EXPOSE 3000

USER node

CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
After we modified the Dockerfile by applying the diff above, we see that Docker does not leverage the cache at all because the steps are different. This always happens when we modify the layers and&#x2F;or their order.
However, after running this build for a first time, subsequent builds will be much faster as the npm ci step will use the cache unless we modify package.json or package-lock.json:
# create another file to see when Docker stops using the cache
$ touch another-file
# run the build again
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  249.3kB
Step 1&#x2F;10 : FROM node:14.15.0-alpine
 ---&gt; 9db54a688554
Step 2&#x2F;10 : WORKDIR &#x2F;app
 ---&gt; Using cache
 ---&gt; d5d4291dc699
Step 3&#x2F;10 : COPY package.json .
 ---&gt; Using cache
 ---&gt; 139b5a611c0b
Step 4&#x2F;10 : COPY package-lock.json .
 ---&gt; Using cache
 ---&gt; 5bc380de1397
Step 5&#x2F;10 : RUN npm ci
 ---&gt; Using cache
 ---&gt; dff6b2da4bdc
Step 6&#x2F;10 : COPY . .
 ---&gt; 08911c09b40f
Step 7&#x2F;10 : RUN npm run build
 ---&gt; Running in f5374a54d9ad

&gt; my-app@0.1.0 build &#x2F;app
&gt; next build
...
Decouple the build from the resulting built application
For this section to make more sense, we will create another Next.js app that uses some dev dependencies which are necessary only when building the app but not when running it in production.
$ npm create next-app --use-npm --example with-tailwindcss with-tailwindcss-app
Copy the Dockerfile and .dockerignore files created in the other example into with-tailwindcss-app. Build the Docker image and run it to make sure it‚Äôs working well before continuing:
$ docker build --tag with-tailwindcss-app .
$ docker run --rm -p 3000:3000 with-tailwindcss-app
As we can see in the package.json file, we have a few dependencies which are only ever going to be used when building our app. We won‚Äôt need them in the final Docker image. So let‚Äôs get rid of them!
We are going to leverage multi-stage Docker builds. They sound more complicated than they are :)
Here‚Äôs a multi-stage build Dockerfile: in the builder container, we install dependencies and build our app, and in the second stage, we copy relevant files from the builder to our final image and install only production dependencies.
FROM node:14.15.0-alpine as builder

WORKDIR &#x2F;app

COPY package.json .
COPY package-lock.json .
RUN npm ci
COPY . .
RUN npm run build

FROM node:14.15.0-alpine

WORKDIR &#x2F;app

COPY --from&#x3D;builder &#x2F;app&#x2F;package.json .
COPY --from&#x3D;builder &#x2F;app&#x2F;package-lock.json .
RUN npm ci --production
COPY --from&#x3D;builder &#x2F;app&#x2F;.next .next

EXPOSE 3000

USER node

CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
If our app also contained a Next.js config file and a public folder, we would also need to copy them from the builder stage:
...
COPY --from&#x3D;builder &#x2F;app&#x2F;.next .
+ COPY --from&#x3D;builder &#x2F;app&#x2F;next.config.js .
+ COPY --from&#x3D;builder &#x2F;app&#x2F;public public
...
Comparing the sizes, we see that we removed 39MB of dev dependencies, not bad.
without multi-stage build
REPOSITORY                    TAG                 IMAGE ID            CREATED              SIZE
with-tailwindcss-app          latest              88089e6f965d        18 minutes ago      269MB
with multi-stage build
REPOSITORY                    TAG                 IMAGE ID            CREATED              SIZE
with-tailwindcss-app          latest              ba7307736fb0        25 seconds ago       230MB
(Optional) Purge node_modules from unnecessary files
Finally, to make our Docker image the leanest, we will purge our node modules from all the files which were included by the library authors and aren‚Äôt directly useful to our Docker image. For example, documentation files and READMEs, config files for Prettier and such, etc.
Note that this is not without risk as we could be removing files that we actually need to run the application correctly (we had a file named test.js that contained important code and it was mercilessly removed by the tool, which broke the application üòÖ).
We will add another stage called production-deps to make our node modules go through a diet with node-prune (GitHub repo). The list of files and folders that node-prune will remove is largely inspired by Yarn‚Äôs default list (generated through yarn autoclean --init).
To install node-prune, we need curl to be a locally available executable, so we can either choose a base image that contains it out of the box, or we can add it to node:14.15.0-alpine. Because we won‚Äôt need anything else, we will choose the latter.
FROM node:14.15.0-alpine as builder

WORKDIR &#x2F;app

COPY package.json .
COPY package-lock.json .
RUN npm ci
COPY . .
RUN npm run build

+ FROM node:14.15.0-alpine as production-deps

+ WORKDIR &#x2F;app

COPY --from&#x3D;builder &#x2F;app&#x2F;package.json .
COPY --from&#x3D;builder &#x2F;app&#x2F;package-lock.json .
RUN npm ci --production
+ # Add curl
+ RUN apk --no-cache add curl
+ # Install node-prune https:&#x2F;&#x2F;github.com&#x2F;tj&#x2F;node-prune
+ RUN curl -sf https:&#x2F;&#x2F;gobinaries.com&#x2F;tj&#x2F;node-prune | sh
+ RUN node-prune &#x2F;app

FROM node:14.15.0-alpine

WORKDIR &#x2F;app

+ COPY --from&#x3D;production-deps &#x2F;app&#x2F;package.json .
+ COPY --from&#x3D;production-deps &#x2F;app&#x2F;package-lock.json .
+ COPY --from&#x3D;production-deps &#x2F;app&#x2F;node_modules node_modules

COPY --from&#x3D;builder &#x2F;app&#x2F;.next .next

EXPOSE 3000

USER node

CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
Try it by building the image once more.
When node-prune ran, it printed out in the console that it removed 12MB:
...
Step 15&#x2F;24 : RUN node-prune &#x2F;app
 ---&gt; Running in 69e030ab8b70


         files total 14,269
       files removed 3,722
        size removed 12 MB
            duration 216ms
...
However, suprinsingly, a whopping 32MB were removed in comparison to our previous Dockerfile. (It seems node-prune‚Äôs tallying is not totally accurate when I tested locally as it removed 20.7 MB instead ‚Äî though it still doesn‚Äôt explain the other 11.3 MB ü§∑‚Äç‚ôÇÔ∏è)
$ docker image ls with-tailwindcss-app
REPOSITORY                    TAG                 IMAGE ID            CREATED              SIZE
with-tailwindcss-app          latest              c5e2081dba30        9 seconds ago        198MB
Let‚Äôs ensure our app is running well without the files node-prune removed and we can be on our merry way! üê≥ üéâ
Docker build checklist for JavaScript Devs
To summarise what we‚Äôve learnt so far, here‚Äôs a small checklist to review our own Docker build setups:
I have a comprehensive .dockerignore file
I use an appropriate base image
I decoupled the dependency installation step to improve caching
I decoupled the resulting built application from the build step
I purged the node_modules from unnecessary files
Time to flex! üí™ Show me your before and after Docker image sizes in the comments below!*
#### [TypeScript Tidbit: How to Overload an Imported Function](https:&#x2F;&#x2F;www.robincussol.com&#x2F;typescript-tidbit-how-to-overload-an-imported-function&#x2F;) 
*There are times when the type definitions shipped on DefinitelyTyped are not enough and this results in making the TypeScript compiler unhappy. Oh noes! üò≠
Functions Overloading Be Like, Photo by Luis Villasmil) on Unsplash.



Overload an imported function in TypeScript
But fear not! It is possible to overload a function imported from a different module (which could even be a local module&#x2F;file, not necessarily a node module) without ‚Äúpatching‚Äù the corresponding @types&#x2F;&lt;package&gt; type definitions.
import { someFunction } from &#39;module&#39;

&#x2F;&#x2F; the function overloading
declare module &#39;module&#39; {
  function someFunction() &#x2F;&#x2F; the overload you need
}

someFunction() &#x2F;&#x2F; with the overloaded version ‚úîÔ∏è
Example: overload Ramda‚Äôs compose function
A practical example is Ramda‚Äôs compose function. If you pass more than 7 functions to the function, you need to overload Ramda‚Äôs type definitions coming from @types&#x2F;ramda as the TypeScript compiler will report an error otherwise (TypeScript Playground Error Example).

DefinitelyTyped obviously cannot provide the type definitions for any number of arguments as compose accepts as many arguments as you want. So it‚Äôs up to you to inform the TypeScript compiler that this usage is actually okay. üòå
This can be done like in the example below (TypeScript Playground Working Example):
import * as R from &#39;ramda&#39;

&#x2F;&#x2F; overloading compose because &#x60;@types&#x2F;ramda&#x60; exposes types for up to 6 functions
declare module &#39;ramda&#39; {
  function compose&lt;V0, T1, T2, T3, T4, T5, T6, T7&gt;(
    fn6: (x: T6) &#x3D;&gt; T7,
    fn5: (x: T5) &#x3D;&gt; T6,
    fn4: (x: T4) &#x3D;&gt; T5,
    fn3: (x: T3) &#x3D;&gt; T4,
    fn2: (x: T2) &#x3D;&gt; T3,
    fn1: (x: T1) &#x3D;&gt; T2,
    fn0: (x0: V0) &#x3D;&gt; T1
  ): (x0: V0) &#x3D;&gt; T7
}

&#x2F;&#x2F; and now, we can use:
const someComplicatedResult &#x3D; R.compose&lt;V0, T1, T2, T3, T4, T5, T6, T7&gt;(
  fn6,
  fn5,
  fn4,
  fn3,
  fn2,
  fn1,
  fn0
)(&#39;üòÖ&#39;)
We can see from the screenshot below that the overload was correctly taken into consideration. üéâ

Caveat
I can imagine that if this is overused, things can become quickly intractable. So use it sparingly and always with a good reason why. Your future self will be happy to find an explanation in a comment above the overloading as it is kind of unusual. üòâ
I discovered this while refactoring @kiwicom&#x2F;splitster to TS (link to commit) and thought it might be useful to share. Hope it helped you!*
#### [Wax on, Wax off](https:&#x2F;&#x2F;www.robincussol.com&#x2F;wax-on-wax-off&#x2F;) 
*The reason I got into web development in the first place was the magical ‚ú® feeling you get when you see your code manifest in the browser.
In my current role at work, I don‚Äôt do much of that anymore. And I guess I kind of miss it. Especially the part when I am given a clearly defined outcome, with clear guidelines. Perks of being labelled a senior, I guess. üòú But I digress.
Since I started with React, a lot of things have happened in web development. At the moment, I‚Äôm especially interested in Svelte and TailwindCSS and after watching Rich Harris‚Äôs latest talk ‚ÄúFuturistic Web Development‚Äù, I needed an excuse to try Svelte ASAP.
Staying sharp with deliberate practice
To ensure my frontend skills don‚Äôt wither, I would like to spend dedicated time each week to practice on a set of frontend challenges and reflect on what I learnt from them.
Fortunately, I recently discovered FrontendMentor.io and this website offers quite the list of frontend challenges, ranging in difficulty and consistently with nice designs.
Improve your front-end coding skills by building real projects
Solve real-world HTML, CSS and JavaScript challenges whilst working to professional designs.
‚Äî FrontendMentor.io
And to practice with new frontend technologies, it‚Äôs good to find nice designs. But it‚Äôs even better when they come with a style guide and assets like pictures and icons. üòç
Here‚Äôs how it works:
You choose a challenge and download the files.
You attempt the challenge with the stack of your choice. Because the challenge files come with a style guide, the necessary pictures and icons, etc. it‚Äôs really easy to get started! (Unless you spend hours deciding which stack to use, of course üòÇ)
You upload it to GitHub and deploy your attempt on Vercel or Netlify.
Finally, you submit your solution through your challenges dashboard on the platform.
You can then get feedback on your submissions and provide reviews for other people‚Äôs submissions too, which I find really cool. I remember how difficult it was to get feedback when I was first learning web development.
Learnings
The last challenge I attempted looked pleasing on my eyes and I honestly did not expect I would learn so much from it. That makes me want to practice even more!
Check out the live deployment!


I encountered the following problems to complete the ‚ÄúSocial media dashboard with theme switcher‚Äù challenge:
setting up Svelte with TailwindCSS (thank you Swyx and Chris Dhanaraj)
implementing a toggle component from scratch
without accessibility in mind (where I started: W3Schools üòÖ)
with accessibility in mind (where I ended up: Smashing Magazine, though I‚Äôm not sure how to test if my current solution is the most accessible)
implementing a theme switcher in Svelte (inspiration from this Svelte REPL)
adding a border with a gradient to a block element (this requires using a CSS trick from nowhere else but CSS Tricks of course)
pulling my hair for not realising that you need the group class for group-hover: modifiers to apply in the children with Tailwind (thank you Estevan Maito)
how to extract the imported Svelte components‚Äô props‚Äô TypeScript types (that‚Äôs a mouthful!), instead of exporting and importing the types directly (TL;DR: use $props_def from the component)
&lt;script lang&#x3D;&quot;ts&quot;&gt;
  import MyComponent from &#39;.&#x2F;MyComponent.svelte&#39;;

  const data: MyComponent[&#39;$props_def&#39;][&#39;data&#39;] &#x3D; ...
&lt;&#x2F;script&gt;

&lt;MyComponent {data} &#x2F;&gt;

...
deploying a ‚Äúmonorepo‚Äù on Vercel without redeploying all the folders all the time by specifying the ‚ÄúIgnored Build Step‚Äù with something like git diff --quiet HEAD^ HEAD -- subfolder-in-monorepo to only rebuild the site if changes were made in subfolder-in-monorepo.
Here‚Äôs the GitHub repository where I will learn in public and add future challenges I will attempt. (Though I might need to rename this repository in the future as I just found this really nice list of project ideas to build with other platforms than FrontendMentor.io üòâ)
Let me know in the comments what your current deliberate practice is!*
#### [A Successful Side-Project: Lessons from Swyx](https:&#x2F;&#x2F;www.robincussol.com&#x2F;a-successful-side-project-lessons-from-swyx&#x2F;) 
*If you are on Twitter, chances are you came across this tweet by Daniel Vassallo
If you‚Äôre tempted by this, my advice to first-time creators is to start with a very small product: Something you can finish in 2 weeks and charge #### [Build Standalone Expo .apk and .ipa with Turtle CLI [deprecated]](https:&#x2F;&#x2F;www.robincussol.com&#x2F;build-standalone-expo-apk-ipa-with-turtle-cli&#x2F;) 
*This article was updated on February 7, 2023. NOTE: As of Expo SDK 47, the following method does not work any more. With the release of EAS‚Ä¶*
#### [Optimize your img tags with Eleventy Image and WebC](https:&#x2F;&#x2F;www.robincussol.com&#x2F;optimize-your-img-tags-with-eleventy-image-and-webc&#x2F;) 
*I am very excited about WebC and couldn‚Äôt wait to try out the corresponding Eleventy plugin. The first use-case I had in mind was to use‚Ä¶*
#### [Year in Review: 2021](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2021&#x2F;) 
*We‚Äôre already at the start of February 2022, but who says retrospectives need to be done on January 1st?! A lot of things happened in 202‚Ä¶*
#### [Python Dependencies for JavaScript Developers](https:&#x2F;&#x2F;www.robincussol.com&#x2F;python-dependencies-for-javascript-developers&#x2F;) 
*Recently, I needed to update an old Python codebase which had not been touched in 3 years! Of course, the dependencies were so outdated that‚Ä¶*
#### [How to Download a Brain with Pair Documenting](https:&#x2F;&#x2F;www.robincussol.com&#x2F;download-a-brain-with-pair-documenting&#x2F;) 
*When people leave the company, a lot of specific and ad hoc knowledge goes away with them. Unless there is already a strong documentation‚Ä¶*
#### [Year in Review: 2020](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2020&#x2F;) 
*2020, what a ride! I cannot believe 2020 has already finally come to an end: with the lockdowns and quarantines, time simultaneously flew by‚Ä¶*
#### [Docker for JavaScript Devs: How to Containerise Node.js Apps Efficiently](https:&#x2F;&#x2F;www.robincussol.com&#x2F;docker-for-js-devs-how-to-containerise-nodejs-apps-efficiently&#x2F;) 
*Docker is a really cool technology to have applications run the in the same, predictable context, ensuring the ‚Äúbut it works on my machine‚Ä¶*
#### [TypeScript Tidbit: How to Overload an Imported Function](https:&#x2F;&#x2F;www.robincussol.com&#x2F;typescript-tidbit-how-to-overload-an-imported-function&#x2F;) 
*There are times when the type definitions shipped on DefinitelyTyped are not enough and this results in making the TypeScript compiler‚Ä¶*
#### [Wax on, Wax off](https:&#x2F;&#x2F;www.robincussol.com&#x2F;wax-on-wax-off&#x2F;) 
*The reason I got into web development in the first place was the magical ‚ú® feeling you get when you see your code manifest in the browser‚Ä¶*
#### [A Successful Side-Project: Lessons from Swyx](https:&#x2F;&#x2F;www.robincussol.com&#x2F;a-successful-side-project-lessons-from-swyx&#x2F;) 
*If you are on Twitter, chances are you came across this tweet by Daniel Vassallo and it now seems everyone is writing a book! üòÑ Shawn Wang‚Ä¶*0 for it. The experience of getting paid for something you created, directly by consumers, will change you forever. https:&#x2F;&#x2F;t.co&#x2F;UbUD9ch4xQ
‚Äî Daniel Vassallo (@dvassallo) April 10, 2020
 
and it now seems everyone is writing a book! üòÑ
Shawn Wang took this advice and decided to go forth with his Coding Career Handbook (for which I‚Äôm grateful! It‚Äôs such a great book!). He shares his lessons and regrets in this talk at js.la üìΩÔ∏è, and here are my notes for my future self when I want to ship a side project (for money or not).
The How
There are 4 aspects:
Pre-selling
Delivering
Launching
Keeping going
Pre-selling - or your own Kickstarter
On the first day of this endeavour, take the time to find a topic, a name and put up a landing page with good marketing copy.
Pre-sell to your friends and close network: they are more likely to ask you about the state of the project and you would hate to disappoint. What‚Äôs more, you‚Äôve got their money which you would awkwardly need to return otherwise.
This is probably a good moment to decide which platform(s) you want to use to support the sale of your book. Gumroad and Podia seem to be fairly big players in that space.
If it is your first side project that you would like to ship for money, don‚Äôt fret too much over the pricing strategy; it is more of a distraction from writing and completing the project. Sticking to Daniel Vassallo‚Äôs recommendation of #### [Build Standalone Expo .apk and .ipa with Turtle CLI [deprecated]](https:&#x2F;&#x2F;www.robincussol.com&#x2F;build-standalone-expo-apk-ipa-with-turtle-cli&#x2F;) 
*This article was updated on February 7, 2023. NOTE: As of Expo SDK 47, the following method does not work any more. With the release of EAS‚Ä¶*
#### [Optimize your img tags with Eleventy Image and WebC](https:&#x2F;&#x2F;www.robincussol.com&#x2F;optimize-your-img-tags-with-eleventy-image-and-webc&#x2F;) 
*I am very excited about WebC and couldn‚Äôt wait to try out the corresponding Eleventy plugin. The first use-case I had in mind was to use‚Ä¶*
#### [Year in Review: 2021](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2021&#x2F;) 
*We‚Äôre already at the start of February 2022, but who says retrospectives need to be done on January 1st?! A lot of things happened in 202‚Ä¶*
#### [Python Dependencies for JavaScript Developers](https:&#x2F;&#x2F;www.robincussol.com&#x2F;python-dependencies-for-javascript-developers&#x2F;) 
*Recently, I needed to update an old Python codebase which had not been touched in 3 years! Of course, the dependencies were so outdated that‚Ä¶*
#### [How to Download a Brain with Pair Documenting](https:&#x2F;&#x2F;www.robincussol.com&#x2F;download-a-brain-with-pair-documenting&#x2F;) 
*When people leave the company, a lot of specific and ad hoc knowledge goes away with them. Unless there is already a strong documentation‚Ä¶*
#### [Year in Review: 2020](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2020&#x2F;) 
*2020, what a ride! I cannot believe 2020 has already finally come to an end: with the lockdowns and quarantines, time simultaneously flew by‚Ä¶*
#### [Docker for JavaScript Devs: How to Containerise Node.js Apps Efficiently](https:&#x2F;&#x2F;www.robincussol.com&#x2F;docker-for-js-devs-how-to-containerise-nodejs-apps-efficiently&#x2F;) 
*Docker is a really cool technology to have applications run the in the same, predictable context, ensuring the ‚Äúbut it works on my machine‚Ä¶*
#### [TypeScript Tidbit: How to Overload an Imported Function](https:&#x2F;&#x2F;www.robincussol.com&#x2F;typescript-tidbit-how-to-overload-an-imported-function&#x2F;) 
*There are times when the type definitions shipped on DefinitelyTyped are not enough and this results in making the TypeScript compiler‚Ä¶*
#### [Wax on, Wax off](https:&#x2F;&#x2F;www.robincussol.com&#x2F;wax-on-wax-off&#x2F;) 
*The reason I got into web development in the first place was the magical ‚ú® feeling you get when you see your code manifest in the browser‚Ä¶*
#### [A Successful Side-Project: Lessons from Swyx](https:&#x2F;&#x2F;www.robincussol.com&#x2F;a-successful-side-project-lessons-from-swyx&#x2F;) 
*If you are on Twitter, chances are you came across this tweet by Daniel Vassallo and it now seems everyone is writing a book! üòÑ Shawn Wang‚Ä¶*0 is probably enough.
Delivering
Thanks to your pre-writing, e.g. gathering notes, writing blog posts, etc., you already have some amount of the material you would like to include in the finished product. If it‚Äôs 25%, that means you still need to actually write the other 75%.
If possible, you should continue your ‚Äúnormal‚Äù activities, like shipping blog posts about other topics, appearing on podcasts, etc.
As you are writing, document your journey and give away one or two chapters for free as teasers. They‚Äôre a showcase for what you‚Äôre producing and could lead to podcast interviews for further exposure.
I was sharing my personal journey, lessons and milestones.
The best marketing is no marketing. No one wants to be sold anything.
‚Äî Alex West, in Two and a half years of building products
Daniel Vassallo‚Äôs advice to time box the project to 2 weeks is a very important idea: it is so easy to fall prey to scope creep by adding more and more topics to cover, especially when you are knowledgeable and excited about it! But this may well mean that you will never actually ship it. So harness your enthusiasm to provide an advantage.
Of course, you have the goal to ship that product, but what parts of your day actively contribute to that goal? If you‚Äôd like to get anything done, adopting a system to support your goals will go a long way.

Systems &gt; Goals, Source: https:&#x2F;&#x2F;jamesclear.com&#x2F;goals-systems
Launching
All your efforts are coming to an end‚Ä¶ or so you thought. Now is the time to launch your product! This phase requires an entirely different skill set so it‚Äôs good to have practice.
Having a great landing page is a must. A good resource on the subject is Rob Hope‚Äôs book Landing Page Hot Tips, and you can read Shawn‚Äôs review of it too.
Make sure to know the rules of the platforms you‚Äôre using to launch: Shawn‚Äôs Show HN post was doing very well and directing a lot of traffic to his landing page, but it was sadly taken down as no free sample of the book was available there (despite the blog posts).
If people leave out a negative comment, take this as an opportunity to turn their opinions around.
Shawn recommends watching Adam Wathan‚Äôs talk Nailing Your First Launch.
Keeping going
This is still not the end. What comes tomorrow? Next week, next month, next year?
You can ‚Äúlaunch‚Äù your product multiple times.
You can start a community around your book or product.
One of the biggest mistakes I see founders make is abandoning what already works and trying to take on a bigger challenge before they‚Äôre making enough money to develop products full-time.
Instead, focus on replicating the same type of product with another angle or in another market, maybe more than once.
‚Äî Rob Walling, in The Stairstep Approach to Bootstrapping
The Why
If you want to go from employee to entrepreneur, it is good to learn without too much risk how to do ‚Äúbusiness‚Äù without all the supports from other departments. For example, as a Software Engineer, you would not be focusing much on attracting leads for your company; there would be a design team and product managers making decisions about the product, etc.
When you‚Äôre launching a product on your own, you need to perform in all the roles and learn as you go. Especially when it comes to side-projects, developing a system to support your goals, and improving your discipline and focus.
You will get acquainted with the valley of despair and go through the emotional journey it describes; this is inevitable, and maybe even necessary, to create anything great.

 Source: https:&#x2F;&#x2F;john.do&#x2F;emotional-journey-creating&#x2F; 
This can be daunting but it will most likely be a rewarding experience, at least in terms of skills acquisition if not financially.
Make sure to define in advance your idea of success for this project: is it for the learning experience and to have a published book to your name, is it solely about making X amount of money?
Resources
üìΩÔ∏è Shawn‚Äôs talk, Lessons and Regrets From Shipping My $50000 Coronavirus Side Project
üìΩÔ∏è Adam Wathan‚Äôs talk, Nailing Your First Launch
üìì Rob Walling, The Stairstep Approach to Bootstrapping
üìì James Clear, Forget About Setting Goals. Focus on This Instead
üìì Alex West, Two and a half years of building products*0 for it. The experience of getting paid for something you created, directly by consumers, will change you forever. https:&#x2F;&#x2F;t.co&#x2F;UbUD9ch4xQ
‚Äî Daniel Vassallo (@dvassallo) April 10, 2020
 
and Shawn Wang (@swyx) acted on it almost immediately to produce the Coding Career Handbook a few months later. I had followed him for some time on Twitter. His posts, conference talks and online presence in general always brought me value so I wanted to support his work. I was also really glad that half the proceeds would go to FreeCodeCamp. I got the Creators package, not entirely sure what to expect.
This was one of the best decisions of 2020.
As part of the Creators package, there have been regular workshops and they definitely spurred me further to action. After he invited Monica Lent to give a workshop about blogging for developers, I formed a resolve to try and publish a post every 2 weeks, as a way to transform my note-taking game into something more valuable. That‚Äôs when I resurrected my blog with 5 Tips to Start Blogging (for Devs).
A lot of my posts were shared at work and in the company‚Äôs external newsletter (thank you üôÇ) and for the most part, this resurection was successful, even though December was a bit of a hiatus in my blog publishing, as I started my newsletter, Robin‚Äôs Gazette.
I still have a lot to learn when it comes to creating online content and I am looking forward to continuing with this momentum. Whenever I need a reality check of what it takes to embark on this creator journey, I would have a read through Alex West‚Äôs story, as it‚Äôs so real, inspiring and humbling!
Joining online communities
The Coding Career Handbook is an amazing resource and I would like to write a proper review of the book some day; it contains so much valuable information that it would be hard to do it justice here.
What‚Äôs even more awesome about it is that it came with access to a community through Discord and Circle that Shawn manages really well as it keeps delivering value and furthers the book‚Äôs teachings and principles. And if that wasn‚Äôt enough, I met a few interesting people there who I‚Äôm looking forward to getting to know more in 2021.
Judging by how much the Coding Career community helped me to get real with my volitions, I also decided to join Monica Lent‚Äôs Blogging For Devs community because I‚Äôd like to take my blogging further. For example, my article about [Building] Standalone Expo .apk and .ipa with Turtle CLI broke the 10k unique visitor mark in December, through accidental SEO mostly. üéâ I‚Äôm hoping to get a little bit more intentional with SEO as it‚Äôs a great way to magnify the reach of your content. There are so many interesting and inspiring people in Monica‚Äôs community, as well as discussions and workshops about SEO, newsletters, monetization, and of course blogging‚Äîtopics I definitely want to dive deeper in in the new year!
Writing, writing, writing
If you have read this far, it has become pretty apparent that writing is now more than ever my main focus. I think it has been a tremendous source of clarity and success in the last year for me.
The resource that influenced my writing the most this year was this lecture by Larry McEnerney about the Craft of Writing Effectively (here‚Äôs a summary). Having done a PhD, I practiced the ‚Äúwrong‚Äù way of writing for a very long time. Focusing on what‚Äôs valuable for your intended readership makes so much sense.
As I mentioned in my first newsletter issue (let me know if you want a copy of it üòâ), design documents have been crazy useful at work. I must thank my colleage Tobi√°≈° Potoƒçek for bringing about this revolution. In this remote-only work environment, they were a great tool to discuss, make decisions and document them in a searchable manner. Every shortcut needed to be reckoned with and set against the bigger picture. Every quirk or contextual piece of information (which are critically important to understand past decisions or make new ones) are now recorded in writing.
Being a member of the Frontend Platform team, communicating as effectively as possible with the teams we serve was critically important too‚Äîespecially in such challenging times for a travel company in 2020. Most of that communication was done in writing through Slack and Google Documents. (Not to say it was always a smooth ride‚Ä¶)
A look ahead
In 2021, I will focus on staying in shape, physically and mentally. We will go for walks in nature more regularly with Emilia (we agreed at least once a month and have a list of places in Czechia!) I will cycle to work as much as possible, get back into the nice workout rhythm we had during the first lockdown and take care of my sleeping patterns (it‚Äôs all great to wake up earlier to write, but that means going to bed earlier too, Robin ;-)) I will take breaks when I‚Äôm getting overwhelmed, instead of resorting to my usual ‚Äústrategy‚Äù of pushing through until I‚Äôm burnt out.
In 2021, I will focus on maintaining the shift from content consumption to content creation. I want to continue publishing on my blog every 2 weeks as well as send my Gazette every 2 weeks. I will write a book to help PhD graduates transition to web development: I‚Äôm now further along the path (and my work seems to be appreciated :)), so it‚Äôs time to try and lift others as I climb.
In 2021, I will finally speak Slovak fluently to be able to speak to all our wedding guests (still to be planned‚Ä¶ so I got time, I guess :P) in their preferred language. (Robin of January 2022, you‚Äôre welcome!)
C‚Äôest parti!*
#### [Docker for JavaScript Devs: How to Containerise Node.js Apps Efficiently](https:&#x2F;&#x2F;www.robincussol.com&#x2F;docker-for-js-devs-how-to-containerise-nodejs-apps-efficiently&#x2F;) 
*Docker is a really cool technology to have applications run the in the same, predictable context, ensuring the ‚Äúbut it works on my machine‚Äù comments are a thing of the past. Not to mention how Docker integrates with Docker Compose and Kubernetes for larger-scale applications! But that‚Äôs for another day.
In this article, you will learn about some good principles to containerise Node.js apps efficiently. These principles are probably quite general and well-known, but they‚Äôre easy to overlook for beginners to Docker and Dockerfiles.
You will need to have Docker and Node.js installed locally to follow along comfortably.
Docker wants to make you happy, 
Photo by cottonbro from Pexels



Table of contents
Containerising a Next.js app (naive approach)

Docker Glossary
Optimising a Node.js app‚Äôs Docker image

Create a comprehensive .dockerignore file
Use an appropriate base image
Decouple the dependency installation step from application code
Decouple the build from the resulting built application
(Optional) Purge node_modules from unnecessary files
Docker build checklist for JavaScript Devs
Containerising a Next.js app (naive approach)
Let‚Äôs start with a simple Next.js application:
$ npm create next-app --use-npm
and let‚Äôs write the following into a file called Dockerfile at the root of the project:
FROM node:14.15.0

WORKDIR &#x2F;app

COPY . .
RUN npm ci
RUN npm run build

EXPOSE 3000

USER node

CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
Okay, what just happened? üòÑ
Docker Glossary
FROM &lt;image&gt;
WORKDIR &lt;some-path-in-the-container&gt;
COPY &lt;from-context&gt; &lt;to-container&gt;
WORKDIR directory
RUN &lt;command&gt;
docker build process only
EXPOSE &lt;port&gt;
documenting which port the app uses
USER &lt;user&gt;
root with superuser privileges); it‚Äôs good practice to use a different user to run the app.
CMD &lt;command&gt;
docker run &lt;image-tag&gt;, it is not executed during the build process.
Assuming we have Docker installed, we could now run
$ docker build --tag my-containerised-nextjs-app .
This command kindly asks the Docker daemon running on our machine to build the Dockerfile we just wrote with the files present in the current directry (the .) and to call that image my-containerised-nextjs-app (with the --tag flag).
After the build completed, run
$ docker run --rm -p 3000:3000 my-containerised-nextjs-app
and we should have our app running at http:&#x2F;&#x2F;localhost:3000.
This second command orders the Docker daemon to run the image named my-containerised-nextjs-app with port 3000 on my machine to correspond to port 3000 inside the container so that we can interact with our Next.js app. This port mapping is done through the -p hostPort:containerPort flag. Go ahead and change the port mapping and see if you can still access the app.
The --rm flag indicates that we do not want the Docker daemon to keep the container when we stop its execution (with CTRL+C); this is useful not to clog our machines with useless logs while developing.
Voil√†, we have containerised our Next.js app. The End. üéâ
Wait! Don‚Äôt leave, there‚Äôs more! üëá
Optimising a Node.js app‚Äôs Docker image
The section above does the job, but it‚Äôs not optimal. If we only have so few pipeline minutes and we don‚Äôt like wasting resources ‚ôªÔ∏è, this setup will eat more than is necessary. There are a few strategies to optimise a Dockerfile:
Create a comprehensive .dockerignore file
Use an appropriate base image
Decouple the dependency installation step from application code
Decouple the build from the resulting built application
(Optional) Purge node_modules from unnecessary files
Create a comprehensive .dockerignore file
If we look at the logs from building the Docker image, we could read:
Step 4&#x2F;8 : RUN npm ci
 ---&gt; Running in 559b499f0e2c
npm WARN prepare removing existing node_modules&#x2F; before installation
That means we copied the node_modules folder from our local context over to the Docker image being built. What‚Äôs more, npm ci removes them to make sure it works consistently. That is an indication that we should not copy the node_modules in the first place.
To let Docker know some files and folders should be ignored, we can list them in a .dockerignore file. For example, add the following to a file named .dockerignore:
node_modules
Run the build again and the warning disappeared.
What‚Äôs more, we can see how much less was sent to the Docker build context:
# BEFORE
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  101.8MB

# AFTER
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  400.4kB
In practice, we would want to add as many files as possible to our .dockerignore to ensure we‚Äôre not wasting time and energy on files which won‚Äôt be necessary for the build. This can include documentation files (e.g. *.md), configuration files which are only necessary when developing (e.g. .eslint*, .prettier*) as well as our Git history (e.g. .git).
With the following .dockerignore file:
node_modules
*.md
.git
we end up sending the bare minimum to the Docker daemon:
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  248.3kB
Use an appropriate base image
Docker images come in all shapes and sizes. When it comes to building or deploying our app, the smaller the size, the better. For our Next.js app, we don‚Äôt need all that‚Äôs available in node:14.15.0. For example, we don‚Äôt need git or curl. We can instead use the alpine flavour of that image, namely node:14.15.0-alpine.
The difference in size between node:14.15.0 and node:14.15.0-alpine is enormous!
REPOSITORY                    TAG                 SIZE
node                          14.15.0             943MB
node                          14.15.0-alpine      117MB
Our final containerised Next.js app will hence be much smaller thanks to this teeny-tiny modification of our Dockerfile:
- FROM node:14.15.0
+ FROM node:14.15.0-alpine

WORKDIR &#x2F;app

COPY . .
RUN npm ci
RUN npm run build

EXPOSE 3000

USER node

CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
For reference, if we want to inspect the size of the Docker images we have available locally, we can run docker image ls --all.
Our Docker image has size 1.05GB if we use node:14.15.0,
REPOSITORY                    TAG                 IMAGE ID            CREATED             SIZE
my-containerised-nextjs-app   latest              c78d43a2c5bc        15 seconds ago      1.05GB
and it drops to 229MB if we use node:14.15.0-alpine instead!
REPOSITORY                    TAG                 IMAGE ID            CREATED             SIZE
my-containerised-nextjs-app   latest              d0746ef6e8a4        21 seconds ago      229MB
Decouple the dependency installation step from application code
Our setup is already much better with a suitable .dockerignore file and with a much leaner base image. However, we haven‚Äôt made any changes to our package.json and the npm ci step always needs to run if make any changes to our application code.
This is because Docker caches each step as an intermediate Docker container. For example, if we were to run the build again (docker build --tag my-containerised-nextjs-app .), we would see that the cache is used for all steps, resulting in a nearly instant build (because nothing happened, really üòÑ):
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  248.3kB
Step 1&#x2F;8 : FROM node:14.15.0-alpine
 ---&gt; 9db54a688554
Step 2&#x2F;8 : WORKDIR &#x2F;app
 ---&gt; Using cache
 ---&gt; d5d4291dc699
Step 3&#x2F;8 : COPY . .
 ---&gt; Using cache
 ---&gt; b56455e98a93
Step 4&#x2F;8 : RUN npm ci
 ---&gt; Using cache
 ---&gt; ba4ab784f27e
Step 5&#x2F;8 : RUN npm run build
 ---&gt; Using cache
 ---&gt; a51c18594a20
Step 6&#x2F;8 : EXPOSE 3000
 ---&gt; Using cache
 ---&gt; 806dc06cbb6c
Step 7&#x2F;8 : USER node
 ---&gt; Using cache
 ---&gt; b86db08de717
Step 8&#x2F;8 : CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
 ---&gt; Using cache
 ---&gt; d0746ef6e8a4
Successfully built d0746ef6e8a4
Successfully tagged my-containerised-nextjs-app:latest
If we now modify anything in the folder that is not ignored thanks to our .dockerignore file, Docker will have to bust the cache from Step 3 onwards (the ‚ÄúUsing cache‚Äù expression is not printed any more). Let‚Äôs create an empty file and run the build again:
# create an empty file
$ touch file
# build again
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  248.8kB
Step 1&#x2F;8 : FROM node:14.15.0-alpine
 ---&gt; 9db54a688554
Step 2&#x2F;8 : WORKDIR &#x2F;app
 ---&gt; Using cache
 ---&gt; d5d4291dc699
Step 3&#x2F;8 : COPY . .
 ---&gt; e2b761bb08a6         # The cache is not used anymore
Step 4&#x2F;8 : RUN npm ci
 ---&gt; Running in b36f2511e117
...
To remedy this and ensure that npm ci runs only when necessary, we can first copy package.json and package-lock.json files, run npm ci, and then bring in the rest of the files to build the project:
FROM node:14.15.0-alpine

WORKDIR &#x2F;app

- COPY . .
+ COPY package.json .
+ COPY package-lock.json .
RUN npm ci
+ COPY . .
RUN npm run build

EXPOSE 3000

USER node

CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
After we modified the Dockerfile by applying the diff above, we see that Docker does not leverage the cache at all because the steps are different. This always happens when we modify the layers and&#x2F;or their order.
However, after running this build for a first time, subsequent builds will be much faster as the npm ci step will use the cache unless we modify package.json or package-lock.json:
# create another file to see when Docker stops using the cache
$ touch another-file
# run the build again
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  249.3kB
Step 1&#x2F;10 : FROM node:14.15.0-alpine
 ---&gt; 9db54a688554
Step 2&#x2F;10 : WORKDIR &#x2F;app
 ---&gt; Using cache
 ---&gt; d5d4291dc699
Step 3&#x2F;10 : COPY package.json .
 ---&gt; Using cache
 ---&gt; 139b5a611c0b
Step 4&#x2F;10 : COPY package-lock.json .
 ---&gt; Using cache
 ---&gt; 5bc380de1397
Step 5&#x2F;10 : RUN npm ci
 ---&gt; Using cache
 ---&gt; dff6b2da4bdc
Step 6&#x2F;10 : COPY . .
 ---&gt; 08911c09b40f
Step 7&#x2F;10 : RUN npm run build
 ---&gt; Running in f5374a54d9ad

&gt; my-app@0.1.0 build &#x2F;app
&gt; next build
...
Decouple the build from the resulting built application
For this section to make more sense, we will create another Next.js app that uses some dev dependencies which are necessary only when building the app but not when running it in production.
$ npm create next-app --use-npm --example with-tailwindcss with-tailwindcss-app
Copy the Dockerfile and .dockerignore files created in the other example into with-tailwindcss-app. Build the Docker image and run it to make sure it‚Äôs working well before continuing:
$ docker build --tag with-tailwindcss-app .
$ docker run --rm -p 3000:3000 with-tailwindcss-app
As we can see in the package.json file, we have a few dependencies which are only ever going to be used when building our app. We won‚Äôt need them in the final Docker image. So let‚Äôs get rid of them!
We are going to leverage multi-stage Docker builds. They sound more complicated than they are :)
Here‚Äôs a multi-stage build Dockerfile: in the builder container, we install dependencies and build our app, and in the second stage, we copy relevant files from the builder to our final image and install only production dependencies.
FROM node:14.15.0-alpine as builder

WORKDIR &#x2F;app

COPY package.json .
COPY package-lock.json .
RUN npm ci
COPY . .
RUN npm run build

FROM node:14.15.0-alpine

WORKDIR &#x2F;app

COPY --from&#x3D;builder &#x2F;app&#x2F;package.json .
COPY --from&#x3D;builder &#x2F;app&#x2F;package-lock.json .
RUN npm ci --production
COPY --from&#x3D;builder &#x2F;app&#x2F;.next .next

EXPOSE 3000

USER node

CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
If our app also contained a Next.js config file and a public folder, we would also need to copy them from the builder stage:
...
COPY --from&#x3D;builder &#x2F;app&#x2F;.next .
+ COPY --from&#x3D;builder &#x2F;app&#x2F;next.config.js .
+ COPY --from&#x3D;builder &#x2F;app&#x2F;public public
...
Comparing the sizes, we see that we removed 39MB of dev dependencies, not bad.
without multi-stage build
REPOSITORY                    TAG                 IMAGE ID            CREATED              SIZE
with-tailwindcss-app          latest              88089e6f965d        18 minutes ago      269MB
with multi-stage build
REPOSITORY                    TAG                 IMAGE ID            CREATED              SIZE
with-tailwindcss-app          latest              ba7307736fb0        25 seconds ago       230MB
(Optional) Purge node_modules from unnecessary files
Finally, to make our Docker image the leanest, we will purge our node modules from all the files which were included by the library authors and aren‚Äôt directly useful to our Docker image. For example, documentation files and READMEs, config files for Prettier and such, etc.
Note that this is not without risk as we could be removing files that we actually need to run the application correctly (we had a file named test.js that contained important code and it was mercilessly removed by the tool, which broke the application üòÖ).
We will add another stage called production-deps to make our node modules go through a diet with node-prune (GitHub repo). The list of files and folders that node-prune will remove is largely inspired by Yarn‚Äôs default list (generated through yarn autoclean --init).
To install node-prune, we need curl to be a locally available executable, so we can either choose a base image that contains it out of the box, or we can add it to node:14.15.0-alpine. Because we won‚Äôt need anything else, we will choose the latter.
FROM node:14.15.0-alpine as builder

WORKDIR &#x2F;app

COPY package.json .
COPY package-lock.json .
RUN npm ci
COPY . .
RUN npm run build

+ FROM node:14.15.0-alpine as production-deps

+ WORKDIR &#x2F;app

COPY --from&#x3D;builder &#x2F;app&#x2F;package.json .
COPY --from&#x3D;builder &#x2F;app&#x2F;package-lock.json .
RUN npm ci --production
+ # Add curl
+ RUN apk --no-cache add curl
+ # Install node-prune https:&#x2F;&#x2F;github.com&#x2F;tj&#x2F;node-prune
+ RUN curl -sf https:&#x2F;&#x2F;gobinaries.com&#x2F;tj&#x2F;node-prune | sh
+ RUN node-prune &#x2F;app

FROM node:14.15.0-alpine

WORKDIR &#x2F;app

+ COPY --from&#x3D;production-deps &#x2F;app&#x2F;package.json .
+ COPY --from&#x3D;production-deps &#x2F;app&#x2F;package-lock.json .
+ COPY --from&#x3D;production-deps &#x2F;app&#x2F;node_modules node_modules

COPY --from&#x3D;builder &#x2F;app&#x2F;.next .next

EXPOSE 3000

USER node

CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
Try it by building the image once more.
When node-prune ran, it printed out in the console that it removed 12MB:
...
Step 15&#x2F;24 : RUN node-prune &#x2F;app
 ---&gt; Running in 69e030ab8b70


         files total 14,269
       files removed 3,722
        size removed 12 MB
            duration 216ms
...
However, suprinsingly, a whopping 32MB were removed in comparison to our previous Dockerfile. (It seems node-prune‚Äôs tallying is not totally accurate when I tested locally as it removed 20.7 MB instead ‚Äî though it still doesn‚Äôt explain the other 11.3 MB ü§∑‚Äç‚ôÇÔ∏è)
$ docker image ls with-tailwindcss-app
REPOSITORY                    TAG                 IMAGE ID            CREATED              SIZE
with-tailwindcss-app          latest              c5e2081dba30        9 seconds ago        198MB
Let‚Äôs ensure our app is running well without the files node-prune removed and we can be on our merry way! üê≥ üéâ
Docker build checklist for JavaScript Devs
To summarise what we‚Äôve learnt so far, here‚Äôs a small checklist to review our own Docker build setups:
I have a comprehensive .dockerignore file
I use an appropriate base image
I decoupled the dependency installation step to improve caching
I decoupled the resulting built application from the build step
I purged the node_modules from unnecessary files
Time to flex! üí™ Show me your before and after Docker image sizes in the comments below!*
#### [TypeScript Tidbit: How to Overload an Imported Function](https:&#x2F;&#x2F;www.robincussol.com&#x2F;typescript-tidbit-how-to-overload-an-imported-function&#x2F;) 
*There are times when the type definitions shipped on DefinitelyTyped are not enough and this results in making the TypeScript compiler unhappy. Oh noes! üò≠
Functions Overloading Be Like, Photo by Luis Villasmil) on Unsplash.



Overload an imported function in TypeScript
But fear not! It is possible to overload a function imported from a different module (which could even be a local module&#x2F;file, not necessarily a node module) without ‚Äúpatching‚Äù the corresponding @types&#x2F;&lt;package&gt; type definitions.
import { someFunction } from &#39;module&#39;

&#x2F;&#x2F; the function overloading
declare module &#39;module&#39; {
  function someFunction() &#x2F;&#x2F; the overload you need
}

someFunction() &#x2F;&#x2F; with the overloaded version ‚úîÔ∏è
Example: overload Ramda‚Äôs compose function
A practical example is Ramda‚Äôs compose function. If you pass more than 7 functions to the function, you need to overload Ramda‚Äôs type definitions coming from @types&#x2F;ramda as the TypeScript compiler will report an error otherwise (TypeScript Playground Error Example).

DefinitelyTyped obviously cannot provide the type definitions for any number of arguments as compose accepts as many arguments as you want. So it‚Äôs up to you to inform the TypeScript compiler that this usage is actually okay. üòå
This can be done like in the example below (TypeScript Playground Working Example):
import * as R from &#39;ramda&#39;

&#x2F;&#x2F; overloading compose because &#x60;@types&#x2F;ramda&#x60; exposes types for up to 6 functions
declare module &#39;ramda&#39; {
  function compose&lt;V0, T1, T2, T3, T4, T5, T6, T7&gt;(
    fn6: (x: T6) &#x3D;&gt; T7,
    fn5: (x: T5) &#x3D;&gt; T6,
    fn4: (x: T4) &#x3D;&gt; T5,
    fn3: (x: T3) &#x3D;&gt; T4,
    fn2: (x: T2) &#x3D;&gt; T3,
    fn1: (x: T1) &#x3D;&gt; T2,
    fn0: (x0: V0) &#x3D;&gt; T1
  ): (x0: V0) &#x3D;&gt; T7
}

&#x2F;&#x2F; and now, we can use:
const someComplicatedResult &#x3D; R.compose&lt;V0, T1, T2, T3, T4, T5, T6, T7&gt;(
  fn6,
  fn5,
  fn4,
  fn3,
  fn2,
  fn1,
  fn0
)(&#39;üòÖ&#39;)
We can see from the screenshot below that the overload was correctly taken into consideration. üéâ

Caveat
I can imagine that if this is overused, things can become quickly intractable. So use it sparingly and always with a good reason why. Your future self will be happy to find an explanation in a comment above the overloading as it is kind of unusual. üòâ
I discovered this while refactoring @kiwicom&#x2F;splitster to TS (link to commit) and thought it might be useful to share. Hope it helped you!*
#### [Wax on, Wax off](https:&#x2F;&#x2F;www.robincussol.com&#x2F;wax-on-wax-off&#x2F;) 
*The reason I got into web development in the first place was the magical ‚ú® feeling you get when you see your code manifest in the browser.
In my current role at work, I don‚Äôt do much of that anymore. And I guess I kind of miss it. Especially the part when I am given a clearly defined outcome, with clear guidelines. Perks of being labelled a senior, I guess. üòú But I digress.
Since I started with React, a lot of things have happened in web development. At the moment, I‚Äôm especially interested in Svelte and TailwindCSS and after watching Rich Harris‚Äôs latest talk ‚ÄúFuturistic Web Development‚Äù, I needed an excuse to try Svelte ASAP.
Staying sharp with deliberate practice
To ensure my frontend skills don‚Äôt wither, I would like to spend dedicated time each week to practice on a set of frontend challenges and reflect on what I learnt from them.
Fortunately, I recently discovered FrontendMentor.io and this website offers quite the list of frontend challenges, ranging in difficulty and consistently with nice designs.
Improve your front-end coding skills by building real projects
Solve real-world HTML, CSS and JavaScript challenges whilst working to professional designs.
‚Äî FrontendMentor.io
And to practice with new frontend technologies, it‚Äôs good to find nice designs. But it‚Äôs even better when they come with a style guide and assets like pictures and icons. üòç
Here‚Äôs how it works:
You choose a challenge and download the files.
You attempt the challenge with the stack of your choice. Because the challenge files come with a style guide, the necessary pictures and icons, etc. it‚Äôs really easy to get started! (Unless you spend hours deciding which stack to use, of course üòÇ)
You upload it to GitHub and deploy your attempt on Vercel or Netlify.
Finally, you submit your solution through your challenges dashboard on the platform.
You can then get feedback on your submissions and provide reviews for other people‚Äôs submissions too, which I find really cool. I remember how difficult it was to get feedback when I was first learning web development.
Learnings
The last challenge I attempted looked pleasing on my eyes and I honestly did not expect I would learn so much from it. That makes me want to practice even more!
Check out the live deployment!


I encountered the following problems to complete the ‚ÄúSocial media dashboard with theme switcher‚Äù challenge:
setting up Svelte with TailwindCSS (thank you Swyx and Chris Dhanaraj)
implementing a toggle component from scratch
without accessibility in mind (where I started: W3Schools üòÖ)
with accessibility in mind (where I ended up: Smashing Magazine, though I‚Äôm not sure how to test if my current solution is the most accessible)
implementing a theme switcher in Svelte (inspiration from this Svelte REPL)
adding a border with a gradient to a block element (this requires using a CSS trick from nowhere else but CSS Tricks of course)
pulling my hair for not realising that you need the group class for group-hover: modifiers to apply in the children with Tailwind (thank you Estevan Maito)
how to extract the imported Svelte components‚Äô props‚Äô TypeScript types (that‚Äôs a mouthful!), instead of exporting and importing the types directly (TL;DR: use $props_def from the component)
&lt;script lang&#x3D;&quot;ts&quot;&gt;
  import MyComponent from &#39;.&#x2F;MyComponent.svelte&#39;;

  const data: MyComponent[&#39;$props_def&#39;][&#39;data&#39;] &#x3D; ...
&lt;&#x2F;script&gt;

&lt;MyComponent {data} &#x2F;&gt;

...
deploying a ‚Äúmonorepo‚Äù on Vercel without redeploying all the folders all the time by specifying the ‚ÄúIgnored Build Step‚Äù with something like git diff --quiet HEAD^ HEAD -- subfolder-in-monorepo to only rebuild the site if changes were made in subfolder-in-monorepo.
Here‚Äôs the GitHub repository where I will learn in public and add future challenges I will attempt. (Though I might need to rename this repository in the future as I just found this really nice list of project ideas to build with other platforms than FrontendMentor.io üòâ)
Let me know in the comments what your current deliberate practice is!*
#### [A Successful Side-Project: Lessons from Swyx](https:&#x2F;&#x2F;www.robincussol.com&#x2F;a-successful-side-project-lessons-from-swyx&#x2F;) 
*If you are on Twitter, chances are you came across this tweet by Daniel Vassallo
If you‚Äôre tempted by this, my advice to first-time creators is to start with a very small product: Something you can finish in 2 weeks and charge #### [Build Standalone Expo .apk and .ipa with Turtle CLI [deprecated]](https:&#x2F;&#x2F;www.robincussol.com&#x2F;build-standalone-expo-apk-ipa-with-turtle-cli&#x2F;) 
*This article was updated on February 7, 2023.
NOTE: As of Expo SDK 47, the following method does not work any more.
With the release of EAS builds, it is necessary to have Internet access to create standalone Expo apps locally; see Running builds on your own infrastructure on Expo docs.
You can still use the React Native way to build applications locally after generating necessary files with expo prebuild (see this GitHub comment on expo&#x2F;eas-cli).
This post will not receive further updates.
A great way to start writing React Native applications is to use Expo. You don‚Äôt even need to setup a development environment to get started thanks to Snack, an online React Native application editor. Your application is public by default. Sharing has never been that easy.

Brown turtle swimming underwater, Photo by Wexor Tmg on Unsplash
However, you would like to share an application exclusively with some people, not through an app store or any public channel. One possibility is to share the built application file, e.g. an .apk file for Android and an .ipa file for iOS.
Expo is so great a service (oh, and did I mention free?) that they offer you to publish your app on their servers and if you wanted to build these .apk and .ipa files, you could do so on their servers.
The flow looks like:
$ expo publish
$ expo build:&lt;PLATFORM&gt;
and you obtain a nice URL to the artifact created for you when the build finishes.
But, again, this is public. On a server you don‚Äôt control. (Although, if you made the same mistake as I did, a ticket to their support can delete any files you had wished to keep private. ü•á)
Luckily for you, Expo provide the tools they are using on their servers for free (did I mention they‚Äôre great!?). The build process relies on a CLI tool called turtle-cli. It is open-source and available on GitHub.
Let us go through an example of how to create your application file without resorting to Expo servers. That means you can keep an application private and also build your application while being offline.
The following instructions assume you have bash and Node.js available. In my experience, using the current LTS version of Node.js (version 16.13.2) works best.
Caveat: I could not complete the iOS instructions to the end since I do not have an Apple Developer paid account.
We will go through the following steps:
1. Turtle CLI
2. Create a dummy application
3. Publish Expo app on local server
4. Create APK file ‚Äì Android

4.1. Prerequisites
4.2. Create Keystore
4.3. Build APK
5. Create IPA file ‚Äì iOS

5.1. Prerequisites
5.2. Create Signing keys
5.3. Build IPA
6. Distribute and install

6.1. on Android
6.2. on iOS
Resources
A condensed version of these steps without much explanation or context is available on the accompanying GitHub repository.
1. Turtle CLI
To install Turtle CLI, run
$ npm install -g turtle-cli
This will make command turtle globally available on your system. To verify it was correctly installed, let‚Äôs print the version:
$ turtle -V
0.24.3
2. Create a dummy application
Let‚Äôs create a dummy application using Expo CLI. In your terminal, run
$ npx expo init ExampleApplication
It will ask you a few questions:
# Expo version 5.0.3
npx expo init ExampleApplication
? Choose a template: ‚Ä∫ - Use arrow-keys. Return to submit.
    ----- Managed workflow -----
‚ùØ   blank               a minimal app as clean as an empty canvas
    blank (TypeScript)  same as blank but with TypeScript configuration
    tabs (TypeScript)   several example screens and tabs using react-navigation and TypeScript
    ----- Bare workflow -----
    minimal             bare and minimal, just the essentials to get you started
The blank template is enough for us.
If you have yarn installed, Expo will use it by default to install dependencies. You can use the --npm flag in the init command if you‚Äôd prefer to use npm instead.
Once it‚Äôs done setting up your project, you should see the following output in the terminal:
‚úÖ Your project is ready!

To run your project, navigate to the directory and run one of the following yarn commands.

- cd ExampleApplication
- yarn start
Run the commands and let‚Äôs verify the generated boilerplate works in our emulators:


To finish setting up the dummy application, you need to configure the app.json file because some configuration keys must be specified to build a standalone app.
If you would like to know more about these standalone app specific configurations, check Expo‚Äôs documentation for iOS and for Android.
For this tutorial, it is only necessary to specify the keys &quot;bundleIdentifier&quot; under &quot;ios&quot;, and &quot;package&quot; under &quot;android&quot; in your app.json file:
...
    &quot;ios&quot;: {
      ...
      &quot;bundleIdentifier&quot;: &quot;com.example.exampleApplication&quot;,
      ...
    },
    &quot;android&quot;: {
      ...
      &quot;package&quot;: &quot;com.example.example_application&quot;,
      ...
    }
...
3. Publish Expo app on local server
Expo has this notion of app publishing: it allows you to share a link or QR code to Expo‚Äôs website and anyone can run your app through the Expo app on their devices.
Having your app published is also necessary for over-the-air (OTA) updates, allowing seamless updates to your application, and to publish your application (i.e. building your application files on Expo servers).
You would typically run
$ expo login -u $EXPO_USERNAME -p $EXPO_PASSWORD
$ expo publish
and your app would then be available at https:&#x2F;&#x2F;expo.dev&#x2F;&lt;EXPO_USERNAME&gt;&#x2F;&lt;APP_NAME&gt;.
To have your Expo app ‚Äúpublished‚Äù on your local server (and avoid public publishing on Expo servers), you will use a different command:
$ expo export --dev --public-url &lt;your-url-here&gt;
The --dev flag is necessary because you will use a non-https server to publish your Expo app. Note that this prevents you from using OTA updates.
Your server does not need to be running for this step, but you do need to know which local URL you are going to use in advance. This tuorial assumes you will run a local server at http:&#x2F;&#x2F;127.0.0.1:8000.
You can now export the app:
$ expo export --dev --public-url http:&#x2F;&#x2F;127.0.0.1:8000
...
Export was successful. Your exported files can be found in dist
This command will create a dist directory containing the iOS and Android JavaScript bundles and the different assets you are using.
dist
‚îú‚îÄ‚îÄ android-index.json
‚îú‚îÄ‚îÄ assets
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ 13685372945d816a2b474fc082fd9aaa
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ 140c53a7643ea949007aa9a282153849
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ ...
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ fdbedb7e67aa7c0ecad83d9c2fa4dfba
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ fdc01171a7a7ea76b187afcd162dee7d
‚îú‚îÄ‚îÄ bundles
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ android-a9defc54fb2ffdb7e6fdaf5b8d0be751.js
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ ios-a29c3e4ac97a2abdc5208fd4f06e7708.js
‚îî‚îÄ‚îÄ ios-index.json
You can now serve the dist directory on your web server, e.g.
$ npx http-server -p 8000 dist
Note: if for some reason you need to re-export your application (because you modified your app.json file since the last export, for instance), you must first remove the dist directory:
# assuming you are at the root of the project
$ rm -rf dist
$ expo export --dev --public-url http:&#x2F;&#x2F;127.0.0.1:8000
4. Create APK file ‚Äì Android
First, verify that your local server is running. For example, you should see a similar output:
$ curl http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;android-index.json
{&quot;name&quot;:&quot;ExampleApplication&quot;,&quot;slug&quot;:&quot;ExampleApplication&quot;,&quot;version&quot;:&quot;1.0.0&quot;,&quot;orientation&quot;:&quot;portrait&quot;,&quot;icon&quot;:&quot;.&#x2F;assets&#x2F;icon.png&quot;,&quot;splash&quot;:{&quot;image&quot;:&quot;.&#x2F;assets&#x2F;splash.png&quot;,&quot;resizeMode&quot;:&quot;contain&quot;,&quot;backgroundColor&quot;:&quot;#ffffff&quot;,&quot;imageUrl&quot;:&quot;http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;assets&#x2F;201a91bd1740bb1d6a1dbad049310724&quot;}...
4.1. Prerequisites
For Turtle CLI to work correctly to create an .apk file for Android, you need to make sure the following dependency is installed: Java Development Kit (version 8).
If you know which Expo SDK version you are going to use, you can run
$ turtle setup:android --sdk-version &lt;SDK-VERSION&gt;
This will take some time:
$ turtle setup:android --sdk-version 44.0.5
Jan 20 20:22:45 turtle[61127] INFO:  Downloading Android SDK
  platform: &quot;android&quot;
  buildPhase: &quot;setting up environment&quot;
downloading [&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;] 98% 0.2s
...
Jan 20 20:26:56 turtle[61127] INFO:  shell app for SDK 44.0.5 doesn&#39;t exist, downloading...
  platform: &quot;android&quot;
  buildPhase: &quot;setting up environment&quot;
downloading [&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; ] 95% 0.5sJan 20 20:27:08 turtle[61127] INFO:  shell app has been downloaded
  platform: &quot;android&quot;
  buildPhase: &quot;setting up environment&quot;
...
Jan 20 20:29:51 turtle[61127] INFO:  dependencies installed!
  platform: &quot;android&quot;
  buildPhase: &quot;setting up environment&quot;
Jan 20 20:29:51 turtle[61127] INFO:  it&#39;s all set!
  platform: &quot;android&quot;
  buildPhase: &quot;setting up environment&quot;
In the meantime, you can move on to the next section.
4.2. Create Keystore
Just like any other Android app, this app must be signed with some security certificates. In Android-land, as far as I understand, it‚Äôs called a keystore. The instructions to create such a keystore file are available on the Android Developers documentation.
Basically, just create a dummy Android project with Android Studio, and then go to Build &gt; Generate Signed Bundle &#x2F; APK.... Choose APK and press Next. The UI will ask you which app you want to sign, and your dummy app should be pre-selected. On the same screen, press on the button Create new...; just fill the form and you‚Äôre good to go.
Alternatively, if you have keytool CLI utility available on your system (you can check that by trying keytool --help in your terminal), you can generate a keystore file with the following command
$ keytool -genkeypair -v -keystore keystore.jks -alias keyalias -keyalg RSA -keysize 2048 -validity 9125
Enter keystore password:
Re-enter new password:
What is your first and last name?
  [Unknown]:
What is the name of your organizational unit?
  [Unknown]:
What is the name of your organization?
  [Unknown]:
What is the name of your City or Locality?
  [Unknown]:
What is the name of your State or Province?
  [Unknown]:
What is the two-letter country code for this unit?
  [Unknown]:
Is CN&#x3D;Unknown, OU&#x3D;Unknown, O&#x3D;Unknown, L&#x3D;Unknown, ST&#x3D;Unknown, C&#x3D;Unknown correct?
  [no]:  yes

Generating 2,048 bit RSA key pair and self-signed certificate (SHA256withRSA) with a validity of 9,125 days
	for: CN&#x3D;Unknown, OU&#x3D;Unknown, O&#x3D;Unknown, L&#x3D;Unknown, ST&#x3D;Unknown, C&#x3D;Unknown
Enter key password for &lt;keyalias&gt;
	(RETURN if same as keystore password):
Re-enter new password:
[Storing keystore.jks]

Warning:
The JKS keystore uses a proprietary format. It is recommended to migrate to PKCS12 which is an industry standard format using &quot;keytool -importkeystore -srckeystore keystore.jks -destkeystore keystore.jks -deststoretype pkcs12&quot;.
As a TL;DR, you can just download a dummy certificate on the accompanying repository under should-be-private&#x2F;keystore.jks, for testing purposes only. The keystore file is hugely important if you ever plan to submit your app to Google Play store: it‚Äôs the only way to assert you‚Äôre the rightful owner to provide new updates to your app.
File: keystore.jks
keystorepassword
keyalias
keypassword
4.3. Build APK
Make sure that you are serving the dist directory on http:&#x2F;&#x2F;127.0.0.1:8000 as explained above in Run a local server. Assuming you are using bash as your shell, from the root of your project, run:
EXPO_ANDROID_KEYSTORE_PASSWORD&#x3D;&quot;keystorepassword&quot; \
EXPO_ANDROID_KEY_PASSWORD&#x3D;&quot;keypassword&quot; \
turtle build:android \
  --type apk \
  --keystore-path .&#x2F;should-be-private&#x2F;keystore.jks \
  --keystore-alias &quot;keyalias&quot; \
  --allow-non-https-public-url \
  --public-url http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;android-index.json
Note that you need the flag --public-url to point to http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;android-index.json. In addition, it is also necessary to use the --type apk flag to produce an APK file since version 0.8.0 of turtle-cli.
The build may take some time:
Jan 20 20:38:17 turtle[61719] INFO:  Using manifest: {
  &quot;name&quot;: &quot;ExampleApplication&quot;,
  &quot;slug&quot;: &quot;ExampleApplication&quot;,
  &quot;version&quot;: &quot;1.0.0&quot;,
  &quot;orientation&quot;: &quot;portrait&quot;,
  &quot;icon&quot;: &quot;.&#x2F;assets&#x2F;icon.png&quot;,
...
Jan 20 20:38:51 turtle[61719] INFO:  Starting a Gradle Daemon (subsequent builds will be faster)
  platform: &quot;android&quot;
  buildPhase: &quot;running gradle&quot;
  source: &quot;stdout&quot;
...
Once it finishes, you should see this output in your terminal:
Jan 20 20:43:19 turtle[61719] INFO:  copied build to ~&#x2F;expo-apps&#x2F;@anonymous__ExampleApplication-7f15208a56304617a200538cacd2e50e-signed.apk
  platform: &quot;android&quot;
  buildPhase: &quot;copying build artifact&quot;
This message gives you the location of your built .apk file. You can now move on to the Distribute and install section below if you are not interested in creating an .ipa file for iOS.
Note: if the build fails because of some Gradle error, like Could not resolve com.theartofdev.edmodo:android-image-cropper:2.8.0, make sure to open Android Studio and update the Android SDK and SDK Build-Tools. This should fix it.
5. Create IPA file ‚Äì iOS
First, verify that your local server is running, e.g.
$ curl http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;ios-index.json
{&quot;name&quot;:&quot;ExampleApplication&quot;,&quot;slug&quot;:&quot;ExampleApplication&quot;,&quot;version&quot;:&quot;1.0.0&quot;,&quot;orientation&quot;:&quot;portrait&quot;,&quot;icon&quot;:&quot;.&#x2F;assets&#x2F;icon.png&quot;,&quot;splash&quot;:{&quot;image&quot;:&quot;.&#x2F;assets&#x2F;splash.png&quot;,&quot;resizeMode&quot;:&quot;contain&quot;,&quot;backgroundColor&quot;:&quot;#ffffff&quot;,&quot;imageUrl&quot;:&quot;http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;assets&#x2F;201a91bd1740bb1d6a1dbad049310724&quot;...
5.1. Prerequisites
For Turtle CLI to work correctly to create an .ipa file for iOS, you need to make sure your system is macOS and that the following dependencies are installed:
Xcode (version 13.2.1 or newer)
fastlane
Note: make sure that you have run Xcode at least once and that you have agreed to the license agreements.
For more details, see Expo‚Äôs documentation.
If you know which Expo SDK version you are going to use, you can run
$ turtle setup:ios --sdk-version &lt;SDK-VERSION&gt;
If it errors out, saying that you don‚Äôt have the right version of fastlane, try re-installing fastlane (guide). The version used in this article is fastlane 2.200.0.
This will take some time:
$ turtle setup:ios --sdk-version 44.0.5
Jan 20 21:18:03 turtle[48488] INFO:  shell app for SDK 44.0.5 doesn&#39;t exist, downloading...
  platform: &quot;ios&quot;
  buildPhase: &quot;setting up environment&quot;
downloading [                    ] 1% 8514.8s
...
...
Jan 20 21:24:58 turtle[48488] INFO:  it&#39;s all set!
  platform: &quot;ios&quot;
  buildPhase: &quot;setting up environment&quot;
In the meantime, you can move on to the next section.
5.2. Create Signing keys
This assumes you have an Apple Developer Account, which is a paid account.
To create your distribution certificate file, or .p12 file, you can follow this guide.
You will also need your Apple Team ID and a Provisioning Profile that you can generate through Xcode as well. This other guide covers in greater lengths what all these cerficates are for and how to obtain them.

Note that the provisioning profile expires in 6 days in my case, since I do not have an Apple Developer paid account.
Sadly, it is not possible to share example files.
5.3. Build IPA
Make sure that you are serving the dist directory on http:&#x2F;&#x2F;127.0.0.1:8000 as explained Run a local server. Assuming you are using bash as your shell, from the root of your project, run:
EXPO_IOS_DIST_P12_PASSWORD&#x3D;&quot;&lt;PASSWORD HERE&gt;&quot; \
turtle build:ios \
  --team-id YOUR_TEAM_ID \
  --dist-p12-path &#x2F;path&#x2F;to&#x2F;your&#x2F;dist&#x2F;cert.p12 \
  --provisioning-profile-path &#x2F;path&#x2F;to&#x2F;your&#x2F;provisioning&#x2F;profile.mobileprovision \
  --allow-non-https-public-url \
  --public-url http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;ios-index.json
Note that you need the flag --public-url to point to http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;ios-index.json.
Once the build finishes successfully, you should get the path to your .ipa file.
6. Distribute and install
6.1. on Android
Take your .apk and share it through some Google Drive link or other medium of your choice.
If you download this .apk file through an Android device, it should offer you to install the application on the device.
Trick: if the URL is really not friendly to type, and for whatever reason you have to type it manually, use a QR Code generator (e.g. http:&#x2F;&#x2F;www.barcode-generator.org&#x2F;) and your device‚Äôs camera to simplify your life!
Alternatively, if you connect an Android device to your computer, you should be able to run:
$ adb devices
emulator-5554	device
to list all your connected Android devices and emulators. (In my case, only the emulator is ‚Äúconnected‚Äù.)
It is then possible to install the .apk file by running:
$ adb -s emulator-5554 install ~&#x2F;expo-apps&#x2F;@anonymous__ExampleApplication-7f15208a56304617a200538cacd2e50e-signed.apk
Performing Streamed Install
Success

6.2. on iOS
Caveat: I could not fully test this section, so my apologies if this does not work as intended.
Since you should have Xcode, the most promising solution is in this guide. It also mentions other ways to install the .ipa file.
That‚Äôs it for now, thank you for reading this far. You will find below the resources mentioned in this article.
If you have any questions or comments, please drop me a line on Twitter. I shall reply as soon as possible.
Stay tuned for more.
Resources
Expo: https:&#x2F;&#x2F;expo.dev
Turtle CLI: https:&#x2F;&#x2F;github.com&#x2F;expo&#x2F;turtle#readme
Expo‚Äôs guide to Building Standalone apps: https:&#x2F;&#x2F;docs.expo.dev&#x2F;classic&#x2F;building-standalone-apps&#x2F;
Configuring app.json: https:&#x2F;&#x2F;docs.expo.dev&#x2F;workflow&#x2F;configuration&#x2F;
Expo docs to configure CI with Turtle CLI: https:&#x2F;&#x2F;docs.expo.dev&#x2F;classic&#x2F;turtle-cli&#x2F;
Expo docs to host application on your own servers: https:&#x2F;&#x2F;docs.expo.dev&#x2F;distribution&#x2F;hosting-your-app&#x2F;
How to create a keystore for Android: https:&#x2F;&#x2F;developer.android.com&#x2F;studio&#x2F;publish&#x2F;app-signing#generate-key
Supporting GitHub repository: https:&#x2F;&#x2F;github.com&#x2F;RobinCsl&#x2F;build-standalone-expo-app&#x2F;*
#### [Optimize your img tags with Eleventy Image and WebC](https:&#x2F;&#x2F;www.robincussol.com&#x2F;optimize-your-img-tags-with-eleventy-image-and-webc&#x2F;) 
*I am very excited about WebC and couldn‚Äôt wait to try out the corresponding Eleventy plugin.
The first use-case I had in mind was to use Eleventy Image for the native HTML img tag, that can be generated from Markdown and without shortcode. I had done this before, for my unpublished blog rewrite that‚Äôs been waiting to be released for ever now, through hooking up Eleventy Image into a markdown-it plugin. It wasn‚Äôt pretty as markdown-it plugins are pretty alien to me.
But now, this can be done ‚Äúnatively‚Äù, √†-la-Cloudflare Workers for your native HTML elements!
UPDATE (04&#x2F;11&#x2F;2022): After sharing this article on Twitter, Zach Leatherman pointed out there should be an easier solution. It didn‚Äôt work as expected at first, which put me on a journey to fix the underlying issue in @11ty&#x2F;webc. I‚Äôm very pleased to share that my first contribution to the project was accepted and landed in v0.6.0. As a result, the content of the last section was updated to remove the dirty data file hack with _data&#x2F;Image.js: your image optimization logic can now truly live in a single file.
The documentation for WebC mentioned this use-case exactly, in the shape of this innocent puzzle:

‚ÄúFree idea: use the Eleventy Image plugin to return optimized markup‚Äù
So it should be easy, right?
Remember this lad?
I have discovered a truly remarkable proof of this theorem which this margin is too small to contain.
Pierre de Fermat, cca. 1637
No need to wait 3 centuries for the answer this time, because it was ultimately not so hard‚Ä¶ But I did struggle and wrestle with it for a few hours :D
Anyway, hope that can be useful to someone.
If you want to see the finished implementation, you can get it on GitHub: RobinCsl&#x2F;11ty-webc-img-demo.
Set up a WebC-powered Eleventy project
or take a shortcut by cloning this repo and going to the 01-initial folder.
Initialise the project
Let‚Äôs start with an empty folder and add a basic package.json file:
mkdir 11ty-webc-img
cd 11ty-webc-img
npm init -y
We need to install the latest canary release (2.0.0-canary.16 at the time of writing) of Eleventy as well as the WebC plugin:
 npm install @11ty&#x2F;eleventy@2.0.0-canary.16 @11ty&#x2F;eleventy-plugin-webc
Configure Eleventy
We will now configure Eleventy to use the WebC plugin by creating a .eleventy.js file with the following content:
const webc &#x3D; require(&quot;@11ty&#x2F;eleventy-plugin-webc&quot;);

module.exports &#x3D; function(eleventyConfig) {
	eleventyConfig.addPlugin(webc, {
		components: &quot;_includes&#x2F;webc&#x2F;*.webc&quot;
	});
}

In particular, components in the _includes&#x2F;webc folder will be available in the global scope, no need to import them explicitly!
Scaffold a minimal project
To finish our setup, we create a layout file and a simple WebC component which we will use in a basic page, to make sure our setup is working correctly.
We create the layout file under _includes&#x2F;layouts&#x2F;base.webc. It is a simple HTML template with the @html&#x3D;&quot;content&quot;  WebC directive set on the body tag. (See my-layout.webc in the docs)
&lt;!doctype html&gt;
&lt;html lang&#x3D;&quot;en&quot;&gt;
	&lt;head&gt;
		&lt;meta charset&#x3D;&quot;utf-8&quot;&gt;
		&lt;title&gt;Eleventy Images + WebC rocks!&lt;&#x2F;title&gt;
	&lt;&#x2F;head&gt;
	&lt;body @html&#x3D;&quot;content&quot;&gt;&lt;&#x2F;body&gt;
&lt;&#x2F;html&gt;
We now create a simple WebC component and write the following content, taken from the promising website 11ty.webc.fun, in _includes&#x2F;webc&#x2F;site-footer.webc :
&lt;footer&gt;
  &lt;p&gt;&amp;copy; 2022 Yours Truly.&lt;&#x2F;p&gt;
&lt;&#x2F;footer&gt;
Finally, we create our basic page at the root of the project in index.webc:
---
layout: layouts&#x2F;base.webc
---

Fun with WebC

&lt;site-footer&gt;&lt;&#x2F;site-footer&gt;
If all went according to plan, we should now be able to run
npx @11ty&#x2F;eleventy --serve
in the terminal and see the following output in our browser at http:&#x2F;&#x2F;localhost:8080:

Create an img.webc component
or check the code on GitHub in the 02-img folder if you want to see the code right away.
In this section, we will create our img.webc override for the native img HTML tag and use Eleventy Image within it.
As a starting point, we will use the example from the documentation from which the screenshot at the start of this post is taken. In a new file _includes&#x2F;webc&#x2F;img.webc, add the following:
&lt;script webc:type&#x3D;&quot;render&quot; webc:is&#x3D;&quot;template&quot;&gt;
function() {
	if(!this.alt) {
		throw new Error(&quot;[img.webc] the alt text is missing, no fun&quot;);
	}
	return &#x60;&lt;img src&#x3D;&quot;${this.src}&quot; alt&#x3D;&quot;${this.alt}&quot;&gt;&#x60;;
}
&lt;&#x2F;script&gt;
This essentially verifies at build-time that all your images have a non-empty alt text, neat!
Let‚Äôs add a ‚Äúbroken‚Äù image to our index page, in index.webc, to verify that this works correctly:
---
layout: layouts&#x2F;base.webc
---

Fun with WebC

&lt;img src&#x3D;&quot;https:&#x2F;&#x2F;images.unsplash.com&#x2F;photo-1627224286457-923944e5b159?auto&#x3D;format&amp;fit&#x3D;crop&amp;w&#x3D;387&amp;q&#x3D;80&quot;&gt;

&lt;site-footer&gt;&lt;&#x2F;site-footer&gt;
And indeed, running npx @11ty&#x2F;eleventy --serve yields an expected error:
$ npx @11ty&#x2F;eleventy --serve
[11ty] Problem writing Eleventy templates: (more in DEBUG output)
[11ty] 1. Having trouble rendering webc template .&#x2F;index.webc (via TemplateContentRenderError)
[11ty] 2. [img.webc] the alt text is missing, no fun (via Error)
Add an alt text (‚Äúpossum hanging from a palm leaf‚Äù should work) and try again. Oh no! Another error:
$ npx @11ty&#x2F;eleventy --serve  
[11ty] Problem writing Eleventy templates: (more in DEBUG output)
[11ty] 1. Having trouble rendering webc template .&#x2F;index.webc (via TemplateContentRenderError)
[11ty] 2. Circular dependency error: You cannot use &lt;img&gt; inside the definition for .&#x2F;_includes&#x2F;webc&#x2F;img.webc (via Error)
That makes sense, when you think about it! All our .webc files are processed by WebC, so if we return an img tag in a img.webc component, the compiler would work indefinitely to get to the bottom of it, because it‚Äôs turtles img all the way down!
Luckily for us, we can let WebC know when its job is done through the webc:raw attribute:
Use webc:raw to opt-out of WebC template processing for all child content of the current node. Notably, attributes on the current node will be processed.
Let‚Äôs fix it in _includes&#x2F;webc&#x2F;img.webc:
  &lt;script webc:type&#x3D;&quot;render&quot; webc:is&#x3D;&quot;template&quot;&gt;
  function() {
	  if(!this.alt) {
	  	throw new Error(&quot;[img.webc] the alt text is missing, no fun&quot;);
	  }
-	  return &#x60;&lt;img src&#x3D;&quot;${this.src}&quot; alt&#x3D;&quot;${this.alt}&quot;&gt;&#x60;;
+	  return &#x60;&lt;img webc:raw src&#x3D;&quot;${this.src}&quot; alt&#x3D;&quot;${this.alt}&quot;&gt;&#x60;;
  }
  &lt;&#x2F;script&gt;
It compiles now! üéâ
Here‚Äôs the expected output:

We have effectively augmented our img tag to verify at build time that alt text is present.
Let‚Äôs now add Eleventy Image to the party!
Optimize your HTML img with Eleventy Image
or check the code on GitHub in the 03-final folder if you want to see my solution.
Let‚Äôs first install Eleventy Image in our project:
npm install @11ty&#x2F;eleventy-img
We will more or less copy the example from the Eleventy Image docs in the Asynchronous Shortcode section, because our JavaScript render function can be async!
In the file _includes&#x2F;webc&#x2F;img.webc, let‚Äôs add the following:
  &lt;script webc:type&#x3D;&quot;render&quot; webc:is&#x3D;&quot;template&quot;&gt;
-   function() {
-      if(!this.alt) {
-          throw new Error(&quot;[img.webc] the alt text is missing, no fun&quot;);
-      }
-      return &#x60;&lt;img webc:raw src&#x3D;&quot;${this.src}&quot; alt&#x3D;&quot;${this.alt}&quot;&gt;&#x60;;
+    const Image &#x3D; require(&quot;@11ty&#x2F;eleventy-img&quot;);
+    module.exports &#x3D; async function() {
+      let metadata &#x3D; await Image(this.src, {
+        widths: [300],
+        formats: [&quot;avif&quot;, &quot;jpeg&quot;],
+        outputDir: &quot;_site&#x2F;img&#x2F;&quot;,
+      });

+      let imageAttributes &#x3D; {
+        alt: this.alt,
+        sizes: &quot;100vw&quot;,
+        loading: &quot;lazy&quot;,
+        decoding: &quot;async&quot;,
+      };

+      &#x2F;&#x2F; You bet we throw an error on missing alt in &#x60;imageAttributes&#x60; (alt&#x3D;&quot;&quot; works okay)
+      return Image.generateHTML(metadata, imageAttributes);
  }
  &lt;&#x2F;script&gt;

Note that we harcoded the value for  sizes in the imageAttributes object, and prepended both src and alt by this to wire things up correctly. We also instruct the Image plugin to output optimized images in our _site&#x2F;img&#x2F; folder directly for them to be available when using the following markup:
&lt;img alt&#x3D;&quot;a lovely image&quot; src&#x3D;&quot;&#x2F;img&#x2F;hash-width.jpeg&quot;&gt;
Let‚Äôs run npx @11ty&#x2F;eleventy --serve once more:
$  npx @11ty&#x2F;eleventy --serve
[11ty] Problem writing Eleventy templates: (more in DEBUG output)
[11ty] 1. Having trouble rendering webc template .&#x2F;index.webc (via TemplateContentRenderError)
[11ty] 2. Circular dependency error: You cannot use &lt;img&gt; inside the definition for .&#x2F;_includes&#x2F;webc&#x2F;img.webc (via Error)
That error sounds familiar, right?
We need to tell WebC to ignore img tags generated by Eleventy Image, and it‚Äôs as simple as adding &quot;webc:raw&quot;: true to the imageAttributes object:
  &lt;script webc:type&#x3D;&quot;render&quot; webc:is&#x3D;&quot;template&quot;&gt;
  const Image &#x3D; require(&quot;@11ty&#x2F;eleventy-img&quot;);
  module.exports &#x3D; async function() {
    let metadata &#x3D; await Image(this.src, {
      widths: [300],
      formats: [&quot;avif&quot;, &quot;jpeg&quot;],
      outputDir: &quot;_site&#x2F;img&#x2F;&quot;,
    });
  
    let imageAttributes &#x3D; {
      alt: this.alt,
      sizes: &quot;100vw&quot;,
      loading: &quot;lazy&quot;,
      decoding: &quot;async&quot;,
+     &quot;webc:raw&quot;: true,
    };
  
    &#x2F;&#x2F; You bet we throw an error on missing alt in &#x60;imageAttributes&#x60; (alt&#x3D;&quot;&quot; works okay)
    return Image.generateHTML(metadata, imageAttributes);
  }
  &lt;&#x2F;script&gt;
And we‚Äôre done!! (Note how the image now aligns perfectly with localhost:8080 #IncontestableTruth)

with corresponding markup:
&lt;!doctype html&gt;
&lt;html lang&#x3D;&quot;en&quot;&gt;
&lt;head&gt;
        &lt;meta charset&#x3D;&quot;utf-8&quot;&gt;
        &lt;title&gt;Eleventy Images + WebC rocks!&lt;&#x2F;title&gt;
    &lt;&#x2F;head&gt;
    &lt;body&gt;Fun with WebC

&lt;picture&gt;&lt;source type&#x3D;&quot;image&#x2F;avif&quot; srcset&#x3D;&quot;&#x2F;img&#x2F;SwdsuTpRbT-300.avif 300w&quot;&gt;&lt;img alt&#x3D;&quot;possum hanging from a palm leaf&quot; loading&#x3D;&quot;lazy&quot; decoding&#x3D;&quot;async&quot; src&#x3D;&quot;&#x2F;img&#x2F;SwdsuTpRbT-300.jpeg&quot; width&#x3D;&quot;300&quot; height&#x3D;&quot;450&quot;&gt;&lt;&#x2F;picture&gt;


&lt;footer&gt;
  &lt;p&gt;¬© 2022 Yours Truly.&lt;&#x2F;p&gt;
&lt;&#x2F;footer&gt;

&lt;&#x2F;body&gt;
&lt;&#x2F;html&gt;
Parting words
I am so excited to explore further the possibilities of using WebC to augment other native HTML elements.
This article only scratches the surface when it comes to the img tag. You could pass props down from the markup to Eleventy Image and control the behaviour of the image optimization. But we can now augment our native img tag without much hassle as it‚Äôs all in one file.
It even works with Markdown images (and yields the cutest webpage ever):
  ---
  layout: layouts&#x2F;base.webc
  ---
  
  Fun with WebC
  
  &lt;img alt&#x3D;&quot;possum hanging from a palm leaf&quot; src&#x3D;&quot;https:&#x2F;&#x2F;images.unsplash.com&#x2F;photo-1627224286457-923944e5b159?auto&#x3D;format&amp;fit&#x3D;crop&amp;w&#x3D;387&amp;q&#x3D;80&quot;&gt;
  
+  &lt;template webc:type&#x3D;&quot;11ty&quot; 11ty:type&#x3D;&quot;md&quot;&gt;
+  
+   ![&#39;close-up of a baby possum among ferns&#39;](https:&#x2F;&#x2F;images.pexels.com&#x2F;photos&#x2F;13960994&#x2F;pexels-photo-13960994.jpeg)
+  
+  &lt;&#x2F;template&gt;
  
  &lt;site-footer&gt;&lt;&#x2F;site-footer&gt;
  

All the more reasons to optimize your images now!
Find the code supporting this article on the RobinCsl&#x2F;11ty-webc-img-demo repository.*
#### [Year in Review: 2021](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2021&#x2F;) 
*We‚Äôre already at the start of February 2022, but who says retrospectives need to be done on January 1st?! A lot of things happened in 2021, both personally and professionally. Time to reflect and remember.
Personal üë∂üíçüìÑüìÉüìëüìú
This first part is the personal stuff, so if you don‚Äôt care about it, you can skip to the professional stuff instead. And if you don‚Äôt care about that too, why are you here? üòÇ
Welcome, L√©onard!
In January of 2021 came the great news that we were expecting a baby and a few months later, my son L√©onard came to this world! It‚Äôs been a few months now and it‚Äôs insane how much this event changed our lives.
It‚Äôs quite amazing to witness a human being‚Äôs awakening to the world, I do feel privileged.
Of course, it‚Äôs not just rainbows and unicorns.
Sleeping as much as I want is now a distant memory&#x2F;dream, though I‚Äôve been surprised that it‚Äôs actually quite possible to operate without the amount of sleep I used to get.
Having free time for side projects and writing almost vanished (and usually eats up time when I should sleep instead, while it‚Äôs allowed by baby-boss). I don‚Äôt know how other parents manage but time just flies by.
One thing‚Äôs for sure, L√©onard makes sure I keep fit and exercise regularly (a promise I made myself at the beginning of last year, right):
it‚Äôs quite a normal day when I need to go up and down the 4 floors of the block of flats we live in (and when it‚Äôs at night, I have this game where I switch the lights on and go up and down within the 3 minutes they‚Äôre programmed to stay on; naturally, after my 4th round trip, I usually do the last flight of stairs in the dark üòÖüòÆ‚Äçüí®).
it‚Äôs also quite a normal day when I need to carry him in my arms for 10- to 20-minute stretches, while doing squats, at least 2 or 3 times.
Coach L√©onard can ask for these drills at any time of the day (and night‚Ä¶), he says it‚Äôs for my own good. My knees and hips and back and arms tend to disagree.
Paperwork, paperwork, paperwork
In 2021, I‚Äôve had time to think so many times if the amount of paperwork we‚Äôre doomed to go through is some sort of devilish scheme to keep people busy on the boring stuff. It definitely does not help when you‚Äôre an expat.
If you had told me having a baby would generate so much paperwork chores, I probably would not have believed you. The story goes that we wanted to do an early recognition of fatherhood for me to be officially recognised as the father of my child to be.
In France, as a French person, this is a 5-minute visit to my local townhall, easy-peasy.
In Czechia, as a foreigner, this would have required tons of documents that also needed translating by a certified translator (aka costs some money).
Since we were engaged, and you‚Äôre officially recognised as the father when having a baby as a married couple, we thought we might as well go through paperwork hell to get married.
It did not disappoint.
Our child was due some time in the middle of September, so we had almost the entire year to get married, should be easy, right.
Being so diligent, we got in touch with the French embassy to understand what we need to do to get married in April:
weddings at the embassy are quite a rare thing, you should get married through the local authorities
getting married in Prague is like getting married in Las Vegas (say what?)
Only to realise at the end of June that:
babies aren‚Äôt always born around the due date
it‚Äôs already the end of June
Let‚Äôs just say that we managed to be on time paperwork-wise for our wedding at the beginning of August (ever heard of the necessary 2-week public display of your intent on getting married, during which somebody has the right to oppose it, to get the paper allowing a French person to marry‚Ä¶?), but the ‚Äúgetting married like in Las Vegas‚Äù was lost on us.
Professionally
Promo
In January last year, I got promoted to Staff Engineer at Kiwi.com. Pretty crazy to me to think that I started working in the industry in September 2017. Even though titles only mean so much, it‚Äôs still a nice recognition that I bring value to the company.
Pair Documenting
I definitely learnt a lot about infrastructure and Kubernetes, which might seem overkill for a frontend platformer, but there was a void to fill when my ex-colleague Adam Jani≈° left, so I put on my newbie hat and pair-documented Adam‚Äôs knowledge throughout his notice period. I still refer or point people to that document quite regularly, it‚Äôs an investment that keeps on giving after all these months!
This was also the first time I tried to add original schematics&#x2F;pictures and Excalidraw made it super fun and easy!
Robin‚Äôs Gazette
My newsletter, Robin‚Äôs Gazette, kept going quite well! It turned one year old on December, 9th! üéÇ
In 2021, I published 25 issues (784 emails in total!), and went from 9 subscribers to 49 at the end of the year!
Given the quite low volume of subscribers, my average open rate and click rate are pretty okay (though they are ‚Äúall-time‚Äù performance metrics):
70.35% open rate,
24.38% click rate.
Even though it‚Äôs always some amount of work, I deem it worthy of my time as I get to practice writing and I always learn something slightly more deeply than if I just scrolled Twitter or Hacker News. This continues my efforts from ‚Äúarchivist to creator‚Äù that I mentioned in my last retro.
Special mention to Shawn @swyx Wang for being so encouraging along the way!
My goal for this year is to continue on that path, though I do need to put some effort into advertising it better:
the subscribe form is hard to find on my website,
the content is short-lived and behind closed doors ‚Äì so I should repurpose it to an extent,
start marketing it more (instead of the infrequent tweets I‚Äôve tried at some point).
One small change for this year: I now send the Gazette every other Friday instead of every other Wednesday.
Some of the feedback I received üòä
‚ÄúSuch a great newsletter this week Robin, amazing job!‚Äù
‚ÄúStill enjoying the newsletter!‚Äù
Blog
The blog was a bit quiet last year, I only published 3 posts and refreshed my most read article about building APK files locally for Expo projects (it recently crossed 20K views in its lifetime! üéâ).
They were:
Python Dependencies for JavaScript Developers
How to Download a Brain with Pair Documenting (already mentioned above)
Year in Review: 2020
I really hope to start writing more again on the blog because the SEO game takes a long time for Google to start recommending your stuff: I saw more traffic to my How to Test Your ESLint Config and Get your Own Sentry Playground articles, and they were written in September 2020!
Started working on a course
In the last retro, I announced that I planned to write a book. That did not happen‚Ä¶ üòÖ
Instead, I started working on a video course which essentially replicates the now defunct Margarita project from scratch (which was the subject of this article on my blog), showcasing how to build cross-platform web and native mobile apps through React Native and React Native Web.
This was the occasion to spend some time weeks watching all the microphone reviews on YouTube, all the Audacity and Obs Studio tutorials for sound production, to ultimately produce a half-finished tutorial on YouTube (the best 33 seconds of your life, trust me).
Source



Ever since my son was born, I‚Äôve had little time to focus for longer than 5-minute stretches outside of work, so this project has lost steam right now. I hope I‚Äôll manage to finish it in the first semester!
A look back and forward
Revisiting some of my plans for 2021 and making some for 2022.
Family
As much as I would love to work on side-projects and such, my family comes first, and I want to keep it that way. I‚Äôm excited to continue discovering what my next workouts will be, courtesy of Coach L√©onard! (Seriously, I‚Äôve got some arms now! üí™)
I cannot wait for my son to meet all his grand-parents, aunts and uncles in France later this year!
Nehovor√≠m pliynule po slovensky
aka I don‚Äôt speak Slovak fluently.
One of my goals was to make sure I would be able to speak to all my wedding guests in their preferred language (amongst French, English and Slovak). Because of the above (and COVID not helping‚Ä¶), the guest list was actually pretty small and my mastery of Slovak would not be entirely necessary to do well on my goal. So I guess I will learn better alongside my son this year whilst we wait for the big party?
Almost no SAD this past year
Come December, I usually feel pretty burnt out and in dire need of vacation to recharge. Somehow, in December 2021, I did not feel like that at all.
My new family life provided some amount of distractions from work. Even though that increased my context switching throughout the days and the nights were not as restful, it somehow created some distance between work and me. Or maybe because living with a newborn forces you to live in the moment, one day at a time‚Ä¶ üòÖ
Writing
Less paperwork, more blog posts. ü§û
Keep the newsletter going, and make it better, faster, stronger!
Improve my note taking system, which is a bit chaotic and not really systematic at the moment.
Learning Rust
In 2021, I started dabbling with Rust, mostly through the really great WIP book from Luca Palmieri, Zero To Production In Rust. It assumed some knowledge so I sometimes struggled had fun filling in the gaps.
Given where the JS ecosystem is going in terms of tooling (oh yeah, in 2021 I started this Awesome List of JavaScript Tooling Not Written In JavaScript on GitHub ‚Äì 667 stars so far!), I think it‚Äôs important to explore beyond the confines of JavaScript&#x2F;TypeScript. So I‚Äôd like to spend more time with Rust this coming year!
Lots of things to be grateful for last year and lots to look forward to this year. C‚Äôest parti !*
#### [Python Dependencies for JavaScript Developers](https:&#x2F;&#x2F;www.robincussol.com&#x2F;python-dependencies-for-javascript-developers&#x2F;) 
*Recently, I needed to update an old Python codebase which had not been touched in 3 years! Of course, the dependencies were so outdated that the Dockerfile of the project wouldn‚Äôt build. My JavaScript knowledge did not help me much:
how could I do a yarn upgrade-interactive --latest to update dependencies?
where‚Äôs the dependency lockfile?
why do we need to compile C-libraries for Python dependencies?
Luckily for me, my colleague Ondrej patiently explained how to approach these questions.
Using a virtual environment
TL;DR: pip installs packages globally unless we activate a virtual environment.
In Python, the default package manager is call pip and it installs packages from the Python Package Index, shortened to Pypi. The equivalent in JavaScript land would be npm and npmjs.com.
By default, pip installs packages system-wide. This contrasts with the need to pass a --global flag to npm.
To remedy that, we can use a local Python environment (a bit like having our node_modules folder in a JavaScript project). The following command will create a virtual environment in a venv folder in our current directory:
# Create the venv folder container the virtual environment
$ python3 -m venv venv
To make sure pip knows it should install packages in this virtual environment, we must activate it. Depending on your shell, you should source the appropriate activate file in venv&#x2F;bin:
activate, for Bash and ZSH,
activate.fish, for Fish Shell,
activate.csh, for csh
Activate.ps1, for PowerShell.
In my case, I will source the one for ZSH:
$ source venv&#x2F;bin&#x2F;activate
Now, pip install will install packages in the local folder instead of targeting the global scope. My ‚ÄúPython node_modules folder‚Äù is venv&#x2F;lib&#x2F;python3.8&#x2F;site-packages&#x2F;.
Dependencies in Python
TL;DR: use pip-compile to generate a lockfile and pip-sync to install dependencies from that lockfile
To deal with dependencies, we must install the pip-tools package in our virtual environment:
pip install pip-tools
This will allow us to use pip-compile and pip-sync later on.
Once that‚Äôs done, we could for example decide to start a Django project, ‚Äúthe web framework for perfectionists with deadlines‚Äù. The latest version of the package at the time of writing is 3.2.5. Let‚Äôs create our Python equivalent of a package.json file to express our project needs the Django package pinned to version 3.2.5:
# requirements.in
django&#x3D;&#x3D;3.2.5
Note: the better equivalent to a package.json would be a setup.py file, since it contains additional fields like the name of the local package, its version, etc. but we just want to write down the dependencies.
EDIT #1: it‚Äôs apparently not common practice to pin dependency versions in requirements.in, just in case you really need to (if there are breaking changes for example). Thanks for pointing it out, Ondrej.
To generate a corresponding lockfile of the transitive dependencies of Django, we can run the following command:
pip-compile --output-file requirements.txt requirements.in
This will create the following requirements.txt file:
#
# This file is autogenerated by pip-compile with python 3.8
# To update, run:
#
#    pip-compile --output-file&#x3D;requirements.txt requirements.in
#
asgiref&#x3D;&#x3D;3.4.1
    # via django
django&#x3D;&#x3D;3.2.5
    # via -r requirements.in
pytz&#x3D;&#x3D;2021.1
    # via django
sqlparse&#x3D;&#x3D;0.4.1
    # via django

Now that we have this file, we can finally retrieve and install the packages with the following command:
pip-sync
Note: if you try to run pip-sync without a requirements.txt, you will get the following error:
No requirement files given and no requirements.txt found in the current directory
It is indeed necessary to run pip-compile before.
Updating dependencies
Similar to npm oudated, we can list the outdated Python dependencies with
$ pip list --outdated
For example, after downgrading Django to 3.2.3 in my requirements.in, regenerating the lockfile with pip-compile, re-installing the dependencies with pip-sync, the command above will show:
Package    Version Latest Type
---------- ------- ------ -----
Django     3.2.3   3.2.5  wheel
setuptools 44.0.0  57.4.0 wheel
To update the dependency, I can change the version back to 3.2.5 in the requirements.in and go through the same dance:
$ pip-compile --output-file requirements.txt requirements.in
$ pip-sync
$ pip list --outdated
Package    Version Latest Type
---------- ------- ------ -----
setuptools 44.0.0  57.4.0 wheel
EDIT #2: a batteries-included equivalent to Yarn is called Poetry. Thanks for sharing, D√°niel!
Wheels and Eggs
You might wonder what this ‚Äúwheel‚Äù type is for the Django and setuptools packages.
They are still mysterious to me, but here‚Äôs my current understanding: in Python, some dependencies need to be built for specific architectures, as they might be written in Cython, ‚Äúa superset of the Python language that additionally supports calling C functions and declaring C types on variables and class attributes‚Äù. Wheels and Eggs are packaging formats for these.
In particular, it is not a good idea to use Alpine Docker images for Python projects as a lot of packages don‚Äôt have pre-built wheels for that architecture: your Docker build step will need to compile the packages from source, slowing down your entire process (and requiring you to install the necessary build tools for this compilation to happen!).
I don‚Äôt think there is a similar ‚Äúpackaging format‚Äù concept in JavaScript land. But we do have packages shipping prebuilt binaries for specific architectures, for example Sharp, the Node.js image processing package. (And we probably have enough issues with CommonJS vs ES Modules as it is‚Ä¶ :smile:)
Conclusions
All in all, a project needs to:
specify external dependencies and their desired version with semantic ranges
have a way to retrieve said dependencies
keep track of which versions were effectively installed to improve reproducibility.
Despite all these measures, the Docker file of an unmaintained 3-year old project could not build. Software rots!*
#### [How to Download a Brain with Pair Documenting](https:&#x2F;&#x2F;www.robincussol.com&#x2F;download-a-brain-with-pair-documenting&#x2F;) 
*When people leave the company, a lot of specific and ad hoc knowledge goes away with them. Unless there is already a strong documentation culture, there‚Äôs only so much that can be said and done during exit interviews to make up for it.
But this doesn‚Äôt have to be left to fate.
Throughout the month of January, my now ex-colleague Adam Jani≈° and I pair documented all his knowledge about the frontend infrastructure at Kiwi.com. We produced a 24 page document, fixed a few bugs and addressed some tech debt. More importantly, we had fun doing it!
Here‚Äôs how we approached it.
How to pair document
This is an attempt at formalising what we‚Äôve done, feel free to s&#x2F;Newbie&#x2F;Robin&#x2F;g and s&#x2F;Expert&#x2F;Adam&#x2F;g.
The Protagonists
You will need two proactive people: an Expert on the subject to document and a Newbie who is not too cursed with knowledge yet. Bonus points if they have not really worked together but always had good chemistry in their interactions.

The Newbie makes it easy on the Expert for this documentation effort to be a no-brainer:
they organize the pair documenting sessions;
they manage the agenda of the sessions;
they do most of the note-taking;
they digest the notes into documentation drafts in between sessions;
they stay curious and eager to learn more about the subjects, with questions always at the ready (this is hard to fake, so find an adequate Newbie for the task).

The Expert shows up at the sessions and generously shares their knowledge with the Newbie, answering patiently every question they may have. They review the documentation drafts to ensure the prose does not betray the original intent of the notes. Bonus points if they include the Newbie in solving similar problems described in the nascent documentation as they arise in the support channels of the company‚Äôs Slack: learning by doing is a great way to drive home the material and expose remaining ambiguities.

The First Session
The Newbie is in charge and explains how it‚Äôs going to work in the first pair-documenting session. That means going through what‚Äôs expected of each participant in this documentation effort as well as giving an overview of the actual process.
The objective of the first session is crucial: go as broad as possible and capture as many ideas of what needs documenting to form a backlog of topics to go over in the next sessions.
This can be achieved through asking questions like (more examples in this template):
what are things that you know about that very few people know?
what are the things that people always ping you about on Slack?
what tasks pile up when you‚Äôre on vacation?
Once the amount of things to document gets a bit clearer, see how many days are left before they leave and agree on a schedule to leave enough time for this task.
In Between Sessions
The Newbie transforms the raw notes into documentation drafts and gets the Expert to review them.
As more people in the company are aware of this documentation effort, they might have questions of their own; the Newbie adds these points to the agenda for the next session.
The Expert includes the Newbie in all discussions on Slack touching on the subject to maximize the learning opportunities and give the docs a trial by fire.
A Normal Session
In the first 5-10 minutes, the Newbie and the Expert go over unresolved comments in the doc draft, they review the agenda from the previous session and see if anything pops up to be further discussed or explained, and finally, they review the agenda for the current session and decide what to prioritize.
They then go over each point in the agenda: the Expert does most of the talking while the Newbie does most of the note-taking. The Newbie shares their screen for the document to be visible by both pair documentors. The Newbie may interrupt the Expert at any point with questions or with attempts at paraphrasing what the Expert just described. The Expert glances at the notes being taken once in a while to ensure they don‚Äôt contain mistakes from the get-go.
When the time is up, the Newbie and the Expert look at how much they covered from the agenda, move what hasn‚Äôt been covered to the next session, and agree on a date and time for that next session (if it‚Äôs not already regular).
Tools we used
A Calendar: to plan the sessions, to have automatic reminders for them, and to share the visio-conference link.


Custom recurrence with expiry date, Hangouts link, Notification not to miss it, Allow guests to modify event for better collaboration

A Google Document: to store the agenda, the notes and the first documentation drafts. Do make use of the outline on the left-hand side to navigate more easily once the document gets to a certain size. Do make use of comments to discuss and improve the notes and the draft. This is also a good place to involve other people from the company asynchronously. Make sure to put this document in a shared team drive for it to have the right permissions set by default.


Use the ‚ÄúStyles‚Äù dropdown to get this hierarchy

Here‚Äôs a free template Google document to get you started. Feel free to make a copy.
LucidChart: to draw a few diagrams because pictures are great (though you may want to check out Draw.io for a great free alternative).
Why Pair Documenting Works
What usually happens
Unless there is a strong documenting culture, (1) people never prioritize documentation over almost any other task, because it‚Äôs just not as fun as coding or as urgent as the next fire you need to put out. That means that when someone is about to leave, (2) there is an impossible amount of things to document that they don‚Äôt even know where to start. Because they are short on time, they end up drafting a lil‚Äô something and call it a day. (3) Anyway, we never needed that, why are they asking me to document that stuff, who‚Äôs gonna read it anyway?! (Note the use of two ‚Äúanyway‚Äù).
Clear intention through planning
Through planning the pair documenting sessions, we make sure documentation does get prioritized and give it the importance it deserves. If the Expert‚Äôs knowledge is that important and they by happenstance siloed it, it becomes urgent to share this knowledge more widely to deal with that critical bus factor. (Whether they leave or not is almost irrelevant in this case.)
Because we know when the Expert‚Äôs last working day is, it is easier to retro-plan the right number of sessions to cover the entire backlog established in the first session. This of course might need adjusting throughout the pair documentation effort.
More fun and better quality through collaboration
Planning is not enough if the Expert is still lost about what needs documenting and in which level of details. The nagging ‚Äúare they even gonna read it?‚Äù-type questions could well be the end of the documentation effort already: a well-crafted plan not well-executed.
With an accountability buddy, things turn around entirely.
It becomes really difficult to bail out of the plan because you know the other person is expecting you to show up at the session.
Because the Newbie is enthusiastic about the topic, the Expert is more generous in their contribution.
Because the Newbie asks questions and cares about details, the pair documentors tailor the documentation to the level of knowledge on the receiving end. The Expert knows this documentation will be useful. üòå
Aligned incentives
The Expert also knows that what they know should be documented somewhere, and because they like their colleagues, they don‚Äôt want their departure to create a mess. (Right?!)
The Newbie knows this knowledge is valuable, and about to disappear if they don‚Äôt take action. Besides, it‚Äôs something they‚Äôre curious and wanted to learn more about anyway.
The Expert gets to share their knowledge and teach what they know to someone who‚Äôs enthusiastic and interested in the topic; the Newbie gets time with the Expert to learn as much as possible from them.
Parting thoughts
I really enjoyed the pair documenting sessions with Adam and I think they should be made a regular practice, just like pair programming. It‚Äôs a great way to level up people while producing value beyond the scope of that collaboration.
At the same time, documentation is only valuable if it gets read and updated continuously. I‚Äôve been thinking about how to bring it closer to where people are already consuming content. For example, this could take the form of digests of parts of the documentation in the company‚Äôs Slack.
I‚Äôm not super familiar with mob programming, but I do wonder if mob documenting could be a thing to try too.

Acknowledgements:
Adam Jani≈° (@adam_janis) for trying out this pair-documenting idea before his departure :)
Emilia Vidal for her review and suggestions,
Shawn Wang (@swyx) for his review and ideas for the title and Open-Graph image,
Ron Au (@ronvoluted) for providing the font to go ahead with Shawn‚Äôs ideas,
Excalidraw to produce the visuals.*
#### [Year in Review: 2020](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2020&#x2F;) 
*2020, what a ride!
I cannot believe 2020 has already finally come to an end: with the lockdowns and quarantines, time simultaneously flew by and dragged on. A lot of my life was lived through a computer and the Internet. Time to reflect and remember.
Let‚Äôs start with some remarkable facts and events:
personally: - turned 30 in April, without even a beer to celebrate! (hint: the last bit is what‚Äôs remarkable) ‚ùåüç∫ - traveled only once to see my family in France üò¢ - got engaged in August üíç - spent the Christmas holidays alone, for the first time (I feel you, Kevin McCallister) üö∞
at work: - got a raise and earned a promotion üìà - wrote 3 posts on the Frontend Platform‚Äôs internal blog ‚úç
on my blog: - published 8 new posts üöÄ - updated 1 article ‚ôªÔ∏è - started a newsletter (already wrote 2 issues) üóû - broke the 10k unique visitor mark for Build Standalone Expo .apk and .ipa with Turtle CLI üéâ
miscellaneous: - joined 2 great online communities (Coding Career and Blogging For Devs) üôå - revamped a handful of desktop PCs and laptops (cannot believe I was about to get rid of my older laptop when it‚Äôs so smooth now!): most low-end&#x2F;mid computers are slow because of their stock hard drives (and limited RAM), a nice SSD and some RAM extension will do wonders! üíæ - jumped on the sourdough bread baking train (and learnt recently how sourdough baguettes are a lazy baker‚Äôs dream!) üá´üá∑ ü•ñ
Despite everyone calling 2020 their worst year ever, it did not seem so bad personally. Of course, I missed social life and being able to do ‚Äúnormal‚Äù things, but all things considered, I still learnt a lot this year.
Consumer to archivist
Spending so much time online means I absorbed vast amounts of data and after a while, it did not sit so well with me. I believed that I learn best by immersing myself in a continuous flow of information surrounding one topic. Of course, it‚Äôs worked for me so far, but the cost is that I get overwhelmed and it‚Äôs difficult to know when it‚Äôs enough.
Trying to change that brute-force approach to learning, I read here and there that taking notes would force me to slow down and choose what I consume more wisely. I obviously bought ‚ÄúHow to Take Smart Notes‚Äù by S√∂nke Ahrens (and only half-read it), came across the German word Zettlekasten and went on a wild goose chase for the best Personal Knowledge Management system, and read all the articles and watched all the YouTube videos about the subject. Old habits die hard. üòÖ
After using a few of them, I ended up settling with Joplin (which I had of course already set up prior to any of this) and have not looked back. It does not have backlinks so I‚Äôm deeply missing out on interconnected notes, as the hype goes, but it‚Äôs okay. My FOMO is in check for now. Joplin is an active open source project which is available on desktop as well as mobile devices. I retain full ownership (and responsibility) over my notes as Joplin integrates with different storage backends: I chose to use my self-hosted NextCloud instance.
In short:
just-in-case knowledge is expensive; prefer just-in-time knowledge
it‚Äôs easy to go on a wild goose chase only to realise you had everything already
note-taking does force me to slow down and helps to remember better
Archivist to creator
This story does not end here, dear reader. Accumulating notes about topics I‚Äôm interested in helps to slow down and be more intentional with what I consume. But it turns out knowledge without action is mostly useless.
Luckily, Daniel Vassalo wrote this influential tweet:
If you‚Äôre tempted by this, my advice to first-time creators is to start with a very small product: Something you can finish in 2 weeks and charge #### [Build Standalone Expo .apk and .ipa with Turtle CLI [deprecated]](https:&#x2F;&#x2F;www.robincussol.com&#x2F;build-standalone-expo-apk-ipa-with-turtle-cli&#x2F;) 
*This article was updated on February 7, 2023. NOTE: As of Expo SDK 47, the following method does not work any more. With the release of EAS‚Ä¶*
#### [Optimize your img tags with Eleventy Image and WebC](https:&#x2F;&#x2F;www.robincussol.com&#x2F;optimize-your-img-tags-with-eleventy-image-and-webc&#x2F;) 
*I am very excited about WebC and couldn‚Äôt wait to try out the corresponding Eleventy plugin. The first use-case I had in mind was to use‚Ä¶*
#### [Year in Review: 2021](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2021&#x2F;) 
*We‚Äôre already at the start of February 2022, but who says retrospectives need to be done on January 1st?! A lot of things happened in 202‚Ä¶*
#### [Python Dependencies for JavaScript Developers](https:&#x2F;&#x2F;www.robincussol.com&#x2F;python-dependencies-for-javascript-developers&#x2F;) 
*Recently, I needed to update an old Python codebase which had not been touched in 3 years! Of course, the dependencies were so outdated that‚Ä¶*
#### [How to Download a Brain with Pair Documenting](https:&#x2F;&#x2F;www.robincussol.com&#x2F;download-a-brain-with-pair-documenting&#x2F;) 
*When people leave the company, a lot of specific and ad hoc knowledge goes away with them. Unless there is already a strong documentation‚Ä¶*
#### [Year in Review: 2020](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2020&#x2F;) 
*2020, what a ride! I cannot believe 2020 has already finally come to an end: with the lockdowns and quarantines, time simultaneously flew by‚Ä¶*
#### [Docker for JavaScript Devs: How to Containerise Node.js Apps Efficiently](https:&#x2F;&#x2F;www.robincussol.com&#x2F;docker-for-js-devs-how-to-containerise-nodejs-apps-efficiently&#x2F;) 
*Docker is a really cool technology to have applications run the in the same, predictable context, ensuring the ‚Äúbut it works on my machine‚Ä¶*
#### [TypeScript Tidbit: How to Overload an Imported Function](https:&#x2F;&#x2F;www.robincussol.com&#x2F;typescript-tidbit-how-to-overload-an-imported-function&#x2F;) 
*There are times when the type definitions shipped on DefinitelyTyped are not enough and this results in making the TypeScript compiler‚Ä¶*
#### [Wax on, Wax off](https:&#x2F;&#x2F;www.robincussol.com&#x2F;wax-on-wax-off&#x2F;) 
*The reason I got into web development in the first place was the magical ‚ú® feeling you get when you see your code manifest in the browser‚Ä¶*
#### [A Successful Side-Project: Lessons from Swyx](https:&#x2F;&#x2F;www.robincussol.com&#x2F;a-successful-side-project-lessons-from-swyx&#x2F;) 
*If you are on Twitter, chances are you came across this tweet by Daniel Vassallo and it now seems everyone is writing a book! üòÑ Shawn Wang‚Ä¶*0 for it. The experience of getting paid for something you created, directly by consumers, will change you forever. https:&#x2F;&#x2F;t.co&#x2F;UbUD9ch4xQ
‚Äî Daniel Vassallo (@dvassallo) April 10, 2020
 
and Shawn Wang (@swyx) acted on it almost immediately to produce the Coding Career Handbook a few months later. I had followed him for some time on Twitter. His posts, conference talks and online presence in general always brought me value so I wanted to support his work. I was also really glad that half the proceeds would go to FreeCodeCamp. I got the Creators package, not entirely sure what to expect.
This was one of the best decisions of 2020.
As part of the Creators package, there have been regular workshops and they definitely spurred me further to action. After he invited Monica Lent to give a workshop about blogging for developers, I formed a resolve to try and publish a post every 2 weeks, as a way to transform my note-taking game into something more valuable. That‚Äôs when I resurrected my blog with 5 Tips to Start Blogging (for Devs).
A lot of my posts were shared at work and in the company‚Äôs external newsletter (thank you üôÇ) and for the most part, this resurection was successful, even though December was a bit of a hiatus in my blog publishing, as I started my newsletter, Robin‚Äôs Gazette.
I still have a lot to learn when it comes to creating online content and I am looking forward to continuing with this momentum. Whenever I need a reality check of what it takes to embark on this creator journey, I would have a read through Alex West‚Äôs story, as it‚Äôs so real, inspiring and humbling!
Joining online communities
The Coding Career Handbook is an amazing resource and I would like to write a proper review of the book some day; it contains so much valuable information that it would be hard to do it justice here.
What‚Äôs even more awesome about it is that it came with access to a community through Discord and Circle that Shawn manages really well as it keeps delivering value and furthers the book‚Äôs teachings and principles. And if that wasn‚Äôt enough, I met a few interesting people there who I‚Äôm looking forward to getting to know more in 2021.
Judging by how much the Coding Career community helped me to get real with my volitions, I also decided to join Monica Lent‚Äôs Blogging For Devs community because I‚Äôd like to take my blogging further. For example, my article about [Building] Standalone Expo .apk and .ipa with Turtle CLI broke the 10k unique visitor mark in December, through accidental SEO mostly. üéâ I‚Äôm hoping to get a little bit more intentional with SEO as it‚Äôs a great way to magnify the reach of your content. There are so many interesting and inspiring people in Monica‚Äôs community, as well as discussions and workshops about SEO, newsletters, monetization, and of course blogging‚Äîtopics I definitely want to dive deeper in in the new year!
Writing, writing, writing
If you have read this far, it has become pretty apparent that writing is now more than ever my main focus. I think it has been a tremendous source of clarity and success in the last year for me.
The resource that influenced my writing the most this year was this lecture by Larry McEnerney about the Craft of Writing Effectively (here‚Äôs a summary). Having done a PhD, I practiced the ‚Äúwrong‚Äù way of writing for a very long time. Focusing on what‚Äôs valuable for your intended readership makes so much sense.
As I mentioned in my first newsletter issue (let me know if you want a copy of it üòâ), design documents have been crazy useful at work. I must thank my colleage Tobi√°≈° Potoƒçek for bringing about this revolution. In this remote-only work environment, they were a great tool to discuss, make decisions and document them in a searchable manner. Every shortcut needed to be reckoned with and set against the bigger picture. Every quirk or contextual piece of information (which are critically important to understand past decisions or make new ones) are now recorded in writing.
Being a member of the Frontend Platform team, communicating as effectively as possible with the teams we serve was critically important too‚Äîespecially in such challenging times for a travel company in 2020. Most of that communication was done in writing through Slack and Google Documents. (Not to say it was always a smooth ride‚Ä¶)
A look ahead
In 2021, I will focus on staying in shape, physically and mentally. We will go for walks in nature more regularly with Emilia (we agreed at least once a month and have a list of places in Czechia!) I will cycle to work as much as possible, get back into the nice workout rhythm we had during the first lockdown and take care of my sleeping patterns (it‚Äôs all great to wake up earlier to write, but that means going to bed earlier too, Robin ;-)) I will take breaks when I‚Äôm getting overwhelmed, instead of resorting to my usual ‚Äústrategy‚Äù of pushing through until I‚Äôm burnt out.
In 2021, I will focus on maintaining the shift from content consumption to content creation. I want to continue publishing on my blog every 2 weeks as well as send my Gazette every 2 weeks. I will write a book to help PhD graduates transition to web development: I‚Äôm now further along the path (and my work seems to be appreciated :)), so it‚Äôs time to try and lift others as I climb.
In 2021, I will finally speak Slovak fluently to be able to speak to all our wedding guests (still to be planned‚Ä¶ so I got time, I guess :P) in their preferred language. (Robin of January 2022, you‚Äôre welcome!)
C‚Äôest parti!*
#### [Docker for JavaScript Devs: How to Containerise Node.js Apps Efficiently](https:&#x2F;&#x2F;www.robincussol.com&#x2F;docker-for-js-devs-how-to-containerise-nodejs-apps-efficiently&#x2F;) 
*Docker is a really cool technology to have applications run the in the same, predictable context, ensuring the ‚Äúbut it works on my machine‚Äù comments are a thing of the past. Not to mention how Docker integrates with Docker Compose and Kubernetes for larger-scale applications! But that‚Äôs for another day.
In this article, you will learn about some good principles to containerise Node.js apps efficiently. These principles are probably quite general and well-known, but they‚Äôre easy to overlook for beginners to Docker and Dockerfiles.
You will need to have Docker and Node.js installed locally to follow along comfortably.
Docker wants to make you happy, 
Photo by cottonbro from Pexels



Table of contents
Containerising a Next.js app (naive approach)

Docker Glossary
Optimising a Node.js app‚Äôs Docker image

Create a comprehensive .dockerignore file
Use an appropriate base image
Decouple the dependency installation step from application code
Decouple the build from the resulting built application
(Optional) Purge node_modules from unnecessary files
Docker build checklist for JavaScript Devs
Containerising a Next.js app (naive approach)
Let‚Äôs start with a simple Next.js application:
$ npm create next-app --use-npm
and let‚Äôs write the following into a file called Dockerfile at the root of the project:
FROM node:14.15.0

WORKDIR &#x2F;app

COPY . .
RUN npm ci
RUN npm run build

EXPOSE 3000

USER node

CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
Okay, what just happened? üòÑ
Docker Glossary
FROM &lt;image&gt;
WORKDIR &lt;some-path-in-the-container&gt;
COPY &lt;from-context&gt; &lt;to-container&gt;
WORKDIR directory
RUN &lt;command&gt;
docker build process only
EXPOSE &lt;port&gt;
documenting which port the app uses
USER &lt;user&gt;
root with superuser privileges); it‚Äôs good practice to use a different user to run the app.
CMD &lt;command&gt;
docker run &lt;image-tag&gt;, it is not executed during the build process.
Assuming we have Docker installed, we could now run
$ docker build --tag my-containerised-nextjs-app .
This command kindly asks the Docker daemon running on our machine to build the Dockerfile we just wrote with the files present in the current directry (the .) and to call that image my-containerised-nextjs-app (with the --tag flag).
After the build completed, run
$ docker run --rm -p 3000:3000 my-containerised-nextjs-app
and we should have our app running at http:&#x2F;&#x2F;localhost:3000.
This second command orders the Docker daemon to run the image named my-containerised-nextjs-app with port 3000 on my machine to correspond to port 3000 inside the container so that we can interact with our Next.js app. This port mapping is done through the -p hostPort:containerPort flag. Go ahead and change the port mapping and see if you can still access the app.
The --rm flag indicates that we do not want the Docker daemon to keep the container when we stop its execution (with CTRL+C); this is useful not to clog our machines with useless logs while developing.
Voil√†, we have containerised our Next.js app. The End. üéâ
Wait! Don‚Äôt leave, there‚Äôs more! üëá
Optimising a Node.js app‚Äôs Docker image
The section above does the job, but it‚Äôs not optimal. If we only have so few pipeline minutes and we don‚Äôt like wasting resources ‚ôªÔ∏è, this setup will eat more than is necessary. There are a few strategies to optimise a Dockerfile:
Create a comprehensive .dockerignore file
Use an appropriate base image
Decouple the dependency installation step from application code
Decouple the build from the resulting built application
(Optional) Purge node_modules from unnecessary files
Create a comprehensive .dockerignore file
If we look at the logs from building the Docker image, we could read:
Step 4&#x2F;8 : RUN npm ci
 ---&gt; Running in 559b499f0e2c
npm WARN prepare removing existing node_modules&#x2F; before installation
That means we copied the node_modules folder from our local context over to the Docker image being built. What‚Äôs more, npm ci removes them to make sure it works consistently. That is an indication that we should not copy the node_modules in the first place.
To let Docker know some files and folders should be ignored, we can list them in a .dockerignore file. For example, add the following to a file named .dockerignore:
node_modules
Run the build again and the warning disappeared.
What‚Äôs more, we can see how much less was sent to the Docker build context:
# BEFORE
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  101.8MB

# AFTER
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  400.4kB
In practice, we would want to add as many files as possible to our .dockerignore to ensure we‚Äôre not wasting time and energy on files which won‚Äôt be necessary for the build. This can include documentation files (e.g. *.md), configuration files which are only necessary when developing (e.g. .eslint*, .prettier*) as well as our Git history (e.g. .git).
With the following .dockerignore file:
node_modules
*.md
.git
we end up sending the bare minimum to the Docker daemon:
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  248.3kB
Use an appropriate base image
Docker images come in all shapes and sizes. When it comes to building or deploying our app, the smaller the size, the better. For our Next.js app, we don‚Äôt need all that‚Äôs available in node:14.15.0. For example, we don‚Äôt need git or curl. We can instead use the alpine flavour of that image, namely node:14.15.0-alpine.
The difference in size between node:14.15.0 and node:14.15.0-alpine is enormous!
REPOSITORY                    TAG                 SIZE
node                          14.15.0             943MB
node                          14.15.0-alpine      117MB
Our final containerised Next.js app will hence be much smaller thanks to this teeny-tiny modification of our Dockerfile:
- FROM node:14.15.0
+ FROM node:14.15.0-alpine

WORKDIR &#x2F;app

COPY . .
RUN npm ci
RUN npm run build

EXPOSE 3000

USER node

CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
For reference, if we want to inspect the size of the Docker images we have available locally, we can run docker image ls --all.
Our Docker image has size 1.05GB if we use node:14.15.0,
REPOSITORY                    TAG                 IMAGE ID            CREATED             SIZE
my-containerised-nextjs-app   latest              c78d43a2c5bc        15 seconds ago      1.05GB
and it drops to 229MB if we use node:14.15.0-alpine instead!
REPOSITORY                    TAG                 IMAGE ID            CREATED             SIZE
my-containerised-nextjs-app   latest              d0746ef6e8a4        21 seconds ago      229MB
Decouple the dependency installation step from application code
Our setup is already much better with a suitable .dockerignore file and with a much leaner base image. However, we haven‚Äôt made any changes to our package.json and the npm ci step always needs to run if make any changes to our application code.
This is because Docker caches each step as an intermediate Docker container. For example, if we were to run the build again (docker build --tag my-containerised-nextjs-app .), we would see that the cache is used for all steps, resulting in a nearly instant build (because nothing happened, really üòÑ):
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  248.3kB
Step 1&#x2F;8 : FROM node:14.15.0-alpine
 ---&gt; 9db54a688554
Step 2&#x2F;8 : WORKDIR &#x2F;app
 ---&gt; Using cache
 ---&gt; d5d4291dc699
Step 3&#x2F;8 : COPY . .
 ---&gt; Using cache
 ---&gt; b56455e98a93
Step 4&#x2F;8 : RUN npm ci
 ---&gt; Using cache
 ---&gt; ba4ab784f27e
Step 5&#x2F;8 : RUN npm run build
 ---&gt; Using cache
 ---&gt; a51c18594a20
Step 6&#x2F;8 : EXPOSE 3000
 ---&gt; Using cache
 ---&gt; 806dc06cbb6c
Step 7&#x2F;8 : USER node
 ---&gt; Using cache
 ---&gt; b86db08de717
Step 8&#x2F;8 : CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
 ---&gt; Using cache
 ---&gt; d0746ef6e8a4
Successfully built d0746ef6e8a4
Successfully tagged my-containerised-nextjs-app:latest
If we now modify anything in the folder that is not ignored thanks to our .dockerignore file, Docker will have to bust the cache from Step 3 onwards (the ‚ÄúUsing cache‚Äù expression is not printed any more). Let‚Äôs create an empty file and run the build again:
# create an empty file
$ touch file
# build again
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  248.8kB
Step 1&#x2F;8 : FROM node:14.15.0-alpine
 ---&gt; 9db54a688554
Step 2&#x2F;8 : WORKDIR &#x2F;app
 ---&gt; Using cache
 ---&gt; d5d4291dc699
Step 3&#x2F;8 : COPY . .
 ---&gt; e2b761bb08a6         # The cache is not used anymore
Step 4&#x2F;8 : RUN npm ci
 ---&gt; Running in b36f2511e117
...
To remedy this and ensure that npm ci runs only when necessary, we can first copy package.json and package-lock.json files, run npm ci, and then bring in the rest of the files to build the project:
FROM node:14.15.0-alpine

WORKDIR &#x2F;app

- COPY . .
+ COPY package.json .
+ COPY package-lock.json .
RUN npm ci
+ COPY . .
RUN npm run build

EXPOSE 3000

USER node

CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
After we modified the Dockerfile by applying the diff above, we see that Docker does not leverage the cache at all because the steps are different. This always happens when we modify the layers and&#x2F;or their order.
However, after running this build for a first time, subsequent builds will be much faster as the npm ci step will use the cache unless we modify package.json or package-lock.json:
# create another file to see when Docker stops using the cache
$ touch another-file
# run the build again
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  249.3kB
Step 1&#x2F;10 : FROM node:14.15.0-alpine
 ---&gt; 9db54a688554
Step 2&#x2F;10 : WORKDIR &#x2F;app
 ---&gt; Using cache
 ---&gt; d5d4291dc699
Step 3&#x2F;10 : COPY package.json .
 ---&gt; Using cache
 ---&gt; 139b5a611c0b
Step 4&#x2F;10 : COPY package-lock.json .
 ---&gt; Using cache
 ---&gt; 5bc380de1397
Step 5&#x2F;10 : RUN npm ci
 ---&gt; Using cache
 ---&gt; dff6b2da4bdc
Step 6&#x2F;10 : COPY . .
 ---&gt; 08911c09b40f
Step 7&#x2F;10 : RUN npm run build
 ---&gt; Running in f5374a54d9ad

&gt; my-app@0.1.0 build &#x2F;app
&gt; next build
...
Decouple the build from the resulting built application
For this section to make more sense, we will create another Next.js app that uses some dev dependencies which are necessary only when building the app but not when running it in production.
$ npm create next-app --use-npm --example with-tailwindcss with-tailwindcss-app
Copy the Dockerfile and .dockerignore files created in the other example into with-tailwindcss-app. Build the Docker image and run it to make sure it‚Äôs working well before continuing:
$ docker build --tag with-tailwindcss-app .
$ docker run --rm -p 3000:3000 with-tailwindcss-app
As we can see in the package.json file, we have a few dependencies which are only ever going to be used when building our app. We won‚Äôt need them in the final Docker image. So let‚Äôs get rid of them!
We are going to leverage multi-stage Docker builds. They sound more complicated than they are :)
Here‚Äôs a multi-stage build Dockerfile: in the builder container, we install dependencies and build our app, and in the second stage, we copy relevant files from the builder to our final image and install only production dependencies.
FROM node:14.15.0-alpine as builder

WORKDIR &#x2F;app

COPY package.json .
COPY package-lock.json .
RUN npm ci
COPY . .
RUN npm run build

FROM node:14.15.0-alpine

WORKDIR &#x2F;app

COPY --from&#x3D;builder &#x2F;app&#x2F;package.json .
COPY --from&#x3D;builder &#x2F;app&#x2F;package-lock.json .
RUN npm ci --production
COPY --from&#x3D;builder &#x2F;app&#x2F;.next .next

EXPOSE 3000

USER node

CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
If our app also contained a Next.js config file and a public folder, we would also need to copy them from the builder stage:
...
COPY --from&#x3D;builder &#x2F;app&#x2F;.next .
+ COPY --from&#x3D;builder &#x2F;app&#x2F;next.config.js .
+ COPY --from&#x3D;builder &#x2F;app&#x2F;public public
...
Comparing the sizes, we see that we removed 39MB of dev dependencies, not bad.
without multi-stage build
REPOSITORY                    TAG                 IMAGE ID            CREATED              SIZE
with-tailwindcss-app          latest              88089e6f965d        18 minutes ago      269MB
with multi-stage build
REPOSITORY                    TAG                 IMAGE ID            CREATED              SIZE
with-tailwindcss-app          latest              ba7307736fb0        25 seconds ago       230MB
(Optional) Purge node_modules from unnecessary files
Finally, to make our Docker image the leanest, we will purge our node modules from all the files which were included by the library authors and aren‚Äôt directly useful to our Docker image. For example, documentation files and READMEs, config files for Prettier and such, etc.
Note that this is not without risk as we could be removing files that we actually need to run the application correctly (we had a file named test.js that contained important code and it was mercilessly removed by the tool, which broke the application üòÖ).
We will add another stage called production-deps to make our node modules go through a diet with node-prune (GitHub repo). The list of files and folders that node-prune will remove is largely inspired by Yarn‚Äôs default list (generated through yarn autoclean --init).
To install node-prune, we need curl to be a locally available executable, so we can either choose a base image that contains it out of the box, or we can add it to node:14.15.0-alpine. Because we won‚Äôt need anything else, we will choose the latter.
FROM node:14.15.0-alpine as builder

WORKDIR &#x2F;app

COPY package.json .
COPY package-lock.json .
RUN npm ci
COPY . .
RUN npm run build

+ FROM node:14.15.0-alpine as production-deps

+ WORKDIR &#x2F;app

COPY --from&#x3D;builder &#x2F;app&#x2F;package.json .
COPY --from&#x3D;builder &#x2F;app&#x2F;package-lock.json .
RUN npm ci --production
+ # Add curl
+ RUN apk --no-cache add curl
+ # Install node-prune https:&#x2F;&#x2F;github.com&#x2F;tj&#x2F;node-prune
+ RUN curl -sf https:&#x2F;&#x2F;gobinaries.com&#x2F;tj&#x2F;node-prune | sh
+ RUN node-prune &#x2F;app

FROM node:14.15.0-alpine

WORKDIR &#x2F;app

+ COPY --from&#x3D;production-deps &#x2F;app&#x2F;package.json .
+ COPY --from&#x3D;production-deps &#x2F;app&#x2F;package-lock.json .
+ COPY --from&#x3D;production-deps &#x2F;app&#x2F;node_modules node_modules

COPY --from&#x3D;builder &#x2F;app&#x2F;.next .next

EXPOSE 3000

USER node

CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
Try it by building the image once more.
When node-prune ran, it printed out in the console that it removed 12MB:
...
Step 15&#x2F;24 : RUN node-prune &#x2F;app
 ---&gt; Running in 69e030ab8b70


         files total 14,269
       files removed 3,722
        size removed 12 MB
            duration 216ms
...
However, suprinsingly, a whopping 32MB were removed in comparison to our previous Dockerfile. (It seems node-prune‚Äôs tallying is not totally accurate when I tested locally as it removed 20.7 MB instead ‚Äî though it still doesn‚Äôt explain the other 11.3 MB ü§∑‚Äç‚ôÇÔ∏è)
$ docker image ls with-tailwindcss-app
REPOSITORY                    TAG                 IMAGE ID            CREATED              SIZE
with-tailwindcss-app          latest              c5e2081dba30        9 seconds ago        198MB
Let‚Äôs ensure our app is running well without the files node-prune removed and we can be on our merry way! üê≥ üéâ
Docker build checklist for JavaScript Devs
To summarise what we‚Äôve learnt so far, here‚Äôs a small checklist to review our own Docker build setups:
I have a comprehensive .dockerignore file
I use an appropriate base image
I decoupled the dependency installation step to improve caching
I decoupled the resulting built application from the build step
I purged the node_modules from unnecessary files
Time to flex! üí™ Show me your before and after Docker image sizes in the comments below!*
#### [TypeScript Tidbit: How to Overload an Imported Function](https:&#x2F;&#x2F;www.robincussol.com&#x2F;typescript-tidbit-how-to-overload-an-imported-function&#x2F;) 
*There are times when the type definitions shipped on DefinitelyTyped are not enough and this results in making the TypeScript compiler unhappy. Oh noes! üò≠
Functions Overloading Be Like, Photo by Luis Villasmil) on Unsplash.



Overload an imported function in TypeScript
But fear not! It is possible to overload a function imported from a different module (which could even be a local module&#x2F;file, not necessarily a node module) without ‚Äúpatching‚Äù the corresponding @types&#x2F;&lt;package&gt; type definitions.
import { someFunction } from &#39;module&#39;

&#x2F;&#x2F; the function overloading
declare module &#39;module&#39; {
  function someFunction() &#x2F;&#x2F; the overload you need
}

someFunction() &#x2F;&#x2F; with the overloaded version ‚úîÔ∏è
Example: overload Ramda‚Äôs compose function
A practical example is Ramda‚Äôs compose function. If you pass more than 7 functions to the function, you need to overload Ramda‚Äôs type definitions coming from @types&#x2F;ramda as the TypeScript compiler will report an error otherwise (TypeScript Playground Error Example).

DefinitelyTyped obviously cannot provide the type definitions for any number of arguments as compose accepts as many arguments as you want. So it‚Äôs up to you to inform the TypeScript compiler that this usage is actually okay. üòå
This can be done like in the example below (TypeScript Playground Working Example):
import * as R from &#39;ramda&#39;

&#x2F;&#x2F; overloading compose because &#x60;@types&#x2F;ramda&#x60; exposes types for up to 6 functions
declare module &#39;ramda&#39; {
  function compose&lt;V0, T1, T2, T3, T4, T5, T6, T7&gt;(
    fn6: (x: T6) &#x3D;&gt; T7,
    fn5: (x: T5) &#x3D;&gt; T6,
    fn4: (x: T4) &#x3D;&gt; T5,
    fn3: (x: T3) &#x3D;&gt; T4,
    fn2: (x: T2) &#x3D;&gt; T3,
    fn1: (x: T1) &#x3D;&gt; T2,
    fn0: (x0: V0) &#x3D;&gt; T1
  ): (x0: V0) &#x3D;&gt; T7
}

&#x2F;&#x2F; and now, we can use:
const someComplicatedResult &#x3D; R.compose&lt;V0, T1, T2, T3, T4, T5, T6, T7&gt;(
  fn6,
  fn5,
  fn4,
  fn3,
  fn2,
  fn1,
  fn0
)(&#39;üòÖ&#39;)
We can see from the screenshot below that the overload was correctly taken into consideration. üéâ

Caveat
I can imagine that if this is overused, things can become quickly intractable. So use it sparingly and always with a good reason why. Your future self will be happy to find an explanation in a comment above the overloading as it is kind of unusual. üòâ
I discovered this while refactoring @kiwicom&#x2F;splitster to TS (link to commit) and thought it might be useful to share. Hope it helped you!*
#### [Wax on, Wax off](https:&#x2F;&#x2F;www.robincussol.com&#x2F;wax-on-wax-off&#x2F;) 
*The reason I got into web development in the first place was the magical ‚ú® feeling you get when you see your code manifest in the browser.
In my current role at work, I don‚Äôt do much of that anymore. And I guess I kind of miss it. Especially the part when I am given a clearly defined outcome, with clear guidelines. Perks of being labelled a senior, I guess. üòú But I digress.
Since I started with React, a lot of things have happened in web development. At the moment, I‚Äôm especially interested in Svelte and TailwindCSS and after watching Rich Harris‚Äôs latest talk ‚ÄúFuturistic Web Development‚Äù, I needed an excuse to try Svelte ASAP.
Staying sharp with deliberate practice
To ensure my frontend skills don‚Äôt wither, I would like to spend dedicated time each week to practice on a set of frontend challenges and reflect on what I learnt from them.
Fortunately, I recently discovered FrontendMentor.io and this website offers quite the list of frontend challenges, ranging in difficulty and consistently with nice designs.
Improve your front-end coding skills by building real projects
Solve real-world HTML, CSS and JavaScript challenges whilst working to professional designs.
‚Äî FrontendMentor.io
And to practice with new frontend technologies, it‚Äôs good to find nice designs. But it‚Äôs even better when they come with a style guide and assets like pictures and icons. üòç
Here‚Äôs how it works:
You choose a challenge and download the files.
You attempt the challenge with the stack of your choice. Because the challenge files come with a style guide, the necessary pictures and icons, etc. it‚Äôs really easy to get started! (Unless you spend hours deciding which stack to use, of course üòÇ)
You upload it to GitHub and deploy your attempt on Vercel or Netlify.
Finally, you submit your solution through your challenges dashboard on the platform.
You can then get feedback on your submissions and provide reviews for other people‚Äôs submissions too, which I find really cool. I remember how difficult it was to get feedback when I was first learning web development.
Learnings
The last challenge I attempted looked pleasing on my eyes and I honestly did not expect I would learn so much from it. That makes me want to practice even more!
Check out the live deployment!


I encountered the following problems to complete the ‚ÄúSocial media dashboard with theme switcher‚Äù challenge:
setting up Svelte with TailwindCSS (thank you Swyx and Chris Dhanaraj)
implementing a toggle component from scratch
without accessibility in mind (where I started: W3Schools üòÖ)
with accessibility in mind (where I ended up: Smashing Magazine, though I‚Äôm not sure how to test if my current solution is the most accessible)
implementing a theme switcher in Svelte (inspiration from this Svelte REPL)
adding a border with a gradient to a block element (this requires using a CSS trick from nowhere else but CSS Tricks of course)
pulling my hair for not realising that you need the group class for group-hover: modifiers to apply in the children with Tailwind (thank you Estevan Maito)
how to extract the imported Svelte components‚Äô props‚Äô TypeScript types (that‚Äôs a mouthful!), instead of exporting and importing the types directly (TL;DR: use $props_def from the component)
&lt;script lang&#x3D;&quot;ts&quot;&gt;
  import MyComponent from &#39;.&#x2F;MyComponent.svelte&#39;;

  const data: MyComponent[&#39;$props_def&#39;][&#39;data&#39;] &#x3D; ...
&lt;&#x2F;script&gt;

&lt;MyComponent {data} &#x2F;&gt;

...
deploying a ‚Äúmonorepo‚Äù on Vercel without redeploying all the folders all the time by specifying the ‚ÄúIgnored Build Step‚Äù with something like git diff --quiet HEAD^ HEAD -- subfolder-in-monorepo to only rebuild the site if changes were made in subfolder-in-monorepo.
Here‚Äôs the GitHub repository where I will learn in public and add future challenges I will attempt. (Though I might need to rename this repository in the future as I just found this really nice list of project ideas to build with other platforms than FrontendMentor.io üòâ)
Let me know in the comments what your current deliberate practice is!*
#### [A Successful Side-Project: Lessons from Swyx](https:&#x2F;&#x2F;www.robincussol.com&#x2F;a-successful-side-project-lessons-from-swyx&#x2F;) 
*If you are on Twitter, chances are you came across this tweet by Daniel Vassallo
If you‚Äôre tempted by this, my advice to first-time creators is to start with a very small product: Something you can finish in 2 weeks and charge #### [Build Standalone Expo .apk and .ipa with Turtle CLI [deprecated]](https:&#x2F;&#x2F;www.robincussol.com&#x2F;build-standalone-expo-apk-ipa-with-turtle-cli&#x2F;) 
*This article was updated on February 7, 2023. NOTE: As of Expo SDK 47, the following method does not work any more. With the release of EAS‚Ä¶*
#### [Optimize your img tags with Eleventy Image and WebC](https:&#x2F;&#x2F;www.robincussol.com&#x2F;optimize-your-img-tags-with-eleventy-image-and-webc&#x2F;) 
*I am very excited about WebC and couldn‚Äôt wait to try out the corresponding Eleventy plugin. The first use-case I had in mind was to use‚Ä¶*
#### [Year in Review: 2021](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2021&#x2F;) 
*We‚Äôre already at the start of February 2022, but who says retrospectives need to be done on January 1st?! A lot of things happened in 202‚Ä¶*
#### [Python Dependencies for JavaScript Developers](https:&#x2F;&#x2F;www.robincussol.com&#x2F;python-dependencies-for-javascript-developers&#x2F;) 
*Recently, I needed to update an old Python codebase which had not been touched in 3 years! Of course, the dependencies were so outdated that‚Ä¶*
#### [How to Download a Brain with Pair Documenting](https:&#x2F;&#x2F;www.robincussol.com&#x2F;download-a-brain-with-pair-documenting&#x2F;) 
*When people leave the company, a lot of specific and ad hoc knowledge goes away with them. Unless there is already a strong documentation‚Ä¶*
#### [Year in Review: 2020](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2020&#x2F;) 
*2020, what a ride! I cannot believe 2020 has already finally come to an end: with the lockdowns and quarantines, time simultaneously flew by‚Ä¶*
#### [Docker for JavaScript Devs: How to Containerise Node.js Apps Efficiently](https:&#x2F;&#x2F;www.robincussol.com&#x2F;docker-for-js-devs-how-to-containerise-nodejs-apps-efficiently&#x2F;) 
*Docker is a really cool technology to have applications run the in the same, predictable context, ensuring the ‚Äúbut it works on my machine‚Ä¶*
#### [TypeScript Tidbit: How to Overload an Imported Function](https:&#x2F;&#x2F;www.robincussol.com&#x2F;typescript-tidbit-how-to-overload-an-imported-function&#x2F;) 
*There are times when the type definitions shipped on DefinitelyTyped are not enough and this results in making the TypeScript compiler‚Ä¶*
#### [Wax on, Wax off](https:&#x2F;&#x2F;www.robincussol.com&#x2F;wax-on-wax-off&#x2F;) 
*The reason I got into web development in the first place was the magical ‚ú® feeling you get when you see your code manifest in the browser‚Ä¶*
#### [A Successful Side-Project: Lessons from Swyx](https:&#x2F;&#x2F;www.robincussol.com&#x2F;a-successful-side-project-lessons-from-swyx&#x2F;) 
*If you are on Twitter, chances are you came across this tweet by Daniel Vassallo and it now seems everyone is writing a book! üòÑ Shawn Wang‚Ä¶*0 for it. The experience of getting paid for something you created, directly by consumers, will change you forever. https:&#x2F;&#x2F;t.co&#x2F;UbUD9ch4xQ
‚Äî Daniel Vassallo (@dvassallo) April 10, 2020
 
and it now seems everyone is writing a book! üòÑ
Shawn Wang took this advice and decided to go forth with his Coding Career Handbook (for which I‚Äôm grateful! It‚Äôs such a great book!). He shares his lessons and regrets in this talk at js.la üìΩÔ∏è, and here are my notes for my future self when I want to ship a side project (for money or not).
The How
There are 4 aspects:
Pre-selling
Delivering
Launching
Keeping going
Pre-selling - or your own Kickstarter
On the first day of this endeavour, take the time to find a topic, a name and put up a landing page with good marketing copy.
Pre-sell to your friends and close network: they are more likely to ask you about the state of the project and you would hate to disappoint. What‚Äôs more, you‚Äôve got their money which you would awkwardly need to return otherwise.
This is probably a good moment to decide which platform(s) you want to use to support the sale of your book. Gumroad and Podia seem to be fairly big players in that space.
If it is your first side project that you would like to ship for money, don‚Äôt fret too much over the pricing strategy; it is more of a distraction from writing and completing the project. Sticking to Daniel Vassallo‚Äôs recommendation of #### [Build Standalone Expo .apk and .ipa with Turtle CLI [deprecated]](https:&#x2F;&#x2F;www.robincussol.com&#x2F;build-standalone-expo-apk-ipa-with-turtle-cli&#x2F;) 
*This article was updated on February 7, 2023. NOTE: As of Expo SDK 47, the following method does not work any more. With the release of EAS‚Ä¶*
#### [Optimize your img tags with Eleventy Image and WebC](https:&#x2F;&#x2F;www.robincussol.com&#x2F;optimize-your-img-tags-with-eleventy-image-and-webc&#x2F;) 
*I am very excited about WebC and couldn‚Äôt wait to try out the corresponding Eleventy plugin. The first use-case I had in mind was to use‚Ä¶*
#### [Year in Review: 2021](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2021&#x2F;) 
*We‚Äôre already at the start of February 2022, but who says retrospectives need to be done on January 1st?! A lot of things happened in 202‚Ä¶*
#### [Python Dependencies for JavaScript Developers](https:&#x2F;&#x2F;www.robincussol.com&#x2F;python-dependencies-for-javascript-developers&#x2F;) 
*Recently, I needed to update an old Python codebase which had not been touched in 3 years! Of course, the dependencies were so outdated that‚Ä¶*
#### [How to Download a Brain with Pair Documenting](https:&#x2F;&#x2F;www.robincussol.com&#x2F;download-a-brain-with-pair-documenting&#x2F;) 
*When people leave the company, a lot of specific and ad hoc knowledge goes away with them. Unless there is already a strong documentation‚Ä¶*
#### [Year in Review: 2020](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2020&#x2F;) 
*2020, what a ride! I cannot believe 2020 has already finally come to an end: with the lockdowns and quarantines, time simultaneously flew by‚Ä¶*
#### [Docker for JavaScript Devs: How to Containerise Node.js Apps Efficiently](https:&#x2F;&#x2F;www.robincussol.com&#x2F;docker-for-js-devs-how-to-containerise-nodejs-apps-efficiently&#x2F;) 
*Docker is a really cool technology to have applications run the in the same, predictable context, ensuring the ‚Äúbut it works on my machine‚Ä¶*
#### [TypeScript Tidbit: How to Overload an Imported Function](https:&#x2F;&#x2F;www.robincussol.com&#x2F;typescript-tidbit-how-to-overload-an-imported-function&#x2F;) 
*There are times when the type definitions shipped on DefinitelyTyped are not enough and this results in making the TypeScript compiler‚Ä¶*
#### [Wax on, Wax off](https:&#x2F;&#x2F;www.robincussol.com&#x2F;wax-on-wax-off&#x2F;) 
*The reason I got into web development in the first place was the magical ‚ú® feeling you get when you see your code manifest in the browser‚Ä¶*
#### [A Successful Side-Project: Lessons from Swyx](https:&#x2F;&#x2F;www.robincussol.com&#x2F;a-successful-side-project-lessons-from-swyx&#x2F;) 
*If you are on Twitter, chances are you came across this tweet by Daniel Vassallo and it now seems everyone is writing a book! üòÑ Shawn Wang‚Ä¶*0 is probably enough.
Delivering
Thanks to your pre-writing, e.g. gathering notes, writing blog posts, etc., you already have some amount of the material you would like to include in the finished product. If it‚Äôs 25%, that means you still need to actually write the other 75%.
If possible, you should continue your ‚Äúnormal‚Äù activities, like shipping blog posts about other topics, appearing on podcasts, etc.
As you are writing, document your journey and give away one or two chapters for free as teasers. They‚Äôre a showcase for what you‚Äôre producing and could lead to podcast interviews for further exposure.
I was sharing my personal journey, lessons and milestones.
The best marketing is no marketing. No one wants to be sold anything.
‚Äî Alex West, in Two and a half years of building products
Daniel Vassallo‚Äôs advice to time box the project to 2 weeks is a very important idea: it is so easy to fall prey to scope creep by adding more and more topics to cover, especially when you are knowledgeable and excited about it! But this may well mean that you will never actually ship it. So harness your enthusiasm to provide an advantage.
Of course, you have the goal to ship that product, but what parts of your day actively contribute to that goal? If you‚Äôd like to get anything done, adopting a system to support your goals will go a long way.

Systems &gt; Goals, Source: https:&#x2F;&#x2F;jamesclear.com&#x2F;goals-systems
Launching
All your efforts are coming to an end‚Ä¶ or so you thought. Now is the time to launch your product! This phase requires an entirely different skill set so it‚Äôs good to have practice.
Having a great landing page is a must. A good resource on the subject is Rob Hope‚Äôs book Landing Page Hot Tips, and you can read Shawn‚Äôs review of it too.
Make sure to know the rules of the platforms you‚Äôre using to launch: Shawn‚Äôs Show HN post was doing very well and directing a lot of traffic to his landing page, but it was sadly taken down as no free sample of the book was available there (despite the blog posts).
If people leave out a negative comment, take this as an opportunity to turn their opinions around.
Shawn recommends watching Adam Wathan‚Äôs talk Nailing Your First Launch.
Keeping going
This is still not the end. What comes tomorrow? Next week, next month, next year?
You can ‚Äúlaunch‚Äù your product multiple times.
You can start a community around your book or product.
One of the biggest mistakes I see founders make is abandoning what already works and trying to take on a bigger challenge before they‚Äôre making enough money to develop products full-time.
Instead, focus on replicating the same type of product with another angle or in another market, maybe more than once.
‚Äî Rob Walling, in The Stairstep Approach to Bootstrapping
The Why
If you want to go from employee to entrepreneur, it is good to learn without too much risk how to do ‚Äúbusiness‚Äù without all the supports from other departments. For example, as a Software Engineer, you would not be focusing much on attracting leads for your company; there would be a design team and product managers making decisions about the product, etc.
When you‚Äôre launching a product on your own, you need to perform in all the roles and learn as you go. Especially when it comes to side-projects, developing a system to support your goals, and improving your discipline and focus.
You will get acquainted with the valley of despair and go through the emotional journey it describes; this is inevitable, and maybe even necessary, to create anything great.

 Source: https:&#x2F;&#x2F;john.do&#x2F;emotional-journey-creating&#x2F; 
This can be daunting but it will most likely be a rewarding experience, at least in terms of skills acquisition if not financially.
Make sure to define in advance your idea of success for this project: is it for the learning experience and to have a published book to your name, is it solely about making X amount of money?
Resources
üìΩÔ∏è Shawn‚Äôs talk, Lessons and Regrets From Shipping My $50000 Coronavirus Side Project
üìΩÔ∏è Adam Wathan‚Äôs talk, Nailing Your First Launch
üìì Rob Walling, The Stairstep Approach to Bootstrapping
üìì James Clear, Forget About Setting Goals. Focus on This Instead
üìì Alex West, Two and a half years of building products*0 for it. The experience of getting paid for something you created, directly by consumers, will change you forever. https:&#x2F;&#x2F;t.co&#x2F;UbUD9ch4xQ
‚Äî Daniel Vassallo (@dvassallo) April 10, 2020
 
and it now seems everyone is writing a book! üòÑ
Shawn Wang took this advice and decided to go forth with his Coding Career Handbook (for which I‚Äôm grateful! It‚Äôs such a great book!). He shares his lessons and regrets in this talk at js.la üìΩÔ∏è, and here are my notes for my future self when I want to ship a side project (for money or not).
The How
There are 4 aspects:
Pre-selling
Delivering
Launching
Keeping going
Pre-selling - or your own Kickstarter
On the first day of this endeavour, take the time to find a topic, a name and put up a landing page with good marketing copy.
Pre-sell to your friends and close network: they are more likely to ask you about the state of the project and you would hate to disappoint. What‚Äôs more, you‚Äôve got their money which you would awkwardly need to return otherwise.
This is probably a good moment to decide which platform(s) you want to use to support the sale of your book. Gumroad and Podia seem to be fairly big players in that space.
If it is your first side project that you would like to ship for money, don‚Äôt fret too much over the pricing strategy; it is more of a distraction from writing and completing the project. Sticking to Daniel Vassallo‚Äôs recommendation of #### [Build Standalone Expo .apk and .ipa with Turtle CLI [deprecated]](https:&#x2F;&#x2F;www.robincussol.com&#x2F;build-standalone-expo-apk-ipa-with-turtle-cli&#x2F;) 
*This article was updated on February 7, 2023.
NOTE: As of Expo SDK 47, the following method does not work any more.
With the release of EAS builds, it is necessary to have Internet access to create standalone Expo apps locally; see Running builds on your own infrastructure on Expo docs.
You can still use the React Native way to build applications locally after generating necessary files with expo prebuild (see this GitHub comment on expo&#x2F;eas-cli).
This post will not receive further updates.
A great way to start writing React Native applications is to use Expo. You don‚Äôt even need to setup a development environment to get started thanks to Snack, an online React Native application editor. Your application is public by default. Sharing has never been that easy.

Brown turtle swimming underwater, Photo by Wexor Tmg on Unsplash
However, you would like to share an application exclusively with some people, not through an app store or any public channel. One possibility is to share the built application file, e.g. an .apk file for Android and an .ipa file for iOS.
Expo is so great a service (oh, and did I mention free?) that they offer you to publish your app on their servers and if you wanted to build these .apk and .ipa files, you could do so on their servers.
The flow looks like:
$ expo publish
$ expo build:&lt;PLATFORM&gt;
and you obtain a nice URL to the artifact created for you when the build finishes.
But, again, this is public. On a server you don‚Äôt control. (Although, if you made the same mistake as I did, a ticket to their support can delete any files you had wished to keep private. ü•á)
Luckily for you, Expo provide the tools they are using on their servers for free (did I mention they‚Äôre great!?). The build process relies on a CLI tool called turtle-cli. It is open-source and available on GitHub.
Let us go through an example of how to create your application file without resorting to Expo servers. That means you can keep an application private and also build your application while being offline.
The following instructions assume you have bash and Node.js available. In my experience, using the current LTS version of Node.js (version 16.13.2) works best.
Caveat: I could not complete the iOS instructions to the end since I do not have an Apple Developer paid account.
We will go through the following steps:
1. Turtle CLI
2. Create a dummy application
3. Publish Expo app on local server
4. Create APK file ‚Äì Android

4.1. Prerequisites
4.2. Create Keystore
4.3. Build APK
5. Create IPA file ‚Äì iOS

5.1. Prerequisites
5.2. Create Signing keys
5.3. Build IPA
6. Distribute and install

6.1. on Android
6.2. on iOS
Resources
A condensed version of these steps without much explanation or context is available on the accompanying GitHub repository.
1. Turtle CLI
To install Turtle CLI, run
$ npm install -g turtle-cli
This will make command turtle globally available on your system. To verify it was correctly installed, let‚Äôs print the version:
$ turtle -V
0.24.3
2. Create a dummy application
Let‚Äôs create a dummy application using Expo CLI. In your terminal, run
$ npx expo init ExampleApplication
It will ask you a few questions:
# Expo version 5.0.3
npx expo init ExampleApplication
? Choose a template: ‚Ä∫ - Use arrow-keys. Return to submit.
    ----- Managed workflow -----
‚ùØ   blank               a minimal app as clean as an empty canvas
    blank (TypeScript)  same as blank but with TypeScript configuration
    tabs (TypeScript)   several example screens and tabs using react-navigation and TypeScript
    ----- Bare workflow -----
    minimal             bare and minimal, just the essentials to get you started
The blank template is enough for us.
If you have yarn installed, Expo will use it by default to install dependencies. You can use the --npm flag in the init command if you‚Äôd prefer to use npm instead.
Once it‚Äôs done setting up your project, you should see the following output in the terminal:
‚úÖ Your project is ready!

To run your project, navigate to the directory and run one of the following yarn commands.

- cd ExampleApplication
- yarn start
Run the commands and let‚Äôs verify the generated boilerplate works in our emulators:


To finish setting up the dummy application, you need to configure the app.json file because some configuration keys must be specified to build a standalone app.
If you would like to know more about these standalone app specific configurations, check Expo‚Äôs documentation for iOS and for Android.
For this tutorial, it is only necessary to specify the keys &quot;bundleIdentifier&quot; under &quot;ios&quot;, and &quot;package&quot; under &quot;android&quot; in your app.json file:
...
    &quot;ios&quot;: {
      ...
      &quot;bundleIdentifier&quot;: &quot;com.example.exampleApplication&quot;,
      ...
    },
    &quot;android&quot;: {
      ...
      &quot;package&quot;: &quot;com.example.example_application&quot;,
      ...
    }
...
3. Publish Expo app on local server
Expo has this notion of app publishing: it allows you to share a link or QR code to Expo‚Äôs website and anyone can run your app through the Expo app on their devices.
Having your app published is also necessary for over-the-air (OTA) updates, allowing seamless updates to your application, and to publish your application (i.e. building your application files on Expo servers).
You would typically run
$ expo login -u $EXPO_USERNAME -p $EXPO_PASSWORD
$ expo publish
and your app would then be available at https:&#x2F;&#x2F;expo.dev&#x2F;&lt;EXPO_USERNAME&gt;&#x2F;&lt;APP_NAME&gt;.
To have your Expo app ‚Äúpublished‚Äù on your local server (and avoid public publishing on Expo servers), you will use a different command:
$ expo export --dev --public-url &lt;your-url-here&gt;
The --dev flag is necessary because you will use a non-https server to publish your Expo app. Note that this prevents you from using OTA updates.
Your server does not need to be running for this step, but you do need to know which local URL you are going to use in advance. This tuorial assumes you will run a local server at http:&#x2F;&#x2F;127.0.0.1:8000.
You can now export the app:
$ expo export --dev --public-url http:&#x2F;&#x2F;127.0.0.1:8000
...
Export was successful. Your exported files can be found in dist
This command will create a dist directory containing the iOS and Android JavaScript bundles and the different assets you are using.
dist
‚îú‚îÄ‚îÄ android-index.json
‚îú‚îÄ‚îÄ assets
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ 13685372945d816a2b474fc082fd9aaa
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ 140c53a7643ea949007aa9a282153849
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ ...
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ fdbedb7e67aa7c0ecad83d9c2fa4dfba
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ fdc01171a7a7ea76b187afcd162dee7d
‚îú‚îÄ‚îÄ bundles
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ android-a9defc54fb2ffdb7e6fdaf5b8d0be751.js
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ ios-a29c3e4ac97a2abdc5208fd4f06e7708.js
‚îî‚îÄ‚îÄ ios-index.json
You can now serve the dist directory on your web server, e.g.
$ npx http-server -p 8000 dist
Note: if for some reason you need to re-export your application (because you modified your app.json file since the last export, for instance), you must first remove the dist directory:
# assuming you are at the root of the project
$ rm -rf dist
$ expo export --dev --public-url http:&#x2F;&#x2F;127.0.0.1:8000
4. Create APK file ‚Äì Android
First, verify that your local server is running. For example, you should see a similar output:
$ curl http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;android-index.json
{&quot;name&quot;:&quot;ExampleApplication&quot;,&quot;slug&quot;:&quot;ExampleApplication&quot;,&quot;version&quot;:&quot;1.0.0&quot;,&quot;orientation&quot;:&quot;portrait&quot;,&quot;icon&quot;:&quot;.&#x2F;assets&#x2F;icon.png&quot;,&quot;splash&quot;:{&quot;image&quot;:&quot;.&#x2F;assets&#x2F;splash.png&quot;,&quot;resizeMode&quot;:&quot;contain&quot;,&quot;backgroundColor&quot;:&quot;#ffffff&quot;,&quot;imageUrl&quot;:&quot;http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;assets&#x2F;201a91bd1740bb1d6a1dbad049310724&quot;}...
4.1. Prerequisites
For Turtle CLI to work correctly to create an .apk file for Android, you need to make sure the following dependency is installed: Java Development Kit (version 8).
If you know which Expo SDK version you are going to use, you can run
$ turtle setup:android --sdk-version &lt;SDK-VERSION&gt;
This will take some time:
$ turtle setup:android --sdk-version 44.0.5
Jan 20 20:22:45 turtle[61127] INFO:  Downloading Android SDK
  platform: &quot;android&quot;
  buildPhase: &quot;setting up environment&quot;
downloading [&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;] 98% 0.2s
...
Jan 20 20:26:56 turtle[61127] INFO:  shell app for SDK 44.0.5 doesn&#39;t exist, downloading...
  platform: &quot;android&quot;
  buildPhase: &quot;setting up environment&quot;
downloading [&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; ] 95% 0.5sJan 20 20:27:08 turtle[61127] INFO:  shell app has been downloaded
  platform: &quot;android&quot;
  buildPhase: &quot;setting up environment&quot;
...
Jan 20 20:29:51 turtle[61127] INFO:  dependencies installed!
  platform: &quot;android&quot;
  buildPhase: &quot;setting up environment&quot;
Jan 20 20:29:51 turtle[61127] INFO:  it&#39;s all set!
  platform: &quot;android&quot;
  buildPhase: &quot;setting up environment&quot;
In the meantime, you can move on to the next section.
4.2. Create Keystore
Just like any other Android app, this app must be signed with some security certificates. In Android-land, as far as I understand, it‚Äôs called a keystore. The instructions to create such a keystore file are available on the Android Developers documentation.
Basically, just create a dummy Android project with Android Studio, and then go to Build &gt; Generate Signed Bundle &#x2F; APK.... Choose APK and press Next. The UI will ask you which app you want to sign, and your dummy app should be pre-selected. On the same screen, press on the button Create new...; just fill the form and you‚Äôre good to go.
Alternatively, if you have keytool CLI utility available on your system (you can check that by trying keytool --help in your terminal), you can generate a keystore file with the following command
$ keytool -genkeypair -v -keystore keystore.jks -alias keyalias -keyalg RSA -keysize 2048 -validity 9125
Enter keystore password:
Re-enter new password:
What is your first and last name?
  [Unknown]:
What is the name of your organizational unit?
  [Unknown]:
What is the name of your organization?
  [Unknown]:
What is the name of your City or Locality?
  [Unknown]:
What is the name of your State or Province?
  [Unknown]:
What is the two-letter country code for this unit?
  [Unknown]:
Is CN&#x3D;Unknown, OU&#x3D;Unknown, O&#x3D;Unknown, L&#x3D;Unknown, ST&#x3D;Unknown, C&#x3D;Unknown correct?
  [no]:  yes

Generating 2,048 bit RSA key pair and self-signed certificate (SHA256withRSA) with a validity of 9,125 days
	for: CN&#x3D;Unknown, OU&#x3D;Unknown, O&#x3D;Unknown, L&#x3D;Unknown, ST&#x3D;Unknown, C&#x3D;Unknown
Enter key password for &lt;keyalias&gt;
	(RETURN if same as keystore password):
Re-enter new password:
[Storing keystore.jks]

Warning:
The JKS keystore uses a proprietary format. It is recommended to migrate to PKCS12 which is an industry standard format using &quot;keytool -importkeystore -srckeystore keystore.jks -destkeystore keystore.jks -deststoretype pkcs12&quot;.
As a TL;DR, you can just download a dummy certificate on the accompanying repository under should-be-private&#x2F;keystore.jks, for testing purposes only. The keystore file is hugely important if you ever plan to submit your app to Google Play store: it‚Äôs the only way to assert you‚Äôre the rightful owner to provide new updates to your app.
File: keystore.jks
keystorepassword
keyalias
keypassword
4.3. Build APK
Make sure that you are serving the dist directory on http:&#x2F;&#x2F;127.0.0.1:8000 as explained above in Run a local server. Assuming you are using bash as your shell, from the root of your project, run:
EXPO_ANDROID_KEYSTORE_PASSWORD&#x3D;&quot;keystorepassword&quot; \
EXPO_ANDROID_KEY_PASSWORD&#x3D;&quot;keypassword&quot; \
turtle build:android \
  --type apk \
  --keystore-path .&#x2F;should-be-private&#x2F;keystore.jks \
  --keystore-alias &quot;keyalias&quot; \
  --allow-non-https-public-url \
  --public-url http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;android-index.json
Note that you need the flag --public-url to point to http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;android-index.json. In addition, it is also necessary to use the --type apk flag to produce an APK file since version 0.8.0 of turtle-cli.
The build may take some time:
Jan 20 20:38:17 turtle[61719] INFO:  Using manifest: {
  &quot;name&quot;: &quot;ExampleApplication&quot;,
  &quot;slug&quot;: &quot;ExampleApplication&quot;,
  &quot;version&quot;: &quot;1.0.0&quot;,
  &quot;orientation&quot;: &quot;portrait&quot;,
  &quot;icon&quot;: &quot;.&#x2F;assets&#x2F;icon.png&quot;,
...
Jan 20 20:38:51 turtle[61719] INFO:  Starting a Gradle Daemon (subsequent builds will be faster)
  platform: &quot;android&quot;
  buildPhase: &quot;running gradle&quot;
  source: &quot;stdout&quot;
...
Once it finishes, you should see this output in your terminal:
Jan 20 20:43:19 turtle[61719] INFO:  copied build to ~&#x2F;expo-apps&#x2F;@anonymous__ExampleApplication-7f15208a56304617a200538cacd2e50e-signed.apk
  platform: &quot;android&quot;
  buildPhase: &quot;copying build artifact&quot;
This message gives you the location of your built .apk file. You can now move on to the Distribute and install section below if you are not interested in creating an .ipa file for iOS.
Note: if the build fails because of some Gradle error, like Could not resolve com.theartofdev.edmodo:android-image-cropper:2.8.0, make sure to open Android Studio and update the Android SDK and SDK Build-Tools. This should fix it.
5. Create IPA file ‚Äì iOS
First, verify that your local server is running, e.g.
$ curl http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;ios-index.json
{&quot;name&quot;:&quot;ExampleApplication&quot;,&quot;slug&quot;:&quot;ExampleApplication&quot;,&quot;version&quot;:&quot;1.0.0&quot;,&quot;orientation&quot;:&quot;portrait&quot;,&quot;icon&quot;:&quot;.&#x2F;assets&#x2F;icon.png&quot;,&quot;splash&quot;:{&quot;image&quot;:&quot;.&#x2F;assets&#x2F;splash.png&quot;,&quot;resizeMode&quot;:&quot;contain&quot;,&quot;backgroundColor&quot;:&quot;#ffffff&quot;,&quot;imageUrl&quot;:&quot;http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;assets&#x2F;201a91bd1740bb1d6a1dbad049310724&quot;...
5.1. Prerequisites
For Turtle CLI to work correctly to create an .ipa file for iOS, you need to make sure your system is macOS and that the following dependencies are installed:
Xcode (version 13.2.1 or newer)
fastlane
Note: make sure that you have run Xcode at least once and that you have agreed to the license agreements.
For more details, see Expo‚Äôs documentation.
If you know which Expo SDK version you are going to use, you can run
$ turtle setup:ios --sdk-version &lt;SDK-VERSION&gt;
If it errors out, saying that you don‚Äôt have the right version of fastlane, try re-installing fastlane (guide). The version used in this article is fastlane 2.200.0.
This will take some time:
$ turtle setup:ios --sdk-version 44.0.5
Jan 20 21:18:03 turtle[48488] INFO:  shell app for SDK 44.0.5 doesn&#39;t exist, downloading...
  platform: &quot;ios&quot;
  buildPhase: &quot;setting up environment&quot;
downloading [                    ] 1% 8514.8s
...
...
Jan 20 21:24:58 turtle[48488] INFO:  it&#39;s all set!
  platform: &quot;ios&quot;
  buildPhase: &quot;setting up environment&quot;
In the meantime, you can move on to the next section.
5.2. Create Signing keys
This assumes you have an Apple Developer Account, which is a paid account.
To create your distribution certificate file, or .p12 file, you can follow this guide.
You will also need your Apple Team ID and a Provisioning Profile that you can generate through Xcode as well. This other guide covers in greater lengths what all these cerficates are for and how to obtain them.

Note that the provisioning profile expires in 6 days in my case, since I do not have an Apple Developer paid account.
Sadly, it is not possible to share example files.
5.3. Build IPA
Make sure that you are serving the dist directory on http:&#x2F;&#x2F;127.0.0.1:8000 as explained Run a local server. Assuming you are using bash as your shell, from the root of your project, run:
EXPO_IOS_DIST_P12_PASSWORD&#x3D;&quot;&lt;PASSWORD HERE&gt;&quot; \
turtle build:ios \
  --team-id YOUR_TEAM_ID \
  --dist-p12-path &#x2F;path&#x2F;to&#x2F;your&#x2F;dist&#x2F;cert.p12 \
  --provisioning-profile-path &#x2F;path&#x2F;to&#x2F;your&#x2F;provisioning&#x2F;profile.mobileprovision \
  --allow-non-https-public-url \
  --public-url http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;ios-index.json
Note that you need the flag --public-url to point to http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;ios-index.json.
Once the build finishes successfully, you should get the path to your .ipa file.
6. Distribute and install
6.1. on Android
Take your .apk and share it through some Google Drive link or other medium of your choice.
If you download this .apk file through an Android device, it should offer you to install the application on the device.
Trick: if the URL is really not friendly to type, and for whatever reason you have to type it manually, use a QR Code generator (e.g. http:&#x2F;&#x2F;www.barcode-generator.org&#x2F;) and your device‚Äôs camera to simplify your life!
Alternatively, if you connect an Android device to your computer, you should be able to run:
$ adb devices
emulator-5554	device
to list all your connected Android devices and emulators. (In my case, only the emulator is ‚Äúconnected‚Äù.)
It is then possible to install the .apk file by running:
$ adb -s emulator-5554 install ~&#x2F;expo-apps&#x2F;@anonymous__ExampleApplication-7f15208a56304617a200538cacd2e50e-signed.apk
Performing Streamed Install
Success

6.2. on iOS
Caveat: I could not fully test this section, so my apologies if this does not work as intended.
Since you should have Xcode, the most promising solution is in this guide. It also mentions other ways to install the .ipa file.
That‚Äôs it for now, thank you for reading this far. You will find below the resources mentioned in this article.
If you have any questions or comments, please drop me a line on Twitter. I shall reply as soon as possible.
Stay tuned for more.
Resources
Expo: https:&#x2F;&#x2F;expo.dev
Turtle CLI: https:&#x2F;&#x2F;github.com&#x2F;expo&#x2F;turtle#readme
Expo‚Äôs guide to Building Standalone apps: https:&#x2F;&#x2F;docs.expo.dev&#x2F;classic&#x2F;building-standalone-apps&#x2F;
Configuring app.json: https:&#x2F;&#x2F;docs.expo.dev&#x2F;workflow&#x2F;configuration&#x2F;
Expo docs to configure CI with Turtle CLI: https:&#x2F;&#x2F;docs.expo.dev&#x2F;classic&#x2F;turtle-cli&#x2F;
Expo docs to host application on your own servers: https:&#x2F;&#x2F;docs.expo.dev&#x2F;distribution&#x2F;hosting-your-app&#x2F;
How to create a keystore for Android: https:&#x2F;&#x2F;developer.android.com&#x2F;studio&#x2F;publish&#x2F;app-signing#generate-key
Supporting GitHub repository: https:&#x2F;&#x2F;github.com&#x2F;RobinCsl&#x2F;build-standalone-expo-app&#x2F;*
#### [Optimize your img tags with Eleventy Image and WebC](https:&#x2F;&#x2F;www.robincussol.com&#x2F;optimize-your-img-tags-with-eleventy-image-and-webc&#x2F;) 
*I am very excited about WebC and couldn‚Äôt wait to try out the corresponding Eleventy plugin.
The first use-case I had in mind was to use Eleventy Image for the native HTML img tag, that can be generated from Markdown and without shortcode. I had done this before, for my unpublished blog rewrite that‚Äôs been waiting to be released for ever now, through hooking up Eleventy Image into a markdown-it plugin. It wasn‚Äôt pretty as markdown-it plugins are pretty alien to me.
But now, this can be done ‚Äúnatively‚Äù, √†-la-Cloudflare Workers for your native HTML elements!
UPDATE (04&#x2F;11&#x2F;2022): After sharing this article on Twitter, Zach Leatherman pointed out there should be an easier solution. It didn‚Äôt work as expected at first, which put me on a journey to fix the underlying issue in @11ty&#x2F;webc. I‚Äôm very pleased to share that my first contribution to the project was accepted and landed in v0.6.0. As a result, the content of the last section was updated to remove the dirty data file hack with _data&#x2F;Image.js: your image optimization logic can now truly live in a single file.
The documentation for WebC mentioned this use-case exactly, in the shape of this innocent puzzle:

‚ÄúFree idea: use the Eleventy Image plugin to return optimized markup‚Äù
So it should be easy, right?
Remember this lad?
I have discovered a truly remarkable proof of this theorem which this margin is too small to contain.
Pierre de Fermat, cca. 1637
No need to wait 3 centuries for the answer this time, because it was ultimately not so hard‚Ä¶ But I did struggle and wrestle with it for a few hours :D
Anyway, hope that can be useful to someone.
If you want to see the finished implementation, you can get it on GitHub: RobinCsl&#x2F;11ty-webc-img-demo.
Set up a WebC-powered Eleventy project
or take a shortcut by cloning this repo and going to the 01-initial folder.
Initialise the project
Let‚Äôs start with an empty folder and add a basic package.json file:
mkdir 11ty-webc-img
cd 11ty-webc-img
npm init -y
We need to install the latest canary release (2.0.0-canary.16 at the time of writing) of Eleventy as well as the WebC plugin:
 npm install @11ty&#x2F;eleventy@2.0.0-canary.16 @11ty&#x2F;eleventy-plugin-webc
Configure Eleventy
We will now configure Eleventy to use the WebC plugin by creating a .eleventy.js file with the following content:
const webc &#x3D; require(&quot;@11ty&#x2F;eleventy-plugin-webc&quot;);

module.exports &#x3D; function(eleventyConfig) {
	eleventyConfig.addPlugin(webc, {
		components: &quot;_includes&#x2F;webc&#x2F;*.webc&quot;
	});
}

In particular, components in the _includes&#x2F;webc folder will be available in the global scope, no need to import them explicitly!
Scaffold a minimal project
To finish our setup, we create a layout file and a simple WebC component which we will use in a basic page, to make sure our setup is working correctly.
We create the layout file under _includes&#x2F;layouts&#x2F;base.webc. It is a simple HTML template with the @html&#x3D;&quot;content&quot;  WebC directive set on the body tag. (See my-layout.webc in the docs)
&lt;!doctype html&gt;
&lt;html lang&#x3D;&quot;en&quot;&gt;
	&lt;head&gt;
		&lt;meta charset&#x3D;&quot;utf-8&quot;&gt;
		&lt;title&gt;Eleventy Images + WebC rocks!&lt;&#x2F;title&gt;
	&lt;&#x2F;head&gt;
	&lt;body @html&#x3D;&quot;content&quot;&gt;&lt;&#x2F;body&gt;
&lt;&#x2F;html&gt;
We now create a simple WebC component and write the following content, taken from the promising website 11ty.webc.fun, in _includes&#x2F;webc&#x2F;site-footer.webc :
&lt;footer&gt;
  &lt;p&gt;&amp;copy; 2022 Yours Truly.&lt;&#x2F;p&gt;
&lt;&#x2F;footer&gt;
Finally, we create our basic page at the root of the project in index.webc:
---
layout: layouts&#x2F;base.webc
---

Fun with WebC

&lt;site-footer&gt;&lt;&#x2F;site-footer&gt;
If all went according to plan, we should now be able to run
npx @11ty&#x2F;eleventy --serve
in the terminal and see the following output in our browser at http:&#x2F;&#x2F;localhost:8080:

Create an img.webc component
or check the code on GitHub in the 02-img folder if you want to see the code right away.
In this section, we will create our img.webc override for the native img HTML tag and use Eleventy Image within it.
As a starting point, we will use the example from the documentation from which the screenshot at the start of this post is taken. In a new file _includes&#x2F;webc&#x2F;img.webc, add the following:
&lt;script webc:type&#x3D;&quot;render&quot; webc:is&#x3D;&quot;template&quot;&gt;
function() {
	if(!this.alt) {
		throw new Error(&quot;[img.webc] the alt text is missing, no fun&quot;);
	}
	return &#x60;&lt;img src&#x3D;&quot;${this.src}&quot; alt&#x3D;&quot;${this.alt}&quot;&gt;&#x60;;
}
&lt;&#x2F;script&gt;
This essentially verifies at build-time that all your images have a non-empty alt text, neat!
Let‚Äôs add a ‚Äúbroken‚Äù image to our index page, in index.webc, to verify that this works correctly:
---
layout: layouts&#x2F;base.webc
---

Fun with WebC

&lt;img src&#x3D;&quot;https:&#x2F;&#x2F;images.unsplash.com&#x2F;photo-1627224286457-923944e5b159?auto&#x3D;format&amp;fit&#x3D;crop&amp;w&#x3D;387&amp;q&#x3D;80&quot;&gt;

&lt;site-footer&gt;&lt;&#x2F;site-footer&gt;
And indeed, running npx @11ty&#x2F;eleventy --serve yields an expected error:
$ npx @11ty&#x2F;eleventy --serve
[11ty] Problem writing Eleventy templates: (more in DEBUG output)
[11ty] 1. Having trouble rendering webc template .&#x2F;index.webc (via TemplateContentRenderError)
[11ty] 2. [img.webc] the alt text is missing, no fun (via Error)
Add an alt text (‚Äúpossum hanging from a palm leaf‚Äù should work) and try again. Oh no! Another error:
$ npx @11ty&#x2F;eleventy --serve  
[11ty] Problem writing Eleventy templates: (more in DEBUG output)
[11ty] 1. Having trouble rendering webc template .&#x2F;index.webc (via TemplateContentRenderError)
[11ty] 2. Circular dependency error: You cannot use &lt;img&gt; inside the definition for .&#x2F;_includes&#x2F;webc&#x2F;img.webc (via Error)
That makes sense, when you think about it! All our .webc files are processed by WebC, so if we return an img tag in a img.webc component, the compiler would work indefinitely to get to the bottom of it, because it‚Äôs turtles img all the way down!
Luckily for us, we can let WebC know when its job is done through the webc:raw attribute:
Use webc:raw to opt-out of WebC template processing for all child content of the current node. Notably, attributes on the current node will be processed.
Let‚Äôs fix it in _includes&#x2F;webc&#x2F;img.webc:
  &lt;script webc:type&#x3D;&quot;render&quot; webc:is&#x3D;&quot;template&quot;&gt;
  function() {
	  if(!this.alt) {
	  	throw new Error(&quot;[img.webc] the alt text is missing, no fun&quot;);
	  }
-	  return &#x60;&lt;img src&#x3D;&quot;${this.src}&quot; alt&#x3D;&quot;${this.alt}&quot;&gt;&#x60;;
+	  return &#x60;&lt;img webc:raw src&#x3D;&quot;${this.src}&quot; alt&#x3D;&quot;${this.alt}&quot;&gt;&#x60;;
  }
  &lt;&#x2F;script&gt;
It compiles now! üéâ
Here‚Äôs the expected output:

We have effectively augmented our img tag to verify at build time that alt text is present.
Let‚Äôs now add Eleventy Image to the party!
Optimize your HTML img with Eleventy Image
or check the code on GitHub in the 03-final folder if you want to see my solution.
Let‚Äôs first install Eleventy Image in our project:
npm install @11ty&#x2F;eleventy-img
We will more or less copy the example from the Eleventy Image docs in the Asynchronous Shortcode section, because our JavaScript render function can be async!
In the file _includes&#x2F;webc&#x2F;img.webc, let‚Äôs add the following:
  &lt;script webc:type&#x3D;&quot;render&quot; webc:is&#x3D;&quot;template&quot;&gt;
-   function() {
-      if(!this.alt) {
-          throw new Error(&quot;[img.webc] the alt text is missing, no fun&quot;);
-      }
-      return &#x60;&lt;img webc:raw src&#x3D;&quot;${this.src}&quot; alt&#x3D;&quot;${this.alt}&quot;&gt;&#x60;;
+    const Image &#x3D; require(&quot;@11ty&#x2F;eleventy-img&quot;);
+    module.exports &#x3D; async function() {
+      let metadata &#x3D; await Image(this.src, {
+        widths: [300],
+        formats: [&quot;avif&quot;, &quot;jpeg&quot;],
+        outputDir: &quot;_site&#x2F;img&#x2F;&quot;,
+      });

+      let imageAttributes &#x3D; {
+        alt: this.alt,
+        sizes: &quot;100vw&quot;,
+        loading: &quot;lazy&quot;,
+        decoding: &quot;async&quot;,
+      };

+      &#x2F;&#x2F; You bet we throw an error on missing alt in &#x60;imageAttributes&#x60; (alt&#x3D;&quot;&quot; works okay)
+      return Image.generateHTML(metadata, imageAttributes);
  }
  &lt;&#x2F;script&gt;

Note that we harcoded the value for  sizes in the imageAttributes object, and prepended both src and alt by this to wire things up correctly. We also instruct the Image plugin to output optimized images in our _site&#x2F;img&#x2F; folder directly for them to be available when using the following markup:
&lt;img alt&#x3D;&quot;a lovely image&quot; src&#x3D;&quot;&#x2F;img&#x2F;hash-width.jpeg&quot;&gt;
Let‚Äôs run npx @11ty&#x2F;eleventy --serve once more:
$  npx @11ty&#x2F;eleventy --serve
[11ty] Problem writing Eleventy templates: (more in DEBUG output)
[11ty] 1. Having trouble rendering webc template .&#x2F;index.webc (via TemplateContentRenderError)
[11ty] 2. Circular dependency error: You cannot use &lt;img&gt; inside the definition for .&#x2F;_includes&#x2F;webc&#x2F;img.webc (via Error)
That error sounds familiar, right?
We need to tell WebC to ignore img tags generated by Eleventy Image, and it‚Äôs as simple as adding &quot;webc:raw&quot;: true to the imageAttributes object:
  &lt;script webc:type&#x3D;&quot;render&quot; webc:is&#x3D;&quot;template&quot;&gt;
  const Image &#x3D; require(&quot;@11ty&#x2F;eleventy-img&quot;);
  module.exports &#x3D; async function() {
    let metadata &#x3D; await Image(this.src, {
      widths: [300],
      formats: [&quot;avif&quot;, &quot;jpeg&quot;],
      outputDir: &quot;_site&#x2F;img&#x2F;&quot;,
    });
  
    let imageAttributes &#x3D; {
      alt: this.alt,
      sizes: &quot;100vw&quot;,
      loading: &quot;lazy&quot;,
      decoding: &quot;async&quot;,
+     &quot;webc:raw&quot;: true,
    };
  
    &#x2F;&#x2F; You bet we throw an error on missing alt in &#x60;imageAttributes&#x60; (alt&#x3D;&quot;&quot; works okay)
    return Image.generateHTML(metadata, imageAttributes);
  }
  &lt;&#x2F;script&gt;
And we‚Äôre done!! (Note how the image now aligns perfectly with localhost:8080 #IncontestableTruth)

with corresponding markup:
&lt;!doctype html&gt;
&lt;html lang&#x3D;&quot;en&quot;&gt;
&lt;head&gt;
        &lt;meta charset&#x3D;&quot;utf-8&quot;&gt;
        &lt;title&gt;Eleventy Images + WebC rocks!&lt;&#x2F;title&gt;
    &lt;&#x2F;head&gt;
    &lt;body&gt;Fun with WebC

&lt;picture&gt;&lt;source type&#x3D;&quot;image&#x2F;avif&quot; srcset&#x3D;&quot;&#x2F;img&#x2F;SwdsuTpRbT-300.avif 300w&quot;&gt;&lt;img alt&#x3D;&quot;possum hanging from a palm leaf&quot; loading&#x3D;&quot;lazy&quot; decoding&#x3D;&quot;async&quot; src&#x3D;&quot;&#x2F;img&#x2F;SwdsuTpRbT-300.jpeg&quot; width&#x3D;&quot;300&quot; height&#x3D;&quot;450&quot;&gt;&lt;&#x2F;picture&gt;


&lt;footer&gt;
  &lt;p&gt;¬© 2022 Yours Truly.&lt;&#x2F;p&gt;
&lt;&#x2F;footer&gt;

&lt;&#x2F;body&gt;
&lt;&#x2F;html&gt;
Parting words
I am so excited to explore further the possibilities of using WebC to augment other native HTML elements.
This article only scratches the surface when it comes to the img tag. You could pass props down from the markup to Eleventy Image and control the behaviour of the image optimization. But we can now augment our native img tag without much hassle as it‚Äôs all in one file.
It even works with Markdown images (and yields the cutest webpage ever):
  ---
  layout: layouts&#x2F;base.webc
  ---
  
  Fun with WebC
  
  &lt;img alt&#x3D;&quot;possum hanging from a palm leaf&quot; src&#x3D;&quot;https:&#x2F;&#x2F;images.unsplash.com&#x2F;photo-1627224286457-923944e5b159?auto&#x3D;format&amp;fit&#x3D;crop&amp;w&#x3D;387&amp;q&#x3D;80&quot;&gt;
  
+  &lt;template webc:type&#x3D;&quot;11ty&quot; 11ty:type&#x3D;&quot;md&quot;&gt;
+  
+   ![&#39;close-up of a baby possum among ferns&#39;](https:&#x2F;&#x2F;images.pexels.com&#x2F;photos&#x2F;13960994&#x2F;pexels-photo-13960994.jpeg)
+  
+  &lt;&#x2F;template&gt;
  
  &lt;site-footer&gt;&lt;&#x2F;site-footer&gt;
  

All the more reasons to optimize your images now!
Find the code supporting this article on the RobinCsl&#x2F;11ty-webc-img-demo repository.*
#### [Year in Review: 2021](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2021&#x2F;) 
*We‚Äôre already at the start of February 2022, but who says retrospectives need to be done on January 1st?! A lot of things happened in 2021, both personally and professionally. Time to reflect and remember.
Personal üë∂üíçüìÑüìÉüìëüìú
This first part is the personal stuff, so if you don‚Äôt care about it, you can skip to the professional stuff instead. And if you don‚Äôt care about that too, why are you here? üòÇ
Welcome, L√©onard!
In January of 2021 came the great news that we were expecting a baby and a few months later, my son L√©onard came to this world! It‚Äôs been a few months now and it‚Äôs insane how much this event changed our lives.
It‚Äôs quite amazing to witness a human being‚Äôs awakening to the world, I do feel privileged.
Of course, it‚Äôs not just rainbows and unicorns.
Sleeping as much as I want is now a distant memory&#x2F;dream, though I‚Äôve been surprised that it‚Äôs actually quite possible to operate without the amount of sleep I used to get.
Having free time for side projects and writing almost vanished (and usually eats up time when I should sleep instead, while it‚Äôs allowed by baby-boss). I don‚Äôt know how other parents manage but time just flies by.
One thing‚Äôs for sure, L√©onard makes sure I keep fit and exercise regularly (a promise I made myself at the beginning of last year, right):
it‚Äôs quite a normal day when I need to go up and down the 4 floors of the block of flats we live in (and when it‚Äôs at night, I have this game where I switch the lights on and go up and down within the 3 minutes they‚Äôre programmed to stay on; naturally, after my 4th round trip, I usually do the last flight of stairs in the dark üòÖüòÆ‚Äçüí®).
it‚Äôs also quite a normal day when I need to carry him in my arms for 10- to 20-minute stretches, while doing squats, at least 2 or 3 times.
Coach L√©onard can ask for these drills at any time of the day (and night‚Ä¶), he says it‚Äôs for my own good. My knees and hips and back and arms tend to disagree.
Paperwork, paperwork, paperwork
In 2021, I‚Äôve had time to think so many times if the amount of paperwork we‚Äôre doomed to go through is some sort of devilish scheme to keep people busy on the boring stuff. It definitely does not help when you‚Äôre an expat.
If you had told me having a baby would generate so much paperwork chores, I probably would not have believed you. The story goes that we wanted to do an early recognition of fatherhood for me to be officially recognised as the father of my child to be.
In France, as a French person, this is a 5-minute visit to my local townhall, easy-peasy.
In Czechia, as a foreigner, this would have required tons of documents that also needed translating by a certified translator (aka costs some money).
Since we were engaged, and you‚Äôre officially recognised as the father when having a baby as a married couple, we thought we might as well go through paperwork hell to get married.
It did not disappoint.
Our child was due some time in the middle of September, so we had almost the entire year to get married, should be easy, right.
Being so diligent, we got in touch with the French embassy to understand what we need to do to get married in April:
weddings at the embassy are quite a rare thing, you should get married through the local authorities
getting married in Prague is like getting married in Las Vegas (say what?)
Only to realise at the end of June that:
babies aren‚Äôt always born around the due date
it‚Äôs already the end of June
Let‚Äôs just say that we managed to be on time paperwork-wise for our wedding at the beginning of August (ever heard of the necessary 2-week public display of your intent on getting married, during which somebody has the right to oppose it, to get the paper allowing a French person to marry‚Ä¶?), but the ‚Äúgetting married like in Las Vegas‚Äù was lost on us.
Professionally
Promo
In January last year, I got promoted to Staff Engineer at Kiwi.com. Pretty crazy to me to think that I started working in the industry in September 2017. Even though titles only mean so much, it‚Äôs still a nice recognition that I bring value to the company.
Pair Documenting
I definitely learnt a lot about infrastructure and Kubernetes, which might seem overkill for a frontend platformer, but there was a void to fill when my ex-colleague Adam Jani≈° left, so I put on my newbie hat and pair-documented Adam‚Äôs knowledge throughout his notice period. I still refer or point people to that document quite regularly, it‚Äôs an investment that keeps on giving after all these months!
This was also the first time I tried to add original schematics&#x2F;pictures and Excalidraw made it super fun and easy!
Robin‚Äôs Gazette
My newsletter, Robin‚Äôs Gazette, kept going quite well! It turned one year old on December, 9th! üéÇ
In 2021, I published 25 issues (784 emails in total!), and went from 9 subscribers to 49 at the end of the year!
Given the quite low volume of subscribers, my average open rate and click rate are pretty okay (though they are ‚Äúall-time‚Äù performance metrics):
70.35% open rate,
24.38% click rate.
Even though it‚Äôs always some amount of work, I deem it worthy of my time as I get to practice writing and I always learn something slightly more deeply than if I just scrolled Twitter or Hacker News. This continues my efforts from ‚Äúarchivist to creator‚Äù that I mentioned in my last retro.
Special mention to Shawn @swyx Wang for being so encouraging along the way!
My goal for this year is to continue on that path, though I do need to put some effort into advertising it better:
the subscribe form is hard to find on my website,
the content is short-lived and behind closed doors ‚Äì so I should repurpose it to an extent,
start marketing it more (instead of the infrequent tweets I‚Äôve tried at some point).
One small change for this year: I now send the Gazette every other Friday instead of every other Wednesday.
Some of the feedback I received üòä
‚ÄúSuch a great newsletter this week Robin, amazing job!‚Äù
‚ÄúStill enjoying the newsletter!‚Äù
Blog
The blog was a bit quiet last year, I only published 3 posts and refreshed my most read article about building APK files locally for Expo projects (it recently crossed 20K views in its lifetime! üéâ).
They were:
Python Dependencies for JavaScript Developers
How to Download a Brain with Pair Documenting (already mentioned above)
Year in Review: 2020
I really hope to start writing more again on the blog because the SEO game takes a long time for Google to start recommending your stuff: I saw more traffic to my How to Test Your ESLint Config and Get your Own Sentry Playground articles, and they were written in September 2020!
Started working on a course
In the last retro, I announced that I planned to write a book. That did not happen‚Ä¶ üòÖ
Instead, I started working on a video course which essentially replicates the now defunct Margarita project from scratch (which was the subject of this article on my blog), showcasing how to build cross-platform web and native mobile apps through React Native and React Native Web.
This was the occasion to spend some time weeks watching all the microphone reviews on YouTube, all the Audacity and Obs Studio tutorials for sound production, to ultimately produce a half-finished tutorial on YouTube (the best 33 seconds of your life, trust me).
Source



Ever since my son was born, I‚Äôve had little time to focus for longer than 5-minute stretches outside of work, so this project has lost steam right now. I hope I‚Äôll manage to finish it in the first semester!
A look back and forward
Revisiting some of my plans for 2021 and making some for 2022.
Family
As much as I would love to work on side-projects and such, my family comes first, and I want to keep it that way. I‚Äôm excited to continue discovering what my next workouts will be, courtesy of Coach L√©onard! (Seriously, I‚Äôve got some arms now! üí™)
I cannot wait for my son to meet all his grand-parents, aunts and uncles in France later this year!
Nehovor√≠m pliynule po slovensky
aka I don‚Äôt speak Slovak fluently.
One of my goals was to make sure I would be able to speak to all my wedding guests in their preferred language (amongst French, English and Slovak). Because of the above (and COVID not helping‚Ä¶), the guest list was actually pretty small and my mastery of Slovak would not be entirely necessary to do well on my goal. So I guess I will learn better alongside my son this year whilst we wait for the big party?
Almost no SAD this past year
Come December, I usually feel pretty burnt out and in dire need of vacation to recharge. Somehow, in December 2021, I did not feel like that at all.
My new family life provided some amount of distractions from work. Even though that increased my context switching throughout the days and the nights were not as restful, it somehow created some distance between work and me. Or maybe because living with a newborn forces you to live in the moment, one day at a time‚Ä¶ üòÖ
Writing
Less paperwork, more blog posts. ü§û
Keep the newsletter going, and make it better, faster, stronger!
Improve my note taking system, which is a bit chaotic and not really systematic at the moment.
Learning Rust
In 2021, I started dabbling with Rust, mostly through the really great WIP book from Luca Palmieri, Zero To Production In Rust. It assumed some knowledge so I sometimes struggled had fun filling in the gaps.
Given where the JS ecosystem is going in terms of tooling (oh yeah, in 2021 I started this Awesome List of JavaScript Tooling Not Written In JavaScript on GitHub ‚Äì 667 stars so far!), I think it‚Äôs important to explore beyond the confines of JavaScript&#x2F;TypeScript. So I‚Äôd like to spend more time with Rust this coming year!
Lots of things to be grateful for last year and lots to look forward to this year. C‚Äôest parti !*
#### [Python Dependencies for JavaScript Developers](https:&#x2F;&#x2F;www.robincussol.com&#x2F;python-dependencies-for-javascript-developers&#x2F;) 
*Recently, I needed to update an old Python codebase which had not been touched in 3 years! Of course, the dependencies were so outdated that the Dockerfile of the project wouldn‚Äôt build. My JavaScript knowledge did not help me much:
how could I do a yarn upgrade-interactive --latest to update dependencies?
where‚Äôs the dependency lockfile?
why do we need to compile C-libraries for Python dependencies?
Luckily for me, my colleague Ondrej patiently explained how to approach these questions.
Using a virtual environment
TL;DR: pip installs packages globally unless we activate a virtual environment.
In Python, the default package manager is call pip and it installs packages from the Python Package Index, shortened to Pypi. The equivalent in JavaScript land would be npm and npmjs.com.
By default, pip installs packages system-wide. This contrasts with the need to pass a --global flag to npm.
To remedy that, we can use a local Python environment (a bit like having our node_modules folder in a JavaScript project). The following command will create a virtual environment in a venv folder in our current directory:
# Create the venv folder container the virtual environment
$ python3 -m venv venv
To make sure pip knows it should install packages in this virtual environment, we must activate it. Depending on your shell, you should source the appropriate activate file in venv&#x2F;bin:
activate, for Bash and ZSH,
activate.fish, for Fish Shell,
activate.csh, for csh
Activate.ps1, for PowerShell.
In my case, I will source the one for ZSH:
$ source venv&#x2F;bin&#x2F;activate
Now, pip install will install packages in the local folder instead of targeting the global scope. My ‚ÄúPython node_modules folder‚Äù is venv&#x2F;lib&#x2F;python3.8&#x2F;site-packages&#x2F;.
Dependencies in Python
TL;DR: use pip-compile to generate a lockfile and pip-sync to install dependencies from that lockfile
To deal with dependencies, we must install the pip-tools package in our virtual environment:
pip install pip-tools
This will allow us to use pip-compile and pip-sync later on.
Once that‚Äôs done, we could for example decide to start a Django project, ‚Äúthe web framework for perfectionists with deadlines‚Äù. The latest version of the package at the time of writing is 3.2.5. Let‚Äôs create our Python equivalent of a package.json file to express our project needs the Django package pinned to version 3.2.5:
# requirements.in
django&#x3D;&#x3D;3.2.5
Note: the better equivalent to a package.json would be a setup.py file, since it contains additional fields like the name of the local package, its version, etc. but we just want to write down the dependencies.
EDIT #1: it‚Äôs apparently not common practice to pin dependency versions in requirements.in, just in case you really need to (if there are breaking changes for example). Thanks for pointing it out, Ondrej.
To generate a corresponding lockfile of the transitive dependencies of Django, we can run the following command:
pip-compile --output-file requirements.txt requirements.in
This will create the following requirements.txt file:
#
# This file is autogenerated by pip-compile with python 3.8
# To update, run:
#
#    pip-compile --output-file&#x3D;requirements.txt requirements.in
#
asgiref&#x3D;&#x3D;3.4.1
    # via django
django&#x3D;&#x3D;3.2.5
    # via -r requirements.in
pytz&#x3D;&#x3D;2021.1
    # via django
sqlparse&#x3D;&#x3D;0.4.1
    # via django

Now that we have this file, we can finally retrieve and install the packages with the following command:
pip-sync
Note: if you try to run pip-sync without a requirements.txt, you will get the following error:
No requirement files given and no requirements.txt found in the current directory
It is indeed necessary to run pip-compile before.
Updating dependencies
Similar to npm oudated, we can list the outdated Python dependencies with
$ pip list --outdated
For example, after downgrading Django to 3.2.3 in my requirements.in, regenerating the lockfile with pip-compile, re-installing the dependencies with pip-sync, the command above will show:
Package    Version Latest Type
---------- ------- ------ -----
Django     3.2.3   3.2.5  wheel
setuptools 44.0.0  57.4.0 wheel
To update the dependency, I can change the version back to 3.2.5 in the requirements.in and go through the same dance:
$ pip-compile --output-file requirements.txt requirements.in
$ pip-sync
$ pip list --outdated
Package    Version Latest Type
---------- ------- ------ -----
setuptools 44.0.0  57.4.0 wheel
EDIT #2: a batteries-included equivalent to Yarn is called Poetry. Thanks for sharing, D√°niel!
Wheels and Eggs
You might wonder what this ‚Äúwheel‚Äù type is for the Django and setuptools packages.
They are still mysterious to me, but here‚Äôs my current understanding: in Python, some dependencies need to be built for specific architectures, as they might be written in Cython, ‚Äúa superset of the Python language that additionally supports calling C functions and declaring C types on variables and class attributes‚Äù. Wheels and Eggs are packaging formats for these.
In particular, it is not a good idea to use Alpine Docker images for Python projects as a lot of packages don‚Äôt have pre-built wheels for that architecture: your Docker build step will need to compile the packages from source, slowing down your entire process (and requiring you to install the necessary build tools for this compilation to happen!).
I don‚Äôt think there is a similar ‚Äúpackaging format‚Äù concept in JavaScript land. But we do have packages shipping prebuilt binaries for specific architectures, for example Sharp, the Node.js image processing package. (And we probably have enough issues with CommonJS vs ES Modules as it is‚Ä¶ :smile:)
Conclusions
All in all, a project needs to:
specify external dependencies and their desired version with semantic ranges
have a way to retrieve said dependencies
keep track of which versions were effectively installed to improve reproducibility.
Despite all these measures, the Docker file of an unmaintained 3-year old project could not build. Software rots!*
#### [How to Download a Brain with Pair Documenting](https:&#x2F;&#x2F;www.robincussol.com&#x2F;download-a-brain-with-pair-documenting&#x2F;) 
*When people leave the company, a lot of specific and ad hoc knowledge goes away with them. Unless there is already a strong documentation culture, there‚Äôs only so much that can be said and done during exit interviews to make up for it.
But this doesn‚Äôt have to be left to fate.
Throughout the month of January, my now ex-colleague Adam Jani≈° and I pair documented all his knowledge about the frontend infrastructure at Kiwi.com. We produced a 24 page document, fixed a few bugs and addressed some tech debt. More importantly, we had fun doing it!
Here‚Äôs how we approached it.
How to pair document
This is an attempt at formalising what we‚Äôve done, feel free to s&#x2F;Newbie&#x2F;Robin&#x2F;g and s&#x2F;Expert&#x2F;Adam&#x2F;g.
The Protagonists
You will need two proactive people: an Expert on the subject to document and a Newbie who is not too cursed with knowledge yet. Bonus points if they have not really worked together but always had good chemistry in their interactions.

The Newbie makes it easy on the Expert for this documentation effort to be a no-brainer:
they organize the pair documenting sessions;
they manage the agenda of the sessions;
they do most of the note-taking;
they digest the notes into documentation drafts in between sessions;
they stay curious and eager to learn more about the subjects, with questions always at the ready (this is hard to fake, so find an adequate Newbie for the task).

The Expert shows up at the sessions and generously shares their knowledge with the Newbie, answering patiently every question they may have. They review the documentation drafts to ensure the prose does not betray the original intent of the notes. Bonus points if they include the Newbie in solving similar problems described in the nascent documentation as they arise in the support channels of the company‚Äôs Slack: learning by doing is a great way to drive home the material and expose remaining ambiguities.

The First Session
The Newbie is in charge and explains how it‚Äôs going to work in the first pair-documenting session. That means going through what‚Äôs expected of each participant in this documentation effort as well as giving an overview of the actual process.
The objective of the first session is crucial: go as broad as possible and capture as many ideas of what needs documenting to form a backlog of topics to go over in the next sessions.
This can be achieved through asking questions like (more examples in this template):
what are things that you know about that very few people know?
what are the things that people always ping you about on Slack?
what tasks pile up when you‚Äôre on vacation?
Once the amount of things to document gets a bit clearer, see how many days are left before they leave and agree on a schedule to leave enough time for this task.
In Between Sessions
The Newbie transforms the raw notes into documentation drafts and gets the Expert to review them.
As more people in the company are aware of this documentation effort, they might have questions of their own; the Newbie adds these points to the agenda for the next session.
The Expert includes the Newbie in all discussions on Slack touching on the subject to maximize the learning opportunities and give the docs a trial by fire.
A Normal Session
In the first 5-10 minutes, the Newbie and the Expert go over unresolved comments in the doc draft, they review the agenda from the previous session and see if anything pops up to be further discussed or explained, and finally, they review the agenda for the current session and decide what to prioritize.
They then go over each point in the agenda: the Expert does most of the talking while the Newbie does most of the note-taking. The Newbie shares their screen for the document to be visible by both pair documentors. The Newbie may interrupt the Expert at any point with questions or with attempts at paraphrasing what the Expert just described. The Expert glances at the notes being taken once in a while to ensure they don‚Äôt contain mistakes from the get-go.
When the time is up, the Newbie and the Expert look at how much they covered from the agenda, move what hasn‚Äôt been covered to the next session, and agree on a date and time for that next session (if it‚Äôs not already regular).
Tools we used
A Calendar: to plan the sessions, to have automatic reminders for them, and to share the visio-conference link.


Custom recurrence with expiry date, Hangouts link, Notification not to miss it, Allow guests to modify event for better collaboration

A Google Document: to store the agenda, the notes and the first documentation drafts. Do make use of the outline on the left-hand side to navigate more easily once the document gets to a certain size. Do make use of comments to discuss and improve the notes and the draft. This is also a good place to involve other people from the company asynchronously. Make sure to put this document in a shared team drive for it to have the right permissions set by default.


Use the ‚ÄúStyles‚Äù dropdown to get this hierarchy

Here‚Äôs a free template Google document to get you started. Feel free to make a copy.
LucidChart: to draw a few diagrams because pictures are great (though you may want to check out Draw.io for a great free alternative).
Why Pair Documenting Works
What usually happens
Unless there is a strong documenting culture, (1) people never prioritize documentation over almost any other task, because it‚Äôs just not as fun as coding or as urgent as the next fire you need to put out. That means that when someone is about to leave, (2) there is an impossible amount of things to document that they don‚Äôt even know where to start. Because they are short on time, they end up drafting a lil‚Äô something and call it a day. (3) Anyway, we never needed that, why are they asking me to document that stuff, who‚Äôs gonna read it anyway?! (Note the use of two ‚Äúanyway‚Äù).
Clear intention through planning
Through planning the pair documenting sessions, we make sure documentation does get prioritized and give it the importance it deserves. If the Expert‚Äôs knowledge is that important and they by happenstance siloed it, it becomes urgent to share this knowledge more widely to deal with that critical bus factor. (Whether they leave or not is almost irrelevant in this case.)
Because we know when the Expert‚Äôs last working day is, it is easier to retro-plan the right number of sessions to cover the entire backlog established in the first session. This of course might need adjusting throughout the pair documentation effort.
More fun and better quality through collaboration
Planning is not enough if the Expert is still lost about what needs documenting and in which level of details. The nagging ‚Äúare they even gonna read it?‚Äù-type questions could well be the end of the documentation effort already: a well-crafted plan not well-executed.
With an accountability buddy, things turn around entirely.
It becomes really difficult to bail out of the plan because you know the other person is expecting you to show up at the session.
Because the Newbie is enthusiastic about the topic, the Expert is more generous in their contribution.
Because the Newbie asks questions and cares about details, the pair documentors tailor the documentation to the level of knowledge on the receiving end. The Expert knows this documentation will be useful. üòå
Aligned incentives
The Expert also knows that what they know should be documented somewhere, and because they like their colleagues, they don‚Äôt want their departure to create a mess. (Right?!)
The Newbie knows this knowledge is valuable, and about to disappear if they don‚Äôt take action. Besides, it‚Äôs something they‚Äôre curious and wanted to learn more about anyway.
The Expert gets to share their knowledge and teach what they know to someone who‚Äôs enthusiastic and interested in the topic; the Newbie gets time with the Expert to learn as much as possible from them.
Parting thoughts
I really enjoyed the pair documenting sessions with Adam and I think they should be made a regular practice, just like pair programming. It‚Äôs a great way to level up people while producing value beyond the scope of that collaboration.
At the same time, documentation is only valuable if it gets read and updated continuously. I‚Äôve been thinking about how to bring it closer to where people are already consuming content. For example, this could take the form of digests of parts of the documentation in the company‚Äôs Slack.
I‚Äôm not super familiar with mob programming, but I do wonder if mob documenting could be a thing to try too.

Acknowledgements:
Adam Jani≈° (@adam_janis) for trying out this pair-documenting idea before his departure :)
Emilia Vidal for her review and suggestions,
Shawn Wang (@swyx) for his review and ideas for the title and Open-Graph image,
Ron Au (@ronvoluted) for providing the font to go ahead with Shawn‚Äôs ideas,
Excalidraw to produce the visuals.*
#### [Year in Review: 2020](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2020&#x2F;) 
*2020, what a ride!
I cannot believe 2020 has already finally come to an end: with the lockdowns and quarantines, time simultaneously flew by and dragged on. A lot of my life was lived through a computer and the Internet. Time to reflect and remember.
Let‚Äôs start with some remarkable facts and events:
personally: - turned 30 in April, without even a beer to celebrate! (hint: the last bit is what‚Äôs remarkable) ‚ùåüç∫ - traveled only once to see my family in France üò¢ - got engaged in August üíç - spent the Christmas holidays alone, for the first time (I feel you, Kevin McCallister) üö∞
at work: - got a raise and earned a promotion üìà - wrote 3 posts on the Frontend Platform‚Äôs internal blog ‚úç
on my blog: - published 8 new posts üöÄ - updated 1 article ‚ôªÔ∏è - started a newsletter (already wrote 2 issues) üóû - broke the 10k unique visitor mark for Build Standalone Expo .apk and .ipa with Turtle CLI üéâ
miscellaneous: - joined 2 great online communities (Coding Career and Blogging For Devs) üôå - revamped a handful of desktop PCs and laptops (cannot believe I was about to get rid of my older laptop when it‚Äôs so smooth now!): most low-end&#x2F;mid computers are slow because of their stock hard drives (and limited RAM), a nice SSD and some RAM extension will do wonders! üíæ - jumped on the sourdough bread baking train (and learnt recently how sourdough baguettes are a lazy baker‚Äôs dream!) üá´üá∑ ü•ñ
Despite everyone calling 2020 their worst year ever, it did not seem so bad personally. Of course, I missed social life and being able to do ‚Äúnormal‚Äù things, but all things considered, I still learnt a lot this year.
Consumer to archivist
Spending so much time online means I absorbed vast amounts of data and after a while, it did not sit so well with me. I believed that I learn best by immersing myself in a continuous flow of information surrounding one topic. Of course, it‚Äôs worked for me so far, but the cost is that I get overwhelmed and it‚Äôs difficult to know when it‚Äôs enough.
Trying to change that brute-force approach to learning, I read here and there that taking notes would force me to slow down and choose what I consume more wisely. I obviously bought ‚ÄúHow to Take Smart Notes‚Äù by S√∂nke Ahrens (and only half-read it), came across the German word Zettlekasten and went on a wild goose chase for the best Personal Knowledge Management system, and read all the articles and watched all the YouTube videos about the subject. Old habits die hard. üòÖ
After using a few of them, I ended up settling with Joplin (which I had of course already set up prior to any of this) and have not looked back. It does not have backlinks so I‚Äôm deeply missing out on interconnected notes, as the hype goes, but it‚Äôs okay. My FOMO is in check for now. Joplin is an active open source project which is available on desktop as well as mobile devices. I retain full ownership (and responsibility) over my notes as Joplin integrates with different storage backends: I chose to use my self-hosted NextCloud instance.
In short:
just-in-case knowledge is expensive; prefer just-in-time knowledge
it‚Äôs easy to go on a wild goose chase only to realise you had everything already
note-taking does force me to slow down and helps to remember better
Archivist to creator
This story does not end here, dear reader. Accumulating notes about topics I‚Äôm interested in helps to slow down and be more intentional with what I consume. But it turns out knowledge without action is mostly useless.
Luckily, Daniel Vassalo wrote this influential tweet:
If you‚Äôre tempted by this, my advice to first-time creators is to start with a very small product: Something you can finish in 2 weeks and charge #### [Build Standalone Expo .apk and .ipa with Turtle CLI [deprecated]](https:&#x2F;&#x2F;www.robincussol.com&#x2F;build-standalone-expo-apk-ipa-with-turtle-cli&#x2F;) 
*This article was updated on February 7, 2023. NOTE: As of Expo SDK 47, the following method does not work any more. With the release of EAS‚Ä¶*
#### [Optimize your img tags with Eleventy Image and WebC](https:&#x2F;&#x2F;www.robincussol.com&#x2F;optimize-your-img-tags-with-eleventy-image-and-webc&#x2F;) 
*I am very excited about WebC and couldn‚Äôt wait to try out the corresponding Eleventy plugin. The first use-case I had in mind was to use‚Ä¶*
#### [Year in Review: 2021](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2021&#x2F;) 
*We‚Äôre already at the start of February 2022, but who says retrospectives need to be done on January 1st?! A lot of things happened in 202‚Ä¶*
#### [Python Dependencies for JavaScript Developers](https:&#x2F;&#x2F;www.robincussol.com&#x2F;python-dependencies-for-javascript-developers&#x2F;) 
*Recently, I needed to update an old Python codebase which had not been touched in 3 years! Of course, the dependencies were so outdated that‚Ä¶*
#### [How to Download a Brain with Pair Documenting](https:&#x2F;&#x2F;www.robincussol.com&#x2F;download-a-brain-with-pair-documenting&#x2F;) 
*When people leave the company, a lot of specific and ad hoc knowledge goes away with them. Unless there is already a strong documentation‚Ä¶*
#### [Year in Review: 2020](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2020&#x2F;) 
*2020, what a ride! I cannot believe 2020 has already finally come to an end: with the lockdowns and quarantines, time simultaneously flew by‚Ä¶*
#### [Docker for JavaScript Devs: How to Containerise Node.js Apps Efficiently](https:&#x2F;&#x2F;www.robincussol.com&#x2F;docker-for-js-devs-how-to-containerise-nodejs-apps-efficiently&#x2F;) 
*Docker is a really cool technology to have applications run the in the same, predictable context, ensuring the ‚Äúbut it works on my machine‚Ä¶*
#### [TypeScript Tidbit: How to Overload an Imported Function](https:&#x2F;&#x2F;www.robincussol.com&#x2F;typescript-tidbit-how-to-overload-an-imported-function&#x2F;) 
*There are times when the type definitions shipped on DefinitelyTyped are not enough and this results in making the TypeScript compiler‚Ä¶*
#### [Wax on, Wax off](https:&#x2F;&#x2F;www.robincussol.com&#x2F;wax-on-wax-off&#x2F;) 
*The reason I got into web development in the first place was the magical ‚ú® feeling you get when you see your code manifest in the browser‚Ä¶*
#### [A Successful Side-Project: Lessons from Swyx](https:&#x2F;&#x2F;www.robincussol.com&#x2F;a-successful-side-project-lessons-from-swyx&#x2F;) 
*If you are on Twitter, chances are you came across this tweet by Daniel Vassallo and it now seems everyone is writing a book! üòÑ Shawn Wang‚Ä¶*0 for it. The experience of getting paid for something you created, directly by consumers, will change you forever. https:&#x2F;&#x2F;t.co&#x2F;UbUD9ch4xQ
‚Äî Daniel Vassallo (@dvassallo) April 10, 2020
 
and Shawn Wang (@swyx) acted on it almost immediately to produce the Coding Career Handbook a few months later. I had followed him for some time on Twitter. His posts, conference talks and online presence in general always brought me value so I wanted to support his work. I was also really glad that half the proceeds would go to FreeCodeCamp. I got the Creators package, not entirely sure what to expect.
This was one of the best decisions of 2020.
As part of the Creators package, there have been regular workshops and they definitely spurred me further to action. After he invited Monica Lent to give a workshop about blogging for developers, I formed a resolve to try and publish a post every 2 weeks, as a way to transform my note-taking game into something more valuable. That‚Äôs when I resurrected my blog with 5 Tips to Start Blogging (for Devs).
A lot of my posts were shared at work and in the company‚Äôs external newsletter (thank you üôÇ) and for the most part, this resurection was successful, even though December was a bit of a hiatus in my blog publishing, as I started my newsletter, Robin‚Äôs Gazette.
I still have a lot to learn when it comes to creating online content and I am looking forward to continuing with this momentum. Whenever I need a reality check of what it takes to embark on this creator journey, I would have a read through Alex West‚Äôs story, as it‚Äôs so real, inspiring and humbling!
Joining online communities
The Coding Career Handbook is an amazing resource and I would like to write a proper review of the book some day; it contains so much valuable information that it would be hard to do it justice here.
What‚Äôs even more awesome about it is that it came with access to a community through Discord and Circle that Shawn manages really well as it keeps delivering value and furthers the book‚Äôs teachings and principles. And if that wasn‚Äôt enough, I met a few interesting people there who I‚Äôm looking forward to getting to know more in 2021.
Judging by how much the Coding Career community helped me to get real with my volitions, I also decided to join Monica Lent‚Äôs Blogging For Devs community because I‚Äôd like to take my blogging further. For example, my article about [Building] Standalone Expo .apk and .ipa with Turtle CLI broke the 10k unique visitor mark in December, through accidental SEO mostly. üéâ I‚Äôm hoping to get a little bit more intentional with SEO as it‚Äôs a great way to magnify the reach of your content. There are so many interesting and inspiring people in Monica‚Äôs community, as well as discussions and workshops about SEO, newsletters, monetization, and of course blogging‚Äîtopics I definitely want to dive deeper in in the new year!
Writing, writing, writing
If you have read this far, it has become pretty apparent that writing is now more than ever my main focus. I think it has been a tremendous source of clarity and success in the last year for me.
The resource that influenced my writing the most this year was this lecture by Larry McEnerney about the Craft of Writing Effectively (here‚Äôs a summary). Having done a PhD, I practiced the ‚Äúwrong‚Äù way of writing for a very long time. Focusing on what‚Äôs valuable for your intended readership makes so much sense.
As I mentioned in my first newsletter issue (let me know if you want a copy of it üòâ), design documents have been crazy useful at work. I must thank my colleage Tobi√°≈° Potoƒçek for bringing about this revolution. In this remote-only work environment, they were a great tool to discuss, make decisions and document them in a searchable manner. Every shortcut needed to be reckoned with and set against the bigger picture. Every quirk or contextual piece of information (which are critically important to understand past decisions or make new ones) are now recorded in writing.
Being a member of the Frontend Platform team, communicating as effectively as possible with the teams we serve was critically important too‚Äîespecially in such challenging times for a travel company in 2020. Most of that communication was done in writing through Slack and Google Documents. (Not to say it was always a smooth ride‚Ä¶)
A look ahead
In 2021, I will focus on staying in shape, physically and mentally. We will go for walks in nature more regularly with Emilia (we agreed at least once a month and have a list of places in Czechia!) I will cycle to work as much as possible, get back into the nice workout rhythm we had during the first lockdown and take care of my sleeping patterns (it‚Äôs all great to wake up earlier to write, but that means going to bed earlier too, Robin ;-)) I will take breaks when I‚Äôm getting overwhelmed, instead of resorting to my usual ‚Äústrategy‚Äù of pushing through until I‚Äôm burnt out.
In 2021, I will focus on maintaining the shift from content consumption to content creation. I want to continue publishing on my blog every 2 weeks as well as send my Gazette every 2 weeks. I will write a book to help PhD graduates transition to web development: I‚Äôm now further along the path (and my work seems to be appreciated :)), so it‚Äôs time to try and lift others as I climb.
In 2021, I will finally speak Slovak fluently to be able to speak to all our wedding guests (still to be planned‚Ä¶ so I got time, I guess :P) in their preferred language. (Robin of January 2022, you‚Äôre welcome!)
C‚Äôest parti!*
#### [Docker for JavaScript Devs: How to Containerise Node.js Apps Efficiently](https:&#x2F;&#x2F;www.robincussol.com&#x2F;docker-for-js-devs-how-to-containerise-nodejs-apps-efficiently&#x2F;) 
*Docker is a really cool technology to have applications run the in the same, predictable context, ensuring the ‚Äúbut it works on my machine‚Äù comments are a thing of the past. Not to mention how Docker integrates with Docker Compose and Kubernetes for larger-scale applications! But that‚Äôs for another day.
In this article, you will learn about some good principles to containerise Node.js apps efficiently. These principles are probably quite general and well-known, but they‚Äôre easy to overlook for beginners to Docker and Dockerfiles.
You will need to have Docker and Node.js installed locally to follow along comfortably.
Docker wants to make you happy, 
Photo by cottonbro from Pexels



Table of contents
Containerising a Next.js app (naive approach)

Docker Glossary
Optimising a Node.js app‚Äôs Docker image

Create a comprehensive .dockerignore file
Use an appropriate base image
Decouple the dependency installation step from application code
Decouple the build from the resulting built application
(Optional) Purge node_modules from unnecessary files
Docker build checklist for JavaScript Devs
Containerising a Next.js app (naive approach)
Let‚Äôs start with a simple Next.js application:
$ npm create next-app --use-npm
and let‚Äôs write the following into a file called Dockerfile at the root of the project:
FROM node:14.15.0

WORKDIR &#x2F;app

COPY . .
RUN npm ci
RUN npm run build

EXPOSE 3000

USER node

CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
Okay, what just happened? üòÑ
Docker Glossary
FROM &lt;image&gt;
WORKDIR &lt;some-path-in-the-container&gt;
COPY &lt;from-context&gt; &lt;to-container&gt;
WORKDIR directory
RUN &lt;command&gt;
docker build process only
EXPOSE &lt;port&gt;
documenting which port the app uses
USER &lt;user&gt;
root with superuser privileges); it‚Äôs good practice to use a different user to run the app.
CMD &lt;command&gt;
docker run &lt;image-tag&gt;, it is not executed during the build process.
Assuming we have Docker installed, we could now run
$ docker build --tag my-containerised-nextjs-app .
This command kindly asks the Docker daemon running on our machine to build the Dockerfile we just wrote with the files present in the current directry (the .) and to call that image my-containerised-nextjs-app (with the --tag flag).
After the build completed, run
$ docker run --rm -p 3000:3000 my-containerised-nextjs-app
and we should have our app running at http:&#x2F;&#x2F;localhost:3000.
This second command orders the Docker daemon to run the image named my-containerised-nextjs-app with port 3000 on my machine to correspond to port 3000 inside the container so that we can interact with our Next.js app. This port mapping is done through the -p hostPort:containerPort flag. Go ahead and change the port mapping and see if you can still access the app.
The --rm flag indicates that we do not want the Docker daemon to keep the container when we stop its execution (with CTRL+C); this is useful not to clog our machines with useless logs while developing.
Voil√†, we have containerised our Next.js app. The End. üéâ
Wait! Don‚Äôt leave, there‚Äôs more! üëá
Optimising a Node.js app‚Äôs Docker image
The section above does the job, but it‚Äôs not optimal. If we only have so few pipeline minutes and we don‚Äôt like wasting resources ‚ôªÔ∏è, this setup will eat more than is necessary. There are a few strategies to optimise a Dockerfile:
Create a comprehensive .dockerignore file
Use an appropriate base image
Decouple the dependency installation step from application code
Decouple the build from the resulting built application
(Optional) Purge node_modules from unnecessary files
Create a comprehensive .dockerignore file
If we look at the logs from building the Docker image, we could read:
Step 4&#x2F;8 : RUN npm ci
 ---&gt; Running in 559b499f0e2c
npm WARN prepare removing existing node_modules&#x2F; before installation
That means we copied the node_modules folder from our local context over to the Docker image being built. What‚Äôs more, npm ci removes them to make sure it works consistently. That is an indication that we should not copy the node_modules in the first place.
To let Docker know some files and folders should be ignored, we can list them in a .dockerignore file. For example, add the following to a file named .dockerignore:
node_modules
Run the build again and the warning disappeared.
What‚Äôs more, we can see how much less was sent to the Docker build context:
# BEFORE
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  101.8MB

# AFTER
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  400.4kB
In practice, we would want to add as many files as possible to our .dockerignore to ensure we‚Äôre not wasting time and energy on files which won‚Äôt be necessary for the build. This can include documentation files (e.g. *.md), configuration files which are only necessary when developing (e.g. .eslint*, .prettier*) as well as our Git history (e.g. .git).
With the following .dockerignore file:
node_modules
*.md
.git
we end up sending the bare minimum to the Docker daemon:
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  248.3kB
Use an appropriate base image
Docker images come in all shapes and sizes. When it comes to building or deploying our app, the smaller the size, the better. For our Next.js app, we don‚Äôt need all that‚Äôs available in node:14.15.0. For example, we don‚Äôt need git or curl. We can instead use the alpine flavour of that image, namely node:14.15.0-alpine.
The difference in size between node:14.15.0 and node:14.15.0-alpine is enormous!
REPOSITORY                    TAG                 SIZE
node                          14.15.0             943MB
node                          14.15.0-alpine      117MB
Our final containerised Next.js app will hence be much smaller thanks to this teeny-tiny modification of our Dockerfile:
- FROM node:14.15.0
+ FROM node:14.15.0-alpine

WORKDIR &#x2F;app

COPY . .
RUN npm ci
RUN npm run build

EXPOSE 3000

USER node

CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
For reference, if we want to inspect the size of the Docker images we have available locally, we can run docker image ls --all.
Our Docker image has size 1.05GB if we use node:14.15.0,
REPOSITORY                    TAG                 IMAGE ID            CREATED             SIZE
my-containerised-nextjs-app   latest              c78d43a2c5bc        15 seconds ago      1.05GB
and it drops to 229MB if we use node:14.15.0-alpine instead!
REPOSITORY                    TAG                 IMAGE ID            CREATED             SIZE
my-containerised-nextjs-app   latest              d0746ef6e8a4        21 seconds ago      229MB
Decouple the dependency installation step from application code
Our setup is already much better with a suitable .dockerignore file and with a much leaner base image. However, we haven‚Äôt made any changes to our package.json and the npm ci step always needs to run if make any changes to our application code.
This is because Docker caches each step as an intermediate Docker container. For example, if we were to run the build again (docker build --tag my-containerised-nextjs-app .), we would see that the cache is used for all steps, resulting in a nearly instant build (because nothing happened, really üòÑ):
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  248.3kB
Step 1&#x2F;8 : FROM node:14.15.0-alpine
 ---&gt; 9db54a688554
Step 2&#x2F;8 : WORKDIR &#x2F;app
 ---&gt; Using cache
 ---&gt; d5d4291dc699
Step 3&#x2F;8 : COPY . .
 ---&gt; Using cache
 ---&gt; b56455e98a93
Step 4&#x2F;8 : RUN npm ci
 ---&gt; Using cache
 ---&gt; ba4ab784f27e
Step 5&#x2F;8 : RUN npm run build
 ---&gt; Using cache
 ---&gt; a51c18594a20
Step 6&#x2F;8 : EXPOSE 3000
 ---&gt; Using cache
 ---&gt; 806dc06cbb6c
Step 7&#x2F;8 : USER node
 ---&gt; Using cache
 ---&gt; b86db08de717
Step 8&#x2F;8 : CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
 ---&gt; Using cache
 ---&gt; d0746ef6e8a4
Successfully built d0746ef6e8a4
Successfully tagged my-containerised-nextjs-app:latest
If we now modify anything in the folder that is not ignored thanks to our .dockerignore file, Docker will have to bust the cache from Step 3 onwards (the ‚ÄúUsing cache‚Äù expression is not printed any more). Let‚Äôs create an empty file and run the build again:
# create an empty file
$ touch file
# build again
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  248.8kB
Step 1&#x2F;8 : FROM node:14.15.0-alpine
 ---&gt; 9db54a688554
Step 2&#x2F;8 : WORKDIR &#x2F;app
 ---&gt; Using cache
 ---&gt; d5d4291dc699
Step 3&#x2F;8 : COPY . .
 ---&gt; e2b761bb08a6         # The cache is not used anymore
Step 4&#x2F;8 : RUN npm ci
 ---&gt; Running in b36f2511e117
...
To remedy this and ensure that npm ci runs only when necessary, we can first copy package.json and package-lock.json files, run npm ci, and then bring in the rest of the files to build the project:
FROM node:14.15.0-alpine

WORKDIR &#x2F;app

- COPY . .
+ COPY package.json .
+ COPY package-lock.json .
RUN npm ci
+ COPY . .
RUN npm run build

EXPOSE 3000

USER node

CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
After we modified the Dockerfile by applying the diff above, we see that Docker does not leverage the cache at all because the steps are different. This always happens when we modify the layers and&#x2F;or their order.
However, after running this build for a first time, subsequent builds will be much faster as the npm ci step will use the cache unless we modify package.json or package-lock.json:
# create another file to see when Docker stops using the cache
$ touch another-file
# run the build again
$ docker build --tag my-containerised-nextjs-app .
Sending build context to Docker daemon  249.3kB
Step 1&#x2F;10 : FROM node:14.15.0-alpine
 ---&gt; 9db54a688554
Step 2&#x2F;10 : WORKDIR &#x2F;app
 ---&gt; Using cache
 ---&gt; d5d4291dc699
Step 3&#x2F;10 : COPY package.json .
 ---&gt; Using cache
 ---&gt; 139b5a611c0b
Step 4&#x2F;10 : COPY package-lock.json .
 ---&gt; Using cache
 ---&gt; 5bc380de1397
Step 5&#x2F;10 : RUN npm ci
 ---&gt; Using cache
 ---&gt; dff6b2da4bdc
Step 6&#x2F;10 : COPY . .
 ---&gt; 08911c09b40f
Step 7&#x2F;10 : RUN npm run build
 ---&gt; Running in f5374a54d9ad

&gt; my-app@0.1.0 build &#x2F;app
&gt; next build
...
Decouple the build from the resulting built application
For this section to make more sense, we will create another Next.js app that uses some dev dependencies which are necessary only when building the app but not when running it in production.
$ npm create next-app --use-npm --example with-tailwindcss with-tailwindcss-app
Copy the Dockerfile and .dockerignore files created in the other example into with-tailwindcss-app. Build the Docker image and run it to make sure it‚Äôs working well before continuing:
$ docker build --tag with-tailwindcss-app .
$ docker run --rm -p 3000:3000 with-tailwindcss-app
As we can see in the package.json file, we have a few dependencies which are only ever going to be used when building our app. We won‚Äôt need them in the final Docker image. So let‚Äôs get rid of them!
We are going to leverage multi-stage Docker builds. They sound more complicated than they are :)
Here‚Äôs a multi-stage build Dockerfile: in the builder container, we install dependencies and build our app, and in the second stage, we copy relevant files from the builder to our final image and install only production dependencies.
FROM node:14.15.0-alpine as builder

WORKDIR &#x2F;app

COPY package.json .
COPY package-lock.json .
RUN npm ci
COPY . .
RUN npm run build

FROM node:14.15.0-alpine

WORKDIR &#x2F;app

COPY --from&#x3D;builder &#x2F;app&#x2F;package.json .
COPY --from&#x3D;builder &#x2F;app&#x2F;package-lock.json .
RUN npm ci --production
COPY --from&#x3D;builder &#x2F;app&#x2F;.next .next

EXPOSE 3000

USER node

CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
If our app also contained a Next.js config file and a public folder, we would also need to copy them from the builder stage:
...
COPY --from&#x3D;builder &#x2F;app&#x2F;.next .
+ COPY --from&#x3D;builder &#x2F;app&#x2F;next.config.js .
+ COPY --from&#x3D;builder &#x2F;app&#x2F;public public
...
Comparing the sizes, we see that we removed 39MB of dev dependencies, not bad.
without multi-stage build
REPOSITORY                    TAG                 IMAGE ID            CREATED              SIZE
with-tailwindcss-app          latest              88089e6f965d        18 minutes ago      269MB
with multi-stage build
REPOSITORY                    TAG                 IMAGE ID            CREATED              SIZE
with-tailwindcss-app          latest              ba7307736fb0        25 seconds ago       230MB
(Optional) Purge node_modules from unnecessary files
Finally, to make our Docker image the leanest, we will purge our node modules from all the files which were included by the library authors and aren‚Äôt directly useful to our Docker image. For example, documentation files and READMEs, config files for Prettier and such, etc.
Note that this is not without risk as we could be removing files that we actually need to run the application correctly (we had a file named test.js that contained important code and it was mercilessly removed by the tool, which broke the application üòÖ).
We will add another stage called production-deps to make our node modules go through a diet with node-prune (GitHub repo). The list of files and folders that node-prune will remove is largely inspired by Yarn‚Äôs default list (generated through yarn autoclean --init).
To install node-prune, we need curl to be a locally available executable, so we can either choose a base image that contains it out of the box, or we can add it to node:14.15.0-alpine. Because we won‚Äôt need anything else, we will choose the latter.
FROM node:14.15.0-alpine as builder

WORKDIR &#x2F;app

COPY package.json .
COPY package-lock.json .
RUN npm ci
COPY . .
RUN npm run build

+ FROM node:14.15.0-alpine as production-deps

+ WORKDIR &#x2F;app

COPY --from&#x3D;builder &#x2F;app&#x2F;package.json .
COPY --from&#x3D;builder &#x2F;app&#x2F;package-lock.json .
RUN npm ci --production
+ # Add curl
+ RUN apk --no-cache add curl
+ # Install node-prune https:&#x2F;&#x2F;github.com&#x2F;tj&#x2F;node-prune
+ RUN curl -sf https:&#x2F;&#x2F;gobinaries.com&#x2F;tj&#x2F;node-prune | sh
+ RUN node-prune &#x2F;app

FROM node:14.15.0-alpine

WORKDIR &#x2F;app

+ COPY --from&#x3D;production-deps &#x2F;app&#x2F;package.json .
+ COPY --from&#x3D;production-deps &#x2F;app&#x2F;package-lock.json .
+ COPY --from&#x3D;production-deps &#x2F;app&#x2F;node_modules node_modules

COPY --from&#x3D;builder &#x2F;app&#x2F;.next .next

EXPOSE 3000

USER node

CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
Try it by building the image once more.
When node-prune ran, it printed out in the console that it removed 12MB:
...
Step 15&#x2F;24 : RUN node-prune &#x2F;app
 ---&gt; Running in 69e030ab8b70


         files total 14,269
       files removed 3,722
        size removed 12 MB
            duration 216ms
...
However, suprinsingly, a whopping 32MB were removed in comparison to our previous Dockerfile. (It seems node-prune‚Äôs tallying is not totally accurate when I tested locally as it removed 20.7 MB instead ‚Äî though it still doesn‚Äôt explain the other 11.3 MB ü§∑‚Äç‚ôÇÔ∏è)
$ docker image ls with-tailwindcss-app
REPOSITORY                    TAG                 IMAGE ID            CREATED              SIZE
with-tailwindcss-app          latest              c5e2081dba30        9 seconds ago        198MB
Let‚Äôs ensure our app is running well without the files node-prune removed and we can be on our merry way! üê≥ üéâ
Docker build checklist for JavaScript Devs
To summarise what we‚Äôve learnt so far, here‚Äôs a small checklist to review our own Docker build setups:
I have a comprehensive .dockerignore file
I use an appropriate base image
I decoupled the dependency installation step to improve caching
I decoupled the resulting built application from the build step
I purged the node_modules from unnecessary files
Time to flex! üí™ Show me your before and after Docker image sizes in the comments below!*
#### [TypeScript Tidbit: How to Overload an Imported Function](https:&#x2F;&#x2F;www.robincussol.com&#x2F;typescript-tidbit-how-to-overload-an-imported-function&#x2F;) 
*There are times when the type definitions shipped on DefinitelyTyped are not enough and this results in making the TypeScript compiler unhappy. Oh noes! üò≠
Functions Overloading Be Like, Photo by Luis Villasmil) on Unsplash.



Overload an imported function in TypeScript
But fear not! It is possible to overload a function imported from a different module (which could even be a local module&#x2F;file, not necessarily a node module) without ‚Äúpatching‚Äù the corresponding @types&#x2F;&lt;package&gt; type definitions.
import { someFunction } from &#39;module&#39;

&#x2F;&#x2F; the function overloading
declare module &#39;module&#39; {
  function someFunction() &#x2F;&#x2F; the overload you need
}

someFunction() &#x2F;&#x2F; with the overloaded version ‚úîÔ∏è
Example: overload Ramda‚Äôs compose function
A practical example is Ramda‚Äôs compose function. If you pass more than 7 functions to the function, you need to overload Ramda‚Äôs type definitions coming from @types&#x2F;ramda as the TypeScript compiler will report an error otherwise (TypeScript Playground Error Example).

DefinitelyTyped obviously cannot provide the type definitions for any number of arguments as compose accepts as many arguments as you want. So it‚Äôs up to you to inform the TypeScript compiler that this usage is actually okay. üòå
This can be done like in the example below (TypeScript Playground Working Example):
import * as R from &#39;ramda&#39;

&#x2F;&#x2F; overloading compose because &#x60;@types&#x2F;ramda&#x60; exposes types for up to 6 functions
declare module &#39;ramda&#39; {
  function compose&lt;V0, T1, T2, T3, T4, T5, T6, T7&gt;(
    fn6: (x: T6) &#x3D;&gt; T7,
    fn5: (x: T5) &#x3D;&gt; T6,
    fn4: (x: T4) &#x3D;&gt; T5,
    fn3: (x: T3) &#x3D;&gt; T4,
    fn2: (x: T2) &#x3D;&gt; T3,
    fn1: (x: T1) &#x3D;&gt; T2,
    fn0: (x0: V0) &#x3D;&gt; T1
  ): (x0: V0) &#x3D;&gt; T7
}

&#x2F;&#x2F; and now, we can use:
const someComplicatedResult &#x3D; R.compose&lt;V0, T1, T2, T3, T4, T5, T6, T7&gt;(
  fn6,
  fn5,
  fn4,
  fn3,
  fn2,
  fn1,
  fn0
)(&#39;üòÖ&#39;)
We can see from the screenshot below that the overload was correctly taken into consideration. üéâ

Caveat
I can imagine that if this is overused, things can become quickly intractable. So use it sparingly and always with a good reason why. Your future self will be happy to find an explanation in a comment above the overloading as it is kind of unusual. üòâ
I discovered this while refactoring @kiwicom&#x2F;splitster to TS (link to commit) and thought it might be useful to share. Hope it helped you!*
#### [Wax on, Wax off](https:&#x2F;&#x2F;www.robincussol.com&#x2F;wax-on-wax-off&#x2F;) 
*The reason I got into web development in the first place was the magical ‚ú® feeling you get when you see your code manifest in the browser.
In my current role at work, I don‚Äôt do much of that anymore. And I guess I kind of miss it. Especially the part when I am given a clearly defined outcome, with clear guidelines. Perks of being labelled a senior, I guess. üòú But I digress.
Since I started with React, a lot of things have happened in web development. At the moment, I‚Äôm especially interested in Svelte and TailwindCSS and after watching Rich Harris‚Äôs latest talk ‚ÄúFuturistic Web Development‚Äù, I needed an excuse to try Svelte ASAP.
Staying sharp with deliberate practice
To ensure my frontend skills don‚Äôt wither, I would like to spend dedicated time each week to practice on a set of frontend challenges and reflect on what I learnt from them.
Fortunately, I recently discovered FrontendMentor.io and this website offers quite the list of frontend challenges, ranging in difficulty and consistently with nice designs.
Improve your front-end coding skills by building real projects
Solve real-world HTML, CSS and JavaScript challenges whilst working to professional designs.
‚Äî FrontendMentor.io
And to practice with new frontend technologies, it‚Äôs good to find nice designs. But it‚Äôs even better when they come with a style guide and assets like pictures and icons. üòç
Here‚Äôs how it works:
You choose a challenge and download the files.
You attempt the challenge with the stack of your choice. Because the challenge files come with a style guide, the necessary pictures and icons, etc. it‚Äôs really easy to get started! (Unless you spend hours deciding which stack to use, of course üòÇ)
You upload it to GitHub and deploy your attempt on Vercel or Netlify.
Finally, you submit your solution through your challenges dashboard on the platform.
You can then get feedback on your submissions and provide reviews for other people‚Äôs submissions too, which I find really cool. I remember how difficult it was to get feedback when I was first learning web development.
Learnings
The last challenge I attempted looked pleasing on my eyes and I honestly did not expect I would learn so much from it. That makes me want to practice even more!
Check out the live deployment!


I encountered the following problems to complete the ‚ÄúSocial media dashboard with theme switcher‚Äù challenge:
setting up Svelte with TailwindCSS (thank you Swyx and Chris Dhanaraj)
implementing a toggle component from scratch
without accessibility in mind (where I started: W3Schools üòÖ)
with accessibility in mind (where I ended up: Smashing Magazine, though I‚Äôm not sure how to test if my current solution is the most accessible)
implementing a theme switcher in Svelte (inspiration from this Svelte REPL)
adding a border with a gradient to a block element (this requires using a CSS trick from nowhere else but CSS Tricks of course)
pulling my hair for not realising that you need the group class for group-hover: modifiers to apply in the children with Tailwind (thank you Estevan Maito)
how to extract the imported Svelte components‚Äô props‚Äô TypeScript types (that‚Äôs a mouthful!), instead of exporting and importing the types directly (TL;DR: use $props_def from the component)
&lt;script lang&#x3D;&quot;ts&quot;&gt;
  import MyComponent from &#39;.&#x2F;MyComponent.svelte&#39;;

  const data: MyComponent[&#39;$props_def&#39;][&#39;data&#39;] &#x3D; ...
&lt;&#x2F;script&gt;

&lt;MyComponent {data} &#x2F;&gt;

...
deploying a ‚Äúmonorepo‚Äù on Vercel without redeploying all the folders all the time by specifying the ‚ÄúIgnored Build Step‚Äù with something like git diff --quiet HEAD^ HEAD -- subfolder-in-monorepo to only rebuild the site if changes were made in subfolder-in-monorepo.
Here‚Äôs the GitHub repository where I will learn in public and add future challenges I will attempt. (Though I might need to rename this repository in the future as I just found this really nice list of project ideas to build with other platforms than FrontendMentor.io üòâ)
Let me know in the comments what your current deliberate practice is!*
#### [A Successful Side-Project: Lessons from Swyx](https:&#x2F;&#x2F;www.robincussol.com&#x2F;a-successful-side-project-lessons-from-swyx&#x2F;) 
*If you are on Twitter, chances are you came across this tweet by Daniel Vassallo
If you‚Äôre tempted by this, my advice to first-time creators is to start with a very small product: Something you can finish in 2 weeks and charge #### [Build Standalone Expo .apk and .ipa with Turtle CLI [deprecated]](https:&#x2F;&#x2F;www.robincussol.com&#x2F;build-standalone-expo-apk-ipa-with-turtle-cli&#x2F;) 
*This article was updated on February 7, 2023. NOTE: As of Expo SDK 47, the following method does not work any more. With the release of EAS‚Ä¶*
#### [Optimize your img tags with Eleventy Image and WebC](https:&#x2F;&#x2F;www.robincussol.com&#x2F;optimize-your-img-tags-with-eleventy-image-and-webc&#x2F;) 
*I am very excited about WebC and couldn‚Äôt wait to try out the corresponding Eleventy plugin. The first use-case I had in mind was to use‚Ä¶*
#### [Year in Review: 2021](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2021&#x2F;) 
*We‚Äôre already at the start of February 2022, but who says retrospectives need to be done on January 1st?! A lot of things happened in 202‚Ä¶*
#### [Python Dependencies for JavaScript Developers](https:&#x2F;&#x2F;www.robincussol.com&#x2F;python-dependencies-for-javascript-developers&#x2F;) 
*Recently, I needed to update an old Python codebase which had not been touched in 3 years! Of course, the dependencies were so outdated that‚Ä¶*
#### [How to Download a Brain with Pair Documenting](https:&#x2F;&#x2F;www.robincussol.com&#x2F;download-a-brain-with-pair-documenting&#x2F;) 
*When people leave the company, a lot of specific and ad hoc knowledge goes away with them. Unless there is already a strong documentation‚Ä¶*
#### [Year in Review: 2020](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2020&#x2F;) 
*2020, what a ride! I cannot believe 2020 has already finally come to an end: with the lockdowns and quarantines, time simultaneously flew by‚Ä¶*
#### [Docker for JavaScript Devs: How to Containerise Node.js Apps Efficiently](https:&#x2F;&#x2F;www.robincussol.com&#x2F;docker-for-js-devs-how-to-containerise-nodejs-apps-efficiently&#x2F;) 
*Docker is a really cool technology to have applications run the in the same, predictable context, ensuring the ‚Äúbut it works on my machine‚Ä¶*
#### [TypeScript Tidbit: How to Overload an Imported Function](https:&#x2F;&#x2F;www.robincussol.com&#x2F;typescript-tidbit-how-to-overload-an-imported-function&#x2F;) 
*There are times when the type definitions shipped on DefinitelyTyped are not enough and this results in making the TypeScript compiler‚Ä¶*
#### [Wax on, Wax off](https:&#x2F;&#x2F;www.robincussol.com&#x2F;wax-on-wax-off&#x2F;) 
*The reason I got into web development in the first place was the magical ‚ú® feeling you get when you see your code manifest in the browser‚Ä¶*
#### [A Successful Side-Project: Lessons from Swyx](https:&#x2F;&#x2F;www.robincussol.com&#x2F;a-successful-side-project-lessons-from-swyx&#x2F;) 
*If you are on Twitter, chances are you came across this tweet by Daniel Vassallo and it now seems everyone is writing a book! üòÑ Shawn Wang‚Ä¶*0 for it. The experience of getting paid for something you created, directly by consumers, will change you forever. https:&#x2F;&#x2F;t.co&#x2F;UbUD9ch4xQ
‚Äî Daniel Vassallo (@dvassallo) April 10, 2020
 
and it now seems everyone is writing a book! üòÑ
Shawn Wang took this advice and decided to go forth with his Coding Career Handbook (for which I‚Äôm grateful! It‚Äôs such a great book!). He shares his lessons and regrets in this talk at js.la üìΩÔ∏è, and here are my notes for my future self when I want to ship a side project (for money or not).
The How
There are 4 aspects:
Pre-selling
Delivering
Launching
Keeping going
Pre-selling - or your own Kickstarter
On the first day of this endeavour, take the time to find a topic, a name and put up a landing page with good marketing copy.
Pre-sell to your friends and close network: they are more likely to ask you about the state of the project and you would hate to disappoint. What‚Äôs more, you‚Äôve got their money which you would awkwardly need to return otherwise.
This is probably a good moment to decide which platform(s) you want to use to support the sale of your book. Gumroad and Podia seem to be fairly big players in that space.
If it is your first side project that you would like to ship for money, don‚Äôt fret too much over the pricing strategy; it is more of a distraction from writing and completing the project. Sticking to Daniel Vassallo‚Äôs recommendation of #### [Build Standalone Expo .apk and .ipa with Turtle CLI [deprecated]](https:&#x2F;&#x2F;www.robincussol.com&#x2F;build-standalone-expo-apk-ipa-with-turtle-cli&#x2F;) 
*This article was updated on February 7, 2023. NOTE: As of Expo SDK 47, the following method does not work any more. With the release of EAS‚Ä¶*
#### [Optimize your img tags with Eleventy Image and WebC](https:&#x2F;&#x2F;www.robincussol.com&#x2F;optimize-your-img-tags-with-eleventy-image-and-webc&#x2F;) 
*I am very excited about WebC and couldn‚Äôt wait to try out the corresponding Eleventy plugin. The first use-case I had in mind was to use‚Ä¶*
#### [Year in Review: 2021](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2021&#x2F;) 
*We‚Äôre already at the start of February 2022, but who says retrospectives need to be done on January 1st?! A lot of things happened in 202‚Ä¶*
#### [Python Dependencies for JavaScript Developers](https:&#x2F;&#x2F;www.robincussol.com&#x2F;python-dependencies-for-javascript-developers&#x2F;) 
*Recently, I needed to update an old Python codebase which had not been touched in 3 years! Of course, the dependencies were so outdated that‚Ä¶*
#### [How to Download a Brain with Pair Documenting](https:&#x2F;&#x2F;www.robincussol.com&#x2F;download-a-brain-with-pair-documenting&#x2F;) 
*When people leave the company, a lot of specific and ad hoc knowledge goes away with them. Unless there is already a strong documentation‚Ä¶*
#### [Year in Review: 2020](https:&#x2F;&#x2F;www.robincussol.com&#x2F;year-in-review-2020&#x2F;) 
*2020, what a ride! I cannot believe 2020 has already finally come to an end: with the lockdowns and quarantines, time simultaneously flew by‚Ä¶*
#### [Docker for JavaScript Devs: How to Containerise Node.js Apps Efficiently](https:&#x2F;&#x2F;www.robincussol.com&#x2F;docker-for-js-devs-how-to-containerise-nodejs-apps-efficiently&#x2F;) 
*Docker is a really cool technology to have applications run the in the same, predictable context, ensuring the ‚Äúbut it works on my machine‚Ä¶*
#### [TypeScript Tidbit: How to Overload an Imported Function](https:&#x2F;&#x2F;www.robincussol.com&#x2F;typescript-tidbit-how-to-overload-an-imported-function&#x2F;) 
*There are times when the type definitions shipped on DefinitelyTyped are not enough and this results in making the TypeScript compiler‚Ä¶*
#### [Wax on, Wax off](https:&#x2F;&#x2F;www.robincussol.com&#x2F;wax-on-wax-off&#x2F;) 
*The reason I got into web development in the first place was the magical ‚ú® feeling you get when you see your code manifest in the browser‚Ä¶*
#### [A Successful Side-Project: Lessons from Swyx](https:&#x2F;&#x2F;www.robincussol.com&#x2F;a-successful-side-project-lessons-from-swyx&#x2F;) 
*If you are on Twitter, chances are you came across this tweet by Daniel Vassallo and it now seems everyone is writing a book! üòÑ Shawn Wang‚Ä¶*0 is probably enough.
Delivering
Thanks to your pre-writing, e.g. gathering notes, writing blog posts, etc., you already have some amount of the material you would like to include in the finished product. If it‚Äôs 25%, that means you still need to actually write the other 75%.
If possible, you should continue your ‚Äúnormal‚Äù activities, like shipping blog posts about other topics, appearing on podcasts, etc.
As you are writing, document your journey and give away one or two chapters for free as teasers. They‚Äôre a showcase for what you‚Äôre producing and could lead to podcast interviews for further exposure.
I was sharing my personal journey, lessons and milestones.
The best marketing is no marketing. No one wants to be sold anything.
‚Äî Alex West, in Two and a half years of building products
Daniel Vassallo‚Äôs advice to time box the project to 2 weeks is a very important idea: it is so easy to fall prey to scope creep by adding more and more topics to cover, especially when you are knowledgeable and excited about it! But this may well mean that you will never actually ship it. So harness your enthusiasm to provide an advantage.
Of course, you have the goal to ship that product, but what parts of your day actively contribute to that goal? If you‚Äôd like to get anything done, adopting a system to support your goals will go a long way.

Systems &gt; Goals, Source: https:&#x2F;&#x2F;jamesclear.com&#x2F;goals-systems
Launching
All your efforts are coming to an end‚Ä¶ or so you thought. Now is the time to launch your product! This phase requires an entirely different skill set so it‚Äôs good to have practice.
Having a great landing page is a must. A good resource on the subject is Rob Hope‚Äôs book Landing Page Hot Tips, and you can read Shawn‚Äôs review of it too.
Make sure to know the rules of the platforms you‚Äôre using to launch: Shawn‚Äôs Show HN post was doing very well and directing a lot of traffic to his landing page, but it was sadly taken down as no free sample of the book was available there (despite the blog posts).
If people leave out a negative comment, take this as an opportunity to turn their opinions around.
Shawn recommends watching Adam Wathan‚Äôs talk Nailing Your First Launch.
Keeping going
This is still not the end. What comes tomorrow? Next week, next month, next year?
You can ‚Äúlaunch‚Äù your product multiple times.
You can start a community around your book or product.
One of the biggest mistakes I see founders make is abandoning what already works and trying to take on a bigger challenge before they‚Äôre making enough money to develop products full-time.
Instead, focus on replicating the same type of product with another angle or in another market, maybe more than once.
‚Äî Rob Walling, in The Stairstep Approach to Bootstrapping
The Why
If you want to go from employee to entrepreneur, it is good to learn without too much risk how to do ‚Äúbusiness‚Äù without all the supports from other departments. For example, as a Software Engineer, you would not be focusing much on attracting leads for your company; there would be a design team and product managers making decisions about the product, etc.
When you‚Äôre launching a product on your own, you need to perform in all the roles and learn as you go. Especially when it comes to side-projects, developing a system to support your goals, and improving your discipline and focus.
You will get acquainted with the valley of despair and go through the emotional journey it describes; this is inevitable, and maybe even necessary, to create anything great.

 Source: https:&#x2F;&#x2F;john.do&#x2F;emotional-journey-creating&#x2F; 
This can be daunting but it will most likely be a rewarding experience, at least in terms of skills acquisition if not financially.
Make sure to define in advance your idea of success for this project: is it for the learning experience and to have a published book to your name, is it solely about making X amount of money?
Resources
üìΩÔ∏è Shawn‚Äôs talk, Lessons and Regrets From Shipping My $50000 Coronavirus Side Project
üìΩÔ∏è Adam Wathan‚Äôs talk, Nailing Your First Launch
üìì Rob Walling, The Stairstep Approach to Bootstrapping
üìì James Clear, Forget About Setting Goals. Focus on This Instead
üìì Alex West, Two and a half years of building products*0 is probably enough.
Delivering
Thanks to your pre-writing, e.g. gathering notes, writing blog posts, etc., you already have some amount of the material you would like to include in the finished product. If it‚Äôs 25%, that means you still need to actually write the other 75%.
If possible, you should continue your ‚Äúnormal‚Äù activities, like shipping blog posts about other topics, appearing on podcasts, etc.
As you are writing, document your journey and give away one or two chapters for free as teasers. They‚Äôre a showcase for what you‚Äôre producing and could lead to podcast interviews for further exposure.
I was sharing my personal journey, lessons and milestones.
The best marketing is no marketing. No one wants to be sold anything.
‚Äî Alex West, in Two and a half years of building products
Daniel Vassallo‚Äôs advice to time box the project to 2 weeks is a very important idea: it is so easy to fall prey to scope creep by adding more and more topics to cover, especially when you are knowledgeable and excited about it! But this may well mean that you will never actually ship it. So harness your enthusiasm to provide an advantage.
Of course, you have the goal to ship that product, but what parts of your day actively contribute to that goal? If you‚Äôd like to get anything done, adopting a system to support your goals will go a long way.

Systems &gt; Goals, Source: https:&#x2F;&#x2F;jamesclear.com&#x2F;goals-systems
Launching
All your efforts are coming to an end‚Ä¶ or so you thought. Now is the time to launch your product! This phase requires an entirely different skill set so it‚Äôs good to have practice.
Having a great landing page is a must. A good resource on the subject is Rob Hope‚Äôs book Landing Page Hot Tips, and you can read Shawn‚Äôs review of it too.
Make sure to know the rules of the platforms you‚Äôre using to launch: Shawn‚Äôs Show HN post was doing very well and directing a lot of traffic to his landing page, but it was sadly taken down as no free sample of the book was available there (despite the blog posts).
If people leave out a negative comment, take this as an opportunity to turn their opinions around.
Shawn recommends watching Adam Wathan‚Äôs talk Nailing Your First Launch.
Keeping going
This is still not the end. What comes tomorrow? Next week, next month, next year?
You can ‚Äúlaunch‚Äù your product multiple times.
You can start a community around your book or product.
One of the biggest mistakes I see founders make is abandoning what already works and trying to take on a bigger challenge before they‚Äôre making enough money to develop products full-time.
Instead, focus on replicating the same type of product with another angle or in another market, maybe more than once.
‚Äî Rob Walling, in The Stairstep Approach to Bootstrapping
The Why
If you want to go from employee to entrepreneur, it is good to learn without too much risk how to do ‚Äúbusiness‚Äù without all the supports from other departments. For example, as a Software Engineer, you would not be focusing much on attracting leads for your company; there would be a design team and product managers making decisions about the product, etc.
When you‚Äôre launching a product on your own, you need to perform in all the roles and learn as you go. Especially when it comes to side-projects, developing a system to support your goals, and improving your discipline and focus.
You will get acquainted with the valley of despair and go through the emotional journey it describes; this is inevitable, and maybe even necessary, to create anything great.

 Source: https:&#x2F;&#x2F;john.do&#x2F;emotional-journey-creating&#x2F; 
This can be daunting but it will most likely be a rewarding experience, at least in terms of skills acquisition if not financially.
Make sure to define in advance your idea of success for this project: is it for the learning experience and to have a published book to your name, is it solely about making X amount of money?
Resources
üìΩÔ∏è Shawn‚Äôs talk, Lessons and Regrets From Shipping My $50000 Coronavirus Side Project
üìΩÔ∏è Adam Wathan‚Äôs talk, Nailing Your First Launch
üìì Rob Walling, The Stairstep Approach to Bootstrapping
üìì James Clear, Forget About Setting Goals. Focus on This Instead
üìì Alex West, Two and a half years of building products*0 is probably enough.
Delivering
Thanks to your pre-writing, e.g. gathering notes, writing blog posts, etc., you already have some amount of the material you would like to include in the finished product. If it‚Äôs 25%, that means you still need to actually write the other 75%.
If possible, you should continue your ‚Äúnormal‚Äù activities, like shipping blog posts about other topics, appearing on podcasts, etc.
As you are writing, document your journey and give away one or two chapters for free as teasers. They‚Äôre a showcase for what you‚Äôre producing and could lead to podcast interviews for further exposure.
I was sharing my personal journey, lessons and milestones.
The best marketing is no marketing. No one wants to be sold anything.
‚Äî Alex West, in Two and a half years of building products
Daniel Vassallo‚Äôs advice to time box the project to 2 weeks is a very important idea: it is so easy to fall prey to scope creep by adding more and more topics to cover, especially when you are knowledgeable and excited about it! But this may well mean that you will never actually ship it. So harness your enthusiasm to provide an advantage.
Of course, you have the goal to ship that product, but what parts of your day actively contribute to that goal? If you‚Äôd like to get anything done, adopting a system to support your goals will go a long way.

Systems &gt; Goals, Source: https:&#x2F;&#x2F;jamesclear.com&#x2F;goals-systems
Launching
All your efforts are coming to an end‚Ä¶ or so you thought. Now is the time to launch your product! This phase requires an entirely different skill set so it‚Äôs good to have practice.
Having a great landing page is a must. A good resource on the subject is Rob Hope‚Äôs book Landing Page Hot Tips, and you can read Shawn‚Äôs review of it too.
Make sure to know the rules of the platforms you‚Äôre using to launch: Shawn‚Äôs Show HN post was doing very well and directing a lot of traffic to his landing page, but it was sadly taken down as no free sample of the book was available there (despite the blog posts).
If people leave out a negative comment, take this as an opportunity to turn their opinions around.
Shawn recommends watching Adam Wathan‚Äôs talk Nailing Your First Launch.
Keeping going
This is still not the end. What comes tomorrow? Next week, next month, next year?
You can ‚Äúlaunch‚Äù your product multiple times.
You can start a community around your book or product.
One of the biggest mistakes I see founders make is abandoning what already works and trying to take on a bigger challenge before they‚Äôre making enough money to develop products full-time.
Instead, focus on replicating the same type of product with another angle or in another market, maybe more than once.
‚Äî Rob Walling, in The Stairstep Approach to Bootstrapping
The Why
If you want to go from employee to entrepreneur, it is good to learn without too much risk how to do ‚Äúbusiness‚Äù without all the supports from other departments. For example, as a Software Engineer, you would not be focusing much on attracting leads for your company; there would be a design team and product managers making decisions about the product, etc.
When you‚Äôre launching a product on your own, you need to perform in all the roles and learn as you go. Especially when it comes to side-projects, developing a system to support your goals, and improving your discipline and focus.
You will get acquainted with the valley of despair and go through the emotional journey it describes; this is inevitable, and maybe even necessary, to create anything great.

 Source: https:&#x2F;&#x2F;john.do&#x2F;emotional-journey-creating&#x2F; 
This can be daunting but it will most likely be a rewarding experience, at least in terms of skills acquisition if not financially.
Make sure to define in advance your idea of success for this project: is it for the learning experience and to have a published book to your name, is it solely about making X amount of money?
Resources
üìΩÔ∏è Shawn‚Äôs talk, Lessons and Regrets From Shipping My $50000 Coronavirus Side Project
üìΩÔ∏è Adam Wathan‚Äôs talk, Nailing Your First Launch
üìì Rob Walling, The Stairstep Approach to Bootstrapping
üìì James Clear, Forget About Setting Goals. Focus on This Instead
üìì Alex West, Two and a half years of building products*
<!--END_SECTION:blog-feed-->

<!--
**RobinCsl/RobinCsl** is a ‚ú® _special_ ‚ú® repository because its `README.md` (this file) appears on your GitHub profile.

Here are some ideas to get you started:

- üî≠ I‚Äôm currently working on ...
- üå± I‚Äôm currently learning ...
- üëØ I‚Äôm looking to collaborate on ...
- ü§î I‚Äôm looking for help with ...
- üí¨ Ask me about ...
- üì´ How to reach me: ...
- üòÑ Pronouns: ...
- ‚ö° Fun fact: ...
-->
